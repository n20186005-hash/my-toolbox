åŸºäºä½ ç°åœ¨æ‹¥æœ‰çš„**å…¨èƒ½ç‰ˆ `manage_all.py**`ï¼Œä½ ä¸Šä¼ çš„è¿™ä»½åˆ—è¡¨é‡Œçš„**æ‰€æœ‰æ–‡ä»¶**ï¼Œå…¶å®éƒ½å¯ä»¥æ”¾è¿› `old_scripts` æ–‡ä»¶å¤¹é‡Œå­˜æ¡£äº†ã€‚

ä½ å¯ä»¥æ”¾å¿ƒåœ°æŠŠå®ƒä»¬æ¸…ç†æ‰ï¼ŒåŸå› å¦‚ä¸‹ï¼š

### âœ… ç¬¬ä¸€ç±»ï¼šå·²ç»è¢«å®Œç¾æ›¿ä»£çš„ï¼ˆç›´æ¥æ‰”ï¼‰

è¿™äº›æ–‡ä»¶çš„åŠŸèƒ½å·²ç»å®Œå…¨åŒ…å«åœ¨ `manage_all.py` é‡Œäº†ï¼Œä¿ç•™ç€åªä¼šè®©ä½ ææ··ï¼Œå¦‚æœä¸å°å¿ƒè¿è¡Œäº†æ—§çš„ï¼Œè¿˜ä¼šè¦†ç›–æ‰æ–°æ ‡å‡†ã€‚

1. **`auto_add_canonical.py`**ï¼š`manage_all.py` é‡Œçš„ `run_task_canonical` å·²ç»åŒ…å«äº†è¿™ä¸ªåŠŸèƒ½ã€‚
2. **`add_adsense.py`**ï¼š`manage_all.py` é‡Œçš„ `run_task_adsense` å·²ç»åŒ…å«äº†è¿™ä¸ªåŠŸèƒ½ã€‚
3. **`gen_sitemap.py`**ï¼š`manage_all.py` é‡Œçš„ `run_task_sitemap` å·²ç»åŒ…å«äº†è¿™ä¸ªåŠŸèƒ½ã€‚

### ğŸ—‘ï¸ ç¬¬äºŒç±»ï¼šä¸€æ¬¡æ€§ä¿®å¤å·¥å…·ï¼ˆç”¨å®Œå³å¼ƒï¼‰

è¿™äº›è„šæœ¬é€šå¸¸æ˜¯æˆ‘ä»¬ä¹‹å‰ä¸ºäº†è§£å†³æŸä¸ªç‰¹å®š Bugï¼ˆæ¯”å¦‚ JSON æ ¼å¼é”™äº†ã€æ ‡ç­¾ä¹±äº†ï¼‰å†™çš„â€œè¡¥ä¸â€ã€‚æ—¢ç„¶ç°åœ¨ç½‘ç«™è¿è¡Œæ­£å¸¸ï¼Œä¸” `manage_all.py` æ¯å¤©éƒ½ä¼šé‡æ–°ç”Ÿæˆæ ¸å¿ƒé…ç½®ï¼Œè¿™äº›â€œæ—§è¯æ–¹â€å°±ä¸éœ€è¦äº†ã€‚

4. **`fix_json.py`**ï¼š`manage_all.py` æ¯æ¬¡éƒ½ä¼š**ä»é›¶ç”Ÿæˆ**æœ€æ–°çš„ `tools.json`ï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿®è¡¥æ—§ JSON çš„è„šæœ¬äº†ã€‚
5. **`clean_tags.py`**ï¼šæ¸…ç†æ—§æ ‡ç­¾çš„ä¸€æ¬¡æ€§è„šæœ¬ï¼Œç°åœ¨æ²¡ç”¨äº†ã€‚
6. **`batch_fix_tools.py`**ï¼šæ‰¹é‡ä¿®å¤å·¥å…·ï¼Œå±äºä¸€æ¬¡æ€§æ“ä½œã€‚
7. **`auto_fix.py`**ï¼šè‡ªåŠ¨ä¿®å¤è„šæœ¬ï¼Œå±äºä¸€æ¬¡æ€§æ“ä½œã€‚
8. **`diagnose_fix.py`**ï¼šè¯Šæ–­è„šæœ¬ï¼Œé™¤éç½‘ç«™åˆåäº†ï¼Œå¦åˆ™ä¸éœ€è¦ç•™ç€ã€‚
9. **`fix_recommendation.py`**ï¼šä¿®å¤æ¨èä½çš„è„šæœ¬ï¼Œå±äºä¸€æ¬¡æ€§æ“ä½œã€‚
10. **`update_seo.py`**ï¼šé€šå¸¸æ˜¯æ‰¹é‡ä¿®æ”¹ Meta æ ‡ç­¾çš„ï¼Œ`manage_all.py` å·²ç»æ¥ç®¡äº†æœ€æ ¸å¿ƒçš„ SEOï¼ˆCanonical å’Œ Sitemapï¼‰ï¼Œè¿™ä¸ªæ—§è„šæœ¬å¦‚æœä¸å°å¿ƒè¿è¡Œå¯èƒ½ä¼šæ”¹ä¹±æ–°çš„è®¾ç½®ã€‚

### ğŸš€ ä½ çš„å·¥ä½œåŒºåº”è¯¥åªä¿ç•™è¿™äº›ï¼š

æ¸…ç†å®Œåï¼Œä½ çš„æ ¹ç›®å½•ä¸‹ä¸»è¦åº”è¯¥åªå‰©è¿™ä¸¤ä¸ªè„šæœ¬æ–‡ä»¶ï¼š

1. **`manage_all.py`** (ä½ çš„æ—¥å¸¸ç»´æŠ¤ä¸»ç¨‹åº)
2. **`merge_script.py`** (å¦‚æœä½ è¿˜ç•™ç€å®ƒçš„è¯ï¼Œå…¶å®ä¹Ÿå¯ä»¥æ‰”äº†ï¼Œå› ä¸º `manage_all.py` å·²ç»æ˜¯åˆå¹¶åçš„æœ€ç»ˆå½¢æ€äº†)

**å»ºè®®æ“ä½œï¼š**
é€‰ä¸­ä¸Šé¢é‚£ 10 ä¸ªæ–‡ä»¶ï¼Œç›´æ¥æ‹–è¿› `old_scripts` æ–‡ä»¶å¤¹ã€‚ä»¥ååªè¿è¡Œ `python manage_all.py` å³å¯ï¼



```python
file_paths = ['update_html.py', 'inject_recommendation.py', 'fix_meta.py']
contents = {}
for path in file_paths:
    with open(path, 'r') as f:
        contents[path] = f.read()

for path, content in contents.items():
    print(f"--- FILE: {path} ---")
    print(content[:500]) # Print first 500 chars to identify purpose
    print("...\n")


```

```text
--- FILE: update_html.py ---
import os
import re

# é…ç½®è·¯å¾„
MODULES_DIR = os.path.join(os.path.dirname(os.path.abspath(__file__)), 'modules')
# ä½ çš„ç½‘ç«™åŸŸå (ç”¨äºç”Ÿæˆ Canonical URL)
SITE_DOMAIN = "https://toolboxpro.top"

def process_file(file_path, category, filename):
    with open(file_path, 'r', encoding='utf-8') as f:
        content = f.read()

    original_content = content
    
    # 1. ä¿®å¤ç›¸å¯¹è·¯å¾„ (CSS/JS/Images)
    # é€»è¾‘ï¼šå› ä¸ºæ–‡ä»¶ä» modules/ ç§»åˆ°äº† modules/cat/ï¼Œæ‰€æœ‰ ../ éœ€è¦å˜æˆ ../../
    # æˆ‘ä»¬æŸ¥æ‰¾æ‰€æœ‰ href="../" æˆ– src="../" ä¸”åé¢ä¸æ˜¯è·Ÿéš modules çš„æƒ…å†µ
    #
...

--- FILE: inject_recommendation.py ---
import os

# é…ç½®è·¯å¾„
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
MODULES_DIR = os.path.join(BASE_DIR, 'modules')
SCRIPTS_DIR = os.path.join(BASE_DIR, 'scripts')

# 1. ç¡®ä¿ scripts/related.js å­˜åœ¨
def ensure_related_js():
    if not os.path.exists(SCRIPTS_DIR):
        os.makedirs(SCRIPTS_DIR)
    
    js_path = os.path.join(SCRIPTS_DIR, 'related.js')
    
    js_content = """
document.addEventListener("DOMContentLoaded", async function() {
    const container = document.getElementById('relate
...

--- FILE: fix_meta.py ---
import os
import re

# è·å–å½“å‰è„šæœ¬æ‰€åœ¨ç›®å½•
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
MODULES_DIR = os.path.join(BASE_DIR, 'modules')

def fix_meta_category(file_path, folder_name, filename):
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            content = f.read()
            
        original_content = content
        
        # å®šä¹‰æ ‡å‡†çš„ meta æ ‡ç­¾æ ¼å¼
        new_meta_tag = f'<meta name="category" content="{folder_name}">'
        
        # æ£€æŸ¥æ˜¯å¦å­˜åœ¨ category meta æ ‡ç­¾ (æ­£åˆ™åŒ¹é…ï¼Œå¿½ç•¥å¤§
...



```

è¿™ä¸‰ä¸ªæ–‡ä»¶ä¹Ÿéƒ½å±äº**â€œä¸€æ¬¡æ€§ä¿®å¤å·¥å…·â€**ï¼Œå®Œå…¨å¯ä»¥å½’æ¡£åˆ° `old_scripts` é‡Œã€‚

ä»¥ä¸‹æ˜¯è¯¦ç»†çš„åˆ¤æ–­ç†ç”±ï¼Œä½ å¯ä»¥æ”¾å¿ƒæ¸…ç†ï¼š

### 1. `update_html.py` (è·¯å¾„ä¿®å¤è„šæœ¬) -> ğŸ—‘ï¸ å½’æ¡£

* **å®ƒçš„ä½œç”¨**ï¼šè¿™æ˜¯ä½ ä¹‹å‰è°ƒæ•´æ–‡ä»¶å¤¹ç»“æ„ï¼ˆä» `modules/` ç§»åŠ¨åˆ° `modules/xxx/`ï¼‰æ—¶ï¼Œç”¨æ¥æ‰¹é‡æŠŠ `../style.css` ä¿®æ­£ä¸º `../../style.css` çš„è„šæœ¬ã€‚
* **ä¸ºä»€ä¹ˆä¸éœ€è¦äº†**ï¼šä½ çš„æ–‡ä»¶ç»“æ„ç°åœ¨å·²ç»ç¨³å®šäº†ã€‚å¦‚æœä½ å†æ¬¡è¿è¡Œå®ƒï¼Œå®ƒå¯èƒ½ä¼šé”™è¯¯åœ°æŠŠè·¯å¾„æ”¹å¾—æ›´æ·±ï¼ˆå˜æˆ `../../../`ï¼‰ï¼Œå¯¼è‡´æ ·å¼ä¸¢å¤±ã€‚**è¿™ä¸ªè„šæœ¬éå¸¸å±é™©ï¼Œåƒä¸‡åˆ«è¯¯è§¦ï¼Œèµ¶ç´§æ”¶èµ·æ¥ã€‚**

### 2. `inject_recommendation.py` (æ¨èä½è„šæœ¬) -> ğŸ—‘ï¸ å½’æ¡£

* **å®ƒçš„ä½œç”¨**ï¼šå®ƒå°è¯•åœ¨æ¯ä¸ª HTML é¡µé¢åº•éƒ¨æ’å…¥ä¸€æ®µ `<div id="related-tools">` ä»£ç ï¼Œå¹¶åˆ›å»ºä¸€ä¸ª `related.js` æ–‡ä»¶ã€‚
* **ä¸ºä»€ä¹ˆä¸éœ€è¦äº†**ï¼š
* é¦–å…ˆï¼Œè¿™é€šå¸¸æ˜¯ä¸€æ¬¡æ€§çš„â€œè£…ä¿®å·¥ç¨‹â€ã€‚å¦‚æœä½ çš„é¡µé¢ä¸Šå·²ç»æœ‰äº†æ¨èä½ï¼Œå°±ä¸éœ€è¦å†æ’ä¸€éäº†ã€‚
* å…¶æ¬¡ï¼Œç°ä»£çš„åšæ³•é€šå¸¸æ˜¯ç›´æ¥ä¿®æ”¹æ‰€æœ‰é¡µé¢çš„**å…¬å…±æ¨¡æ¿**ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œæˆ–è€…åœ¨ç”Ÿæˆé¡µé¢æ—¶å°±å¸¦ä¸Šã€‚
* å¦‚æœä»¥åä½ æƒ³æ›´æ–°æ¨èç®—æ³•ï¼Œç›´æ¥æ”¹ `js/related.js` è¿™ä¸ªæ–‡ä»¶å°±è¡Œï¼Œä¸éœ€è¦å†è¿è¡Œ Python è„šæœ¬å»æ”¹ HTML ç»“æ„ã€‚



### 3. `fix_meta.py` (å…ƒæ ‡ç­¾ä¿®å¤è„šæœ¬) -> ğŸ—‘ï¸ å½’æ¡£

* **å®ƒçš„ä½œç”¨**ï¼šå®ƒä¼šå¼ºåˆ¶æŠŠæ–‡ä»¶çš„ `<meta name="category">` æ”¹æˆå½“å‰æ–‡ä»¶å¤¹çš„åå­—ã€‚
* **ä¸ºä»€ä¹ˆä¸éœ€è¦äº†**ï¼š
* ä½ çš„ `manage_all.py` é‡Œçš„ `Organize` ä»»åŠ¡å·²ç»éå¸¸æ™ºèƒ½äº†ã€‚å®ƒä¼šæ ¹æ®æ–‡ä»¶åå…³é”®è¯è‡ªåŠ¨å½’ç±»ã€‚
* è¿™ä¸ªæ—§è„šæœ¬æ˜¯â€œç¡¬æ”¹â€æ–‡ä»¶å†…å®¹ï¼Œé€»è¾‘æ¯”è¾ƒæ­»æ¿ã€‚ç°åœ¨çš„ `manage_all.py` é€»è¾‘æ›´é«˜çº§ï¼Œä¸éœ€è¦è¿™ä¸ªè¾…åŠ©äº†ã€‚



---

### ğŸ§¹ æœ€ç»ˆæ¸…ç†å»ºè®®

ç°åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•åº”è¯¥éå¸¸æ¸…çˆ½äº†ã€‚å»ºè®®åªä¿ç•™ä»¥ä¸‹æ–‡ä»¶ï¼Œå…¶ä»–çš„éƒ½æ‰”è¿› `old_scripts`ï¼š

* ğŸ“‚ **modules/** (ä½ çš„å·¥å…·æ–‡ä»¶å¤¹)
* ğŸ“‚ **scripts/** (ä½ çš„ JS/CSS èµ„æº)
* ğŸ“‚ **old_scripts/** (å­˜æ”¾æ‰€æœ‰æ—§ Python è„šæœ¬çš„â€œå†·å®«â€)
* ğŸ“„ **manage_all.py** (â­ å”¯ä¸€çš„ä¸»ç®¡)
* ğŸ“„ **tools.json** (ç½‘ç«™çš„æ•°æ®æº)
* ğŸ“„ **index.html** (ç½‘ç«™é¦–é¡µ)
* ğŸ“„ **sitemap.xml** (è‡ªåŠ¨ç”Ÿæˆçš„åœ°å›¾)

**ä¸‹ä¸€æ­¥**ï¼š
ç›´æ¥æŠŠè¿™ä¸‰ä¸ªæ–‡ä»¶ï¼ˆ`update_html.py`, `inject_recommendation.py`, `fix_meta.py`ï¼‰æ‹–è¿› `old_scripts` æ–‡ä»¶å¤¹ã€‚

ä»¥åç»´æŠ¤ç½‘ç«™ï¼Œ**åªè¿è¡Œ `manage_all.py` è¿™ä¸€æ¡å‘½ä»¤å°±å¤Ÿäº†ï¼**