<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coherent Sampling Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="coherent_sampling">
    <meta name="category" content="electronics">
    <meta name="icon" content="ğŸ“Š">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="Coherent Sampling Calculator">
    <meta name="description" content="Calculate parameters for coherent sampling in ADC applications.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="ç›¸å¹²é‡‡æ ·è®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="è®¡ç®—ADCåº”ç”¨ä¸­çš„ç›¸å¹²é‡‡æ ·å‚æ•°ã€‚">
    
    <meta name="lang-title-zh-TW" content="ç›¸å¹²æ¡æ¨£è¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="è¨ˆç®—ADCæ‡‰ç”¨ä¸­çš„ç›¸å¹²æ¡æ¨£åƒæ•¸ã€‚">
    
    <meta name="lang-title-ja" content="ã‚³ãƒ’ãƒ¼ãƒ¬ãƒ³ãƒˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°è¨ˆç®—æ©Ÿ">
    <meta name="lang-description-ja" content="ADCã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹ã‚³ãƒ’ãƒ¼ãƒ¬ãƒ³ãƒˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨ˆç®—ã—ã¾ã™ã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ĞºĞ¾Ğ³ĞµÑ€ĞµĞ½Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°">
    <meta name="lang-description-ru" content="Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ĞºĞ¾Ğ³ĞµÑ€ĞµĞ½Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ° Ğ² Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ÑÑ… ĞĞ¦ĞŸ.">
    
    <meta name="lang-title-es" content="Calculadora de Muestreo Coherente">
    <meta name="lang-description-es" content="Calcula parÃ¡metros para muestreo coherente en aplicaciones de ADC.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 500; color: #4b5563; }
        input { width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 4px; }
        input:focus { outline: none; ring: 2px; ring-color: #3b82f6; }
        .result-box { background: #f8fafc; padding: 15px; border-radius: 8px; margin-top: 20px; }
        .formula { font-family: monospace; background: #f1f5f9; padding: 10px; border-radius: 4px; margin: 10px 0; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="coherent_sampling" 
         data-category="electronics" 
         data-title="Coherent Sampling Calculator" 
         data-icon="ğŸ“Š">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="sampling-lang" onchange="SamplingCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="es">EspaÃ±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ“Š Coherent Sampling Calculator</h2>
        
        <div class="space-y-4">
            <div data-i18n="instructions">Calculate the required parameters for coherent sampling, where the ratio of sampling frequency to input signal frequency is a rational number.</div>
            
            <div class="formula" data-i18n="formula">f_sampling / f_signal = N / K, where N is the number of samples and K is an integer</div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="input-group">
                    <label for="signal-frequency" data-i18n="signal_freq_label">Input Signal Frequency (Hz)</label>
                    <input type="number" id="signal-frequency" min="1" step="any" value="100000" class="focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="input-group">
                    <label for="sampling-frequency" data-i18n="sampling_freq_label">Sampling Frequency (Hz)</label>
                    <input type="number" id="sampling-frequency" min="1" step="any" value="1000000" class="focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="input-group">
                    <label for="num-cycles" data-i18n="num_cycles_label">Number of Signal Cycles</label>
                    <input type="number" id="num-cycles" min="1" value="10" class="focus:ring-2 focus:ring-blue-500">
                </div>
                
                <div class="input-group">
                    <label for="max-samples" data-i18n="max_samples_label">Max Number of Samples</label>
                    <input type="number" id="max-samples" min="1" value="1024" class="focus:ring-2 focus:ring-blue-500">
                </div>
            </div>
            
            <button onclick="SamplingCalc.calculate()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-4" data-i18n="calculate_btn">Calculate Parameters</button>
            
            <div class="result-box">
                <div class="text-sm text-gray-500 mb-2" data-i18n="result_label">Coherent Sampling Parameters</div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="ratio_label">Frequency Ratio (f_s/f_in)</div>
                        <div id="frequency-ratio" class="font-bold text-blue-800">--</div>
                    </div>
                    
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="reduced_ratio_label">Reduced Fraction (N/K)</div>
                        <div id="reduced-ratio" class="font-bold text-blue-800">--</div>
                    </div>
                    
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="num_samples_label">Number of Samples (N)</div>
                        <div id="number-of-samples" class="font-bold text-blue-800">--</div>
                    </div>
                    
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="num_cycles_result_label">Signal Cycles Captured (K)</div>
                        <div id="cycles-captured" class="font-bold text-blue-800">--</div>
                    </div>
                    
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="sample_clock_label">Sample Clock Period (ns)</div>
                        <div id="sample-clock" class="font-bold text-blue-800">--</div>
                    </div>
                    
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="valid_label">Coherent?</div>
                        <div id="is-coherent" class="font-bold text-blue-800">--</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const SamplingCalc = {
            i18n: {
                'en': {
                    title: 'ğŸ“Š Coherent Sampling Calculator',
                    instructions: 'Calculate the required parameters for coherent sampling, where the ratio of sampling frequency to input signal frequency is a rational number.',
                    formula: 'f_sampling / f_signal = N / K, where N is the number of samples and K is an integer',
                    signal_freq_label: 'Input Signal Frequency (Hz)',
                    sampling_freq_label: 'Sampling Frequency (Hz)',
                    num_cycles_label: 'Number of Signal Cycles',
                    max_samples_label: 'Max Number of Samples',
                    calculate_btn: 'Calculate Parameters',
                    result_label: 'Coherent Sampling Parameters',
                    ratio_label: 'Frequency Ratio (f_s/f_in)',
                    reduced_ratio_label: 'Reduced Fraction (N/K)',
                    num_samples_label: 'Number of Samples (N)',
                    num_cycles_result_label: 'Signal Cycles Captured (K)',
                    sample_clock_label: 'Sample Clock Period (ns)',
                    valid_label: 'Coherent?',
                    yes: 'Yes',
                    no: 'No',
                    err_invalid_input: 'Please enter valid positive numbers'
                },
                'zh-CN': {
                    title: 'ğŸ“Š ç›¸å¹²é‡‡æ ·è®¡ç®—å™¨',
                    instructions: 'è®¡ç®—ç›¸å¹²é‡‡æ ·æ‰€éœ€çš„å‚æ•°ï¼Œå…¶ä¸­é‡‡æ ·é¢‘ç‡ä¸è¾“å…¥ä¿¡å·é¢‘ç‡çš„æ¯”å€¼æ˜¯æœ‰ç†æ•°ã€‚',
                    formula: 'f_é‡‡æ · / f_ä¿¡å· = N / Kï¼Œå…¶ä¸­Næ˜¯é‡‡æ ·æ•°ï¼ŒKæ˜¯æ•´æ•°',
                    signal_freq_label: 'è¾“å…¥ä¿¡å·é¢‘ç‡ (Hz)',
                    sampling_freq_label: 'é‡‡æ ·é¢‘ç‡ (Hz)',
                    num_cycles_label: 'ä¿¡å·å‘¨æœŸæ•°',
                    max_samples_label: 'æœ€å¤§é‡‡æ ·æ•°',
                    calculate_btn: 'è®¡ç®—å‚æ•°',
                    result_label: 'ç›¸å¹²é‡‡æ ·å‚æ•°',
                    ratio_label: 'é¢‘ç‡æ¯” (f_s/f_in)',
                    reduced_ratio_label: 'æœ€ç®€åˆ†æ•° (N/K)',
                    num_samples_label: 'é‡‡æ ·æ•° (N)',
                    num_cycles_result_label: 'æ•è·çš„ä¿¡å·å‘¨æœŸæ•° (K)',
                    sample_clock_label: 'é‡‡æ ·æ—¶é’Ÿå‘¨æœŸ (ns)',
                    valid_label: 'æ˜¯å¦ç›¸å¹²?',
                    yes: 'æ˜¯',
                    no: 'å¦',
                    err_invalid_input: 'è¯·è¾“å…¥æœ‰æ•ˆçš„æ­£æ•°'
                },
                'zh-TW': {
                    title: 'ğŸ“Š ç›¸å¹²æ¡æ¨£è¨ˆç®—å™¨',
                    instructions: 'è¨ˆç®—ç›¸å¹²æ¡æ¨£æ‰€éœ€çš„åƒæ•¸ï¼Œå…¶ä¸­æ¡æ¨£é »ç‡èˆ‡è¼¸å…¥ä¿¡è™Ÿé »ç‡çš„æ¯”å€¼æ˜¯æœ‰ç†æ•¸ã€‚',
                    formula: 'f_æ¡æ¨£ / f_ä¿¡è™Ÿ = N / Kï¼Œå…¶ä¸­Næ˜¯æ¡æ¨£æ•¸ï¼ŒKæ˜¯æ•´æ•¸',
                    signal_freq_label: 'è¼¸å…¥ä¿¡è™Ÿé »ç‡ (Hz)',
                    sampling_freq_label: 'æ¡æ¨£é »ç‡ (Hz)',
                    num_cycles_label: 'ä¿¡è™Ÿå‘¨æœŸæ•¸',
                    max_samples_label: 'æœ€å¤§æ¡æ¨£æ•¸',
                    calculate_btn: 'è¨ˆç®—åƒæ•¸',
                    result_label: 'ç›¸å¹²æ¡æ¨£åƒæ•¸',
                    ratio_label: 'é »ç‡æ¯” (f_s/f_in)',
                    reduced_ratio_label: 'æœ€ç°¡åˆ†æ•¸ (N/K)',
                    num_samples_label: 'æ¡æ¨£æ•¸ (N)',
                    num_cycles_result_label: 'æ•ç²çš„ä¿¡è™Ÿå‘¨æœŸæ•¸ (K)',
                    sample_clock_label: 'æ¡æ¨£æ™‚é˜å‘¨æœŸ (ns)',
                    valid_label: 'æ˜¯å¦ç›¸å¹²?',
                    yes: 'æ˜¯',
                    no: 'å¦',
                    err_invalid_input: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„æ­£æ•¸'
                },
                'ja': {
                    title: 'ğŸ“Š ã‚³ãƒ’ãƒ¼ãƒ¬ãƒ³ãƒˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°è¨ˆç®—æ©Ÿ',
                    instructions: 'ã‚³ãƒ’ãƒ¼ãƒ¬ãƒ³ãƒˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã«å¿…è¦ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æ³¢æ•°ã¨å…¥åŠ›ä¿¡å·å‘¨æ³¢æ•°ã®æ¯”ã¯æœ‰ç†æ•°ã§ã™ã€‚',
                    formula: 'f_ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚° / f_ä¿¡å· = N / Kã€ã“ã“ã§Nã¯ã‚µãƒ³ãƒ—ãƒ«æ•°ã€Kã¯æ•´æ•°ã§ã™',
                    signal_freq_label: 'å…¥åŠ›ä¿¡å·å‘¨æ³¢æ•° (Hz)',
                    sampling_freq_label: 'ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°å‘¨æ³¢æ•° (Hz)',
                    num_cycles_label: 'ä¿¡å·å‘¨æœŸæ•°',
                    max_samples_label: 'æœ€å¤§ã‚µãƒ³ãƒ—ãƒ«æ•°',
                    calculate_btn: 'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨ˆç®—',
                    result_label: 'ã‚³ãƒ’ãƒ¼ãƒ¬ãƒ³ãƒˆã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿',
                    ratio_label: 'å‘¨æ³¢æ•°æ¯” (f_s/f_in)',
                    reduced_ratio_label: 'ç´„åˆ†åˆ†æ•° (N/K)',
                    num_samples_label: 'ã‚µãƒ³ãƒ—ãƒ«æ•° (N)',
                    num_cycles_result_label: 'ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚ŒãŸä¿¡å·å‘¨æœŸæ•° (K)',
                    sample_clock_label: 'ã‚µãƒ³ãƒ—ãƒ«ã‚¯ãƒ­ãƒƒã‚¯å‘¨æœŸ (ns)',
                    valid_label: 'ã‚³ãƒ’ãƒ¼ãƒ¬ãƒ³ãƒˆã‹?',
                    yes: 'ã¯ã„',
                    no: 'ã„ã„ãˆ',
                    err_invalid_input: 'æœ‰åŠ¹ãªæ­£æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
                },
                'ru': {
                    title: 'ğŸ“Š ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ĞºĞ¾Ğ³ĞµÑ€ĞµĞ½Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°',
                    instructions: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚Ğµ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ´Ğ»Ñ ĞºĞ¾Ğ³ĞµÑ€ĞµĞ½Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°, Ğ³Ğ´Ğµ ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ĞºĞ¸ Ğº Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğµ Ğ²Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼.',
                    formula: 'f_Ğ²Ñ‹Ğ±Ğ¾Ñ€ĞºĞ¸ / f_ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° = N / K, Ğ³Ğ´Ğµ N â€” ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğº, Ğ° K â€” Ñ†ĞµĞ»Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾',
                    signal_freq_label: 'Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ²Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° (Ğ“Ñ†)',
                    sampling_freq_label: 'Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€ĞºĞ¸ (Ğ“Ñ†)',
                    num_cycles_label: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ¾Ğ² ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ°',
                    max_samples_label: 'ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğº',
                    calculate_btn: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹',
                    result_label: 'ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ĞºĞ¾Ğ³ĞµÑ€ĞµĞ½Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°',
                    ratio_label: 'ĞŸÑ€Ğ¾Ğ¿Ğ¾Ñ€Ñ†Ğ¸Ñ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚ (f_s/f_in)',
                    reduced_ratio_label: 'Ğ¡Ğ¾ĞºÑ€Ğ°Ñ‰ĞµĞ½Ğ½Ğ°Ñ Ğ´Ñ€Ğ¾Ğ±ÑŒ (N/K)',
                    num_samples_label: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ²Ñ‹Ğ±Ğ¾Ñ€Ğ¾Ğº (N)',
                    num_cycles_result_label: 'Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ½Ñ‹Ğµ Ñ†Ğ¸ĞºĞ»Ñ‹ ÑĞ¸Ğ³Ğ½Ğ°Ğ»Ğ° (K)',
                    sample_clock_label: 'ĞŸĞµÑ€Ğ¸Ğ¾Ğ´ Ñ‚Ğ°ĞºÑ‚Ğ° Ğ²Ñ‹Ğ±Ğ¾Ñ€ĞºĞ¸ (Ğ½Ñ)',
                    valid_label: 'ĞšĞ¾Ğ³ĞµÑ€ĞµĞ½Ñ‚Ğ½Ğ¾?',
                    yes: 'Ğ”Ğ°',
                    no: 'ĞĞµÑ‚',
                    err_invalid_input: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‡Ğ¸ÑĞ»Ğ°'
                },
                'es': {
                    title: 'ğŸ“Š Calculadora de Muestreo Coherente',
                    instructions: 'Calcula los parÃ¡metros requeridos para el muestreo coherente, donde la relaciÃ³n entre la frecuencia de muestreo y la frecuencia de la seÃ±al de entrada es un nÃºmero racional.',
                    formula: 'f_muestreo / f_seÃ±al = N / K, donde N es el nÃºmero de muestras y K es un entero',
                    signal_freq_label: 'Frecuencia de la seÃ±al de entrada (Hz)',
                    sampling_freq_label: 'Frecuencia de muestreo (Hz)',
                    num_cycles_label: 'NÃºmero de ciclos de seÃ±al',
                    max_samples_label: 'NÃºmero mÃ¡ximo de muestras',
                    calculate_btn: 'Calcular ParÃ¡metros',
                    result_label: 'ParÃ¡metros de Muestreo Coherente',
                    ratio_label: 'RelaciÃ³n de frecuencias (f_s/f_in)',
                    reduced_ratio_label: 'FracciÃ³n reducida (N/K)',
                    num_samples_label: 'NÃºmero de muestras (N)',
                    num_cycles_result_label: 'Ciclos de seÃ±al capturados (K)',
                    sample_clock_label: 'Periodo del reloj de muestreo (ns)',
                    valid_label: 'Â¿Coherente?',
                    yes: 'SÃ­',
                    no: 'No',
                    err_invalid_input: 'Por favor, ingrese nÃºmeros positivos vÃ¡lidos'
                }
            },

            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang();
                    return;
                }},

            // è®¡ç®—æœ€å¤§å…¬çº¦æ•°
            gcd: function(a, b) {
                while (b) {
                    [a, b] = [b, a % b];
                }
                return a;
            },

            calculate: function() {
                const lang = document.getElementById('sampling-lang').value;
                const texts = this.i18n[lang];
                
                // è·å–è¾“å…¥å€¼
                const fSignal = parseFloat(document.getElementById('signal-frequency').value);
                const fSampling = parseFloat(document.getElementById('sampling-frequency').value);
                const numCycles = parseInt(document.getElementById('num-cycles').value);
                const maxSamples = parseInt(document.getElementById('max-samples').value);
                
                // éªŒè¯è¾“å…¥
                if (isNaN(fSignal) || isNaN(fSampling) || isNaN(numCycles) || isNaN(maxSamples) || 
                    fSignal <= 0 || fSampling <= 0 || numCycles <= 0 || maxSamples <= 0) {
                    document.getElementById('frequency-ratio').innerText = texts.err_invalid_input;
                    document.getElementById('frequency-ratio').className = "font-bold text-red-600";
                    // æ¸…ç©ºå…¶ä»–ç»“æœ
                    document.getElementById('reduced-ratio').innerText = "";
                    document.getElementById('number-of-samples').innerText = "";
                    document.getElementById('cycles-captured').innerText = "";
                    document.getElementById('sample-clock').innerText = "";
                    document.getElementById('is-coherent').innerText = "";
                    return;
                }
                
                // é‡ç½®æ ·å¼
                document.getElementById('frequency-ratio').className = "font-bold text-blue-800";
                
                // è®¡ç®—é¢‘ç‡æ¯”
                const ratio = fSampling / fSignal;
                document.getElementById('frequency-ratio').innerText = ratio.toFixed(6);
                
                // è®¡ç®—æœ€ç®€åˆ†æ•°
                // ä¸ºäº†å¤„ç†æµ®ç‚¹æ•°ï¼Œæˆ‘ä»¬å°†æ¯”ä¾‹æ”¾å¤§åˆ°æ•´æ•°
                const scalingFactor = 1e6;
                const scaledRatio = Math.round(ratio * scalingFactor);
                const gcdValue = this.gcd(scaledRatio, scalingFactor);
                const N = scaledRatio / gcdValue;
                const K = scalingFactor / gcdValue;
                
                document.getElementById('reduced-ratio').innerText = `${N}/${K}`;
                
                // è®¡ç®—é‡‡æ ·æ•°å’Œæ•è·çš„å‘¨æœŸ
                const samplesNeeded = Math.round(ratio * numCycles);
                const actualSamples = Math.min(samplesNeeded, maxSamples);
                const actualCycles = Math.round(actualSamples / ratio);
                
                document.getElementById('number-of-samples').innerText = actualSamples;
                document.getElementById('cycles-captured').innerText = actualCycles;
                
                // è®¡ç®—é‡‡æ ·æ—¶é’Ÿå‘¨æœŸ
                const clockPeriod = (1 / fSampling) * 1e9; // è½¬æ¢ä¸ºçº³ç§’
                document.getElementById('sample-clock').innerText = clockPeriod.toFixed(2);
                
                // æ£€æŸ¥æ˜¯å¦ç›¸å¹²ï¼ˆæ¯”ä¾‹æ˜¯å¦ä¸ºæœ‰ç†æ•°ä¸”é‡‡æ ·æ•°åœ¨é™åˆ¶èŒƒå›´å†…ï¼‰
                const isCoherent = ratio === N/K && actualSamples <= maxSamples;
                document.getElementById('is-coherent').innerText = isCoherent ? texts.yes : texts.no;
                document.getElementById('is-coherent').className = `font-bold ${isCoherent ? 'text-green-600' : 'text-red-600'}`;
            },

            changeLang: function() {
                const lang = document.getElementById('sampling-lang').value;
                const texts = this.i18n[lang];
                const elements = document.querySelectorAll('[data-id="coherent_sampling"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) {
                        el.innerText = texts[key];
                    }
                });
                
                // å¦‚æœå·²æœ‰è®¡ç®—ç»“æœï¼Œé‡æ–°è®¡ç®—ä»¥æ›´æ–°æ˜¾ç¤º
                const fSignal = parseFloat(document.getElementById('signal-frequency').value);
                const fSampling = parseFloat(document.getElementById('sampling-frequency').value);
                if (!isNaN(fSignal) && !isNaN(fSampling) && fSignal > 0 && fSampling > 0) {
                    this.calculate();
                }
            }
        };

        document.addEventListener('DOMContentLoaded', SamplingCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('sampling-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    SamplingCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>