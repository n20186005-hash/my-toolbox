<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Density Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="density_calculator">
    <meta name="category" content="physics">
    <meta name="icon" content="⚖️">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Density Calculator">
    <meta name="description" content="Calculate density, mass or volume using the density formula (ρ = m/V).">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="密度计算器">
    <meta name="lang-description-zh-CN" content="使用密度公式（ρ = m/V）计算密度、质量或体积。">
    
    <meta name="lang-title-zh-TW" content="密度計算器">
    <meta name="lang-description-zh-TW" content="使用密度公式（ρ = m/V）計算密度、質量或體積。">
    
    <meta name="lang-title-ja" content="密度計算ツール">
    <meta name="lang-description-ja" content="密度の公式（ρ = m/V）を使用して、密度、質量、または体積を計算します。">
    
    <meta name="lang-title-ru" content="Калькулятор плотности">
    <meta name="lang-description-ru" content="Вычислите плотность, массу или объем с использованием формулы плотности (ρ = m/V).">
    
    <meta name="lang-title-es" content="Calculadora de Densidad">
    <meta name="lang-description-es" content="Calcula la densidad, masa o volumen usando la fórmula de densidad (ρ = m/V).">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .calculation-mode { border: 1px solid #ddd; border-radius: 6px; overflow: hidden; display: inline-flex; margin-bottom: 1rem; }
        .calculation-mode button { padding: 6px 12px; border: none; background: #f3f4f6; cursor: pointer; }
        .calculation-mode button.active { background: #3b82f6; color: white; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="density_calculator" 
         data-category="physics" 
         data-title="Density Calculator" 
         data-icon="⚖️">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="density-lang" onchange="DensityCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⚖️ Density Calculator</h2>
        
        <p class="text-sm text-gray-600 mb-4" data-i18n="formula">Density Formula: ρ = m/V (Density = Mass / Volume)</p>
        
        <!-- Calculation Mode -->
        <div class="mb-4">
            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="calculate_what">Calculate:</label>
            <div class="calculation-mode">
                <button id="calc-density" class="active" onclick="DensityCalc.setMode('density')" data-i18n="density">Density</button>
                <button id="calc-mass" onclick="DensityCalc.setMode('mass')" data-i18n="mass">Mass</button>
                <button id="calc-volume" onclick="DensityCalc.setMode('volume')" data-i18n="volume">Volume</button>
            </div>
        </div>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <!-- Mass Input -->
            <div id="mass-input">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="mass_label">Mass</label>
                <div class="flex">
                    <input type="number" id="mass" class="flex-1 p-2 border rounded-r-none focus:ring-2 focus:ring-blue-500 outline-none" placeholder="100" min="0.001" step="0.001">
                    <div id="mass-unit" class="bg-gray-100 px-3 py-2 border border-l-0 rounded-r flex items-center text-gray-600">kg</div>
                </div>
            </div>
            
            <!-- Volume Input -->
            <div id="volume-input">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="volume_label">Volume</label>
                <div class="flex">
                    <input type="number" id="volume" class="flex-1 p-2 border rounded-r-none focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0.1" min="0.001" step="0.001">
                    <div id="volume-unit" class="bg-gray-100 px-3 py-2 border border-l-0 rounded-r flex items-center text-gray-600">m³</div>
                </div>
            </div>
            
            <!-- Density Input -->
            <div id="density-input" style="display: none;">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="density_label">Density</label>
                <div class="flex">
                    <input type="number" id="density" class="flex-1 p-2 border rounded-r-none focus:ring-2 focus:ring-blue-500 outline-none" placeholder="1000" min="0.001" step="0.001">
                    <div id="density-unit" class="bg-gray-100 px-3 py-2 border border-l-0 rounded-r flex items-center text-gray-600">kg/m³</div>
                </div>
            </div>
        </div>

        <button onclick="DensityCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">Calculate</button>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
            <div class="text-sm text-gray-500 mb-2" id="result-label" data-i18n="result_label">Calculated Density</div>
            <div id="density-result" class="text-3xl font-bold text-blue-800">--</div>
            <div id="density-formula" class="text-sm text-gray-600 mt-4"></div>
        </div>
    </div>

    <script>
        const DensityCalc = {
            currentMode: 'density', // density, mass, volume
            
            i18n: {
                'en': {
                    title: '⚖️ Density Calculator',
                    formula: 'Density Formula: ρ = m/V (Density = Mass / Volume)',
                    calculate_what: 'Calculate:',
                    density: 'Density',
                    mass: 'Mass',
                    volume: 'Volume',
                    mass_label: 'Mass',
                    volume_label: 'Volume',
                    density_label: 'Density',
                    btn_calc: 'Calculate',
                    result_label: 'Calculated Density',
                    result_label_mass: 'Calculated Mass',
                    result_label_volume: 'Calculated Volume',
                    err_invalid: 'Please enter valid values',
                    formula_text: '%result% = %value1% / %value2%',
                    formula_text_mass: '%result% = %value1% × %value2%',
                    formula_text_volume: '%result% = %value1% / %value2%'
                },
                'zh-CN': {
                    title: '⚖️ 密度计算器',
                    formula: '密度公式：ρ = m/V（密度 = 质量 / 体积）',
                    calculate_what: '计算：',
                    density: '密度',
                    mass: '质量',
                    volume: '体积',
                    mass_label: '质量',
                    volume_label: '体积',
                    density_label: '密度',
                    btn_calc: '计算',
                    result_label: '计算得出的密度',
                    result_label_mass: '计算得出的质量',
                    result_label_volume: '计算得出的体积',
                    err_invalid: '请输入有效数值',
                    formula_text: '%result% = %value1% / %value2%',
                    formula_text_mass: '%result% = %value1% × %value2%',
                    formula_text_volume: '%result% = %value1% / %value2%'
                },
                'zh-TW': {
                    title: '⚖️ 密度計算器',
                    formula: '密度公式：ρ = m/V（密度 = 質量 / 體積）',
                    calculate_what: '計算：',
                    density: '密度',
                    mass: '質量',
                    volume: '體積',
                    mass_label: '質量',
                    volume_label: '體積',
                    density_label: '密度',
                    btn_calc: '計算',
                    result_label: '計算得出的密度',
                    result_label_mass: '計算得出的質量',
                    result_label_volume: '計算得出的體積',
                    err_invalid: '請輸入有效數值',
                    formula_text: '%result% = %value1% / %value2%',
                    formula_text_mass: '%result% = %value1% × %value2%',
                    formula_text_volume: '%result% = %value1% / %value2%'
                },
                'ja': {
                    title: '⚖️ 密度計算ツール',
                    formula: '密度の公式：ρ = m/V（密度 = 質量 / 体積）',
                    calculate_what: '計算：',
                    density: '密度',
                    mass: '質量',
                    volume: '体積',
                    mass_label: '質量',
                    volume_label: '体積',
                    density_label: '密度',
                    btn_calc: '計算する',
                    result_label: '計算された密度',
                    result_label_mass: '計算された質量',
                    result_label_volume: '計算された体積',
                    err_invalid: '有効な値を入力してください',
                    formula_text: '%result% = %value1% / %value2%',
                    formula_text_mass: '%result% = %value1% × %value2%',
                    formula_text_volume: '%result% = %value1% / %value2%'
                },
                'ru': {
                    title: '⚖️ Калькулятор плотности',
                    formula: 'Формула плотности: ρ = m/V (Плотность = Масса / Объем)',
                    calculate_what: 'Вычислить:',
                    density: 'Плотность',
                    mass: 'Масса',
                    volume: 'Объем',
                    mass_label: 'Масса',
                    volume_label: 'Объем',
                    density_label: 'Плотность',
                    btn_calc: 'Вычислить',
                    result_label: 'Вычисленная плотность',
                    result_label_mass: 'Вычисленная масса',
                    result_label_volume: 'Вычисленный объем',
                    err_invalid: 'Введите действительные значения',
                    formula_text: '%result% = %value1% / %value2%',
                    formula_text_mass: '%result% = %value1% × %value2%',
                    formula_text_volume: '%result% = %value1% / %value2%'
                },
                'es': {
                    title: '⚖️ Calculadora de Densidad',
                    formula: 'Fórmula de densidad: ρ = m/V (Densidad = Masa / Volumen)',
                    calculate_what: 'Calcular:',
                    density: 'Densidad',
                    mass: 'Masa',
                    volume: 'Volumen',
                    mass_label: 'Masa',
                    volume_label: 'Volumen',
                    density_label: 'Densidad',
                    btn_calc: 'Calcular',
                    result_label: 'Densidad calculada',
                    result_label_mass: 'Masa calculada',
                    result_label_volume: 'Volumen calculado',
                    err_invalid: 'Ingrese valores válidos',
                    formula_text: '%result% = %value1% / %value2%',
                    formula_text_mass: '%result% = %value1% × %value2%',
                    formula_text_volume: '%result% = %value1% / %value2%'
                }
            },

            init: () => {
                // 初始化模式按钮事件已在HTML中通过onclick绑定
            },

            setMode: (mode) => {
                // 更新当前模式
                DensityCalc.currentMode = mode;
                
                // 更新按钮状态
                document.querySelectorAll('.calculation-mode button').forEach(btn => {
                    btn.classList.remove('active');
                });
                document.getElementById(`calc-${mode}`).classList.add('active');
                
                // 显示/隐藏相应的输入框
                document.getElementById('mass-input').style.display = mode !== 'mass' ? 'block' : 'none';
                document.getElementById('volume-input').style.display = mode !== 'volume' ? 'block' : 'none';
                document.getElementById('density-input').style.display = mode !== 'density' ? 'block' : 'none';
                
                // 更新结果标签
                const lang = document.getElementById('density-lang').value;
                const texts = DensityCalc.i18n[lang];
                const resultLabel = document.getElementById('result-label');
                
                if (mode === 'density') {
                    resultLabel.innerText = texts.result_label;
                } else if (mode === 'mass') {
                    resultLabel.innerText = texts.result_label_mass;
                } else {
                    resultLabel.innerText = texts.result_label_volume;
                }
            },

            changeLang: () => {
                const lang = document.getElementById('density-lang').value;
                const texts = DensityCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="density_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // 更新结果标签
                DensityCalc.setMode(DensityCalc.currentMode);
                
                // 重新计算
                DensityCalc.calc();
            },

            calc: () => {
                const mass = parseFloat(document.getElementById('mass').value) || 0;
                const volume = parseFloat(document.getElementById('volume').value) || 0;
                const density = parseFloat(document.getElementById('density').value) || 0;
                const lang = document.getElementById('density-lang').value;
                const texts = DensityCalc.i18n[lang];

                let result, unit, formulaText;
                
                try {
                    switch(DensityCalc.currentMode) {
                        case 'density':
                            if (mass <= 0 || volume <= 0) throw new Error();
                            result = mass / volume;
                            unit = 'kg/m³';
                            formulaText = texts.formula_text
                                .replace('%result%', 'ρ')
                                .replace('%value1%', `${mass} kg`)
                                .replace('%value2%', `${volume} m³`);
                            break;
                            
                        case 'mass':
                            if (density <= 0 || volume <= 0) throw new Error();
                            result = density * volume;
                            unit = 'kg';
                            formulaText = texts.formula_text_mass
                                .replace('%result%', 'm')
                                .replace('%value1%', `${density} kg/m³`)
                                .replace('%value2%', `${volume} m³`);
                            break;
                            
                        case 'volume':
                            if (mass <= 0 || density <= 0) throw new Error();
                            result = mass / density;
                            unit = 'm³';
                            formulaText = texts.formula_text_volume
                                .replace('%result%', 'V')
                                .replace('%value1%', `${mass} kg`)
                                .replace('%value2%', `${density} kg/m³`);
                            break;
                    }

                    // 显示结果
                    document.getElementById('density-result').innerText = `${result.toFixed(6)} ${unit}`;
                    document.getElementById('density-formula').innerText = formulaText;
                    
                } catch (e) {
                    document.getElementById('density-result').innerText = texts.err_invalid;
                    document.getElementById('density-formula').innerText = '';
                }
            }
        };

        document.addEventListener('DOMContentLoaded', DensityCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 自动匹配浏览器语言
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('density-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    DensityCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>