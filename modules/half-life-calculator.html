<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Half-Life Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="half_life_calc">
    <meta name="category" content="chemistry">
    <meta name="icon" content="⚛️">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Half-Life Calculator">
    <meta name="description" content="Calculate the remaining quantity of a substance after a given time based on its half-life.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="半衰期计算器">
    <meta name="lang-description-zh-CN" content="根据物质的半衰期计算给定时间后剩余的物质量。">
    
    <meta name="lang-title-zh-TW" content="半衰期期計算器">
    <meta name="lang-description-zh-TW" content="根據物質的半衰期計算給定時間後剩餘的物質量。">
    
    <meta name="lang-title-ja" content="半減期計算ツール">
    <meta name="lang-description-ja" content="半減期に基づいて、指定された時間後の物質の残存量を計算します。">
    
    <meta name="lang-title-ru" content="Калькулятор полувремени обмена">
    <meta name="lang-description-ru" content="Рассчитайте оставшееся количество вещества после заданного времени на основе его полувремени обмена.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .result-container { word-break: break-all; }
        .result-box { background: #e8f4f8; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .formula-box { background: #f8fafc; padding: 10px; border-radius: 6px; font-family: monospace; margin: 10px 0; }
        .input-group { display: flex; flex-wrap: wrap; gap: 10px; margin: 10px 0; }
        .input-item { flex: 1; min-width: 150px; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="half_life_calc" 
         data-category="chemistry" 
         data-title="Half-Life Calculator" 
         data-icon="⚛️">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="hl-lang" onchange="HalfLifeCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⚛️ Half-Life Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- 初始数量 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="initial_quantity">Initial Quantity (N₀)</label>
                <input type="number" id="hl-initial" step="0.001" min="0.001" value="100" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- 半衰期 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="half_life">Half-Life</label>
                <input type="number" id="hl-value" step="0.001" min="0.001" value="50" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- 时间单位 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="time_unit">Time Unit</label>
                <select id="hl-unit" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="seconds">Seconds</option>
                    <option value="minutes">Minutes</option>
                    <option value="hours" selected>Hours</option>
                    <option value="days">Days</option>
                    <option value="weeks">Weeks</option>
                    <option value="years">Years</option>
                </select>
            </div>
            
            <!-- 经过时间 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="elapsed_time">Elapsed Time</label>
                <input type="number" id="hl-time" step="0.001" min="0" value="100" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>

            <!-- 计算按钮 -->
            <button onclick="HalfLifeCalc.calculate()" class="w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2" data-i18n="calculate">Calculate</button>
        </div>
        
        <!-- 结果展示区域 -->
        <div class="result-container mt-6 pt-4 border-t">
            <h3 class="text-lg font-semibold mb-3 text-gray-700" data-i18n="result">Results</h3>
            <div class="result-box" id="hl-result">
                <div data-i18n="result_placeholder">Results will be shown here</div>
            </div>
            
            <div class="formula-box mt-4" id="hl-formula">
                <div data-i18n="formula">Formula: N(t) = N₀ × (1/2)^(t / t₁/₂)</div>
            </div>
        </div>
    </div>

    <script>
        const HalfLifeCalc = {
            // 多语言文本映射
            translations: {
                en: {
                    title: "⚛️ Half-Life Calculator",
                    initial_quantity: "Initial Quantity (N₀)",
                    half_life: "Half-Life (t₁/₂)",
                    time_unit: "Time Unit",
                    elapsed_time: "Elapsed Time (t)",
                    calculate: "Calculate",
                    result: "Results",
                    result_placeholder: "Results will be shown here",
                    formula: "Formula: N(t) = N₀ × (1/2)^(t / t₁/₂)",
                    remaining_quantity: "Remaining Quantity",
                    decayed_quantity: "Decayed Quantity",
                    percentage_remaining: "Percentage Remaining"
                },
                "zh-CN": {
                    title: "⚛️ 半衰期计算器",
                    initial_quantity: "初始数量 (N₀)",
                    half_life: "半衰期 (t₁/₂)",
                    time_unit: "时间单位",
                    elapsed_time: "经过时间 (t)",
                    calculate: "计算",
                    result: "结果",
                    result_placeholder: "结果将显示在这里",
                    formula: "公式: N(t) = N₀ × (1/2)^(t / t₁/₂)",
                    remaining_quantity: "剩余数量",
                    decayed_quantity: "衰变数量",
                    percentage_remaining: "剩余百分比"
                },
                "zh-TW": {
                    title: "⚛️ 半衰期計算器",
                    initial_quantity: "初始數量 (N₀)",
                    half_life: "半衰期 (t₁/₂)",
                    time_unit: "時間單位",
                    elapsed_time: "經過時間 (t)",
                    calculate: "計算",
                    result: "結果",
                    result_placeholder: "結果將顯示在這裡",
                    formula: "公式: N(t) = N₀ × (1/2)^(t / t₁/₂)",
                    remaining_quantity: "剩餘數量",
                    decayed_quantity: "衰變數量",
                    percentage_remaining: "剩餘百分比"
                },
                "ja": {
                    title: "⚛️ 半減期計算ツール",
                    initial_quantity: "初期量 (N₀)",
                    half_life: "半減期 (t₁/₂)",
                    time_unit: "時間単位",
                    elapsed_time: "経過時間 (t)",
                    calculate: "計算",
                    result: "結果",
                    result_placeholder: "結果はここに表示されます",
                    formula: "公式: N(t) = N₀ × (1/2)^(t / t₁/₂)",
                    remaining_quantity: "残存量",
                    decayed_quantity: "崩壊量",
                    percentage_remaining: "残存率（%）"
                },
                ru: {
                    title: "⚛️ Калькулятор полувремени обмена",
                    initial_quantity: "Исходное количество (N₀)",
                    half_life: "Полувремя обмена (t₁/₂)",
                    time_unit: "Единица времени",
                    elapsed_time: "Прошедшее время (t)",
                    calculate: "Вычислить",
                    result: "Результаты",
                    result_placeholder: "Результаты будут показаны здесь",
                    formula: "Формула: N(t) = N₀ × (1/2)^(t / t₁/₂)",
                    remaining_quantity: "Оставшееся количество",
                    decayed_quantity: "Распавшееся количество",
                    percentage_remaining: "Процент оставшегося"
                }
            },

            // 初始化
            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang();
                    return;
                }
                // 初始化语言
                this.changeLang();
            },

            // 切换语言
            changeLang: function() {
                const lang = document.getElementById('hl-lang').value;
                const elements = document.querySelectorAll('[data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.translations[lang] && this.translations[lang][key]) {
                        el.textContent = this.translations[lang][key];
                    }
                });
            },

            // 计算半衰期
            calculate: function() {
                // 获取输入值
                const N0 = parseFloat(document.getElementById('hl-initial').value);
                const halfLife = parseFloat(document.getElementById('hl-value').value);
                const time = parseFloat(document.getElementById('hl-time').value);
                const unit = document.getElementById('hl-unit').value;
                const lang = document.getElementById('hl-lang').value;
                
                // 验证输入
                if (isNaN(N0) || isNaN(halfLife) || isNaN(time) || halfLife <= 0) {
                    document.getElementById('hl-result').innerHTML = `<div class="text-red-500" data-i18n="invalid_input">Invalid input values</div>`;
                    this.changeLang();
                    return;
                }
                
                // 计算
                const exponent = time / halfLife;
                const Nt = N0 * Math.pow(0.5, exponent);
                const decayed = N0 - Nt;
                const percentage = (Nt / N0) * 100;
                
                // 显示结果
                const resultEl = document.getElementById('hl-result');
                resultEl.innerHTML = `
                    <div><span data-i18n="remaining_quantity"></span>: ${Nt.toFixed(4)}</div>
                    <div><span data-i18n="decayed_quantity"></span>: ${decayed.toFixed(4)}</div>
                    <div><span data-i18n="percentage_remaining"></span>: ${percentage.toFixed(2)}%</div>
                    <div class="text-xs text-gray-500 mt-2">(${time} ${unit} with half-life ${halfLife} ${unit})</div>
                `;
                
                this.changeLang(); // 更新翻译
            }
        };

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', () => {
            HalfLifeCalc.init();
        });
    </script>
</body>
</html>