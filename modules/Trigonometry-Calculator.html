<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trigonometry Calculator Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fff7ed; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .res-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #fed7aa; }
        .res-row:last-child { border-bottom: none; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="trig_calc" 
         data-category="Math" 
         data-title="Math" 
         data-icon="üìê">
        
        <div class="absolute top-4 right-4">
            <select id="tc-lang" onchange="TrigCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üìê Trigonometry Calculator</h2>

        <div class="grid grid-cols-2 gap-4 mb-6">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_angle">Angle</label>
                <input type="number" id="tc-angle" class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500 outline-none" placeholder="45" value="45" oninput="TrigCalc.calc()">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_unit">Unit</label>
                <div class="flex gap-2 bg-gray-100 p-1 rounded">
                    <button id="btn-deg" onclick="TrigCalc.setUnit('deg')" class="flex-1 rounded py-1 text-sm bg-white shadow text-orange-600 font-bold transition">Deg (¬∞)</button>
                    <button id="btn-rad" onclick="TrigCalc.setUnit('rad')" class="flex-1 rounded py-1 text-sm text-gray-500 hover:text-orange-600 transition">Rad</button>
                </div>
            </div>
        </div>

        <div class="bg-orange-50 p-4 rounded-lg border border-orange-100">
            <h3 class="text-sm font-bold text-orange-800 mb-2 uppercase" data-i18n="res_header">Results</h3>
            <div class="space-y-1">
                <div class="res-row">
                    <span class="text-gray-600 font-mono">sin(Œ∏)</span>
                    <span id="res-sin" class="font-bold text-gray-800">--</span>
                </div>
                <div class="res-row">
                    <span class="text-gray-600 font-mono">cos(Œ∏)</span>
                    <span id="res-cos" class="font-bold text-gray-800">--</span>
                </div>
                <div class="res-row">
                    <span class="text-gray-600 font-mono">tan(Œ∏)</span>
                    <span id="res-tan" class="font-bold text-gray-800">--</span>
                </div>
                <div class="res-row">
                    <span class="text-gray-600 font-mono">cot(Œ∏)</span>
                    <span id="res-cot" class="font-bold text-gray-800">--</span>
                </div>
                <div class="res-row">
                    <span class="text-gray-600 font-mono">sec(Œ∏)</span>
                    <span id="res-sec" class="font-bold text-gray-800">--</span>
                </div>
                <div class="res-row">
                    <span class="text-gray-600 font-mono">csc(Œ∏)</span>
                    <span id="res-csc" class="font-bold text-gray-800">--</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const TrigCalc = {
            unit: 'deg',
            i18n: {
                'en': {
                    title: 'üìê Trigonometry Calculator',
                    lbl_angle: 'Angle',
                    lbl_unit: 'Unit',
                    res_header: 'Results'
                },
                'zh-CN': {
                    title: 'üìê ‰∏âËßíÂáΩÊï∞ËÆ°ÁÆóÂô®',
                    lbl_angle: 'ËßíÂ∫¶',
                    lbl_unit: 'Âçï‰Ωç',
                    res_header: 'ËÆ°ÁÆóÁªìÊûú'
                },
                'zh-TW': {
                    title: 'üìê ‰∏âËßíÂáΩÊï∏Ë®àÁÆóÂô®',
                    lbl_angle: 'ËßíÂ∫¶',
                    lbl_unit: 'ÂñÆ‰Ωç',
                    res_header: 'Ë®àÁÆóÁµêÊûú'
                },
                'ja': {
                    title: 'üìê ‰∏âËßíÈñ¢Êï∞Ë®àÁÆó',
                    lbl_angle: 'ËßíÂ∫¶',
                    lbl_unit: 'Âçò‰Ωç',
                    res_header: 'ÁµêÊûú'
                },
                'ru': {
                    title: 'üìê –¢—Ä–∏–≥–æ–Ω–æ–º–µ—Ç—Ä–∏—è',
                    lbl_angle: '–£–≥–æ–ª',
                    lbl_unit: '–ï–¥–∏–Ω–∏—Ü–∞',
                    res_header: '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã'
                },
                'es': {
                    title: 'üìê Trigonometr√≠a',
                    lbl_angle: '√Ångulo',
                    lbl_unit: 'Unidad',
                    res_header: 'Resultados'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('tc-lang').value;
                const texts = TrigCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="trig_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
            },

            setUnit: (u) => {
                TrigCalc.unit = u;
                const btnDeg = document.getElementById('btn-deg');
                const btnRad = document.getElementById('btn-rad');
                
                if (u === 'deg') {
                    btnDeg.className = "flex-1 rounded py-1 text-sm bg-white shadow text-orange-600 font-bold transition";
                    btnRad.className = "flex-1 rounded py-1 text-sm text-gray-500 hover:text-orange-600 transition";
                } else {
                    btnRad.className = "flex-1 rounded py-1 text-sm bg-white shadow text-orange-600 font-bold transition";
                    btnDeg.className = "flex-1 rounded py-1 text-sm text-gray-500 hover:text-orange-600 transition";
                }
                TrigCalc.calc();
            },

            format: (n) => {
                if (!isFinite(n)) return 'Undefined';
                if (Math.abs(n) < 1e-10) return '0';
                if (Math.abs(n) > 1e10) return '‚àû';
                return parseFloat(n.toFixed(6));
            },

            calc: () => {
                const angleInput = parseFloat(document.getElementById('tc-angle').value);
                if (isNaN(angleInput)) return;

                let rad = angleInput;
                if (TrigCalc.unit === 'deg') {
                    rad = angleInput * (Math.PI / 180);
                }

                const sin = Math.sin(rad);
                const cos = Math.cos(rad);
                const tan = Math.tan(rad);
                
                // Handling precise values for common angles (like 90 deg)
                // JS Math functions return tiny epsilon errors (e.g. cos(90deg) is 6.12e-17 not 0)
                // The format function handles < 1e-10 -> 0

                document.getElementById('res-sin').innerText = TrigCalc.format(sin);
                document.getElementById('res-cos').innerText = TrigCalc.format(cos);
                document.getElementById('res-tan').innerText = TrigCalc.format(tan);

                // Reciprocals
                document.getElementById('res-cot').innerText = TrigCalc.format(1/tan);
                document.getElementById('res-sec').innerText = TrigCalc.format(1/cos);
                document.getElementById('res-csc').innerText = TrigCalc.format(1/sin);
            }
        };
        // Init
        TrigCalc.calc();
    </script>
</body>

</html>
