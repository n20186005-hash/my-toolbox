<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probability Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="probability_calc">
    <meta name="category" content="statistics">
    <meta name="icon" content="ğŸ²">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="Probability Calculator">
    <meta name="description" content="Calculate probabilities for independent, mutually exclusive, conditional events and more.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="æ¦‚ç‡è®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="è®¡ç®—ç‹¬ç«‹äº‹ä»¶ã€äº’æ–¥äº‹ä»¶ã€æ¡ä»¶äº‹ä»¶ç­‰çš„æ¦‚ç‡ã€‚">
    
    <meta name="lang-title-zh-TW" content="æ©Ÿç‡è¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="è¨ˆç®—ç¨ç«‹äº‹ä»¶ã€äº’æ–¥äº‹ä»¶ã€æ¢ä»¶äº‹ä»¶ç­‰çš„æ©Ÿç‡ã€‚">
    
    <meta name="lang-title-ja" content="ç¢ºç‡è¨ˆç®—ãƒ„ãƒ¼ãƒ«">
    <meta name="lang-description-ja" content="ç‹¬ç«‹äº‹è±¡ã€ç›¸äº’ã«æ’ä»–çš„ãªäº‹è±¡ã€æ¡ä»¶ä»˜ãç¢ºç‡ãªã©ã®ç¢ºç‡ã‚’è¨ˆç®—ã—ã¾ã™ã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸">
    <meta name="lang-description-ru" content="Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ñ…, Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ¸ÑĞºĞ»ÑÑ‡Ğ°ÑÑ‰Ğ¸Ñ…, ÑƒÑĞ»Ğ¾Ğ²Ğ½Ñ‹Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¸ Ğ´Ñ€.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .result-container { word-break: break-all; }
        .formula-box { background: #f8fafc; padding: 10px; border-radius: 6px; font-family: monospace; margin: 10px 0; }
        .prob-result-box { background: #e8f4f8; padding: 15px; border-radius: 8px; margin: 10px 0; }
        .radio-group { display: flex; flex-wrap: wrap; gap: 10px; margin: 10px 0; }
        .radio-item { display: flex; align-items: center; gap: 5px; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/statistics/probability-calculator.html" />
</head>
<body>

    <div class="tool-module active" 
         data-id="probability_calc" 
         data-category="statistics" 
         data-title="Probability Calculator" 
         data-icon="ğŸ²">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="prob-lang" onchange="ProbCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ² Probability Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- è®¡ç®—ç±»å‹é€‰æ‹© -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="calc_type">Calculation Type</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" name="prob-type" id="prob-and" value="and" checked>
                        <label for="prob-and" data-i18n="prob_and">P(A and B) - Both events occur</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="prob-type" id="prob-or" value="or">
                        <label for="prob-or" data-i18n="prob_or">P(A or B) - Either event occurs</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="prob-type" id="prob-not" value="not">
                        <label for="prob-not" data-i18n="prob_not">P(not A) - Complementary event</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="prob-type" id="prob-conditional" value="conditional">
                        <label for="prob-conditional" data-i18n="prob_conditional">P(A|B) - Conditional probability</label>
                    </div>
                </div>
            </div>
            
            <!-- äº‹ä»¶Aæ¦‚ç‡ -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="prob_a">Probability of Event A (P(A))</label>
                <input type="number" id="prob-a" step="0.001" min="0" max="1" value="0.5" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                <div class="text-xs text-gray-500 mt-1" data-i18n="prob_note">Enter value between 0 and 1 (e.g. 0.5 for 50%)</div>
            </div>
            
            <!-- äº‹ä»¶Bæ¦‚ç‡ (éƒ¨åˆ†è®¡ç®—ç±»å‹æ˜¾ç¤º) -->
            <div id="prob-b-container">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="prob_b">Probability of Event B (P(B))</label>
                <input type="number" id="prob-b" step="0.001" min="0" max="1" value="0.4" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- è”åˆæ¦‚ç‡ (æ¡ä»¶æ¦‚ç‡ä¸“ç”¨) -->
            <div id="prob-ab-container" class="hidden">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="prob_ab">Probability of A and B (P(Aâˆ©B))</label>
                <input type="number" id="prob-ab" step="0.001" min="0" max="1" value="0.2" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- äº‹ä»¶å…³ç³»é€‰æ‹© -->
            <div id="event-relation-container">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="event_relation">Event Relationship</label>
                <div class="radio-group">
                    <div class="radio-item">
                        <input type="radio" name="event-relation" id="independent" value="independent" checked>
                        <label for="independent" data-i18n="independent">Independent Events</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="event-relation" id="mutually-exclusive" value="mutually-exclusive">
                        <label for="mutually-exclusive" data-i18n="mutually_exclusive">Mutually Exclusive Events</label>
                    </div>
                    <div class="radio-item">
                        <input type="radio" name="event-relation" id="general" value="general">
                        <label for="general" data-i18n="general">General (Not Independent/Exclusive)</label>
                    </div>
                </div>
            </div>
            
            <!-- ç²¾åº¦é€‰æ‹© -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="precision">Precision (decimal places)</label>
                <input type="number" id="prob-precision" min="0" max="6" value="4" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- æ˜¾ç¤ºå…¬å¼ -->
            <div>
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-1">
                    <input type="checkbox" id="show-formula" checked class="rounded">
                    <span data-i18n="show_formula">Show Calculation Formula</span>
                </label>
            </div>
            
            <!-- è®¡ç®—æŒ‰é’® -->
            <button onclick="ProbCalc.calc()" class="w-full bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Calculate Probability</button>
        </div>

        <!-- é”™è¯¯æç¤º -->
        <div id="prob-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- ç»“æœå±•ç¤º -->
        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100">
            <div class="text-sm text-gray-500 mb-2" data-i18n="result">Result</div>
            <div class="prob-result-box">
                <div id="prob-result" class="text-xl font-bold text-blue-800">--</div>
                <div id="prob-percent" class="text-md text-gray-700 mt-2">--%</div>
            </div>
            
            <!-- å…¬å¼å±•ç¤º -->
            <div id="formula-container" class="mt-4">
                <div class="text-sm text-gray-500 mb-2" data-i18n="formula">Formula Used:</div>
                <div id="prob-formula" class="formula-box"></div>
                <div id="prob-calculation" class="mt-2 text-sm text-gray-600"></div>
            </div>
        </div>

        <!-- å¿«é€Ÿç¤ºä¾‹ -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="examples">Quick Examples:</p>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-2 mt-2">
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="ProbCalc.loadExample('and', 0.5, 0.4, 'independent')">P(A and B) (ind)</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="ProbCalc.loadExample('or', 0.5, 0.4, 'mutually-exclusive')">P(A or B) (excl)</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="ProbCalc.loadExample('not', 0.7, 0, '')">P(not A)</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="ProbCalc.loadExample('conditional', 0.5, 0.4, '', 0.2)">P(A|B)</div>
            </div>
        </div>

        <!-- è¯´æ˜ä¿¡æ¯ -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="notes">Notes:</p>
            <ul class="list-disc list-inside mt-2 space-y-1" data-i18n="notes_list">
                <li>Independent events: P(A and B) = P(A) Ã— P(B)</li>
                <li>Mutually exclusive events: P(A or B) = P(A) + P(B), P(A and B) = 0</li>
                <li>General events: P(A or B) = P(A) + P(B) - P(A and B)</li>
                <li>Conditional probability: P(A|B) = P(Aâˆ©B) / P(B)</li>
                <li>Complementary probability: P(not A) = 1 - P(A)</li>
                <li>Probability values range from 0 (impossible) to 1 (certain)</li>
            </ul>
        </div>
    </div>

    <script>
        const ProbCalc = {
            i18n: {
                'en': {
                    title: 'ğŸ² Probability Calculator',
                    calc_type: 'Calculation Type',
                    prob_and: 'P(A and B) - Both events occur',
                    prob_or: 'P(A or B) - Either event occurs',
                    prob_not: 'P(not A) - Complementary event',
                    prob_conditional: 'P(A|B) - Conditional probability',
                    prob_a: 'Probability of Event A (P(A))',
                    prob_b: 'Probability of Event B (P(B))',
                    prob_ab: 'Probability of A and B (P(Aâˆ©B))',
                    prob_note: 'Enter value between 0 and 1 (e.g. 0.5 for 50%)',
                    event_relation: 'Event Relationship',
                    independent: 'Independent Events',
                    mutually_exclusive: 'Mutually Exclusive Events',
                    general: 'General (Not Independent/Exclusive)',
                    precision: 'Precision (decimal places)',
                    show_formula: 'Show Calculation Formula',
                    calculate: 'Calculate Probability',
                    result: 'Result',
                    formula: 'Formula Used:',
                    examples: 'Quick Examples:',
                    notes: 'Notes:',
                    notes_list: `
                        <li>Independent events: P(A and B) = P(A) Ã— P(B)</li>
                        <li>Mutually exclusive events: P(A or B) = P(A) + P(B), P(A and B) = 0</li>
                        <li>General events: P(A or B) = P(A) + P(B) - P(A and B)</li>
                        <li>Conditional probability: P(A|B) = P(Aâˆ©B) / P(B)</li>
                        <li>Complementary probability: P(not A) = 1 - P(A)</li>
                        <li>Probability values range from 0 (impossible) to 1 (certain)</li>
                    `,
                    err_invalid_prob: 'Probability values must be between 0 and 1',
                    err_missing_value: 'Please enter all required values',
                    formula_and_independent: 'P(A âˆ© B) = P(A) Ã— P(B) = {a} Ã— {b} = {result}',
                    formula_and_exclusive: 'P(A âˆ© B) = 0 (mutually exclusive events)',
                    formula_or_independent: 'P(A âˆª B) = P(A) + P(B) - P(A)Ã—P(B) = {a} + {b} - ({a}Ã—{b}) = {result}',
                    formula_or_exclusive: 'P(A âˆª B) = P(A) + P(B) = {a} + {b} = {result}',
                    formula_or_general: 'P(A âˆª B) = P(A) + P(B) - P(Aâˆ©B) = {a} + {b} - {ab} = {result}',
                    formula_not: 'P(not A) = 1 - P(A) = 1 - {a} = {result}',
                    formula_conditional: 'P(A|B) = P(Aâˆ©B) / P(B) = {ab} / {b} = {result}'
                },
                'zh-CN': {
                    title: 'ğŸ² æ¦‚ç‡è®¡ç®—å™¨',
                    calc_type: 'è®¡ç®—ç±»å‹',
                    prob_and: 'P(A and B) - ä¸¤ä¸ªäº‹ä»¶éƒ½å‘ç”Ÿ',
                    prob_or: 'P(A or B) - ä»»ä¸€äº‹ä»¶å‘ç”Ÿ',
                    prob_not: 'P(not A) - è¡¥é›†äº‹ä»¶',
                    prob_conditional: 'P(A|B) - æ¡ä»¶æ¦‚ç‡',
                    prob_a: 'äº‹ä»¶Açš„æ¦‚ç‡ (P(A))',
                    prob_b: 'äº‹ä»¶Bçš„æ¦‚ç‡ (P(B))',
                    prob_ab: 'Aå’ŒBåŒæ—¶å‘ç”Ÿçš„æ¦‚ç‡ (P(Aâˆ©B))',
                    prob_note: 'è¾“å…¥0åˆ°1ä¹‹é—´çš„å€¼ï¼ˆä¾‹å¦‚50%è¾“å…¥0.5ï¼‰',
                    event_relation: 'äº‹ä»¶å…³ç³»',
                    independent: 'ç‹¬ç«‹äº‹ä»¶',
                    mutually_exclusive: 'äº’æ–¥äº‹ä»¶',
                    general: 'ä¸€èˆ¬äº‹ä»¶ï¼ˆéç‹¬ç«‹/äº’æ–¥ï¼‰',
                    precision: 'ç²¾åº¦ï¼ˆå°æ•°ä½æ•°ï¼‰',
                    show_formula: 'æ˜¾ç¤ºè®¡ç®—å…¬å¼',
                    calculate: 'è®¡ç®—æ¦‚ç‡',
                    result: 'ç»“æœ',
                    formula: 'ä½¿ç”¨å…¬å¼ï¼š',
                    examples: 'å¿«é€Ÿç¤ºä¾‹ï¼š',
                    notes: 'æ³¨æ„ï¼š',
                    notes_list: `
                        <li>ç‹¬ç«‹äº‹ä»¶ï¼šP(A and B) = P(A) Ã— P(B)</li>
                        <li>äº’æ–¥äº‹ä»¶ï¼šP(A or B) = P(A) + P(B)ï¼ŒP(A and B) = 0</li>
                        <li>ä¸€èˆ¬äº‹ä»¶ï¼šP(A or B) = P(A) + P(B) - P(A and B)</li>
                        <li>æ¡ä»¶æ¦‚ç‡ï¼šP(A|B) = P(Aâˆ©B) / P(B)</li>
                        <li>è¡¥é›†æ¦‚ç‡ï¼šP(not A) = 1 - P(A)</li>
                        <li>æ¦‚ç‡å€¼èŒƒå›´ä»0ï¼ˆä¸å¯èƒ½ï¼‰åˆ°1ï¼ˆå¿…ç„¶ï¼‰</li>
                    `,
                    err_invalid_prob: 'æ¦‚ç‡å€¼å¿…é¡»åœ¨0åˆ°1ä¹‹é—´',
                    err_missing_value: 'è¯·è¾“å…¥æ‰€æœ‰å¿…å¡«å€¼',
                    formula_and_independent: 'P(A âˆ© B) = P(A) Ã— P(B) = {a} Ã— {b} = {result}',
                    formula_and_exclusive: 'P(A âˆ© B) = 0ï¼ˆäº’æ–¥äº‹ä»¶ï¼‰',
                    formula_or_independent: 'P(A âˆª B) = P(A) + P(B) - P(A)Ã—P(B) = {a} + {b} - ({a}Ã—{b}) = {result}',
                    formula_or_exclusive: 'P(A âˆª B) = P(A) + P(B) = {a} + {b} = {result}',
                    formula_or_general: 'P(A âˆª B) = P(A) + P(B) - P(Aâˆ©B) = {a} + {b} - {ab} = {result}',
                    formula_not: 'P(not A) = 1 - P(A) = 1 - {a} = {result}',
                    formula_conditional: 'P(A|B) = P(Aâˆ©B) / P(B) = {ab} / {b} = {result}'
                },
                'zh-TW': {
                    title: 'ğŸ² æ©Ÿç‡è¨ˆç®—å™¨',
                    calc_type: 'è¨ˆç®—é¡å‹',
                    prob_and: 'P(A and B) - å…©å€‹äº‹ä»¶éƒ½ç™¼ç”Ÿ',
                    prob_or: 'P(A or B) - ä»»ä¸€äº‹ä»¶ç™¼ç”Ÿ',
                    prob_not: 'P(not A) - è£œé›†äº‹ä»¶',
                    prob_conditional: 'P(A|B) - æ¢ä»¶æ©Ÿç‡',
                    prob_a: 'äº‹ä»¶Açš„æ©Ÿç‡ (P(A))',
                    prob_b: 'äº‹ä»¶Bçš„æ©Ÿç‡ (P(B))',
                    prob_ab: 'Aå’ŒBåŒæ™‚ç™¼ç”Ÿçš„æ©Ÿç‡ (P(Aâˆ©B))',
                    prob_note: 'è¼¸å…¥0åˆ°1ä¹‹é–“çš„å€¼ï¼ˆä¾‹å¦‚50%è¼¸å…¥0.5ï¼‰',
                    event_relation: 'äº‹ä»¶é—œä¿‚',
                    independent: 'ç¨ç«‹äº‹ä»¶',
                    mutually_exclusive: 'äº’æ–¥äº‹ä»¶',
                    general: 'ä¸€èˆ¬äº‹ä»¶ï¼ˆéç¨ç«‹/äº’æ–¥ï¼‰',
                    precision: 'ç²¾åº¦ï¼ˆå°æ•¸ä½æ•¸ï¼‰',
                    show_formula: 'é¡¯ç¤ºè¨ˆç®—å…¬å¼',
                    calculate: 'è¨ˆç®—æ©Ÿç‡',
                    result: 'çµæœ',
                    formula: 'ä½¿ç”¨å…¬å¼ï¼š',
                    examples: 'å¿«é€Ÿç¤ºä¾‹ï¼š',
                    notes: 'æ³¨æ„ï¼š',
                    notes_list: `
                        <li>ç¨ç«‹äº‹ä»¶ï¼šP(A and B) = P(A) Ã— P(B)</li>
                        <li>äº’æ–¥äº‹ä»¶ï¼šP(A or B) = P(A) + P(B)ï¼ŒP(A and B) = 0</li>
                        <li>ä¸€èˆ¬äº‹ä»¶ï¼šP(A or B) = P(A) + P(B) - P(A and B)</li>
                        <li>æ¢ä»¶æ©Ÿç‡ï¼šP(A|B) = P(Aâˆ©B) / P(B)</li>
                        <li>è£œé›†æ©Ÿç‡ï¼šP(not A) = 1 - P(A)</li>
                        <li>æ©Ÿç‡å€¼ç¯„åœå¾0ï¼ˆä¸å¯èƒ½ï¼‰åˆ°1ï¼ˆå¿…ç„¶ï¼‰</li>
                    `,
                    err_invalid_prob: 'æ©Ÿç‡å€¼å¿…é ˆåœ¨0åˆ°1ä¹‹é–“',
                    err_missing_value: 'è«‹è¼¸å…¥æ‰€æœ‰å¿…å¡«å€¼',
                    formula_and_independent: 'P(A âˆ© B) = P(A) Ã— P(B) = {a} Ã— {b} = {result}',
                    formula_and_exclusive: 'P(A âˆ© B) = 0ï¼ˆäº’æ–¥äº‹ä»¶ï¼‰',
                    formula_or_independent: 'P(A âˆª B) = P(A) + P(B) - P(A)Ã—P(B) = {a} + {b} - ({a}Ã—{b}) = {result}',
                    formula_or_exclusive: 'P(A âˆª B) = P(A) + P(B) = {a} + {b} = {result}',
                    formula_or_general: 'P(A âˆª B) = P(A) + P(B) - P(Aâˆ©B) = {a} + {b} - {ab} = {result}',
                    formula_not: 'P(not A) = 1 - P(A) = 1 - {a} = {result}',
                    formula_conditional: 'P(A|B) = P(Aâˆ©B) / P(B) = {ab} / {b} = {result}'
                },
                'ja': {
                    title: 'ğŸ² ç¢ºç‡è¨ˆç®—ãƒ„ãƒ¼ãƒ«',
                    calc_type: 'è¨ˆç®—ã‚¿ã‚¤ãƒ—',
                    prob_and: 'P(A and B) - ä¸¡æ–¹ã®äº‹è±¡ãŒç™ºç”Ÿ',
                    prob_or: 'P(A or B) - ã©ã¡ã‚‰ã‹ã®äº‹è±¡ãŒç™ºç”Ÿ',
                    prob_not: 'P(not A) - è£œäº‹è±¡',
                    prob_conditional: 'P(A|B) - æ¡ä»¶ä»˜ãç¢ºç‡',
                    prob_a: 'äº‹è±¡Aã®ç¢ºç‡ (P(A))',
                    prob_b: 'äº‹è±¡Bã®ç¢ºç‡ (P(B))',
                    prob_ab: 'Aã¨BãŒåŒæ™‚ã«ç™ºç”Ÿã™ã‚‹ç¢ºç‡ (P(Aâˆ©B))',
                    prob_note: '0ã‹ã‚‰1ã®é–“ã®å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ50%ã®å ´åˆã¯0.5ï¼‰',
                    event_relation: 'äº‹è±¡ã®é–¢ä¿‚',
                    independent: 'ç‹¬ç«‹äº‹è±¡',
                    mutually_exclusive: 'ç›¸äº’ã«æ’ä»–çš„ãªäº‹è±¡',
                    general: 'ä¸€èˆ¬çš„ãªäº‹è±¡ï¼ˆç‹¬ç«‹/æ’ä»–çš„ã§ã¯ãªã„ï¼‰',
                    precision: 'ç²¾åº¦ï¼ˆå°æ•°æ¡æ•°ï¼‰',
                    show_formula: 'è¨ˆç®—å¼ã‚’è¡¨ç¤º',
                    calculate: 'ç¢ºç‡ã‚’è¨ˆç®—',
                    result: 'çµæœ',
                    formula: 'ä½¿ç”¨ã—ãŸå…¬å¼ï¼š',
                    examples: 'ã‚¯ã‚¤ãƒƒã‚¯ã‚µãƒ³ãƒ—ãƒ«ï¼š',
                    notes: 'æ³¨æ„ï¼š',
                    notes_list: `
                        <li>ç‹¬ç«‹äº‹è±¡ï¼šP(A and B) = P(A) Ã— P(B)</li>
                        <li>ç›¸äº’ã«æ’ä»–çš„ãªäº‹è±¡ï¼šP(A or B) = P(A) + P(B)ã€P(A and B) = 0</li>
                        <li>ä¸€èˆ¬çš„ãªäº‹è±¡ï¼šP(A or B) = P(A) + P(B) - P(A and B)</li>
                        <li>æ¡ä»¶ä»˜ãç¢ºç‡ï¼šP(A|B) = P(Aâˆ©B) / P(B)</li>
                        <li>è£œäº‹è±¡ã®ç¢ºç‡ï¼šP(not A) = 1 - P(A)</li>
                        <li>ç¢ºç‡å€¤ã®ç¯„å›²ã¯0ï¼ˆä¸å¯èƒ½ï¼‰ã‹ã‚‰1ï¼ˆç¢ºå®Ÿï¼‰</li>
                    `,
                    err_invalid_prob: 'ç¢ºç‡å€¤ã¯0ã‹ã‚‰1ã®é–“ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“',
                    err_missing_value: 'ã™ã¹ã¦ã®å¿…é ˆå€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                    formula_and_independent: 'P(A âˆ© B) = P(A) Ã— P(B) = {a} Ã— {b} = {result}',
                    formula_and_exclusive: 'P(A âˆ© B) = 0ï¼ˆç›¸äº’ã«æ’ä»–çš„ãªäº‹è±¡ï¼‰',
                    formula_or_independent: 'P(A âˆª B) = P(A) + P(B) - P(A)Ã—P(B) = {a} + {b} - ({a}Ã—{b}) = {result}',
                    formula_or_exclusive: 'P(A âˆª B) = P(A) + P(B) = {a} + {b} = {result}',
                    formula_or_general: 'P(A âˆª B) = P(A) + P(B) - P(Aâˆ©B) = {a} + {b} - {ab} = {result}',
                    formula_not: 'P(not A) = 1 - P(A) = 1 - {a} = {result}',
                    formula_conditional: 'P(A|B) = P(Aâˆ©B) / P(B) = {ab} / {b} = {result}'
                },
                'ru': {
                    title: 'ğŸ² ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸',
                    calc_type: 'Ğ¢Ğ¸Ğ¿ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°',
                    prob_and: 'P(A and B) - ĞĞ±Ğ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‚',
                    prob_or: 'P(A or B) - ĞŸÑ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ»ÑĞ±Ğ¾Ğµ Ğ¸Ğ· ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹',
                    prob_not: 'P(not A) - Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ',
                    prob_conditional: 'P(A|B) - Ğ£ÑĞ»Ğ¾Ğ²Ğ½Ğ°Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ',
                    prob_a: 'Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ A (P(A))',
                    prob_b: 'Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ B (P(B))',
                    prob_ab: 'Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ A Ğ¸ B (P(Aâˆ©B))',
                    prob_note: 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚ 0 Ğ´Ğ¾ 1 (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, 0.5 Ğ´Ğ»Ñ 50%)',
                    event_relation: 'Ğ¡Ğ²ÑĞ·ÑŒ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹',
                    independent: 'ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ',
                    mutually_exclusive: 'Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ¸ÑĞºĞ»ÑÑ‡Ğ°ÑÑ‰Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ',
                    general: 'ĞĞ±Ñ‰Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ (Ğ½Ğµ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ/Ğ¸ÑĞºĞ»ÑÑ‡Ğ°ÑÑ‰Ğ¸Ğµ)',
                    precision: 'Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ (Ğ´ĞµÑÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ·Ğ½Ğ°ĞºĞ¸)',
                    show_formula: 'ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ñƒ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°',
                    calculate: 'Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ',
                    result: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚',
                    formula: 'Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ°:',
                    examples: 'Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹:',
                    notes: 'ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:',
                    notes_list: `
                        <li>ĞĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ: P(A and B) = P(A) Ã— P(B)</li>
                        <li>Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ¸ÑĞºĞ»ÑÑ‡Ğ°ÑÑ‰Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ: P(A or B) = P(A) + P(B), P(A and B) = 0</li>
                        <li>ĞĞ±Ñ‰Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ: P(A or B) = P(A) + P(B) - P(A and B)</li>
                        <li>Ğ£ÑĞ»Ğ¾Ğ²Ğ½Ğ°Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ: P(A|B) = P(Aâˆ©B) / P(B)</li>
                        <li>Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ: P(not A) = 1 - P(A)</li>
                        <li>Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ² Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğµ Ğ¾Ñ‚ 0 (Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾) Ğ´Ğ¾ 1 (Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾)</li>
                    `,
                    err_invalid_prob: 'Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ² Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğµ Ğ¾Ñ‚ 0 Ğ´Ğ¾ 1',
                    err_missing_value: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²ÑĞµ Ñ‚Ñ€ĞµĞ±ÑƒĞµĞ¼Ñ‹Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ',
                    formula_and_independent: 'P(A âˆ© B) = P(A) Ã— P(B) = {a} Ã— {b} = {result}',
                    formula_and_exclusive: 'P(A âˆ© B) = 0 (Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ¸ÑĞºĞ»ÑÑ‡Ğ°ÑÑ‰Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ)',
                    formula_or_independent: 'P(A âˆª B) = P(A) + P(B) - P(A)Ã—P(B) = {a} + {b} - ({a}Ã—{b}) = {result}',
                    formula_or_exclusive: 'P(A âˆª B) = P(A) + P(B) = {a} + {b} = {result}',
                    formula_or_general: 'P(A âˆª B) = P(A) + P(B) - P(Aâˆ©B) = {a} + {b} - {ab} = {result}',
                    formula_not: 'P(not A) = 1 - P(A) = 1 - {a} = {result}',
                    formula_conditional: 'P(A|B) = P(Aâˆ©B) / P(B) = {ab} / {b} = {result}'
                }
            },

            init: () => {
                // è®¾ç½®é»˜è®¤å€¼
                document.getElementById('prob-a').value = '0.5';
                document.getElementById('prob-b').value = '0.4';
                document.getElementById('prob-ab').value = '0.2';
                document.getElementById('prob-precision').value = '4';
                
                // ç›‘å¬è®¡ç®—ç±»å‹å˜åŒ–
                document.querySelectorAll('input[name="prob-type"]').forEach(radio => {
                    radio.addEventListener('change', ProbCalc.toggleInputs);
                });
                ProbCalc.toggleInputs();
                
                // ç›‘å¬å…¬å¼æ˜¾ç¤ºåˆ‡æ¢
                document.getElementById('show-formula').addEventListener('change', () => {
                    const formulaContainer = document.getElementById('formula-container');
                    formulaContainer.style.display = document.getElementById('show-formula').checked ? 'block' : 'none';
                });
            },

            toggleInputs: () => {
                const type = document.querySelector('input[name="prob-type"]:checked').value;
                const probBContainer = document.getElementById('prob-b-container');
                const probABContainer = document.getElementById('prob-ab-container');
                const relationContainer = document.getElementById('event-relation-container');
                
                // é‡ç½®æ˜¾ç¤ºçŠ¶æ€
                probBContainer.classList.remove('hidden');
                probABContainer.classList.remove('hidden');
                relationContainer.classList.remove('hidden');
                
                switch (type) {
                    case 'not':
                        probBContainer.classList.add('hidden');
                        probABContainer.classList.add('hidden');
                        relationContainer.classList.add('hidden');
                        break;
                    case 'conditional':
                        probABContainer.classList.remove('hidden');
                        relationContainer.classList.add('hidden');
                        break;
                    case 'and':
                    case 'or':
                        probABContainer.classList.add('hidden');
                        relationContainer.classList.remove('hidden');
                        break;
                }
                
                // æ¸…ç©ºé”™è¯¯æç¤º
                ProbCalc.clearError();
            },

            loadExample: (type, a, b, relation, ab = 0.2) => {
                // è®¾ç½®è®¡ç®—ç±»å‹
                document.querySelector(`input[name="prob-type"][value="${type}"]`).checked = true;
                
                // è®¾ç½®æ¦‚ç‡å€¼
                document.getElementById('prob-a').value = a;
                if (b) document.getElementById('prob-b').value = b;
                if (ab) document.getElementById('prob-ab').value = ab;
                
                // è®¾ç½®äº‹ä»¶å…³ç³»
                if (relation) {
                    document.querySelector(`input[name="event-relation"][value="${relation}"]`).checked = true;
                }
                
                // åˆ‡æ¢è¾“å…¥æ¡†æ˜¾ç¤º
                ProbCalc.toggleInputs();
                
                // è®¡ç®—ç»“æœ
                ProbCalc.calc();
            },

            changeLang: () => {
                const lang = document.getElementById('prob-lang').value;
                const texts = ProbCalc.i18n[lang];
                
                // æ›´æ–°æ™®é€šæ–‡æœ¬
                document.querySelectorAll('[data-id="probability_calc"] [data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) {
                        if (key === 'notes_list') {
                            el.innerHTML = texts[key];
                        } else {
                            el.innerText = texts[key];
                        }
                    }
                });
                
                // æ›´æ–°å•é€‰æ¡†æ ‡ç­¾
                document.querySelectorAll('.radio-item label').forEach(label => {
                    const key = label.getAttribute('data-i18n');
                    if (texts[key]) label.innerText = texts[key];
                });
            },

            showError: (message) => {
                const errorEl = document.getElementById('prob-error');
                errorEl.innerText = message;
                errorEl.classList.remove('hidden');
            },

            clearError: () => {
                const errorEl = document.getElementById('prob-error');
                errorEl.classList.add('hidden');
                errorEl.innerText = '';
            },

            calc: () => {
                const lang = document.getElementById('prob-lang').value;
                const texts = ProbCalc.i18n[lang];
                const precision = parseInt(document.getElementById('prob-precision').value) || 4;
                
                ProbCalc.clearError();
                
                try {
                    // è·å–è¾“å…¥å€¼
                    const probA = parseFloat(document.getElementById('prob-a').value);
                    const probB = parseFloat(document.getElementById('prob-b').value);
                    const probAB = parseFloat(document.getElementById('prob-ab').value);
                    const type = document.querySelector('input[name="prob-type"]:checked').value;
                    const relation = document.querySelector('input[name="event-relation"]:checked')?.value;
                    
                    // éªŒè¯æ¦‚ç‡å€¼èŒƒå›´
                    if (isNaN(probA) || probA < 0 || probA > 1) {
                        throw new Error(texts.err_invalid_prob);
                    }
                    
                    let result, formula, calculation;
                    
                    switch (type) {
                        case 'and':
                            // P(A and B) è®¡ç®—
                            if (isNaN(probB) || probB < 0 || probB > 1) {
                                throw new Error(texts.err_invalid_prob);
                            }
                            
                            if (relation === 'independent') {
                                result = probA * probB;
                                formula = texts.formula_and_independent
                                    .replace('{a}', probA)
                                    .replace('{b}', probB)
                                    .replace('{result}', result.toFixed(precision));
                                calculation = `${probA} Ã— ${probB} = ${result.toFixed(precision)}`;
                            } else if (relation === 'mutually-exclusive') {
                                result = 0;
                                formula = texts.formula_and_exclusive;
                                calculation = 'Mutually exclusive events cannot occur together';
                            } else {
                                // ä¸€èˆ¬äº‹ä»¶éœ€è¦æ‰‹åŠ¨è¾“å…¥P(Aâˆ©B)
                                if (isNaN(probAB) || probAB < 0 || probAB > 1) {
                                    throw new Error(texts.err_invalid_prob);
                                }
                                result = probAB;
                                formula = `P(A âˆ© B) = ${probAB}`;
                                calculation = `Manual input: ${probAB}`;
                            }
                            break;
                            
                        case 'or':
                            // P(A or B) è®¡ç®—
                            if (isNaN(probB) || probB < 0 || probB > 1) {
                                throw new Error(texts.err_invalid_prob);
                            }
                            
                            if (relation === 'independent') {
                                result = probA + probB - (probA * probB);
                                formula = texts.formula_or_independent
                                    .replace('{a}', probA)
                                    .replace('{b}', probB)
                                    .replace('{result}', result.toFixed(precision));
                                calculation = `${probA} + ${probB} - (${probA} Ã— ${probB}) = ${result.toFixed(precision)}`;
                            } else if (relation === 'mutually-exclusive') {
                                result = probA + probB;
                                formula = texts.formula_or_exclusive
                                    .replace('{a}', probA)
                                    .replace('{b}', probB)
                                    .replace('{result}', result.toFixed(precision));
                                calculation = `${probA} + ${probB} = ${result.toFixed(precision)}`;
                            } else {
                                // ä¸€èˆ¬äº‹ä»¶
                                if (isNaN(probAB) || probAB < 0 || probAB > 1) {
                                    throw new Error(texts.err_invalid_prob);
                                }
                                result = probA + probB - probAB;
                                formula = texts.formula_or_general
                                    .replace('{a}', probA)
                                    .replace('{b}', probB)
                                    .replace('{ab}', probAB)
                                    .replace('{result}', result.toFixed(precision));
                                calculation = `${probA} + ${probB} - ${probAB} = ${result.toFixed(precision)}`;
                            }
                            break;
                            
                        case 'not':
                            // P(not A) è®¡ç®—
                            result = 1 - probA;
                            formula = texts.formula_not
                                .replace('{a}', probA)
                                .replace('{result}', result.toFixed(precision));
                            calculation = `1 - ${probA} = ${result.toFixed(precision)}`;
                            break;
                            
                        case 'conditional':
                            // P(A|B) æ¡ä»¶æ¦‚ç‡
                            if (isNaN(probB) || probB < 0 || probB > 1) {
                                throw new Error(texts.err_invalid_prob);
                            }
                            if (isNaN(probAB) || probAB < 0 || probAB > 1) {
                                throw new Error(texts.err_invalid_prob);
                            }
                            if (probB === 0) {
                                throw new Error('P(B) cannot be zero for conditional probability');
                            }
                            
                            result = probAB / probB;
                            formula = texts.formula_conditional
                                .replace('{ab}', probAB)
                                .replace('{b}', probB)
                                .replace('{result}', result.toFixed(precision));
                            calculation = `${probAB} / ${probB} = ${result.toFixed(precision)}`;
                            break;
                    }
                    
                    // éªŒè¯ç»“æœèŒƒå›´
                    if (result < 0 || result > 1) {
                        throw new Error('Calculated probability is outside valid range (0-1)');
                    }
                    
                    // æ ¼å¼åŒ–ç»“æœ
                    const formattedResult = result.toFixed(precision);
                    const percentResult = (result * 100).toFixed(2);
                    
                    // æ˜¾ç¤ºç»“æœ
                    document.getElementById('prob-result').innerText = `P = ${formattedResult}`;
                    document.getElementById('prob-percent').innerText = `${percentResult}%`;
                    
                    // æ˜¾ç¤ºå…¬å¼å’Œè®¡ç®—è¿‡ç¨‹
                    if (document.getElementById('show-formula').checked) {
                        document.getElementById('prob-formula').innerText = formula;
                        document.getElementById('prob-calculation').innerText = calculation;
                    }
                    
                } catch (e) {
                    ProbCalc.showError(e.message);
                    document.getElementById('prob-result').innerText = '--';
                    document.getElementById('prob-percent').innerText = '--%';
                    document.getElementById('prob-formula').innerText = '';
                    document.getElementById('prob-calculation').innerText = '';
                }
            }
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', ProbCalc.init);
        
        // è‡ªåŠ¨åŒ¹é…æµè§ˆå™¨è¯­è¨€
        document.addEventListener('DOMContentLoaded', () => {
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('prob-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    ProbCalc.changeLang();
                }
            }
        });
    </script>


    <div id="related-tools-container"></div>
    <script src="../../scripts/related.js"></script>
    
</body>
</html>