<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ring Size Converter Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fdf4ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .size-box { @apply bg-fuchsia-50 p-2 rounded text-center border border-fuchsia-100; }
        .size-val { @apply text-xl font-bold text-fuchsia-800; }
        .size-lbl { @apply text-xs text-gray-500 uppercase; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="ring_calc" 
         data-category="tools" 
         data-title="Ring Size Converter" 
         data-icon="üíç">
        
        <div class="absolute top-4 right-4">
            <select id="rc-lang" onchange="RingCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üíç Ring Size Converter</h2>

        <div class="mb-6 bg-gray-50 p-4 rounded-lg">
            <div class="flex gap-4 mb-2">
                <label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="rc-mode" value="dia" checked class="text-fuchsia-600 focus:ring-fuchsia-500" onchange="RingCalc.updateMode()">
                    <span class="ml-2 text-sm text-gray-700" data-i18n="mode_dia">Diameter (mm)</span>
                </label>
                <label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="rc-mode" value="circ" class="text-fuchsia-600 focus:ring-fuchsia-500" onchange="RingCalc.updateMode()">
                    <span class="ml-2 text-sm text-gray-700" data-i18n="mode_circ">Circumference (mm)</span>
                </label>
            </div>
            
            <div class="relative">
                <input type="range" id="rc-slider" min="14" max="23" step="0.1" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-fuchsia-600 mb-3" oninput="RingCalc.convert('slider')">
                <div class="flex items-center justify-between">
                    <input type="number" id="rc-input" class="w-24 p-2 border rounded text-center font-bold text-fuchsia-700 focus:ring-2 focus:ring-fuchsia-500 outline-none" value="16.5" oninput="RingCalc.convert('input')">
                    <span class="text-sm text-gray-500">mm</span>
                </div>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-3">
            <div class="size-box">
                <div id="res-us" class="size-val">6</div>
                <div class="size-lbl">US / Canada</div>
            </div>
            <div class="size-box">
                <div id="res-uk" class="size-val">L 1/2</div>
                <div class="size-lbl">UK / Australia</div>
            </div>
            <div class="size-box">
                <div id="res-eu" class="size-val">52</div>
                <div class="size-lbl">Europe (ISO)</div>
            </div>
            <div class="size-box">
                <div id="res-jp" class="size-val">12</div>
                <div class="size-lbl">Japan / China</div>
            </div>
        </div>
        
        <p class="text-xs text-center text-gray-400 mt-4" data-i18n="note">Measurements are approximate. Always verify with a jeweler.</p>
    </div>

    <script>
        const RingCalc = {
            mode: 'dia',
            i18n: {
                'en': { title: 'üíç Ring Size Converter', mode_dia: 'Diameter (mm)', mode_circ: 'Circumference (mm)', note: 'Measurements are approximate. Always verify with a jeweler.' },
                'zh-CN': { title: 'üíç ÊàíÊåáÂ∞∫ÂØ∏ÂØπÁÖßË°®', mode_dia: 'Áõ¥ÂæÑ (mm)', mode_circ: 'Âë®Èïø (mm)', note: 'Â∞∫ÂØ∏‰ªÖ‰æõÂèÇËÄÉÔºåËØ∑‰ª•Áè†ÂÆùÂ∫óÊµãÈáè‰∏∫ÂáÜ„ÄÇ' },
                'zh-TW': { title: 'üíç ÊàíÊåáÂ∞∫ÂØ∏Â∞çÁÖßË°®', mode_dia: 'Áõ¥Âæë (mm)', mode_circ: 'Âë®Èï∑ (mm)', note: 'Â∞∫ÂØ∏ÂÉÖ‰æõÂèÉËÄÉÔºåË´ã‰ª•Áè†ÂØ∂Â∫óÊ∏¨ÈáèÁÇ∫Ê∫ñ„ÄÇ' },
                'ja': { title: 'üíç ÊåáËº™„Çµ„Ç§„Ç∫ÊèõÁÆó', mode_dia: 'Áõ¥ÂæÑ (mm)', mode_circ: 'ÂÜÜÂë® (mm)', note: '„Çµ„Ç§„Ç∫„ÅØÁõÆÂÆâ„Åß„Åô„ÄÇÂ∞ÇÈñÄÂ∫ó„ÅßÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ' },
                'ru': { title: 'üíç –†–∞–∑–º–µ—Ä—ã –∫–æ–ª–µ—Ü', mode_dia: '–î–∏–∞–º–µ—Ç—Ä (–º–º)', mode_circ: '–û–∫—Ä—É–∂–Ω–æ—Å—Ç—å (–º–º)', note: '–†–∞–∑–º–µ—Ä—ã –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–µ.' },
                'es': { title: 'üíç Tallas de Anillo', mode_dia: 'Di√°metro (mm)', mode_circ: 'Circunferencia (mm)', note: 'Las medidas son aproximadas.' }
            },

            // Simplified Lookup Table (Diameter mm -> Sizes)
            // US, UK, EU, JP/CN
            sizes: [
                { d: 14.1, us: '3', uk: 'F', eu: '44', jp: '4' },
                { d: 14.5, us: '3.5', uk: 'G', eu: '45', jp: '5' },
                { d: 14.9, us: '4', uk: 'H', eu: '47', jp: '7' },
                { d: 15.3, us: '4.5', uk: 'I', eu: '48', jp: '8' },
                { d: 15.7, us: '5', uk: 'J 1/2', eu: '49', jp: '9' },
                { d: 16.1, us: '5.5', uk: 'K 1/2', eu: '51', jp: '10' },
                { d: 16.5, us: '6', uk: 'L 1/2', eu: '52', jp: '12' },
                { d: 16.9, us: '6.5', uk: 'M 1/2', eu: '53', jp: '13' },
                { d: 17.3, us: '7', uk: 'N 1/2', eu: '54', jp: '14' },
                { d: 17.7, us: '7.5', uk: 'O 1/2', eu: '56', jp: '15' },
                { d: 18.1, us: '8', uk: 'P 1/2', eu: '57', jp: '16' },
                { d: 18.5, us: '8.5', uk: 'Q 1/2', eu: '58', jp: '17' },
                { d: 19.0, us: '9', uk: 'R 1/2', eu: '60', jp: '18' },
                { d: 19.4, us: '9.5', uk: 'S 1/2', eu: '61', jp: '19' },
                { d: 19.8, us: '10', uk: 'T 1/2', eu: '62', jp: '20' },
                { d: 20.2, us: '10.5', uk: 'U 1/2', eu: '63', jp: '22' },
                { d: 20.6, us: '11', uk: 'V 1/2', eu: '65', jp: '23' },
                { d: 21.0, us: '11.5', uk: 'W 1/2', eu: '66', jp: '24' },
                { d: 21.4, us: '12', uk: 'Y', eu: '67', jp: '25' },
                { d: 21.8, us: '12.5', uk: 'Z', eu: '69', jp: '26' },
                { d: 22.2, us: '13', uk: 'Z+1', eu: '70', jp: '27' }
            ],

            changeLang: () => {
                const lang = document.getElementById('rc-lang').value;
                const texts = RingCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="ring_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
            },

            updateMode: () => {
                RingCalc.mode = document.querySelector('input[name="rc-mode"]:checked').value;
                const slider = document.getElementById('rc-slider');
                const currentInput = parseFloat(document.getElementById('rc-input').value);
                
                if (RingCalc.mode === 'dia') {
                    // Switch to Dia range
                    slider.min = 14; slider.max = 23; slider.step = 0.1;
                    // approximate conv
                    const dia = currentInput / Math.PI; // assuming was circ
                    // If it was already dia-like range, keep it, else convert
                    if (currentInput > 40) document.getElementById('rc-input').value = dia.toFixed(1);
                } else {
                    // Switch to Circ range
                    slider.min = 44; slider.max = 72; slider.step = 1;
                    const circ = currentInput * Math.PI;
                    if (currentInput < 30) document.getElementById('rc-input').value = circ.toFixed(1);
                }
                RingCalc.convert('input');
            },

            convert: (source) => {
                let val = parseFloat(document.getElementById(source === 'slider' ? 'rc-slider' : 'rc-input').value);
                if (isNaN(val)) return;

                // Sync controls
                if (source === 'slider') document.getElementById('rc-input').value = val;
                else document.getElementById('rc-slider').value = val;

                // Normalize to Diameter for lookup
                let dia = val;
                if (RingCalc.mode === 'circ') {
                    dia = val / Math.PI;
                }

                // Find closest match
                let bestMatch = RingCalc.sizes[0];
                let minDiff = Math.abs(dia - RingCalc.sizes[0].d);

                for (let s of RingCalc.sizes) {
                    let diff = Math.abs(dia - s.d);
                    if (diff < minDiff) {
                        minDiff = diff;
                        bestMatch = s;
                    }
                }

                document.getElementById('res-us').innerText = bestMatch.us;
                document.getElementById('res-uk').innerText = bestMatch.uk;
                document.getElementById('res-eu').innerText = bestMatch.eu;
                document.getElementById('res-jp').innerText = bestMatch.jp;
            }
        };
        // Init
        RingCalc.convert('slider');
    </script>
</body>
</html>