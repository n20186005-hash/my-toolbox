<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Factorial Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="factorial_calculator">
    <meta name="category" content="Math">
    <meta name="icon" content="❏">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Factorial Calculator">
    <meta name="description" content="Calculate the factorial of a number (n!) quickly and easily.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="阶乘计算器">
    <meta name="lang-description-zh-CN" content="快速轻松地计算一个数的阶乘(n!)。">
    
    <meta name="lang-title-zh-TW" content="階乘計算器">
    <meta name="lang-description-zh-TW" content="快速輕鬆地計算一個數的階乘(n!)。">
    
    <meta name="lang-title-ja" content="階乗計算機">
    <meta name="lang-description-ja" content="数値の階乗(n!)をすばやく簡単に計算します。">
    
    <meta name="lang-title-ru" content="Калькулятор факториала">
    <meta name="lang-description-ru" content="Быстро и легко вычислить факториал числа (n!)。">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .result-area { margin-top: 20px; padding: 15px; background: #e8f4f8; border-radius: 8px; }
        input[type="number"], button { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .result-value { font-size: 1.2rem; font-weight: 500; word-break: break-all; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="factorial_calculator" 
         data-category="calculators" 
         data-title="Factorial Calculator" 
         data-icon="❏">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="factorial-lang" onchange="FactorialCalculator.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">❏ Factorial Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- 输入区域 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="enter_number">Enter a non-negative integer</label>
                <div class="flex gap-2">
                    <input type="number" id="factorial-number" min="0" max="170" class="flex-1 p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0">
                    <button onclick="FactorialCalculator.calculate()" class="bg-green-600 text-white py-2 px-4 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Calculate</button>
                </div>
                <p class="text-xs text-gray-500 mt-1" data-i18n="note_max">Maximum value: 170 (due to JavaScript number limitations)</p>
            </div>
            
            <!-- 操作按钮 -->
            <div class="flex gap-2">
                <button onclick="FactorialCalculator.clearValue()" class="flex-1 bg-gray-600 text-white py-2 rounded font-bold hover:bg-gray-700 transition" data-i18n="clear">Clear</button>
            </div>
        </div>

        <!-- 错误提示 -->
        <div id="factorial-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- 结果展示 -->
        <div id="factorial-result" class="hidden">
            <div class="text-sm text-gray-500 mb-2" data-i18n="result">Result</div>
            <div class="result-area">
                <div class="result-value" id="factorial-value"></div>
            </div>
        </div>

        <!-- 说明信息 -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="what_is_factorial">What is a factorial?</p>
            <p class="mt-2" data-i18n="factorial_definition">The factorial of a non-negative integer n, denoted by n!, is the product of all positive integers less than or equal to n. For example, 5! = 5 × 4 × 3 × 2 × 1 = 120.</p>
            <p class="mt-2" data-i18n="factorial_zero">By definition, 0! = 1.</p>
        </div>
    </div>

    <script>
        const FactorialCalculator = {
            i18n: {
                'en': {
                    title: '❏ Factorial Calculator',
                    enter_number: 'Enter a non-negative integer',
                    calculate: 'Calculate',
                    clear: 'Clear',
                    result: 'Result',
                    note_max: 'Maximum value: 170 (due to JavaScript number limitations)',
                    what_is_factorial: 'What is a factorial?',
                    factorial_definition: 'The factorial of a non-negative integer n, denoted by n!, is the product of all positive integers less than or equal to n. For example, 5! = 5 × 4 × 3 × 2 × 1 = 120.',
                    factorial_zero: 'By definition, 0! = 1.',
                    err_invalid: 'Please enter a valid non-negative integer (0-170)'
                },
                'zh-CN': {
                    title: '❏ 阶乘计算器',
                    enter_number: '输入一个非负整数',
                    calculate: '计算',
                    clear: '清除',
                    result: '结果',
                    note_max: '最大值：170（受JavaScript数字限制）',
                    what_is_factorial: '什么是阶乘？',
                    factorial_definition: '非负整数n的阶乘，记为n!，是所有小于或等于n的正整数的乘积。例如，5! = 5 × 4 × 3 × 2 × 1 = 120。',
                    factorial_zero: '根据定义，0! = 1。',
                    err_invalid: '请输入有效的非负整数（0-170）'
                },
                'zh-TW': {
                    title: '❏ 階乘計算器',
                    enter_number: '輸入一個非負整數',
                    calculate: '計算',
                    clear: '清除',
                    result: '結果',
                    note_max: '最大值：170（受JavaScript數字限制）',
                    what_is_factorial: '什麼是階乘？',
                    factorial_definition: '非負整數n的階乘，記為n!，是所有小於或等於n的正整數的乘積。例如，5! = 5 × 4 × 3 × 2 × 1 = 120。',
                    factorial_zero: '根據定義，0! = 1。',
                    err_invalid: '請輸入有效的非負整數（0-170）'
                },
                'ja': {
                    title: '❏ 階乗計算機',
                    enter_number: '非負の整数を入力',
                    calculate: '計算',
                    clear: 'クリア',
                    result: '結果',
                    note_max: '最大値：170（JavaScriptの数値制限による）',
                    what_is_factorial: '階乗とは何ですか？',
                    factorial_definition: '非負の整数nの階乗（n! と表記）は、n以下のすべての正の整数の積です。例えば、5! = 5 × 4 × 3 × 2 × 1 = 120です。',
                    factorial_zero: '定義により、0! = 1です。',
                    err_invalid: '有効な非負の整数を入力してください（0-170）'
                },
                'ru': {
                    title: '❏ Калькулятор факториала',
                    enter_number: 'Введите неотрицательное целое число',
                    calculate: 'Вычислить',
                    clear: 'Очистить',
                    result: 'Результат',
                    note_max: 'Максимальное значение: 170 (из-за ограничений чисел в JavaScript)',
                    what_is_factorial: 'Что такое факториал?',
                    factorial_definition: 'Факториал неотрицательного целого числа n, обозначаемый как n!, является произведением всех положительных целых чисел, меньших или равных n. Например, 5! = 5 × 4 × 3 × 2 × 1 = 120.',
                    factorial_zero: 'По определению 0! = 1.',
                    err_invalid: 'Пожалуйста, введите правильное неотрицательное целое число (0-170)'
                }
            },
            
            // 计算阶乘
            calculate: function() {
                const input = document.getElementById('factorial-number');
                const value = parseInt(input.value, 10);
                const errorEl = document.getElementById('factorial-error');
                const resultEl = document.getElementById('factorial-result');
                const valueEl = document.getElementById('factorial-value');
                const lang = this.getCurrentLang();
                
                // 验证输入
                if (isNaN(value) || value < 0 || value > 170 || !Number.isInteger(value)) {
                    errorEl.textContent = this.i18n[lang].err_invalid;
                    errorEl.classList.remove('hidden');
                    resultEl.classList.add('hidden');
                    return;
                }
                
                // 清除错误
                errorEl.classList.add('hidden');
                
                // 计算阶乘
                let result = 1;
                for (let i = 2; i <= value; i++) {
                    result *= i;
                }
                
                // 显示结果
                valueEl.textContent = `${value}! = ${result}`;
                resultEl.classList.remove('hidden');
            },
            
            // 清除输入
            clearValue: function() {
                document.getElementById('factorial-number').value = '';
                document.getElementById('factorial-result').classList.add('hidden');
                document.getElementById('factorial-error').classList.add('hidden');
            },
            
            // 切换语言
            changeLang: function() {
                const lang = this.getCurrentLang();
                const elements = document.querySelectorAll('[data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[lang][key]) {
                        el.textContent = this.i18n[lang][key];
                    }
                });
                
                // 如果有结果，重新计算以更新显示
                if (document.getElementById('factorial-number').value) {
                    this.calculate();
                }
            },
            
            // 获取当前语言
            getCurrentLang: function() {
                return document.getElementById('factorial-lang').value;
            }
        };
        
        // 初始化
        FactorialCalculator.init = function() {
            // 可以添加初始化逻辑
        };
        
        // 页面加载时初始化
        window.onload = function() {
            FactorialCalculator.init();
        };
    </script>
</body>
</html>