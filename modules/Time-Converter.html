<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Time Converter Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fffbe6; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="time_conv" 
         data-category="tools" 
         data-title="Time Converter" 
         data-icon="⏳">
        
        <div class="absolute top-4 right-4">
            <select id="tc-lang" onchange="TimeConv.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">簡體中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⏳ Time Converter</h2>

        <div class="grid grid-cols-2 gap-4 mb-4">
            <!-- Input Side -->
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_from">From</label>
                <input type="number" id="tc-val-from" class="w-full p-2 border rounded mb-2 focus:ring-1 focus:ring-yellow-500" value="1" oninput="TimeConv.convert('from')">
                <select id="tc-unit-from" class="w-full p-2 border rounded bg-white text-sm" onchange="TimeConv.convert('from')">
                    <!-- Options populated by JS -->
                </select>
            </div>

            <!-- Output Side -->
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_to">To</label>
                <input type="number" id="tc-val-to" class="w-full p-2 border rounded mb-2 focus:ring-1 focus:ring-yellow-500 bg-gray-50" oninput="TimeConv.convert('to')">
                <select id="tc-unit-to" class="w-full p-2 border rounded bg-white text-sm" onchange="TimeConv.convert('from')">
                    <!-- Options populated by JS -->
                </select>
            </div>
        </div>
        
        <div class="text-xs text-gray-400 text-center" data-i18n="note">1 Year = 365.25 Days, 1 Month = 30.44 Days (Average)</div>
    </div>

    <script>
        const TimeConv = {
            i18n: {
                'en': {
                    title: '⏳ Time Converter',
                    lbl_from: 'From', lbl_to: 'To',
                    note: '1 Year = 365.25 Days, 1 Month = 30.44 Days (Average)',
                    u_ms: 'Millisecond (ms)', u_s: 'Second (s)', u_min: 'Minute (min)', u_h: 'Hour (h)',
                    u_d: 'Day (d)', u_wk: 'Week (wk)', u_mo: 'Month (mo)', u_y: 'Year (y)'
                },
                'zh-CN': {
                    title: '⏳ 时间换算器',
                    lbl_from: '从', lbl_to: '到',
                    note: '1 年 = 365.25 天, 1 月 = 30.44 天 (平均值)',
                    u_ms: '毫秒 (ms)', u_s: '秒 (s)', u_min: '分钟 (min)', u_h: '小时 (h)',
                    u_d: '天 (d)', u_wk: '周 (wk)', u_mo: '月 (mo)', u_y: '年 (y)'
                },
                'zh-TW': {
                    title: '⏳ 時間換算器',
                    lbl_from: '從', lbl_to: '到',
                    note: '1 年 = 365.25 天, 1 月 = 30.44 天 (平均值)',
                    u_ms: '毫秒 (ms)', u_s: '秒 (s)', u_min: '分鐘 (min)', u_h: '小時 (h)',
                    u_d: '天 (d)', u_wk: '週 (wk)', u_mo: '月 (mo)', u_y: '年 (y)'
                },
                'ja': {
                    title: '⏳ 時間換算',
                    lbl_from: '変換元', lbl_to: '変換先',
                    note: '1年 = 365.25日, 1ヶ月 = 30.44日 (平均)',
                    u_ms: 'ミリ秒 (ms)', u_s: '秒 (s)', u_min: '分 (min)', u_h: '時間 (h)',
                    u_d: '日 (d)', u_wk: '週 (wk)', u_mo: '月 (mo)', u_y: '年 (y)'
                },
                'ru': {
                    title: '⏳ Конвертер времени',
                    lbl_from: 'Из', lbl_to: 'В',
                    note: '1 Год = 365.25 дн., 1 Мес = 30.44 дн. (Среднее)',
                    u_ms: 'Миллисекунда', u_s: 'Секунда', u_min: 'Минута', u_h: 'Час',
                    u_d: 'День', u_wk: 'Неделя', u_mo: 'Месяц', u_y: 'Год'
                },
                'es': {
                    title: '⏳ Conversor de Tiempo',
                    lbl_from: 'De', lbl_to: 'A',
                    note: '1 Año = 365.25 días, 1 Mes = 30.44 días (Promedio)',
                    u_ms: 'Milisegundo', u_s: 'Segundo', u_min: 'Minuto', u_h: 'Hora',
                    u_d: 'Día', u_wk: 'Semana', u_mo: 'Mes', u_y: 'Año'
                }
            },

            // Factor relative to 1 Second
            units: [
                { k: 'ms', f: 0.001, i: 'u_ms' },
                { k: 's', f: 1, i: 'u_s' },
                { k: 'min', f: 60, i: 'u_min' },
                { k: 'h', f: 3600, i: 'u_h' },
                { k: 'd', f: 86400, i: 'u_d' },
                { k: 'wk', f: 604800, i: 'u_wk' },
                { k: 'mo', f: 2629746, i: 'u_mo' }, // 30.44 days
                { k: 'y', f: 31557600, i: 'u_y' }   // 365.25 days
            ],

            init: () => {
                TimeConv.populate('tc-unit-from');
                TimeConv.populate('tc-unit-to');
                document.getElementById('tc-unit-from').value = 'h';
                document.getElementById('tc-unit-to').value = 's';
            },

            populate: (id) => {
                const sel = document.getElementById(id);
                const current = sel.value;
                const lang = document.getElementById('tc-lang').value;
                const txt = TimeConv.i18n[lang];
                
                sel.innerHTML = '';
                TimeConv.units.forEach(u => {
                    const opt = document.createElement('option');
                    opt.value = u.k;
                    opt.text = txt[u.i];
                    sel.appendChild(opt);
                });
                if(current) sel.value = current;
            },

            changeLang: () => {
                const lang = document.getElementById('tc-lang').value;
                const texts = TimeConv.i18n[lang];
                
                document.querySelector('[data-i18n="title"]').innerText = texts.title;
                document.querySelector('[data-i18n="lbl_from"]').innerText = texts.lbl_from;
                document.querySelector('[data-i18n="lbl_to"]').innerText = texts.lbl_to;
                document.querySelector('[data-i18n="note"]').innerText = texts.note;

                TimeConv.populate('tc-unit-from');
                TimeConv.populate('tc-unit-to');
            },

            convert: (dir) => {
                const fromUnit = document.getElementById('tc-unit-from').value;
                const toUnit = document.getElementById('tc-unit-to').value;
                const u1 = TimeConv.units.find(u => u.k === fromUnit).f;
                const u2 = TimeConv.units.find(u => u.k === toUnit).f;

                const format = (n) => {
                    if (Math.abs(n) < 1e-6 && n !== 0) return n.toExponential(4);
                    return parseFloat(n.toPrecision(10)); // High precision for time
                };

                if (dir === 'from') {
                    const val = parseFloat(document.getElementById('tc-val-from').value);
                    if (isNaN(val)) { document.getElementById('tc-val-to').value = ''; return; }
                    const res = (val * u1) / u2;
                    document.getElementById('tc-val-to').value = format(res);
                } else {
                    const val = parseFloat(document.getElementById('tc-val-to').value);
                    if (isNaN(val)) { document.getElementById('tc-val-from').value = ''; return; }
                    const res = (val * u2) / u1;
                    document.getElementById('tc-val-from').value = format(res);
                }
            }
        };
        
        TimeConv.init();
    </script>
</body>
</html>