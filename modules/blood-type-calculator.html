<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Type Calculator</title>
    
    <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
    <meta name="tool-id" content="blood_type_calc">
    <meta name="category" content="health">
    <meta name="icon" content="üÖ±Ô∏è">
    
    <!-- ÈªòËÆ§Ëã±ÊñáÂÜÖÂÆπ -->
    <meta name="title" content="Blood Type Calculator">
    <meta name="description" content="Calculate possible blood types for your child based on parents' blood types.">
    
    <!-- Â§öËØ≠Ë®ÄÈÖçÁΩÆ -->
    <meta name="lang-title-zh-CN" content="Ë°ÄÂûãËÆ°ÁÆóÂô®">
    <meta name="lang-description-zh-CN" content="Ê†πÊçÆÁà∂ÊØçÁöÑË°ÄÂûãËÆ°ÁÆóÂ≠©Â≠êÂèØËÉΩÁöÑË°ÄÂûã„ÄÇ">
    
    <meta name="lang-title-zh-TW" content="Ë°ÄÂûãË®àÁÆóÂô®">
    <meta name="lang-description-zh-TW" content="Ê†πÊìöÁà∂ÊØçÁöÑË°ÄÂûãË®àÁÆóÂ≠©Â≠êÂèØËÉΩÁöÑË°ÄÂûã„ÄÇ">
    
    <meta name="lang-title-ja" content="Ë°ÄÊ∂≤ÂûãË®àÁÆó„ÉÑ„Éº„É´">
    <meta name="lang-description-ja" content="Áà∂ÊØç„ÅÆË°ÄÊ∂≤Âûã„Å´Âü∫„Å•„ÅÑ„Å¶Â≠ê‰æõ„ÅÆÂèØËÉΩÊÄß„ÅÆ„ÅÇ„ÇãË°ÄÊ∂≤Âûã„ÇíË®àÁÆó„Åó„Åæ„Åô„ÄÇ">
    
    <meta name="lang-title-ru" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –∫—Ä–æ–≤–∏">
    <meta name="lang-description-ru" content="–í—ã—á–∏—Å–ª–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∫—Ä–æ–≤–∏ —Ä–µ–±–µ–Ω–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º –∫—Ä–æ–≤–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π.">
    
    <meta name="lang-title-es" content="Calculadora de grupo sangu√≠neo">
    <meta name="lang-description-es" content="Calcula los posibles grupos sangu√≠neos de tu hijo seg√∫n los grupos sangu√≠neos de los padres.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .input-group { margin-bottom: 16px; }
        .result-card { transition: all 0.3s ease; }
        .blood-type { display: inline-block; width: 60px; height: 60px; line-height: 60px; border-radius: 50%; background: #e0f2fe; color: #0369a1; text-align: center; font-size: 1.2rem; font-weight: bold; margin: 0 8px; }
        .probability { font-size: 0.9rem; color: #666; margin-top: 4px; }
        .parent-container { display: flex; justify-content: space-around; margin: 20px 0; }
        .parent { text-align: center; }
        .plus-sign { align-self: center; font-size: 2rem; color: #666; }
        .intro-section { margin-top: 20px; padding: 15px; background: #f8fafc; border-radius: 8px; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="blood_type_calc" 
         data-category="health" 
         data-title="Blood Type Calculator" 
         data-icon="üÖ±Ô∏è">
        
        <!-- ËØ≠Ë®ÄÈÄâÊã©Âô® -->
        <div class="absolute top-4 right-4">
            <select id="blood-lang" onchange="BloodTypeCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2" data-i18n="title">üÖ±Ô∏è Blood Type Calculator</h2>
        
        <div class="space-y-6">
            <!-- ËæìÂÖ•Âå∫Âüü -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="input-group">
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="father_label">Father's Blood Type</label>
                    <select id="father-type" class="w-full p-2 border rounded focus:ring-2 focus:ring-red-500 outline-none">
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="AB">AB</option>
                        <option value="O">O</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="mother_label">Mother's Blood Type</label>
                    <select id="mother-type" class="w-full p-2 border rounded focus:ring-2 focus:ring-red-500 outline-none">
                        <option value="A">A</option>
                        <option value="B">B</option>
                        <option value="AB">AB</option>
                        <option value="O">O</option>
                    </select>
                </div>
            </div>
            
            <button onclick="BloodTypeCalc.calculate()" 
                    class="w-full bg-red-600 text-white py-3 rounded font-bold hover:bg-red-700 transition" 
                    data-i18n="btn_calculate">Calculate Child's Possible Blood Types</button>
            
            <!-- ÁªìÊûúÂå∫Âüü -->
            <div class="bg-red-50 p-6 rounded-lg border border-red-100 result-card">
                <div class="parent-container">
                    <div class="parent">
                        <div data-i18n="father">Father</div>
                        <div id="father-display" class="blood-type">A</div>
                    </div>
                    <div class="plus-sign">+</div>
                    <div class="parent">
                        <div data-i18n="mother">Mother</div>
                        <div id="mother-display" class="blood-type">A</div>
                    </div>
                    <div class="plus-sign">=</div>
                    <div class="parent">
                        <div data-i18n="child">Child</div>
                        <div id="child-display" class="flex justify-center flex-wrap">
                            <div class="blood-type">?</div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 text-center">
                    <div class="text-sm text-gray-500 mb-2" data-i18n="possibilities">Possible Blood Types</div>
                    <div id="result-text" class="text-lg font-medium text-red-800">--</div>
                </div>
            </div>
            
            <!-- ‰ªãÁªçÈÉ®ÂàÜ -->
            <div class="intro-section">
                <h3 class="font-medium text-gray-800 mb-2" data-i18n="intro_title">About Blood Type Inheritance</h3>
                <p class="text-sm text-gray-600" data-i18n="intro_text">Blood type is determined by genetic factors. Each parent passes one allele to their child. This calculator shows the possible blood types a child could inherit based on the parents' blood types, along with the probability of each type.</p>
            </div>
        </div>
    </div>

    <script>
        const BloodTypeCalc = {
            // Ë°ÄÂûãÈÅó‰º†ËßÑÂàôÊò†Â∞ÑË°®
            bloodTypeMap: {
                'A': ['AA', 'AO'],
                'B': ['BB', 'BO'],
                'AB': ['AB'],
                'O': ['OO']
            },
            
            i18n: {
                'en': {
                    title: 'üÖ±Ô∏è Blood Type Calculator',
                    father_label: "Father's Blood Type",
                    mother_label: "Mother's Blood Type",
                    btn_calculate: "Calculate Child's Possible Blood Types",
                    father: 'Father',
                    mother: 'Mother',
                    child: 'Child',
                    possibilities: 'Possible Blood Types',
                    probability: 'Probability',
                    intro_title: 'About Blood Type Inheritance',
                    intro_text: 'Blood type is determined by genetic factors. Each parent passes one allele to their child. This calculator shows the possible blood types a child could inherit based on the parents\' blood types, along with the probability of each type.'
                },
                'zh-CN': {
                    title: 'üÖ±Ô∏è Ë°ÄÂûãËÆ°ÁÆóÂô®',
                    father_label: 'Áà∂‰∫≤ÁöÑË°ÄÂûã',
                    mother_label: 'ÊØç‰∫≤ÁöÑË°ÄÂûã',
                    btn_calculate: 'ËÆ°ÁÆóÂ≠©Â≠êÂèØËÉΩÁöÑË°ÄÂûã',
                    father: 'Áà∂‰∫≤',
                    mother: 'ÊØç‰∫≤',
                    child: 'Â≠©Â≠ê',
                    possibilities: 'ÂèØËÉΩÁöÑË°ÄÂûã',
                    probability: 'Ê¶ÇÁéá',
                    intro_title: 'ÂÖ≥‰∫éË°ÄÂûãÈÅó‰º†',
                    intro_text: 'Ë°ÄÂûãÁî±ÈÅó‰º†Âõ†Á¥†ÂÜ≥ÂÆö„ÄÇÁà∂ÊØçÂêÑÂ∞Ü‰∏Ä‰∏™Á≠â‰ΩçÂü∫Âõ†‰º†ÈÄíÁªôÂ≠©Â≠ê„ÄÇËØ•ËÆ°ÁÆóÂô®Ê†πÊçÆÁà∂ÊØçÁöÑË°ÄÂûãÊòæÁ§∫Â≠©Â≠êÂèØËÉΩÁªßÊâøÁöÑË°ÄÂûãÔºå‰ª•ÂèäÊØèÁßçË°ÄÂûãÁöÑÊ¶ÇÁéá„ÄÇ'
                },
                'zh-TW': {
                    title: 'üÖ±Ô∏è Ë°ÄÂûãË®àÁÆóÂô®',
                    father_label: 'Áà∂Ë¶™ÁöÑË°ÄÂûã',
                    mother_label: 'ÊØçË¶™ÁöÑË°ÄÂûã',
                    btn_calculate: 'Ë®àÁÆóÂ≠©Â≠êÂèØËÉΩÁöÑË°ÄÂûã',
                    father: 'Áà∂Ë¶™',
                    mother: 'ÊØçË¶™',
                    child: 'Â≠©Â≠ê',
                    possibilities: 'ÂèØËÉΩÁöÑË°ÄÂûã',
                    probability: 'Ê¶ÇÁéá',
                    intro_title: 'ÈóúÊñºË°ÄÂûãÈÅ∫ÂÇ≥',
                    intro_text: 'Ë°ÄÂûãÁî±ÈÅ∫ÂÇ≥Âõ†Á¥†Ê±∫ÂÆö„ÄÇÁà∂ÊØçÂêÑÂ∞á‰∏ÄÂÄãÁ≠â‰ΩçÂü∫Âõ†ÂÇ≥ÈÅûÁµ¶Â≠©Â≠ê„ÄÇË©≤Ë®àÁÆóÂô®Ê†πÊìöÁà∂ÊØçÁöÑË°ÄÂûãÈ°ØÁ§∫Â≠©Â≠êÂèØËÉΩÁπºÊâøÁöÑË°ÄÂûãÔºå‰ª•ÂèäÊØèÁ®ÆË°ÄÂûãÁöÑÊ¶ÇÁéá„ÄÇ'
                },
                'ja': {
                    title: 'üÖ±Ô∏è Ë°ÄÊ∂≤ÂûãË®àÁÆó„ÉÑ„Éº„É´',
                    father_label: 'Áà∂Ë¶™„ÅÆË°ÄÊ∂≤Âûã',
                    mother_label: 'ÊØçË¶™„ÅÆË°ÄÊ∂≤Âûã',
                    btn_calculate: 'Â≠ê‰æõ„ÅÆÂèØËÉΩÊÄß„ÅÆ„ÅÇ„ÇãË°ÄÊ∂≤Âûã„ÇíË®àÁÆó',
                    father: 'Áà∂Ë¶™',
                    mother: 'ÊØçË¶™',
                    child: 'Â≠ê‰æõ',
                    possibilities: 'ÂèØËÉΩÊÄß„ÅÆ„ÅÇ„ÇãË°ÄÊ∂≤Âûã',
                    probability: 'Á¢∫Áéá',
                    intro_title: 'Ë°ÄÊ∂≤Âûã„ÅÆÈÅ∫‰ºù„Å´„Å§„ÅÑ„Å¶',
                    intro_text: 'Ë°ÄÊ∂≤Âûã„ÅØÈÅ∫‰ºùÁöÑË¶ÅÂõ†„Å´„Çà„Å£„Å¶Ê±∫„Åæ„Çä„Åæ„Åô„ÄÇÂêÑË¶™„ÅØÂ≠ê‰æõ„Å´1„Å§„ÅÆÂØæÁ´ãÈÅ∫‰ºùÂ≠ê„ÇíÊ∏°„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆË®àÁÆóÊ©ü„ÅØ„ÄÅË¶™„ÅÆË°ÄÊ∂≤Âûã„Å´Âü∫„Å•„ÅÑ„Å¶Â≠ê‰æõ„ÅåÂèó„ÅëÁ∂ô„ÅêÂèØËÉΩÊÄß„ÅÆ„ÅÇ„ÇãË°ÄÊ∂≤Âûã„Å®„ÄÅ„Åù„Çå„Åû„Çå„ÅÆÁ¢∫Áéá„ÇíÁ§∫„Åó„Åæ„Åô„ÄÇ'
                },
                'ru': {
                    title: 'üÖ±Ô∏è –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≥—Ä—É–ø–ø—ã –∫—Ä–æ–≤–∏',
                    father_label: '–ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏ –æ—Ç—Ü–∞',
                    mother_label: '–ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏ –º–∞—Ç–µ—Ä–∏',
                    btn_calculate: '–í—ã—á–∏—Å–ª–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∫—Ä–æ–≤–∏ —Ä–µ–±–µ–Ω–∫–∞',
                    father: '–û—Ç–µ—Ü',
                    mother: '–ú–∞—Ç—å',
                    child: '–†–µ–±–µ–Ω–æ–∫',
                    possibilities: '–í–æ–∑–º–æ–∂–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∫—Ä–æ–≤–∏',
                    probability: '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å',
                    intro_title: '–û –Ω–∞—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≥—Ä—É–ø–ø—ã –∫—Ä–æ–≤–∏',
                    intro_text: '–ì—Ä—É–ø–ø–∞ –∫—Ä–æ–≤–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≥–µ–Ω–µ—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ñ–∞–∫—Ç–æ—Ä–∞–º–∏. –ö–∞–∂–¥—ã–π —Ä–æ–¥–∏—Ç–µ–ª—å –ø–µ—Ä–µ–¥–∞–µ—Ç —Ä–µ–±–µ–Ω–∫—É –æ–¥–∏–Ω –∞–ª–ª–µ–ª—å. –≠—Ç–æ—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ –≥—Ä—É–ø–ø—ã –∫—Ä–æ–≤–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–±–µ–Ω–æ–∫ –º–æ–∂–µ—Ç —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –ø–æ –≥—Ä—É–ø–ø–∞–º –∫—Ä–æ–≤–∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π, –∞ —Ç–∞–∫–∂–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã.'
                },
                'es': {
                    title: 'üÖ±Ô∏è Calculadora de grupo sangu√≠neo',
                    father_label: 'Grupo sangu√≠neo del padre',
                    mother_label: 'Grupo sangu√≠neo de la madre',
                    btn_calculate: 'Calcular posibles grupos sangu√≠neos del ni√±o',
                    father: 'Padre',
                    mother: 'Madre',
                    child: 'Ni√±o',
                    possibilities: 'Posibles grupos sangu√≠neos',
                    probability: 'Probabilidad',
                    intro_title: 'Acerca de la herencia del grupo sangu√≠neo',
                    intro_text: 'El grupo sangu√≠neo est√° determinado por factores gen√©ticos. Cada padre transmite un alelo a su hijo. Esta calculadora muestra los posibles grupos sangu√≠neos que un ni√±o podr√≠a heredar seg√∫n los grupos sangu√≠neos de los padres, junto con la probabilidad de cada tipo.'
                }
            },

            init: () => {
                // ÂàùÂßãÂåñÊòæÁ§∫Áà∂ÊØçË°ÄÂûã
                BloodTypeCalc.updateDisplay();
            },
            
            calculate: () => {
                const fatherType = document.getElementById('father-type').value;
                const motherType = document.getElementById('mother-type').value;
                
                // Êõ¥Êñ∞ÊòæÁ§∫
                BloodTypeCalc.updateDisplay();
                
                // Ëé∑ÂèñÁà∂ÊØçÂèØËÉΩÁöÑÁ≠â‰ΩçÂü∫Âõ†ÁªÑÂêà
                const fatherGenes = BloodTypeCalc.bloodTypeMap[fatherType];
                const motherGenes = BloodTypeCalc.bloodTypeMap[motherType];
                
                // ËÆ°ÁÆóÊâÄÊúâÂèØËÉΩÁöÑÁªÑÂêà
                const allCombinations = [];
                fatherGenes.forEach(father => {
                    motherGenes.forEach(mother => {
                        // ÊØè‰∏™Áà∂ÊØçÊèê‰æõ‰∏Ä‰∏™Á≠â‰ΩçÂü∫Âõ†
                        const f1 = father[0], f2 = father[1];
                        const m1 = mother[0], m2 = mother[1];
                        
                        // ÊâÄÊúâÂèØËÉΩÁöÑÁªÑÂêà
                        allCombinations.push(f1 + m1);
                        allCombinations.push(f1 + m2);
                        allCombinations.push(f2 + m1);
                        allCombinations.push(f2 + m2);
                    });
                });
                
                // ËΩ¨Êç¢‰∏∫Ë°ÄÂûãÂπ∂ËÆ°ÁÆóÊ¶ÇÁéá
                const typeCounts = {};
                allCombinations.forEach(combination => {
                    // ÊéíÂ∫è‰ª•‰æøÊ≠£Á°ÆÊØîËæÉ (Â¶Ç AO Âíå OA ÈÉΩÊòØ A Âûã)
                    const sorted = combination.split('').sort().join('');
                    let type;
                    
                    if (sorted === 'AA' || sorted === 'AO') type = 'A';
                    else if (sorted === 'BB' || sorted === 'BO') type = 'B';
                    else if (sorted === 'AB') type = 'AB';
                    else if (sorted === 'OO') type = 'O';
                    
                    typeCounts[type] = (typeCounts[type] || 0) + 1;
                });
                
                // ËÆ°ÁÆóÊ¶ÇÁéáÂπ∂ÊéíÂ∫è
                const total = allCombinations.length;
                const result = [];
                Object.keys(typeCounts).forEach(type => {
                    const probability = Math.round((typeCounts[type] / total) * 100);
                    result.push({ type, probability });
                });
                
                // ÊòæÁ§∫ÁªìÊûú
                BloodTypeCalc.displayResult(result);
            },
            
            updateDisplay: () => {
                const fatherType = document.getElementById('father-type').value;
                const motherType = document.getElementById('mother-type').value;
                
                document.getElementById('father-display').textContent = fatherType;
                document.getElementById('mother-display').textContent = motherType;
            },
            
            displayResult: (results) => {
                const childDisplay = document.getElementById('child-display');
                const resultText = document.getElementById('result-text');
                const lang = document.getElementById('blood-lang').value;
                const texts = BloodTypeCalc.i18n[lang];
                
                // Ê∏ÖÁ©∫Áé∞ÊúâÂÜÖÂÆπ
                childDisplay.innerHTML = '';
                
                // ÊòæÁ§∫Ë°ÄÂûãÂõæÊ†á
                results.forEach(item => {
                    const typeEl = document.createElement('div');
                    typeEl.className = 'blood-type';
                    typeEl.textContent = item.type;
                    typeEl.title = `${item.probability}%`;
                    childDisplay.appendChild(typeEl);
                });
                
                // ÊòæÁ§∫ÊñáÂ≠óÁªìÊûú
                let text = '';
                results.forEach((item, index) => {
                    text += `${item.type} (${item.probability}%)`;
                    if (index < results.length - 1) text += ', ';
                });
                resultText.textContent = text;
            },
            
            changeLang: () => {
                const lang = document.getElementById('blood-lang').value;
                const texts = BloodTypeCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="blood_type_calc"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) {
                        el.innerText = texts[key];
                    }
                });
                
                // Â¶ÇÊûúÂ∑≤ÊúâËÆ°ÁÆóÁªìÊûúÔºåÈáçÊñ∞ÊòæÁ§∫‰ª•Êõ¥Êñ∞ÊñáÊú¨
                if (document.getElementById('result-text').textContent !== '--') {
                    BloodTypeCalc.calculate();
                }
            }
        };

        document.addEventListener('DOMContentLoaded', BloodTypeCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('blood-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    BloodTypeCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>