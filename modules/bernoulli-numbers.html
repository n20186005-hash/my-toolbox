<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bernoulli Numbers</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="bernoulli_numbers">
    <meta name="category" content="mathematics">
    <meta name="icon" content="B">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Bernoulli Numbers Calculator">
    <meta name="description" content="Calculate Bernoulli numbers up to specified index.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="伯努利数计算器">
    <meta name="lang-description-zh-CN" content="计算指定索引之前的伯努利数。">
    
    <meta name="lang-title-zh-TW" content="伯努利數計算器">
    <meta name="lang-description-zh-TW" content="計算指定索引之前的伯努利數。">
    
    <meta name="lang-title-ja" content="ベルヌーイ数計算機">
    <meta name="lang-description-ja" content="指定されたインデックスまでのベルヌーイ数を計算します。">
    
    <meta name="lang-title-ru" content="Числа Бернулли">
    <meta name="lang-description-ru" content="Вычисление чисел Бернулли до указанного индекса.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .result { background-color: #f0fdf4; border: 1px solid #10b981; color: #059669; padding: 15px; border-radius: 5px; margin-top: 15px; }
        .warning { background-color: #fee2e2; border: 1px solid #ef4444; color: #b91c1c; padding: 10px; border-radius: 5px; margin-top: 10px; }
        .numbers-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .numbers-table th, .numbers-table td { border: 1px solid #dcfce7; padding: 8px 12px; text-align: left; }
        .numbers-table th { background-color: #dcfce7; font-weight: bold; }
        .math-expr { font-size: 1.1em; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="bernoulli_numbers" 
         data-category="mathematics" 
         data-title="Bernoulli Numbers Calculator" 
         data-icon="B">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="bernoulli-lang" onchange="Bernoulli.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">B Bernoulli Numbers</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="input_label">Calculate up to index n:</label>
                <input type="number" id="bernoulli-index" min="0" max="20" value="10" 
                       class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none">
            </div>
            
            <div class="bg-blue-50 p-3 rounded text-sm text-blue-700">
                <p data-i18n="description">Bernoulli numbers are rational numbers that play an important role in number theory and analysis.</p>
                <p class="mt-1" data-i18n="note">Note: All odd Bernoulli numbers except B₁ are zero.</p>
            </div>
        </div>

        <button onclick="Bernoulli.calculate()" class="w-full bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition mb-6" data-i18n="btn_calculate">Calculate Bernoulli Numbers</button>

        <div id="bernoulli-result" class="result hidden">
            <div class="text-lg font-bold mb-2" data-i18n="result_title">Bernoulli Numbers (Bₙ)</div>
            <table id="bernoulli-table" class="numbers-table"></table>
        </div>

        <div id="bernoulli-error" class="warning hidden" data-i18n="err_invalid">Please enter a valid number between 0 and 20</div>
    </div>

    <script>
        const Bernoulli = {
            // 预计算的伯努利数（到n=20）
            bernoulliNumbers: [
                { n: 0, value: "1" },
                { n: 1, value: "-1/2" },
                { n: 2, value: "1/6" },
                { n: 3, value: "0" },
                { n: 4, value: "-1/30" },
                { n: 5, value: "0" },
                { n: 6, value: "1/42" },
                { n: 7, value: "0" },
                { n: 8, value: "-1/30" },
                { n: 9, value: "0" },
                { n: 10, value: "5/66" },
                { n: 11, value: "0" },
                { n: 12, value: "-691/2730" },
                { n: 13, value: "0" },
                { n: 14, value: "7/6" },
                { n: 15, value: "0" },
                { n: 16, value: "-3617/510" },
                { n: 17, value: "0" },
                { n: 18, value: "43867/798" },
                { n: 19, value: "0" },
                { n: 20, value: "-174611/330" }
            ],

            i18n: {
                'en': {
                    title: 'B Bernoulli Numbers',
                    input_label: 'Calculate up to index n:',
                    description: 'Bernoulli numbers are rational numbers that play an important role in number theory and analysis.',
                    note: 'Note: All odd Bernoulli numbers except B₁ are zero.',
                    btn_calculate: 'Calculate Bernoulli Numbers',
                    result_title: 'Bernoulli Numbers (Bₙ)',
                    table_index: 'n',
                    table_value: 'Value',
                    err_invalid: 'Please enter a valid number between 0 and 20'
                },
                'zh-CN': {
                    title: 'B 伯努利数',
                    input_label: '计算到索引 n：',
                    description: '伯努利数是有理数，在数论和分析中起着重要作用。',
                    note: '注意：除了 B₁ 之外，所有奇数伯努利数都是零。',
                    btn_calculate: '计算伯努利数',
                    result_title: '伯努利数 (Bₙ)',
                    table_index: 'n',
                    table_value: '值',
                    err_invalid: '请输入0到20之间的有效数字'
                },
                'zh-TW': {
                    title: 'B 伯努利數',
                    input_label: '計算到索引 n：',
                    description: '伯努利數是有理數，在數論和分析中起著重要作用。',
                    note: '注意：除了 B₁ 之外，所有奇數伯努利數都是零。',
                    btn_calculate: '計算伯努利數',
                    result_title: '伯努利數 (Bₙ)',
                    table_index: 'n',
                    table_value: '值',
                    err_invalid: '請輸入0到20之間的有效數字'
                },
                'ja': {
                    title: 'B ベルヌーイ数',
                    input_label: 'インデックスnまで計算：',
                    description: 'ベルヌーイ数は有理数で、数論と解析学において重要な役割を持ちます。',
                    note: '注：B₁を除くすべての奇数のベルヌーイ数は0です。',
                    btn_calculate: 'ベルヌーイ数を計算',
                    result_title: 'ベルヌーイ数 (Bₙ)',
                    table_index: 'n',
                    table_value: '値',
                    err_invalid: '0から20までの有効な数値を入力してください'
                },
                'ru': {
                    title: 'B Числа Бернулли',
                    input_label: 'Вычислить до индекса n:',
                    description: 'Числа Бернулли — рациональные числа, играющие важную роль в теории чисел и анализе.',
                    note: 'Примечание: Все нечетные числа Бернулли, кроме B₁, равны нулю.',
                    btn_calculate: 'Вычислить числа Бернулли',
                    result_title: 'Числа Бернулли (Bₙ)',
                    table_index: 'n',
                    table_value: 'Значение',
                    err_invalid: 'Пожалуйста, введите число от 0 до 20'
                }
            },

            init() {
                this.changeLang();
            },

            changeLang() {
                const lang = document.getElementById('bernoulli-lang').value;
                const elements = document.querySelectorAll('[data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[lang][key]) {
                        el.textContent = this.i18n[lang][key];
                    }
                });
            },

            calculate() {
                const indexInput = document.getElementById('bernoulli-index');
                const maxIndex = parseInt(indexInput.value, 10);
                const resultEl = document.getElementById('bernoulli-result');
                const errorEl = document.getElementById('bernoulli-error');
                const tableEl = document.getElementById('bernoulli-table');
                const lang = document.getElementById('bernoulli-lang').value;

                // 验证输入
                if (isNaN(maxIndex) || maxIndex < 0 || maxIndex > 20) {
                    resultEl.classList.add('hidden');
                    errorEl.classList.remove('hidden');
                    return;
                }

                errorEl.classList.add('hidden');
                
                // 构建结果表格
                let tableHtml = `<tr><th>${this.i18n[lang].table_index}</th><th>${this.i18n[lang].table_value}</th></tr>`;
                
                this.bernoulliNumbers.forEach(item => {
                    if (item.n <= maxIndex) {
                        tableHtml += `<tr>
                            <td>B<sub>${item.n}</sub></td>
                            <td class="math-expr">$$${item.value}$$</td>
                        </tr>`;
                    }
                });
                
                tableEl.innerHTML = tableHtml;
                resultEl.classList.remove('hidden');
                
                // 使用MathJax渲染数学表达式
                MathJax.typesetPromise([tableEl]);
            }
        };

        // 初始化
        window.onload = () => Bernoulli.init();
    </script>
</body>
</html>