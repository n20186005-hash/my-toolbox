<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP Subnet Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="ip_subnet_calc">
    <meta name="category" content="networking">
    <meta name="icon" content="ğŸ”—">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="IP Subnet Calculator">
    <meta name="description" content="Calculate subnet information including network address, broadcast address, subnet mask, and IP range for IPv4 addresses.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="IPå­ç½‘è®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="è®¡ç®—å­ç½‘ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€ã€å­ç½‘æ©ç å’ŒIPv4åœ°å€çš„IPèŒƒå›´ã€‚">
    
    <meta name="lang-title-zh-TW" content="IPå­ç¶²è¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="è¨ˆç®—å­ç¶²è³‡è¨Šï¼ŒåŒ…æ‹¬ç¶²è·¯åœ°å€ã€å»£æ’­åœ°å€ã€å­ç¶²é®ç½©å’ŒIPv4åœ°å€çš„IPç¯„åœã€‚">
    
    <meta name="lang-title-ja" content="IPã‚µãƒ–ãƒãƒƒãƒˆè¨ˆç®—ãƒ„ãƒ¼ãƒ«">
    <meta name="lang-description-ja" content="IPv4ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ã€IPç¯„å›²ãªã©ã®ã‚µãƒ–ãƒãƒƒãƒˆæƒ…å ±ã‚’è¨ˆç®—ã—ã¾ã™ã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ IP Ğ¿Ğ¾Ğ´ÑĞµÑ‚ĞµĞ¹">
    <meta name="lang-description-ru" content="Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ¾Ğ´ÑĞµÑ‚ÑÑ…, Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ ÑĞµÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ°Ğ´Ñ€ĞµÑ, ÑˆĞ¸Ñ€Ğ¾ĞºĞ¾Ğ²ĞµÑ‰Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ´Ñ€ĞµÑ, Ğ¼Ğ°ÑĞºÑƒ Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ Ğ¸ Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ IP-Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ² Ğ´Ğ»Ñ IPv4-Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ².">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .result-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin: 20px 0; }
        .result-card { background: #e8f4f8; padding: 15px; border-radius: 8px; }
        .result-label { font-size: 0.85rem; color: #4b5563; margin-bottom: 5px; }
        .result-value { font-size: 1.1rem; font-weight: bold; color: #1e40af; word-break: break-all; }
        .ip-input-group { display: flex; gap: 5px; margin-bottom: 10px; }
        .ip-octet { width: 25%; text-align: center; padding: 5px; }
        .cidr-input { width: 80px; padding: 5px; text-align: center; }
        .binary-view { font-family: monospace; font-size: 0.8rem; margin: 5px 0; padding: 5px; background: #f8fafc; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="ip_subnet_calc" 
         data-category="networking" 
         data-title="IP Subnet Calculator" 
         data-icon="ğŸ”—">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="ip-lang" onchange="IPSubnetCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ”— IP Subnet Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- IPåœ°å€è¾“å…¥ -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="ip_address">IP Address</label>
                <div class="flex items-center">
                    <div class="ip-input-group flex-1">
                        <input type="number" id="ip1" min="0" max="255" value="192" class="ip-octet border rounded">
                        <input type="number" id="ip2" min="0" max="255" value="168" class="ip-octet border rounded">
                        <input type="number" id="ip3" min="0" max="255" value="1" class="ip-octet border rounded">
                        <input type="number" id="ip4" min="0" max="255" value="100" class="ip-octet border rounded">
                    </div>
                    <span class="mx-2">/</span>
                    <input type="number" id="cidr" min="0" max="32" value="24" class="cidr-input border rounded">
                </div>
                <div class="text-xs text-gray-500 mt-1" data-i18n="ip_note">Enter an IPv4 address (e.g. 192.168.1.100) and CIDR prefix (0-32)</div>
            </div>
            
            <!-- å­ç½‘æ©ç è¾“å…¥ (å¯é€‰) -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="subnet_mask">Subnet Mask (optional)</label>
                <div class="ip-input-group">
                    <input type="number" id="mask1" min="0" max="255" value="255" class="ip-octet border rounded">
                    <input type="number" id="mask2" min="0" max="255" value="255" class="ip-octet border rounded">
                    <input type="number" id="mask3" min="0" max="255" value="255" class="ip-octet border rounded">
                    <input type="number" id="mask4" min="0" max="255" value="0" class="ip-octet border rounded">
                </div>
                <div class="text-xs text-gray-500 mt-1" data-i18n="mask_note">Subnet mask will be calculated from CIDR if not provided</div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div class="flex gap-2">
                <button onclick="IPSubnetCalc.clearForm()" class="flex-1 bg-gray-600 text-white py-2 rounded font-bold hover:bg-gray-700 transition" data-i18n="clear">Clear</button>
                <button onclick="IPSubnetCalc.calculate()" class="flex-1 bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Calculate Subnet</button>
            </div>
        </div>

        <!-- é”™è¯¯æç¤º -->
        <div id="ip-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- ç»“æœå±•ç¤º -->
        <div id="ip-results" class="hidden">
            <div class="result-grid">
                <div class="result-card">
                    <div class="result-label" data-i18n="network_addr">Network Address</div>
                    <div class="result-value" id="network-addr">--</div>
                    <div class="binary-view" id="network-addr-binary"></div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="broadcast_addr">Broadcast Address</div>
                    <div class="result-value" id="broadcast-addr">--</div>
                    <div class="binary-view" id="broadcast-addr-binary"></div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="subnet_mask">Subnet Mask</div>
                    <div class="result-value" id="subnet-mask">--</div>
                    <div class="binary-view" id="subnet-mask-binary"></div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="cidr">CIDR Notation</div>
                    <div class="result-value" id="result-cidr">--</div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="ip_range">IP Range</div>
                    <div class="result-value" id="ip-range">--</div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="hosts_count">Number of Hosts</div>
                    <div class="result-value" id="hosts-count">--</div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="wildcard_mask">Wildcard Mask</div>
                    <div class="result-value" id="wildcard-mask">--</div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="first_host">First Host IP</div>
                    <div class="result-value" id="first-host">--</div>
                </div>
                <div class="result-card">
                    <div class="result-label" data-i18n="last_host">Last Host IP</div>
                    <div class="result-value" id="last-host">--</div>
                </div>
            </div>
        </div>

        <!-- è¯´æ˜ä¿¡æ¯ -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="notes">Notes:</p>
            <ul class="list-disc list-inside mt-2 space-y-1" data-i18n="notes_list">
                <li>CIDR (Classless Inter-Domain Routing) notation represents the subnet mask as /prefix (e.g. /24)</li>
                <li>The number of available hosts is calculated as 2^(32-prefix) - 2 (subtracting network and broadcast addresses)</li>
                <li>Valid IPv4 addresses range from 0.0.0.0 to 255.255.255.255</li>
                <li>Common subnet masks: /24 = 255.255.255.0, /16 = 255.255.0.0, /8 = 255.0.0.0</li>
            </ul>
        </div>
    </div>

    <script>
        const IPSubnetCalc = {
            i18n: {
                'en': {
                    title: 'ğŸ”— IP Subnet Calculator',
                    ip_address: 'IP Address',
                    ip_note: 'Enter an IPv4 address (e.g. 192.168.1.100) and CIDR prefix (0-32)',
                    subnet_mask: 'Subnet Mask (optional)',
                    mask_note: 'Subnet mask will be calculated from CIDR if not provided',
                    clear: 'Clear',
                    calculate: 'Calculate Subnet',
                    network_addr: 'Network Address',
                    broadcast_addr: 'Broadcast Address',
                    cidr: 'CIDR Notation',
                    ip_range: 'IP Range',
                    hosts_count: 'Number of Hosts',
                    wildcard_mask: 'Wildcard Mask',
                    first_host: 'First Host IP',
                    last_host: 'Last Host IP',
                    notes: 'Notes:',
                    notes_list: `
                        <li>CIDR (Classless Inter-Domain Routing) notation represents the subnet mask as /prefix (e.g. /24)</li>
                        <li>The number of available hosts is calculated as 2^(32-prefix) - 2 (subtracting network and broadcast addresses)</li>
                        <li>Valid IPv4 addresses range from 0.0.0.0 to 255.255.255.255</li>
                        <li>Common subnet masks: /24 = 255.255.255.0, /16 = 255.255.0.0, /8 = 255.0.0.0</li>
                    `,
                    err_invalid_ip: 'Please enter a valid IPv4 address (0-255 for each octet)',
                    err_invalid_cidr: 'Please enter a valid CIDR prefix (0-32)',
                    err_invalid_mask: 'Please enter a valid subnet mask (0-255 for each octet)',
                    err_invalid_mask_format: 'Subnet mask is not contiguous'
                },
                'zh-CN': {
                    title: 'ğŸ”— IPå­ç½‘è®¡ç®—å™¨',
                    ip_address: 'IPåœ°å€',
                    ip_note: 'è¾“å…¥IPv4åœ°å€ï¼ˆä¾‹å¦‚ 192.168.1.100ï¼‰å’ŒCIDRå‰ç¼€ï¼ˆ0-32ï¼‰',
                    subnet_mask: 'å­ç½‘æ©ç ï¼ˆå¯é€‰ï¼‰',
                    mask_note: 'å¦‚æœæœªæä¾›ï¼Œå­ç½‘æ©ç å°†ä»CIDRè®¡ç®—å¾—å‡º',
                    clear: 'æ¸…é™¤',
                    calculate: 'è®¡ç®—å­ç½‘',
                    network_addr: 'ç½‘ç»œåœ°å€',
                    broadcast_addr: 'å¹¿æ’­åœ°å€',
                    cidr: 'CIDRè¡¨ç¤ºæ³•',
                    ip_range: 'IPèŒƒå›´',
                    hosts_count: 'ä¸»æœºæ•°é‡',
                    wildcard_mask: 'é€šé…ç¬¦æ©ç ',
                    first_host: 'ç¬¬ä¸€ä¸ªä¸»æœºIP',
                    last_host: 'æœ€åä¸€ä¸ªä¸»æœºIP',
                    notes: 'è¯´æ˜ï¼š',
                    notes_list: `
                        <li>CIDRï¼ˆæ— ç±»åˆ«åŸŸé—´è·¯ç”±ï¼‰è¡¨ç¤ºæ³•å°†å­ç½‘æ©ç è¡¨ç¤ºä¸º/å‰ç¼€ï¼ˆä¾‹å¦‚ /24ï¼‰</li>
                        <li>å¯ç”¨ä¸»æœºæ•°é‡è®¡ç®—å…¬å¼ä¸º 2^(32-å‰ç¼€) - 2ï¼ˆå‡å»ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€ï¼‰</li>
                        <li>æœ‰æ•ˆçš„IPv4åœ°å€èŒƒå›´æ˜¯ä»0.0.0.0åˆ°255.255.255.255</li>
                        <li>å¸¸è§çš„å­ç½‘æ©ç ï¼š/24 = 255.255.255.0ï¼Œ/16 = 255.255.0.0ï¼Œ/8 = 255.0.0.0</li>
                    `,
                    err_invalid_ip: 'è¯·è¾“å…¥æœ‰æ•ˆçš„IPv4åœ°å€ï¼ˆæ¯ä¸ªå…«ä½ç»„0-255ï¼‰',
                    err_invalid_cidr: 'è¯·è¾“å…¥æœ‰æ•ˆçš„CIDRå‰ç¼€ï¼ˆ0-32ï¼‰',
                    err_invalid_mask: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å­ç½‘æ©ç ï¼ˆæ¯ä¸ªå…«ä½ç»„0-255ï¼‰',
                    err_invalid_mask_format: 'å­ç½‘æ©ç ä¸è¿ç»­'
                },
                'zh-TW': {
                    title: 'ğŸ”— IPå­ç¶²è¨ˆç®—å™¨',
                    ip_address: 'IPåœ°å€',
                    ip_note: 'è¼¸å…¥IPv4åœ°å€ï¼ˆä¾‹å¦‚ 192.168.1.100ï¼‰å’ŒCIDRå‰ç¶´ï¼ˆ0-32ï¼‰',
                    subnet_mask: 'å­ç¶²é®ç½©ï¼ˆå¯é¸ï¼‰',
                    mask_note: 'å¦‚æœæœªæä¾›ï¼Œå­ç¶²é®ç½©å°‡å¾CIDRè¨ˆç®—å¾—å‡º',
                    clear: 'æ¸…é™¤',
                    calculate: 'è¨ˆç®—å­ç¶²',
                    network_addr: 'ç¶²è·¯åœ°å€',
                    broadcast_addr: 'å»£æ’­åœ°å€',
                    cidr: 'CIDRè¡¨ç¤ºæ³•',
                    ip_range: 'IPç¯„åœ',
                    hosts_count: 'ä¸»æ©Ÿæ•¸é‡',
                    wildcard_mask: 'è¬ç”¨å­—å…ƒé®ç½©',
                    first_host: 'ç¬¬ä¸€å€‹ä¸»æ©ŸIP',
                    last_host: 'æœ€å¾Œä¸€å€‹ä¸»æ©ŸIP',
                    notes: 'èªªæ˜ï¼š',
                    notes_list: `
                        <li>CIDRï¼ˆç„¡é¡åˆ¥åŸŸé–“è·¯ç”±ï¼‰è¡¨ç¤ºæ³•å°‡å­ç¶²é®ç½©è¡¨ç¤ºç‚º/å‰ç¶´ï¼ˆä¾‹å¦‚ /24ï¼‰</li>
                        <li>å¯ç”¨ä¸»æ©Ÿæ•¸é‡è¨ˆç®—å…¬å¼ç‚º 2^(32-å‰ç¶´) - 2ï¼ˆæ¸›å»ç¶²è·¯åœ°å€å’Œå»£æ’­åœ°å€ï¼‰</li>
                        <li>æœ‰æ•ˆçš„IPv4åœ°å€ç¯„åœæ˜¯å¾0.0.0.0åˆ°255.255.255.255</li>
                        <li>å¸¸è¦‹çš„å­ç¶²é®ç½©ï¼š/24 = 255.255.255.0ï¼Œ/16 = 255.255.0.0ï¼Œ/8 = 255.0.0.0</li>
                    `,
                    err_invalid_ip: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„IPv4åœ°å€ï¼ˆæ¯å€‹å…«ä½å…ƒ0-255ï¼‰',
                    err_invalid_cidr: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„CIDRå‰ç¶´ï¼ˆ0-32ï¼‰',
                    err_invalid_mask: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„å­ç¶²é®ç½©ï¼ˆæ¯å€‹å…«ä½å…ƒ0-255ï¼‰',
                    err_invalid_mask_format: 'å­ç¶²é®ç½©ä¸é€£çºŒ'
                },
                'ja': {
                    title: 'ğŸ”— IPã‚µãƒ–ãƒãƒƒãƒˆè¨ˆç®—ãƒ„ãƒ¼ãƒ«',
                    ip_address: 'IPã‚¢ãƒ‰ãƒ¬ã‚¹',
                    ip_note: 'IPv4ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼ˆä¾‹ï¼š192.168.1.100ï¼‰ã¨CIDRãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ï¼ˆ0-32ï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                    subnet_mask: 'ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰',
                    mask_note: 'æŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã¯ã€CIDRã‹ã‚‰ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ãŒè¨ˆç®—ã•ã‚Œã¾ã™',
                    clear: 'ã‚¯ãƒªã‚¢',
                    calculate: 'ã‚µãƒ–ãƒãƒƒãƒˆã‚’è¨ˆç®—',
                    network_addr: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹',
                    broadcast_addr: 'ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹',
                    cidr: 'CIDRè¡¨è¨˜',
                    ip_range: 'IPç¯„å›²',
                    hosts_count: 'ãƒ›ã‚¹ãƒˆæ•°',
                    wildcard_mask: 'ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¯',
                    first_host: 'æœ€åˆã®ãƒ›ã‚¹ãƒˆIP',
                    last_host: 'æœ€å¾Œã®ãƒ›ã‚¹ãƒˆIP',
                    notes: 'æ³¨æ„äº‹é …ï¼š',
                    notes_list: `
                        <li>CIDRï¼ˆã‚¯ãƒ©ã‚¹ãƒ¬ã‚¹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰è¡¨è¨˜ã¯ã€ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ã‚’/prefixã¨ã—ã¦è¡¨ã—ã¾ã™ï¼ˆä¾‹ï¼š/24ï¼‰</li>
                        <li>åˆ©ç”¨å¯èƒ½ãªãƒ›ã‚¹ãƒˆæ•°ã¯ã€2^(32-ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹) - 2 ã¨ã—ã¦è¨ˆç®—ã•ã‚Œã¾ã™ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ¸›ç®—ï¼‰</li>
                        <li>æœ‰åŠ¹ãªIPv4ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ç¯„å›²ã¯0.0.0.0ã‹ã‚‰255.255.255.255ã§ã™</li>
                        <li>ä¸€èˆ¬çš„ãªã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ï¼š/24 = 255.255.255.0ã€/16 = 255.255.0.0ã€/8 = 255.0.0.0</li>
                    `,
                    err_invalid_ip: 'æœ‰åŠ¹ãªIPv4ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå„ã‚ªã‚¯ãƒ†ãƒƒãƒˆã¯0-255ï¼‰',
                    err_invalid_cidr: 'æœ‰åŠ¹ãªCIDRãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ0-32ï¼‰',
                    err_invalid_mask: 'æœ‰åŠ¹ãªã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆå„ã‚ªã‚¯ãƒ†ãƒƒãƒˆã¯0-255ï¼‰',
                    err_invalid_mask_format: 'ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ãŒé€£ç¶šã—ã¦ã„ã¾ã›ã‚“'
                },
                'ru': {
                    title: 'ğŸ”— ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ IP Ğ¿Ğ¾Ğ´ÑĞµÑ‚ĞµĞ¹',
                    ip_address: 'IP-Ğ°Ğ´Ñ€ĞµÑ',
                    ip_note: 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ IPv4-Ğ°Ğ´Ñ€ĞµÑ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ 192.168.1.100) Ğ¸ Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑ CIDR (0-32)',
                    subnet_mask: 'ĞœĞ°ÑĞºĞ° Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ (Ğ½ĞµĞ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)',
                    mask_note: 'ĞœĞ°ÑĞºĞ° Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ° Ğ¸Ğ· CIDR, ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ°',
                    clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ',
                    calculate: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´ÑĞµÑ‚ÑŒ',
                    network_addr: 'Ğ¡ĞµÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ°Ğ´Ñ€ĞµÑ',
                    broadcast_addr: 'Ğ¨Ğ¸Ñ€Ğ¾ĞºĞ¾Ğ²ĞµÑ‰Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ´Ñ€ĞµÑ',
                    cidr: 'Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ CIDR',
                    ip_range: 'Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ IP',
                    hosts_count: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ…Ğ¾ÑÑ‚Ğ¾Ğ²',
                    wildcard_mask: 'ĞœĞ°ÑĞºĞ° Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ±Ğ¸Ñ‚Ğ¾Ğ²',
                    first_host: 'ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ IP Ñ…Ğ¾ÑÑ‚Ğ°',
                    last_host: 'ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ IP Ñ…Ğ¾ÑÑ‚Ğ°',
                    notes: 'ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:',
                    notes_list: `
                        <li>Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ CIDR (Classless Inter-Domain Routing) Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¼Ğ°ÑĞºÑƒ Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ ĞºĞ°Ğº /Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ /24)</li>
                        <li>ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… Ñ…Ğ¾ÑÑ‚Ğ¾Ğ² Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµÑ‚ÑÑ ĞºĞ°Ğº 2^(32-Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑ) - 2 (Ğ²Ñ‹Ñ‡Ğ¸Ñ‚Ğ°Ñ ÑĞµÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ¸ ÑˆĞ¸Ñ€Ğ¾ĞºĞ¾Ğ²ĞµÑ‰Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ´Ñ€ĞµÑĞ°)</li>
                        <li>Ğ”Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ IPv4-Ğ°Ğ´Ñ€ĞµÑĞ° Ğ½Ğ°Ñ…Ğ¾Ğ´ÑÑ‚ÑÑ Ğ² Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½Ğµ Ğ¾Ñ‚ 0.0.0.0 Ğ´Ğ¾ 255.255.255.255</li>
                        <li>Ğ Ğ°ÑĞ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ĞµĞ½Ğ½Ñ‹Ğµ Ğ¼Ğ°ÑĞºĞ¸ Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸: /24 = 255.255.255.0, /16 = 255.255.0.0, /8 = 255.0.0.0</li>
                    `,
                    err_invalid_ip: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ IPv4-Ğ°Ğ´Ñ€ĞµÑ (0-255 Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¾ĞºÑ‚ĞµÑ‚Ğ°)',
                    err_invalid_cidr: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑ CIDR (0-32)',
                    err_invalid_mask: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½ÑƒÑ Ğ¼Ğ°ÑĞºÑƒ Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ (0-255 Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¾ĞºÑ‚ĞµÑ‚Ğ°)',
                    err_invalid_mask_format: 'ĞœĞ°ÑĞºĞ° Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ Ğ½Ğµ ÑĞ²Ğ»ÑĞµÑ‚ÑÑ Ğ½ĞµĞ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ½Ğ¾Ğ¹'
                }
            },
            
            changeLang: function() {
                const lang = document.getElementById('ip-lang').value;
                const elements = document.querySelectorAll('[data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[lang] && this.i18n[lang][key]) {
                        if (key === 'notes_list') {
                            el.innerHTML = this.i18n[lang][key];
                        } else {
                            el.textContent = this.i18n[lang][key];
                        }
                    }
                });
            },
            
            clearForm: function() {
                // é‡ç½®IPåœ°å€
                document.getElementById('ip1').value = '192';
                document.getElementById('ip2').value = '168';
                document.getElementById('ip3').value = '1';
                document.getElementById('ip4').value = '100';
                
                // é‡ç½®CIDR
                document.getElementById('cidr').value = '24';
                
                // é‡ç½®å­ç½‘æ©ç 
                document.getElementById('mask1').value = '255';
                document.getElementById('mask2').value = '255';
                document.getElementById('mask3').value = '255';
                document.getElementById('mask4').value = '0';
                
                // éšè—ç»“æœå’Œé”™è¯¯
                document.getElementById('ip-results').classList.add('hidden');
                document.getElementById('ip-error').classList.add('hidden');
            },
            
            // éªŒè¯IPåœ°å€
            validateIP: function() {
                const octets = [
                    parseInt(document.getElementById('ip1').value),
                    parseInt(document.getElementById('ip2').value),
                    parseInt(document.getElementById('ip3').value),
                    parseInt(document.getElementById('ip4').value)
                ];
                
                for (let octet of octets) {
                    if (isNaN(octet) || octet < 0 || octet > 255) {
                        return false;
                    }
                }
                return octets;
            },
            
            // éªŒè¯CIDRå‰ç¼€
            validateCIDR: function() {
                const cidr = parseInt(document.getElementById('cidr').value);
                return !isNaN(cidr) && cidr >= 0 && cidr <= 32 ? cidr : false;
            },
            
            // ä»CIDRè·å–å­ç½‘æ©ç 
            getMaskFromCIDR: function(cidr) {
                const mask = [];
                let remaining = cidr;
                
                for (let i = 0; i < 4; i++) {
                    if (remaining >= 8) {
                        mask.push(255);
                        remaining -= 8;
                    } else if (remaining > 0) {
                        mask.push(256 - Math.pow(2, 8 - remaining));
                        remaining = 0;
                    } else {
                        mask.push(0);
                    }
                }
                return mask;
            },
            
            // éªŒè¯å­ç½‘æ©ç 
            validateMask: function() {
                const mask = [
                    parseInt(document.getElementById('mask1').value),
                    parseInt(document.getElementById('mask2').value),
                    parseInt(document.getElementById('mask3').value),
                    parseInt(document.getElementById('mask4').value)
                ];
                
                // æ£€æŸ¥æ¯ä¸ªå…«ä½ç»„æ˜¯å¦æœ‰æ•ˆ
                for (let m of mask) {
                    if (isNaN(m) || m < 0 || m > 255) {
                        return false;
                    }
                }
                
                // è½¬æ¢ä¸º32ä½äºŒè¿›åˆ¶å­—ç¬¦ä¸²
                let binary = '';
                for (let m of mask) {
                    binary += m.toString(2).padStart(8, '0');
                }
                
                // æ£€æŸ¥æ˜¯å¦æ˜¯è¿ç»­çš„1åé¢è·Ÿè¿ç»­çš„0
                const firstZero = binary.indexOf('0');
                if (firstZero !== -1) {
                    const afterZero = binary.substring(firstZero);
                    if (afterZero.indexOf('1') !== -1) {
                        return false; // æ©ç ä¸è¿ç»­
                    }
                }
                
                return mask;
            },
            
            // è®¡ç®—CIDRä»å­ç½‘æ©ç 
            getCIDRFromMask: function(mask) {
                let cidr = 0;
                for (let m of mask) {
                    cidr += m.toString(2).split('0').join('').length;
                }
                return cidr;
            },
            
            // è½¬æ¢IPä¸ºæ•´æ•°
            ipToInt: function(ip) {
                return (ip[0] << 24) | (ip[1] << 16) | (ip[2] << 8) | ip[3];
            },
            
            // è½¬æ¢æ•´æ•°ä¸ºIP
            intToIp: function(int) {
                return [
                    (int >>> 24) & 0xFF,
                    (int >>> 16) & 0xFF,
                    (int >>> 8) & 0xFF,
                    int & 0xFF
                ];
            },
            
            // è½¬æ¢IPä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²
            ipToBinary: function(ip) {
                return ip.map(octet => octet.toString(2).padStart(8, '0')).join('.');
            },
            
            calculate: function() {
                const lang = document.getElementById('ip-lang').value;
                const errorEl = document.getElementById('ip-error');
                
                // é‡ç½®çŠ¶æ€
                errorEl.classList.add('hidden');
                document.getElementById('ip-results').classList.add('hidden');
                
                // éªŒè¯IPåœ°å€
                const ip = this.validateIP();
                if (!ip) {
                    errorEl.textContent = this.i18n[lang].err_invalid_ip;
                    errorEl.classList.remove('hidden');
                    return;
                }
                
                // è·å–å¹¶éªŒè¯å­ç½‘æ©ç å’ŒCIDR
                let mask = this.validateMask();
                let cidr = this.validateCIDR();
                
                // å¤„ç†æ©ç å’ŒCIDRçš„ä¼˜å…ˆçº§
                if (!mask) {
                    // ä½¿ç”¨CIDRè®¡ç®—æ©ç 
                    if (!cidr) {
                        errorEl.textContent = this.i18n[lang].err_invalid_cidr;
                        errorEl.classList.remove('hidden');
                        return;
                    }
                    mask = this.getMaskFromCIDR(cidr);
                    // æ›´æ–°æ©ç è¾“å…¥æ¡†
                    document.getElementById('mask1').value = mask[0];
                    document.getElementById('mask2').value = mask[1];
                    document.getElementById('mask3').value = mask[2];
                    document.getElementById('mask4').value = mask[3];
                } else {
                    // ä½¿ç”¨æ©ç è®¡ç®—CIDR
                    cidr = this.getCIDRFromMask(mask);
                    document.getElementById('cidr').value = cidr;
                }
                
                // è®¡ç®—ç½‘ç»œåœ°å€
                const network = ip.map((octet, i) => octet & mask[i]);
                
                // è®¡ç®—å¹¿æ’­åœ°å€
                const inverseMask = mask.map(m => 255 - m);
                const broadcast = ip.map((octet, i) => network[i] | inverseMask[i]);
                
                // è®¡ç®—å¯ç”¨ä¸»æœºèŒƒå›´
                const networkInt = this.ipToInt(network);
                const broadcastInt = this.ipToInt(broadcast);
                const firstHostInt = networkInt + 1;
                const lastHostInt = broadcastInt - 1;
                const firstHost = this.intToIp(firstHostInt);
                const lastHost = this.intToIp(lastHostInt);
                
                // è®¡ç®—ä¸»æœºæ•°é‡
                const hostBits = 32 - cidr;
                const hostCount = hostBits === 0 ? 0 : (Math.pow(2, hostBits) - 2);
                
                // è®¡ç®—é€šé…ç¬¦æ©ç 
                const wildcardMask = inverseMask;
                
                // æ˜¾ç¤ºç»“æœ
                document.getElementById('network-addr').textContent = network.join('.');
                document.getElementById('network-addr-binary').textContent = this.ipToBinary(network);
                
                document.getElementById('broadcast-addr').textContent = broadcast.join('.');
                document.getElementById('broadcast-addr-binary').textContent = this.ipToBinary(broadcast);
                
                document.getElementById('subnet-mask').textContent = mask.join('.');
                document.getElementById('subnet-mask-binary').textContent = this.ipToBinary(mask);
                
                document.getElementById('result-cidr').textContent = `${ip.join('.')}/${cidr}`;
                document.getElementById('ip-range').textContent = `${firstHost.join('.')} - ${lastHost.join('.')}`;
                document.getElementById('hosts-count').textContent = hostCount;
                document.getElementById('wildcard-mask').textContent = wildcardMask.join('.');
                document.getElementById('first-host').textContent = firstHost.join('.');
                document.getElementById('last-host').textContent = lastHost.join('.');
                
                // æ˜¾ç¤ºç»“æœåŒºåŸŸ
                document.getElementById('ip-results').classList.remove('hidden');
            }
        };
    </script>
</body>
</html>