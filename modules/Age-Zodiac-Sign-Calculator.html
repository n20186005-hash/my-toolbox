<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Age & Zodiac Calculator Module</title>
    <meta name="tool-id" content="age_zod">
    <meta name="category" content="life">
    <meta name="icon" content="üéÇ">
    <meta name="description" content="ËæìÂÖ•Âá∫ÁîüÊó•ÊúüÔºåÊü•ËØ¢Âπ¥ÈæÑ„ÄÅÁîüËÇñ„ÄÅÊòüÂ∫ßÂíåË∑ùÁ¶ª‰∏ãÊ¨°ÁîüÊó•ÁöÑÂ§©Êï∞„ÄÇ">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fff1f2; font-family: 'Inter', sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); max-width: 600px; margin: 0 auto; position: relative; border: 1px solid #fecaca; }
        .grid-item { padding: 12px; background-color: #fef2f2; border-radius: 8px; }
        .grid-title { font-size: 0.75rem; color: #ef4444; font-weight: 600; }
        .grid-value { font-size: 1.25rem; color: #1f2937; font-weight: 700; margin-top: 4px; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="age_zod" 
         data-category="life" 
         data-title="Age & Zodiac Calculator" 
         data-icon="üéÇ">
        
        <div class="absolute top-4 right-4">
            <select id="az-lang" onchange="AgeZod.changeLang(this.value)" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none focus:ring-red-300 focus:border-red-300 transition">
                <option value="en">üá∫üá∏ English</option>
                <option value="zh-CN">üá®üá≥ ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">üá≠üá∞ ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
            </select>
        </div>

        <h1 class="text-2xl font-bold text-gray-800 mb-6" data-i18n="title">Age & Zodiac Calculator</h1>

        <div class="mb-6 space-y-4">
            <div class="flex flex-col">
                <label for="az-dob" class="text-sm font-medium text-gray-600 mb-1" data-i18n="input_label">Date of Birth</label>
                <input type="date" id="az-dob" value="2000-01-01" class="p-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 transition">
            </div>
            
            <button onclick="AgeZod.calculate()" class="w-full bg-red-500 text-white font-semibold py-3 rounded-lg hover:bg-red-600 transition shadow-md" data-i18n="calc_btn">Calculate Age and Signs</button>
        </div>

        <div id="az-result-box" class="hidden mt-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4" data-i18n="result_title">Calculation Results</h2>
            
            <div class="grid grid-cols-2 gap-4">
                <!-- Age -->
                <div class="grid-item">
                    <div class="grid-title" data-i18n="res_age_title">Age (Years)</div>
                    <div class="grid-value" id="res-age">24</div>
                </div>

                <!-- Zodiac Sign -->
                <div class="grid-item">
                    <div class="grid-title" data-i18n="res_zodiac_title">Zodiac Sign</div>
                    <div class="grid-value" id="res-zodiac">Aries</div>
                </div>

                <!-- Chinese Zodiac -->
                <div class="grid-item">
                    <div class="grid-title" data-i18n="res_czodiac_title">Chinese Zodiac</div>
                    <div class="grid-value" id="res-c-zodiac">Dragon</div>
                </div>

                <!-- Days to Next Birthday -->
                <div class="grid-item">
                    <div class="grid-title" data-i18n="res_days_title">Days to Next Birthday</div>
                    <div class="grid-value" id="res-days">200</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const translations = {
            "en": {
                title: "Age & Zodiac Calculator",
                input_label: "Date of Birth",
                calc_btn: "Calculate Age and Signs",
                result_title: "Calculation Results",
                res_age_title: "Age (Years)",
                res_zodiac_title: "Zodiac Sign",
                res_czodiac_title: "Chinese Zodiac",
                res_days_title: "Days to Next Birthday",
                czodiac: ["Rat", "Ox", "Tiger", "Rabbit", "Dragon", "Snake", "Horse", "Goat", "Monkey", "Rooster", "Dog", "Pig"],
                zodiac: ["Capricorn", "Aquarius", "Pisces", "Aries", "Taurus", "Gemini", "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Sagittarius"],
                err_date: "Please enter a valid date of birth."
            },
            "zh-CN": {
                title: "Âπ¥ÈæÑ‰∏éÊòüÂ∫ßÁîüËÇñËÆ°ÁÆóÂô®",
                input_label: "Âá∫ÁîüÊó•Êúü",
                calc_btn: "ËÆ°ÁÆóÂπ¥ÈæÑ‰∏éÁîüËÇñÊòüÂ∫ß",
                result_title: "ËÆ°ÁÆóÁªìÊûú",
                res_age_title: "Âπ¥ÈæÑ (Âë®Â≤Å)",
                res_zodiac_title: "ÊòüÂ∫ß",
                res_czodiac_title: "ÁîüËÇñ",
                res_days_title: "Ë∑ùÁ¶ª‰∏ãÊ¨°ÁîüÊó•",
                czodiac: ["Èº†", "Áâõ", "Ëôé", "ÂÖî", "Èæô", "Ëõá", "È©¨", "Áæä", "Áå¥", "È∏°", "Áãó", "Áå™"],
                zodiac: ["Êë©ÁæØÂ∫ß", "Ê∞¥Áì∂Â∫ß", "ÂèåÈ±ºÂ∫ß", "ÁôΩÁæäÂ∫ß", "ÈáëÁâõÂ∫ß", "ÂèåÂ≠êÂ∫ß", "Â∑®ËüπÂ∫ß", "ÁãÆÂ≠êÂ∫ß", "Â§ÑÂ•≥Â∫ß", "Â§©Áß§Â∫ß", "Â§©ËùéÂ∫ß", "Â∞ÑÊâãÂ∫ß"],
                err_date: "ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂá∫ÁîüÊó•Êúü„ÄÇ"
            },
            "zh-TW": {
                title: "Âπ¥ÈΩ°ËàáÊòüÂ∫ßÁîüËÇñË®àÁÆóÂô®",
                input_label: "Âá∫ÁîüÊó•Êúü",
                calc_btn: "Ë®àÁÆóÂπ¥ÈΩ°ËàáÁîüËÇñÊòüÂ∫ß",
                result_title: "Ë®àÁÆóÁµêÊûú",
                res_age_title: "Âπ¥ÈΩ° (Âë®Ê≠≤)",
                res_zodiac_title: "ÊòüÂ∫ß",
                res_czodiac_title: "ÁîüËÇñ",
                res_days_title: "Ë∑ùÈõ¢‰∏ãÊ¨°ÁîüÊó•",
                czodiac: ["Èº†", "Áâõ", "Ëôé", "ÂÖî", "Èæç", "Ëõá", "È¶¨", "Áæä", "Áå¥", "Èõû", "Áãó", "Ë±¨"],
                zodiac: ["Êë©ÁæØÂ∫ß", "Ê∞¥Áì∂Â∫ß", "ÈõôÈ≠öÂ∫ß", "ÁôΩÁæäÂ∫ß", "ÈáëÁâõÂ∫ß", "ÈõôÂ≠êÂ∫ß", "Â∑®ËüπÂ∫ß", "ÁçÖÂ≠êÂ∫ß", "ËôïÂ•≥Â∫ß", "Â§©Áß§Â∫ß", "Â§©Ë†çÂ∫ß", "Â∞ÑÊâãÂ∫ß"],
                err_date: "Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÂá∫ÁîüÊó•Êúü„ÄÇ"
            },
            "ja": {
                title: "Âπ¥ÈΩ¢„Å®Âπ≤ÊîØ„ÉªÊòüÂ∫ßË®àÁÆóÊ©ü",
                input_label: "ÁîüÂπ¥ÊúàÊó•",
                calc_btn: "Âπ¥ÈΩ¢„Å®„Çµ„Ç§„É≥„ÇíË®àÁÆó",
                result_title: "Ë®àÁÆóÁµêÊûú",
                res_age_title: "Âπ¥ÈΩ¢ (Ê∫Ä)",
                res_zodiac_title: "ÊòüÂ∫ß",
                res_czodiac_title: "Âπ≤ÊîØ",
                res_days_title: "Ê¨°„ÅÆË™ïÁîüÊó•„Åæ„Åß„ÅÆÊó•Êï∞",
                czodiac: ["Â≠ê", "‰∏ë", "ÂØÖ", "ÂçØ", "Ëæ∞", "Â∑≥", "Âçà", "Êú™", "Áî≥", "ÈÖâ", "Êàå", "‰∫•"],
                zodiac: ["Â±±ÁæäÂ∫ß", "Ê∞¥Áì∂Â∫ß", "È≠öÂ∫ß", "Áâ°ÁæäÂ∫ß", "Áâ°ÁâõÂ∫ß", "ÂèåÂ≠êÂ∫ß", "ËüπÂ∫ß", "ÁçÖÂ≠êÂ∫ß", "‰πôÂ•≥Â∫ß", "Â§©Áß§Â∫ß", "Ë†çÂ∫ß", "Â∞ÑÊâãÂ∫ß"],
                err_date: "ÊúâÂäπ„Å™ÁîüÂπ¥ÊúàÊó•„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
            },
            "ru": {
                title: "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –í–æ–∑—Ä–∞—Å—Ç–∞ –∏ –ó–Ω–∞–∫–æ–≤",
                input_label: "–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è",
                calc_btn: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤–æ–∑—Ä–∞—Å—Ç –∏ –∑–Ω–∞–∫–∏",
                result_title: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞",
                res_age_title: "–í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç)",
                res_zodiac_title: "–ó–Ω–∞–∫ –ó–æ–¥–∏–∞–∫–∞",
                res_czodiac_title: "–ö–∏—Ç–∞–π—Å–∫–∏–π –ó–Ω–∞–∫",
                res_days_title: "–î–Ω–µ–π –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –î–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è",
                czodiac: ["–ö—Ä—ã—Å–∞", "–ë—ã–∫", "–¢–∏–≥—Ä", "–ö—Ä–æ–ª–∏–∫", "–î—Ä–∞–∫–æ–Ω", "–ó–º–µ—è", "–õ–æ—à–∞–¥—å", "–ö–æ–∑–∞", "–û–±–µ–∑—å—è–Ω–∞", "–ü–µ—Ç—É—Ö", "–°–æ–±–∞–∫–∞", "–°–≤–∏–Ω—å—è"],
                zodiac: ["–ö–æ–∑–µ—Ä–æ–≥", "–í–æ–¥–æ–ª–µ–π", "–†—ã–±—ã", "–û–≤–µ–Ω", "–¢–µ–ª–µ—Ü", "–ë–ª–∏–∑–Ω–µ—Ü—ã", "–†–∞–∫", "–õ–µ–≤", "–î–µ–≤–∞", "–í–µ—Å—ã", "–°–∫–æ—Ä–ø–∏–æ–Ω", "–°—Ç—Ä–µ–ª–µ—Ü"],
                err_date: "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è."
            }
        };
        
        const AgeZod = {
            currentLang: localStorage.getItem('app_lang') || 'en',

            init: () => {
                document.getElementById('az-lang').value = AgeZod.currentLang;
                AgeZod.applyLanguage(AgeZod.currentLang);
                document.getElementById('az-dob').value = '2000-01-01'; // Default value
                AgeZod.calculate(); // Calculate with default date
            },

            changeLang: (lang) => {
                AgeZod.currentLang = lang;
                localStorage.setItem('app_lang', lang);
                AgeZod.applyLanguage(lang);
                AgeZod.calculate(); // Re-calculate to update any language-dependent results
            },

            applyLanguage: (lang) => {
                const t = translations[lang] || translations['en'];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (t[key]) {
                        el.textContent = t[key];
                    }
                });
            },

            calculate: () => {
                const dobInput = document.getElementById('az-dob').value;
                const dob = new Date(dobInput);
                const today = new Date();
                
                if (isNaN(dob.getTime())) {
                    document.getElementById('az-result-box').classList.add('hidden');
                    alert(translations[AgeZod.currentLang].err_date);
                    return;
                }

                const txt = translations[AgeZod.currentLang];
                
                // 1. Calculate Age
                let age = today.getFullYear() - dob.getFullYear();
                const m = today.getMonth() - dob.getMonth();
                if (m < 0 || (m === 0 && today.getDate() < dob.getDate())) {
                    age--;
                }
                document.getElementById('res-age').innerText = age;

                // 2. Calculate Chinese Zodiac
                const czodiacIndex = (dob.getFullYear() - 4) % 12;
                document.getElementById('res-c-zodiac').innerText = txt.czodiac[czodiacIndex];

                // 3. Calculate Western Zodiac Sign
                const month = dob.getMonth() + 1; // 1-12
                const day = dob.getDate();
                let zIndex = 0;
                // Capricorn (Êë©ÁæØÂ∫ß): Dec 22 - Jan 19
                if ((month == 1 && day <= 19) || (month == 12 && day >= 22)) zIndex = 0;
                // Aquarius (Ê∞¥Áì∂Â∫ß): Jan 20 - Feb 18
                else if ((month == 1 && day >= 20) || (month == 2 && day <= 18)) zIndex = 1;
                // Pisces (ÂèåÈ±ºÂ∫ß): Feb 19 - Mar 20
                else if ((month == 2 && day >= 19) || (month == 3 && day <= 20)) zIndex = 2;
                // Aries (ÁôΩÁæäÂ∫ß): Mar 21 - Apr 19
                else if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) zIndex = 3;
                // Taurus (ÈáëÁâõÂ∫ß): Apr 20 - May 20
                else if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) zIndex = 4;
                // Gemini (ÂèåÂ≠êÂ∫ß): May 21 - Jun 20
                else if ((month == 5 && day >= 21) || (month == 6 && day <= 20)) zIndex = 5;
                // Cancer (Â∑®ËüπÂ∫ß): Jun 21 - Jul 22
                else if ((month == 6 && day >= 21) || (month == 7 && day <= 22)) zIndex = 6;
                // Leo (ÁãÆÂ≠êÂ∫ß): Jul 23 - Aug 22
                else if ((month == 7 && day >= 23) || (month == 8 && day <= 22)) zIndex = 7;
                // Virgo (Â§ÑÂ•≥Â∫ß): Aug 23 - Sep 22
                else if ((month == 8 && day >= 23) || (month == 9 && day <= 22)) zIndex = 8;
                // Libra (Â§©Áß§Â∫ß): Sep 23 - Oct 22
                else if ((month == 9 && day >= 23) || (month == 10 && day <= 22)) zIndex = 9;
                // Scorpio (Â§©ËùéÂ∫ß): Oct 23 - Nov 21
                else if ((month == 10 && day >= 23) || (month == 11 && day <= 21)) zIndex = 10;
                // Sagittarius (Â∞ÑÊâãÂ∫ß): Nov 22 - Dec 21
                else if ((month == 11 && day >= 22) || (month == 12 && day <= 21)) zIndex = 11;
                
                document.getElementById('res-zodiac').innerText = txt.zodiac[zIndex];

                // 4. Calculate Days to Next Birthday
                let nextBirthday = new Date(today.getFullYear(), dob.getMonth(), dob.getDate());
                
                // If this year's birthday has passed, use next year's date
                if (nextBirthday < today) {
                    nextBirthday.setFullYear(today.getFullYear() + 1);
                }
                
                // Special handling for February 29th
                if (dob.getMonth() === 1 && dob.getDate() === 29) {
                    while (nextBirthday.getMonth() !== 1 || nextBirthday.getDate() !== 29) {
                        nextBirthday.setDate(nextBirthday.getDate() + 1); // Move to March 1st if current year isn't leap
                    }
                }

                const diffTime = nextBirthday.getTime() - today.getTime();
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                document.getElementById('res-days').innerText = diffDays;

                document.getElementById('az-result-box').classList.remove('hidden');
            }
        };

        window.addEventListener('DOMContentLoaded', AgeZod.init);
    </script>
</body>
</html>