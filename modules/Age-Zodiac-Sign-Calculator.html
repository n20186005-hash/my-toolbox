<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Age & Zodiac Calculator Module</title>
    <meta name="tool-id" content="age_zod">
    <meta name="category" content="life">
    <meta name="icon" content="üéÇ">
    <meta name="description" content="ËæìÂÖ•Âá∫ÁîüÊó•ÊúüÔºåÊü•ËØ¢Âπ¥ÈæÑ„ÄÅÁîüËÇñ„ÄÅÊòüÂ∫ßÂíåË∑ùÁ¶ª‰∏ãÊ¨°ÁîüÊó•ÁöÑÂ§©Êï∞„ÄÇ">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fff1f2; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="age_zod" 
         data-category="life" 
         data-title="Age & Zodiac Calculator" 
         data-icon="üéÇ">
        
        <div class="absolute top-4 right-4">
            <select id="az-lang" onchange="AgeZod.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üéÇ Age & Zodiac Calculator</h2>

        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="lbl_dob">Date of Birth</label>
            <input type="date" id="az-dob" class="w-full p-3 border rounded text-lg focus:ring-2 focus:ring-pink-500 outline-none">
        </div>

        <button onclick="AgeZod.calc()" class="w-full bg-pink-500 text-white py-2 rounded font-bold hover:bg-pink-600 transition mb-6" data-i18n="btn_calc">Analyze</button>

        <div class="bg-pink-50 p-4 rounded-lg border border-pink-100 hidden" id="az-result-box">
            <div class="flex justify-between items-end border-b border-pink-200 pb-3 mb-3">
                <div>
                    <span class="text-xs text-gray-500 uppercase font-bold" data-i18n="res_age">Age</span>
                    <div id="res-age-val" class="text-3xl font-bold text-gray-800">--</div>
                </div>
                <div class="text-right">
                    <span class="text-xs text-gray-500 uppercase font-bold" data-i18n="res_next">Next Birthday</span>
                    <div id="res-next-val" class="text-pink-600 font-medium">-- days left</div>
                </div>
            </div>

            <div class="grid grid-cols-2 gap-4">
                <div class="text-center p-2 bg-white rounded shadow-sm">
                    <span class="text-2xl block mb-1">üêÄ</span>
                    <span class="text-xs text-gray-400 uppercase" data-i18n="res_zodiac">Chinese Zodiac</span>
                    <div id="res-zodiac-val" class="font-bold text-gray-800 mt-1">--</div>
                </div>
                <div class="text-center p-2 bg-white rounded shadow-sm">
                    <span class="text-2xl block mb-1">‚ôà</span>
                    <span class="text-xs text-gray-400 uppercase" data-i18n="res_sign">Star Sign</span>
                    <div id="res-sign-val" class="font-bold text-gray-800 mt-1">--</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const AgeZod = {
            i18n: {
                'en': {
                    title: 'üéÇ Age & Zodiac Calculator',
                    lbl_dob: 'Date of Birth',
                    btn_calc: 'Analyze',
                    res_age: 'Age',
                    res_next: 'Next Birthday',
                    res_zodiac: 'Chinese Zodiac',
                    res_sign: 'Star Sign',
                    fmt_age: '{y} Years {m} Months {d} Days',
                    fmt_left: '{d} days left',
                    signs: ['Capricorn', 'Aquarius', 'Pisces', 'Aries', 'Taurus', 'Gemini', 'Cancer', 'Leo', 'Virgo', 'Libra', 'Scorpio', 'Sagittarius'],
                    zodiacs: ['Rat', 'Ox', 'Tiger', 'Rabbit', 'Dragon', 'Snake', 'Horse', 'Goat', 'Monkey', 'Rooster', 'Dog', 'Pig']
                },
                'zh-CN': {
                    title: 'üéÇ Âπ¥ÈæÑ‰∏éÁîüËÇñÊòüÂ∫ß',
                    lbl_dob: 'Âá∫ÁîüÊó•Êúü',
                    btn_calc: 'ÂºÄÂßãÂàÜÊûê',
                    res_age: 'Âë®Â≤Å',
                    res_next: 'Ë∑ùÁ¶ª‰∏ã‰∏™ÁîüÊó•',
                    res_zodiac: 'ÁîüËÇñ',
                    res_sign: 'ÊòüÂ∫ß',
                    fmt_age: '{y} Â≤Å {m} ‰∏™Êúà {d} Â§©',
                    fmt_left: 'ËøòÊúâ {d} Â§©',
                    signs: ['Êë©ÁæØÂ∫ß', 'Ê∞¥Áì∂Â∫ß', 'ÂèåÈ±ºÂ∫ß', 'ÁôΩÁæäÂ∫ß', 'ÈáëÁâõÂ∫ß', 'ÂèåÂ≠êÂ∫ß', 'Â∑®ËüπÂ∫ß', 'ÁãÆÂ≠êÂ∫ß', 'Â§ÑÂ•≥Â∫ß', 'Â§©Áß§Â∫ß', 'Â§©ËùéÂ∫ß', 'Â∞ÑÊâãÂ∫ß'],
                    zodiacs: ['Èº†', 'Áâõ', 'Ëôé', 'ÂÖî', 'Èæô', 'Ëõá', 'È©¨', 'Áæä', 'Áå¥', 'È∏°', 'Áãó', 'Áå™']
                },
                'zh-TW': {
                    title: 'üéÇ Âπ¥ÈΩ°ËàáÁîüËÇñÊòüÂ∫ß',
                    lbl_dob: 'Âá∫ÁîüÊó•Êúü',
                    btn_calc: 'ÈñãÂßãÂàÜÊûê',
                    res_age: 'ÂØ¶Ê≠≤',
                    res_next: 'Ë∑ùÈõ¢‰∏ãÂÄãÁîüÊó•',
                    res_zodiac: 'ÁîüËÇñ',
                    res_sign: 'ÊòüÂ∫ß',
                    fmt_age: '{y} Ê≠≤ {m} ÂÄãÊúà {d} Â§©',
                    fmt_left: 'ÈÇÑÊúâ {d} Â§©',
                    signs: ['Êë©ÁæØÂ∫ß', 'Ê∞¥Áì∂Â∫ß', 'ÈõôÈ≠öÂ∫ß', 'ÁôΩÁæäÂ∫ß', 'ÈáëÁâõÂ∫ß', 'ÈõôÂ≠êÂ∫ß', 'Â∑®ËüπÂ∫ß', 'ÁçÖÂ≠êÂ∫ß', 'ËôïÂ•≥Â∫ß', 'Â§©Áß§Â∫ß', 'Â§©Ë†çÂ∫ß', 'Â∞ÑÊâãÂ∫ß'],
                    zodiacs: ['Èº†', 'Áâõ', 'Ëôé', 'ÂÖî', 'Èæç', 'Ëõá', 'È¶¨', 'Áæä', 'Áå¥', 'Èõû', 'Áãó', 'Ë±¨']
                },
                'ja': {
                    title: 'üéÇ Âπ¥ÈΩ¢„ÉªÂπ≤ÊîØ„ÉªÊòüÂ∫ß',
                    lbl_dob: 'ÁîüÂπ¥ÊúàÊó•',
                    btn_calc: 'Ë®∫Êñ≠„Åô„Çã',
                    res_age: 'Âπ¥ÈΩ¢',
                    res_next: 'Ê¨°„ÅÆË™ïÁîüÊó•„Åæ„Åß',
                    res_zodiac: 'Âπ≤ÊîØ',
                    res_sign: 'ÊòüÂ∫ß',
                    fmt_age: '{y} Ê≠≥ {m} „É∂Êúà {d} Êó•',
                    fmt_left: '„ÅÇ„Å® {d} Êó•',
                    signs: ['Â±±ÁæäÂ∫ß', 'Ê∞¥Áì∂Â∫ß', 'È≠öÂ∫ß', 'Áâ°ÁæäÂ∫ß', 'Áâ°ÁâõÂ∫ß', 'ÂèåÂ≠êÂ∫ß', 'ËüπÂ∫ß', 'ÁçÖÂ≠êÂ∫ß', '‰πôÂ•≥Â∫ß', 'Â§©Áß§Â∫ß', 'Ë†çÂ∫ß', 'Â∞ÑÊâãÂ∫ß'],
                    zodiacs: ['Â≠ê („Å≠)', '‰∏ë („ÅÜ„Åó)', 'ÂØÖ („Å®„Çâ)', 'ÂçØ („ÅÜ)', 'Ëæ∞ („Åü„Å§)', 'Â∑≥ („Åø)', 'Âçà („ÅÜ„Åæ)', 'Êú™ („Å≤„Å§„Åò)', 'Áî≥ („Åï„Çã)', 'ÈÖâ („Å®„Çä)', 'Êàå („ÅÑ„Å¨)', '‰∫• („ÅÑ)']
                },
                'ru': {
                    title: 'üéÇ –í–æ–∑—Ä–∞—Å—Ç –∏ –ó–æ–¥–∏–∞–∫',
                    lbl_dob: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è',
                    btn_calc: '–ê–Ω–∞–ª–∏–∑',
                    res_age: '–í–æ–∑—Ä–∞—Å—Ç',
                    res_next: '–î–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è',
                    res_zodiac: '–ö–∏—Ç. –∑–æ–¥–∏–∞–∫',
                    res_sign: '–ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞',
                    fmt_age: '{y} –ª–µ—Ç {m} –º–µ—Å {d} –¥–Ω',
                    fmt_left: '–æ—Å—Ç–∞–ª–æ—Å—å {d} –¥–Ω',
                    signs: ['–ö–æ–∑–µ—Ä–æ–≥', '–í–æ–¥–æ–ª–µ–π', '–†—ã–±—ã', '–û–≤–µ–Ω', '–¢–µ–ª–µ—Ü', '–ë–ª–∏–∑–Ω–µ—Ü—ã', '–†–∞–∫', '–õ–µ–≤', '–î–µ–≤–∞', '–í–µ—Å—ã', '–°–∫–æ—Ä–ø–∏–æ–Ω', '–°—Ç—Ä–µ–ª–µ—Ü'],
                    zodiacs: ['–ö—Ä—ã—Å–∞', '–ë—ã–∫', '–¢–∏–≥—Ä', '–ö—Ä–æ–ª–∏–∫', '–î—Ä–∞–∫–æ–Ω', '–ó–º–µ—è', '–õ–æ—à–∞–¥—å', '–ö–æ–∑–∞', '–û–±–µ–∑—å—è–Ω–∞', '–ü–µ—Ç—É—Ö', '–°–æ–±–∞–∫–∞', '–°–≤–∏–Ω—å—è']
                },
                'es': {
                    title: 'üéÇ Edad y Zod√≠aco',
                    lbl_dob: 'Fecha de nacimiento',
                    btn_calc: 'Analizar',
                    res_age: 'Edad',
                    res_next: 'Pr√≥ximo cumple',
                    res_zodiac: 'Zod√≠aco Chino',
                    res_sign: 'Signo Zodiacal',
                    fmt_age: '{y} a√±os {m} meses {d} d√≠as',
                    fmt_left: 'faltan {d} d√≠as',
                    signs: ['Capricornio', 'Acuario', 'Piscis', 'Aries', 'Tauro', 'G√©minis', 'C√°ncer', 'Leo', 'Virgo', 'Libra', 'Escorpio', 'Sagitario'],
                    zodiacs: ['Rata', 'Buey', 'Tigre', 'Conejo', 'Drag√≥n', 'Serpiente', 'Caballo', 'Cabra', 'Mono', 'Gallo', 'Perro', 'Cerdo']
                }
            },

            changeLang: () => {
                const lang = document.getElementById('az-lang').value;
                const texts = AgeZod.i18n[lang];
                const elements = document.querySelectorAll('[data-id="age_zod"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
                if(document.getElementById('az-result-box').style.display !== 'none') AgeZod.calc();
            },

            calc: () => {
                const dobStr = document.getElementById('az-dob').value;
                if(!dobStr) return;

                const dob = new Date(dobStr);
                const today = new Date();
                const lang = document.getElementById('az-lang').value;
                const txt = AgeZod.i18n[lang];

                // 1. Age Calculation
                let years = today.getFullYear() - dob.getFullYear();
                let months = today.getMonth() - dob.getMonth();
                let days = today.getDate() - dob.getDate();

                if (days < 0) {
                    months--;
                    const prevMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                    days += prevMonth.getDate();
                }
                if (months < 0) {
                    years--;
                    months += 12;
                }
                const ageStr = txt.fmt_age.replace('{y}', years).replace('{m}', months).replace('{d}', days);
                document.getElementById('res-age-val').innerText = ageStr;

                // 2. Next Birthday
                const nextBday = new Date(today.getFullYear(), dob.getMonth(), dob.getDate());
                if (nextBday < today) {
                    nextBday.setFullYear(today.getFullYear() + 1);
                }
                const diffTime = Math.abs(nextBday - today);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
                document.getElementById('res-next-val').innerText = txt.fmt_left.replace('{d}', diffDays);

                // 3. Chinese Zodiac (Based on year 1900 = Rat)
                // Offset: 1900 % 12 = 4 (Rat is index 0). Actually 1900 is Rat.
                // (Year - 1900) % 12. 
                // Alternatively: (Year - 4) % 12.
                // Rat is 0. (1924 - 4) % 12 = 0. Correct.
                const zIndex = (dob.getFullYear() - 4) % 12;
                const finalZIndex = zIndex < 0 ? zIndex + 12 : zIndex;
                const zodiacIcons = ['üêÄ','üêÇ','üêÖ','üêá','üêâ','üêç','üêé','üêê','üêí','üêì','üêï','üêñ'];
                document.getElementById('res-zodiac-val').innerText = zodiacIcons[finalZIndex] + ' ' + txt.zodiacs[finalZIndex];

                // 4. Star Sign
                const m = dob.getMonth() + 1; // 1-12
                const d = dob.getDate();
                let sIdx = 0;
                // Capr: Dec 22 - Jan 19.  Aqu: Jan 20...
                if ((m == 1 && d <= 19) || (m == 12 && d >= 22)) sIdx = 0;
                else if ((m == 1 && d >= 20) || (m == 2 && d <= 18)) sIdx = 1;
                else if ((m == 2 && d >= 19) || (m == 3 && d <= 20)) sIdx = 2;
                else if ((m == 3 && d >= 21) || (m == 4 && d <= 19)) sIdx = 3;
                else if ((m == 4 && d >= 20) || (m == 5 && d <= 20)) sIdx = 4;
                else if ((m == 5 && d >= 21) || (m == 6 && d <= 20)) sIdx = 5;
                else if ((m == 6 && d >= 21) || (m == 7 && d <= 22)) sIdx = 6;
                else if ((m == 7 && d >= 23) || (m == 8 && d <= 22)) sIdx = 7;
                else if ((m == 8 && d >= 23) || (m == 9 && d <= 22)) sIdx = 8;
                else if ((m == 9 && d >= 23) || (m == 10 && d <= 22)) sIdx = 9;
                else if ((m == 10 && d >= 23) || (m == 11 && d <= 21)) sIdx = 10;
                else if ((m == 11 && d >= 22) || (m == 12 && d <= 21)) sIdx = 11;

                const signIcons = ['‚ôë','‚ôí','‚ôì','‚ôà','‚ôâ','‚ôä','‚ôã','‚ôå','‚ôç','‚ôé','‚ôè','‚ôê'];
                document.getElementById('res-sign-val').innerText = signIcons[sIdx] + ' ' + txt.signs[sIdx];

                document.getElementById('az-result-box').classList.remove('hidden');
            }
        };
    </script>
</body>
</html>