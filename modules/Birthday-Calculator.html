<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Calculator</title>
    <meta name="tool-id" content="birthday_calculator">
    <meta name="category" content="Date & Time">
    <meta name="icon" content="üéÇ">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif; background-color: #f3f4f6; }
        
        /* Âä®Áîª */
        .fade-in { animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Ë°®Ê†ºÊªöÂä®Êù° */
        .custom-scroll::-webkit-scrollbar { height: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f5f9; }

        .birthday-highlight {
            background: linear-gradient(120deg, transparent 0%, transparent 45%, #fde68a 45%, #fde68a 55%, transparent 55%, transparent 100%);
        }
    </style>
</head>
<body class="p-4 md:p-8 min-h-screen flex flex-col">

    <div class="max-w-6xl mx-auto w-full flex-grow">
        
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <div class="bg-white rounded-xl shadow-sm border border-gray-100 mb-6 sticky top-2 z-20">
            <div class="flex flex-col md:flex-row justify-between items-center p-3 md:px-6">
                <!-- Logo & Title -->
                <div class="flex items-center gap-3 mb-3 md:mb-0 w-full md:w-auto">
                    <div class="bg-gradient-to-br from-amber-500 to-orange-500 text-white p-2.5 rounded-lg shadow-md">
                        <i class="fa-solid fa-cake-candles text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-lg font-bold text-gray-800 leading-tight" data-i18n="app_title">Birthday Calculator</h1>
                        <p class="text-xs text-gray-400" data-i18n="app_subtitle">Age & Anniversary Tracker</p>
                    </div>
                </div>

                <!-- Controls -->
                <div class="flex items-center gap-3 w-full md:w-auto justify-between md:justify-end">
                    <!-- Language Selector -->
                    <div class="relative group">
                        <select id="lang-select" onchange="I18nModule.changeLanguage(this.value)" class="appearance-none bg-white border border-gray-200 text-gray-700 text-sm rounded-lg focus:ring-amber-500 focus:border-amber-500 block p-2 pr-8 cursor-pointer font-medium hover:border-amber-300 transition">
                            <option value="en">üá∫üá∏ English</option>
                            <option value="zh-CN">üá®üá≥ ÁÆÄ‰Ωì‰∏≠Êñá</option>
                            <option value="zh-TW">üá≠üá∞ ÁπÅÈ´î‰∏≠Êñá</option>
                            <option value="ja">üáØüáµ Êó•Êú¨Ë™û</option>
                            <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                        </select>
                        <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500">
                            <i class="fa-solid fa-chevron-down text-xs"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden min-h-[600px] relative">
            
            <!-- ÁîüÊó•ËÆ°ÁÆóÊ®°Âùó -->
            <div id="view-birthday" class="fade-in p-6 md:p-8">
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 h-full">
                    <!-- Â∑¶‰æß: ËæìÂÖ• -->
                    <div class="lg:col-span-4 flex flex-col gap-6">
                        <div class="bg-amber-50 p-6 rounded-2xl border border-amber-100 shadow-sm">
                            <h3 class="text-lg font-bold text-gray-800 mb-5 flex items-center gap-2">
                                <i class="fa-solid fa-calendar text-amber-500"></i> <span data-i18n="params_title">Birthday Information</span>
                            </h3>
                            
                            <div class="space-y-4">
                                <div class="group">
                                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1" data-i18n="name_label">Name</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400"><i class="fa-solid fa-user"></i></div>
                                        <input type="text" id="birthday-name" class="w-full pl-9 pr-3 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-amber-500 outline-none transition bg-white" placeholder="John Doe">
                                    </div>
                                </div>

                                <div class="group">
                                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1" data-i18n="date_label">Birth Date</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400"><i class="fa-solid fa-calendar-days"></i></div>
                                        <input type="date" id="birthday-date" class="w-full pl-9 pr-3 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none transition bg-white">
                                    </div>
                                </div>

                                <div class="group">
                                    <label class="block text-xs font-bold text-gray-500 uppercase tracking-wider mb-1" data-i18n="target_label">Target Date</label>
                                    <div class="relative">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400"><i class="fa-solid fa-crosshairs"></i></div>
                                        <input type="date" id="target-date" class="w-full pl-9 pr-3 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-amber-500 outline-none transition bg-white">
                                    </div>
                                </div>

                                <button onclick="BirthdayModule.calculate()" class="w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3.5 rounded-xl shadow-lg hover:shadow-amber-500/30 transition-all transform active:scale-95 mt-2 flex justify-center items-center gap-2 group">
                                    <i class="fa-solid fa-calculator group-hover:animate-pulse"></i> <span data-i18n="btn_calc">Calculate</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- ÊèêÁ§∫Âç°Áâá -->
                        <div class="bg-gray-50 p-4 rounded-xl border border-gray-100 text-xs text-gray-500 leading-relaxed">
                            <i class="fa-solid fa-circle-info text-amber-400 mr-1"></i> <span data-i18n="birthday_hint">Calculate age, days until next birthday, and other important date information.</span>
                        </div>
                    </div>

                    <!-- Âè≥‰æß: ÁªìÊûú -->
                    <div class="lg:col-span-8 flex flex-col h-full">
                        <div class="flex justify-between items-end mb-4">
                            <div>
                                <h3 class="text-xl font-bold text-gray-800" data-i18n="results_title">Birthday Results</h3>
                                <p class="text-sm text-gray-400 mt-1" data-i18n="results_subtitle">Date calculations and anniversaries</p>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="App.exportCSV('birthday')" class="text-xs font-medium text-amber-600 hover:text-amber-800 px-3 py-2 bg-amber-50 rounded-lg hover:bg-amber-100 transition flex items-center gap-1">
                                    <i class="fa-solid fa-download"></i> <span data-i18n="btn_export">Export</span>
                                </button>
                                <button onclick="App.clearData('birthday')" class="text-xs font-medium text-red-500 hover:text-red-700 px-3 py-2 bg-red-50 rounded-lg hover:bg-red-100 transition flex items-center gap-1">
                                    <i class="fa-regular fa-trash-can"></i> <span data-i18n="btn_clear">Clear</span>
                                </button>
                            </div>
                        </div>

                        <div class="flex-grow overflow-hidden rounded-xl border border-gray-200 bg-white relative">
                            <div class="absolute inset-0 overflow-auto custom-scroll">
                                <table class="w-full text-sm text-left text-gray-600">
                                    <thead class="text-xs text-gray-500 uppercase bg-gray-50/80 sticky top-0 backdrop-blur-sm z-10">
                                        <tr>
                                            <th class="px-5 py-3 font-semibold" data-i18n="col_name">Name</th>
                                            <th class="px-5 py-3 font-semibold" data-i18n="col_birthdate">Birth Date</th>
                                            <th class="px-5 py-3 font-semibold" data-i18n="col_age">Age</th>
                                            <th class="px-5 py-3 font-semibold" data-i18n="col_days">Days Until</th>
                                            <th class="px-5 py-3 text-center" data-i18n="col_action">Action</th>
                                        </tr>
                                    </thead>
                                    <tbody id="birthday-list" class="divide-y divide-gray-100">
                                        <!-- Data Injected Here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        
        <div class="text-center mt-6 text-gray-400 text-xs">
            &copy; 2024 Birthday Tools. All calculations are performed locally.
        </div>
    </div>

    <script>
        /**
         * ÂõΩÈôÖÂåñÊ®°Âùó (I18N Module)
         */
        const I18nModule = {
            currentLang: 'en',
            
            data: {
                'en': {
                    app_title: 'Birthday Calculator',
                    app_subtitle: 'Age & Anniversary Tracker',
                    params_title: 'Birthday Information',
                    name_label: 'Name',
                    date_label: 'Birth Date',
                    target_label: 'Target Date',
                    btn_calc: 'Calculate',
                    birthday_hint: 'Calculate age, days until next birthday, and other important date information.',
                    results_title: 'Birthday Results',
                    results_subtitle: 'Date calculations and anniversaries',
                    btn_export: 'Export CSV',
                    btn_clear: 'Clear',
                    col_name: 'Name',
                    col_birthdate: 'Birth Date',
                    col_age: 'Age',
                    col_days: 'Days Until Next',
                    col_action: 'Action',
                    empty_data: 'No data yet. Enter information to start.',
                    confirm_clear: 'Are you sure you want to clear all data?',
                    today: 'Today',
                    years_old: 'years old',
                    days: 'days',
                    invalid_date: 'Please enter a valid birth date'
                },
                'zh-CN': {
                    app_title: 'ÁîüÊó•ËÆ°ÁÆóÂô®',
                    app_subtitle: 'Âπ¥ÈæÑ‰∏éÁ∫™ÂøµÊó•ËøΩË∏™Âô®',
                    params_title: 'ÁîüÊó•‰ø°ÊÅØ',
                    name_label: 'ÂßìÂêç',
                    date_label: 'Âá∫ÁîüÊó•Êúü',
                    target_label: 'ÁõÆÊ†áÊó•Êúü',
                    btn_calc: 'ÂºÄÂßãËÆ°ÁÆó',
                    birthday_hint: 'ËÆ°ÁÆóÂπ¥ÈæÑ„ÄÅË∑ùÁ¶ª‰∏ã‰∏Ä‰∏™ÁîüÊó•ÁöÑÂ§©Êï∞ÂíåÂÖ∂‰ªñÈáçË¶ÅÊó•Êúü‰ø°ÊÅØ„ÄÇ',
                    results_title: 'ÁîüÊó•ËÆ°ÁÆóÁªìÊûú',
                    results_subtitle: 'Êó•ÊúüËÆ°ÁÆóÂíåÁ∫™ÂøµÊó•',
                    btn_export: 'ÂØºÂá∫Ë°®Ê†º',
                    btn_clear: 'Ê∏ÖÁ©∫',
                    col_name: 'ÂßìÂêç',
                    col_birthdate: 'Âá∫ÁîüÊó•Êúü',
                    col_age: 'Âπ¥ÈæÑ',
                    col_days: 'Ë∑ùÁ¶ª‰∏ãÊ¨°ÁîüÊó•',
                    col_action: 'Êìç‰Ωú',
                    empty_data: 'ÊöÇÊó†Êï∞ÊçÆÔºåËØ∑Âú®Â∑¶‰æßËæìÂÖ•‰ø°ÊÅØÂπ∂ËÆ°ÁÆó„ÄÇ',
                    confirm_clear: 'Á°ÆÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÊï∞ÊçÆÂêóÔºü',
                    today: '‰ªäÂ§©',
                    years_old: 'Â≤Å',
                    days: 'Â§©',
                    invalid_date: 'ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂá∫ÁîüÊó•Êúü'
                },
                'zh-TW': {
                    app_title: 'ÁîüÊó•Ë®àÁÆóÂô®',
                    app_subtitle: 'Âπ¥ÈΩ°ËàáÁ¥ÄÂøµÊó•ËøΩËπ§Âô®',
                    params_title: 'ÁîüÊó•Ë≥áË®ä',
                    name_label: 'ÂßìÂêç',
                    date_label: 'Âá∫ÁîüÊó•Êúü',
                    target_label: 'ÁõÆÊ®ôÊó•Êúü',
                    btn_calc: 'ÈñãÂßãË®àÁÆó',
                    birthday_hint: 'Ë®àÁÆóÂπ¥ÈΩ°„ÄÅË∑ùÈõ¢‰∏ã‰∏ÄÂÄãÁîüÊó•ÁöÑÂ§©Êï∏ÂíåÂÖ∂‰ªñÈáçË¶ÅÊó•ÊúüË≥áË®ä„ÄÇ',
                    results_title: 'ÁîüÊó•Ë®àÁÆóÁµêÊûú',
                    results_subtitle: 'Êó•ÊúüË®àÁÆóÂíåÁ¥ÄÂøµÊó•',
                    btn_export: 'Â∞éÂá∫Ë°®Ê†º',
                    btn_clear: 'Ê∏ÖÁ©∫',
                    col_name: 'ÂßìÂêç',
                    col_birthdate: 'Âá∫ÁîüÊó•Êúü',
                    col_age: 'Âπ¥ÈΩ°',
                    col_days: 'Ë∑ùÈõ¢‰∏ãÊ¨°ÁîüÊó•',
                    col_action: 'Êìç‰Ωú',
                    empty_data: 'Êö´ÁÑ°Êï∏ÊìöÔºåË´ãÂú®Â∑¶ÂÅ¥Ëº∏ÂÖ•Ë≥áË®ä‰∏¶Ë®àÁÆó„ÄÇ',
                    confirm_clear: 'Á¢∫ÂÆöË¶ÅÊ∏ÖÁ©∫ÊâÄÊúâÊï∏ÊìöÂóéÔºü',
                    today: '‰ªäÂ§©',
                    years_old: 'Ê≠≤',
                    days: 'Â§©',
                    invalid_date: 'Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÂá∫ÁîüÊó•Êúü'
                },
                'ja': {
                    app_title: 'Ë™ïÁîüÊó•Ë®àÁÆóÊ©ü',
                    app_subtitle: 'Âπ¥ÈΩ¢„Å®Ë®òÂøµÊó•„Éà„É©„ÉÉ„Ç´„Éº',
                    params_title: 'Ë™ïÁîüÊó•ÊÉÖÂ†±',
                    name_label: 'ÂêçÂâç',
                    date_label: 'Ë™ïÁîüÊó•',
                    target_label: 'ÂØæË±°Êó•',
                    btn_calc: 'Ë®àÁÆó„Åô„Çã',
                    birthday_hint: 'Âπ¥ÈΩ¢„ÄÅÊ¨°„ÅÆË™ïÁîüÊó•„Åæ„Åß„ÅÆÊó•Êï∞„ÄÅ„Åù„ÅÆ‰ªñ„ÅÆÈáçË¶Å„Å™Êó•‰ªòÊÉÖÂ†±„ÇíË®àÁÆó„Åó„Åæ„Åô„ÄÇ',
                    results_title: 'Ë™ïÁîüÊó•Ë®àÁÆóÁµêÊûú',
                    results_subtitle: 'Êó•‰ªòË®àÁÆó„Å®Ë®òÂøµÊó•',
                    btn_export: 'CSVÂá∫Âäõ',
                    btn_clear: '„ÇØ„É™„Ç¢',
                    col_name: 'ÂêçÂâç',
                    col_birthdate: 'Ë™ïÁîüÊó•',
                    col_age: 'Âπ¥ÈΩ¢',
                    col_days: 'Ê¨°„ÅÆË™ïÁîüÊó•„Åæ„Åß',
                    col_action: 'Êìç‰Ωú',
                    empty_data: '„Éá„Éº„Çø„Å™„Åó„ÄÇÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åó„Å¶Âßã„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    confirm_clear: '„Åô„Åπ„Å¶„ÅÆ„Éá„Éº„Çø„Çí„ÇØ„É™„Ç¢„Åó„Å¶„ÇÇ„Çà„Çç„Åó„ÅÑ„Åß„Åô„ÅãÔºü',
                    today: '‰ªäÊó•',
                    years_old: 'Ê≠≥',
                    days: 'Êó•',
                    invalid_date: 'ÊúâÂäπ„Å™Ë™ïÁîüÊó•„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ'
                },
                'ru': {
                    app_title: '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–Ω–µ–π —Ä–æ–∂–¥–µ–Ω–∏—è',
                    app_subtitle: '–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞ –∏ –≥–æ–¥–æ–≤—â–∏–Ω',
                    params_title: '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–Ω–µ —Ä–æ–∂–¥–µ–Ω–∏—è',
                    name_label: '–ò–º—è',
                    date_label: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è',
                    target_label: '–¶–µ–ª–µ–≤–∞—è –¥–∞—Ç–∞',
                    btn_calc: '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
                    birthday_hint: '–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç, –¥–Ω–∏ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è –∏ –¥—Ä—É–≥—É—é –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–∞—Ç–∞—Ö.',
                    results_title: '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞',
                    results_subtitle: '–î–∞—Ç–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –∏ –≥–æ–¥–æ–≤—â–∏–Ω—ã',
                    btn_export: '–≠–∫—Å–ø–æ—Ä—Ç',
                    btn_clear: '–û—á–∏—Å—Ç–∏—Ç—å',
                    col_name: '–ò–º—è',
                    col_birthdate: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è',
                    col_age: '–í–æ–∑—Ä–∞—Å—Ç',
                    col_days: '–î–Ω–µ–π –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ',
                    col_action: '–î–µ–π—Å—Ç–≤–∏–µ',
                    empty_data: '–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö. –í–≤–µ–¥–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å.',
                    confirm_clear: '–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ?',
                    today: '–°–µ–≥–æ–¥–Ω—è',
                    years_old: '–ª–µ—Ç',
                    days: '–¥–Ω–µ–π',
                    invalid_date: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è'
                }
            },

            init: () => {
                const saved = localStorage.getItem('birthday_lang');
                if (saved && I18nModule.data[saved]) {
                    I18nModule.currentLang = saved;
                } else {
                    const navLang = navigator.language;
                    if (navLang.startsWith('zh')) I18nModule.currentLang = navLang.includes('TW') || navLang.includes('HK') ? 'zh-TW' : 'zh-CN';
                    else if (navLang.startsWith('ja')) I18nModule.currentLang = 'ja';
                    else if (navLang.startsWith('ru')) I18nModule.currentLang = 'ru';
                    else I18nModule.currentLang = 'en';
                }
                document.getElementById('lang-select').value = I18nModule.currentLang;
                I18nModule.apply();
                
                // Set default target date to today
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('target-date').value = today;
            },

            changeLanguage: (lang) => {
                I18nModule.currentLang = lang;
                localStorage.setItem('birthday_lang', lang);
                I18nModule.apply();
                BirthdayModule.render();
            },

            apply: () => {
                const texts = I18nModule.data[I18nModule.currentLang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(texts[key]) {
                        if (el.tagName === 'INPUT') el.placeholder = texts[key];
                        else el.innerText = texts[key];
                    }
                });
                document.documentElement.lang = I18nModule.currentLang;
            },

            t: (key) => {
                return I18nModule.data[I18nModule.currentLang][key] || key;
            }
        };

        /**
         * Â≠òÂÇ®Ê®°Âùó (Storage Module)
         */
        const StorageModule = {
            get: (key) => JSON.parse(localStorage.getItem(key)) || [],
            set: (key, data) => localStorage.setItem(key, JSON.stringify(data))
        };

        /**
         * Êó•ÊúüÂ∑•ÂÖ∑Ê®°Âùó (Date Utilities)
         */
        const DateUtils = {
            // Calculate age from birth date to target date
            calculateAge: (birthDate, targetDate) => {
                const birth = new Date(birthDate);
                const target = new Date(targetDate);
                
                let age = target.getFullYear() - birth.getFullYear();
                const monthDiff = target.getMonth() - birth.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && target.getDate() < birth.getDate())) {
                    age--;
                }
                
                return age < 0 ? 0 : age;
            },

            // Calculate days until next birthday
            daysUntilNextBirthday: (birthDate, targetDate) => {
                const birth = new Date(birthDate);
                const target = new Date(targetDate);
                
                let nextBirthday = new Date(target.getFullYear(), birth.getMonth(), birth.getDate());
                
                // If birthday already passed this year, use next year
                if (nextBirthday < target) {
                    nextBirthday.setFullYear(target.getFullYear() + 1);
                }
                
                // Calculate difference in days
                const diffTime = nextBirthday - target;
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                return diffDays;
            },

            // Format date to locale string
            formatDate: (dateString) => {
                const date = new Date(dateString);
                return date.toLocaleDateString(I18nModule.currentLang, { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                });
            }
        };

        /**
         * ÁîüÊó•ËÆ°ÁÆóÊ®°Âùó (Birthday Module)
         */
        const BirthdayModule = {
            data: [],
            
            init: () => {
                BirthdayModule.data = StorageModule.get('birthday_history');
                BirthdayModule.render();
            },

            calculate: () => {
                const name = document.getElementById('birthday-name').value.trim();
                const birthDate = document.getElementById('birthday-date').value;
                const targetDate = document.getElementById('target-date').value || new Date().toISOString().split('T')[0];

                if (!birthDate) return alert(I18nModule.t('invalid_date'));
                if (!name) name = I18nModule.t('today');

                const age = DateUtils.calculateAge(birthDate, targetDate);
                const daysUntil = DateUtils.daysUntilNextBirthday(birthDate, targetDate);
                const formattedBirthDate = DateUtils.formatDate(birthDate);
                const formattedTargetDate = DateUtils.formatDate(targetDate);

                const record = {
                    id: Date.now(),
                    name: name,
                    birthDate: birthDate,
                    formattedBirthDate: formattedBirthDate,
                    targetDate: targetDate,
                    formattedTargetDate: formattedTargetDate,
                    age: age,
                    daysUntil: daysUntil
                };

                BirthdayModule.data.unshift(record);
                if (BirthdayModule.data.length > 50) BirthdayModule.data.pop();
                
                StorageModule.set('birthday_history', BirthdayModule.data);
                BirthdayModule.render();
            },

            delete: (id) => {
                BirthdayModule.data = BirthdayModule.data.filter(item => item.id !== id);
                StorageModule.set('birthday_history', BirthdayModule.data);
                BirthdayModule.render();
            },

            clear: () => {
                if(confirm(I18nModule.t('confirm_clear'))) {
                    BirthdayModule.data = [];
                    StorageModule.set('birthday_history', BirthdayModule.data);
                    BirthdayModule.render();
                }
            },

            render: () => {
                const tbody = document.getElementById('birthday-list');
                if (BirthdayModule.data.length === 0) {
                    tbody.innerHTML = `<tr><td colspan="5" class="px-6 py-12 text-center text-gray-400 italic">${I18nModule.t('empty_data')}</td></tr>`;
                    return;
                }
                
                tbody.innerHTML = BirthdayModule.data.map(item => {
                    // Highlight today's birthdays
                    const isBirthday = item.daysUntil === 0;
                    const nameClass = isBirthday ? 'birthday-highlight font-bold' : '';
                    
                    return `
                    <tr class="hover:bg-amber-50/50 transition border-b border-gray-50 last:border-0">
                        <td class="px-5 py-3 ${nameClass}">${item.name}</td>
                        <td class="px-5 py-3 text-gray-700">${item.formattedBirthDate}</td>
                        <td class="px-5 py-3 text-gray-700">${item.age} ${I18nModule.t('years_old')}</td>
                        <td class="px-5 py-3 ${isBirthday ? 'text-amber-600 font-bold' : 'text-gray-700'}">
                            ${isBirthday ? I18nModule.t('today') : `${item.daysUntil} ${I18nModule.t('days')}`}
                        </td>
                        <td class="px-5 py-3 text-center">
                            <button onclick="BirthdayModule.delete(${item.id})" class="text-gray-300 hover:text-red-500 transition px-2">
                                <i class="fa-solid fa-xmark"></i>
                            </button>
                        </td>
                    </tr>
                `;
                }).join('');
            }
        };

        /**
         * Â∫îÁî®Â∑•ÂÖ∑Ê®°Âùó (App Module)
         */
        const App = {
            exportCSV: (type) => {
                if (type === 'birthday' && BirthdayModule.data.length === 0) {
                    return alert(I18nModule.t('empty_data'));
                }

                let data, headers;
                if (type === 'birthday') {
                    headers = [
                        I18nModule.t('col_name'),
                        I18nModule.t('col_birthdate'),
                        I18nModule.t('col_age'),
                        I18nModule.t('col_days'),
                        I18nModule.t('target_label')
                    ];
                    data = BirthdayModule.data.map(item => [
                        item.name,
                        item.formattedBirthDate,
                        `${item.age} ${I18nModule.t('years_old')}`,
                        item.daysUntil === 0 ? I18nModule.t('today') : `${item.daysUntil} ${I18nModule.t('days')}`,
                        item.formattedTargetDate
                    ]);
                }

                // Create CSV content
                let csv = headers.join(',') + '\n';
                data.forEach(row => {
                    csv += row.map(field => `"${field}"`).join(',') + '\n';
                });

                // Download
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.setAttribute('href', url);
                a.setAttribute('download', `${type}_calculations_${new Date().toISOString().slice(0,10)}.csv`);
                a.style.visibility = 'hidden';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            },

            clearData: (type) => {
                if (type === 'birthday') BirthdayModule.clear();
            }
        };

        // ÂàùÂßãÂåñÂ∫îÁî®
        document.addEventListener('DOMContentLoaded', () => {
            I18nModule.init();
            BirthdayModule.init();
        });
    </script>
</body>

</html>
