<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Root Calculator Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="root_calc" 
         data-category="math" 
         data-title="Square Root Calculator" 
         data-icon="√">
        
        <div class="absolute top-4 right-4">
            <select id="rc-lang" onchange="RootCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">簡體中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">√ Root Calculator</h2>

        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_num">Number (x)</label>
            <input type="number" id="rc-num" class="w-full p-3 border rounded text-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="16" oninput="RootCalc.calc()">
        </div>

        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_degree">Root Degree (n)</label>
            <div class="flex gap-2">
                <button onclick="RootCalc.setDegree(2)" class="px-4 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 font-bold transition">√ (2)</button>
                <button onclick="RootCalc.setDegree(3)" class="px-4 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 font-bold transition">∛ (3)</button>
                <input type="number" id="rc-degree" class="flex-1 p-2 border rounded text-center focus:ring-2 focus:ring-blue-500 outline-none" value="2" oninput="RootCalc.calc()">
            </div>
        </div>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
            <span class="text-gray-500 text-sm block mb-1" data-i18n="res_label">Result</span>
            <div id="rc-result" class="text-4xl font-bold text-blue-800 break-words">--</div>
            <div id="rc-formula" class="text-xs text-gray-400 mt-2 font-mono"></div>
        </div>
    </div>

    <script>
        const RootCalc = {
            i18n: {
                'en': {
                    title: '√ Root Calculator',
                    lbl_num: 'Number (x)',
                    lbl_degree: 'Root Degree (n)',
                    res_label: 'Result'
                },
                'zh-CN': {
                    title: '√ 平方根计算器',
                    lbl_num: '数值 (x)',
                    lbl_degree: '方根次数 (n)',
                    res_label: '计算结果'
                },
                'zh-TW': {
                    title: '√ 平方根計算器',
                    lbl_num: '數值 (x)',
                    lbl_degree: '方根次數 (n)',
                    res_label: '計算結果'
                },
                'ja': {
                    title: '√ ルート計算',
                    lbl_num: '数値 (x)',
                    lbl_degree: '根の次数 (n)',
                    res_label: '結果'
                },
                'ru': {
                    title: '√ Калькулятор корней',
                    lbl_num: 'Число (x)',
                    lbl_degree: 'Степень корня (n)',
                    res_label: 'Результат'
                },
                'es': {
                    title: '√ Calculadora de Raíces',
                    lbl_num: 'Número (x)',
                    lbl_degree: 'Grado de la raíz (n)',
                    res_label: 'Resultado'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('rc-lang').value;
                const texts = RootCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="root_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
            },

            setDegree: (n) => {
                document.getElementById('rc-degree').value = n;
                RootCalc.calc();
            },

            calc: () => {
                const x = parseFloat(document.getElementById('rc-num').value);
                const n = parseFloat(document.getElementById('rc-degree').value);
                const resEl = document.getElementById('rc-result');
                const formEl = document.getElementById('rc-formula');

                if (isNaN(x) || isNaN(n) || n === 0) {
                    resEl.innerText = '--';
                    formEl.innerText = '';
                    return;
                }

                // Handling negative numbers for even roots
                if (x < 0 && n % 2 === 0) {
                    resEl.innerText = 'NaN (Complex)';
                    return;
                }

                let result;
                if (x < 0 && n % 2 !== 0) {
                    result = -Math.pow(-x, 1/n);
                } else {
                    result = Math.pow(x, 1/n);
                }

                // Format result to avoid super long decimals if integer
                const formatted = Number.isInteger(result) ? result : parseFloat(result.toFixed(8));
                
                resEl.innerText = formatted;
                formEl.innerText = `${n}√${x} = ${formatted}`;
            }
        };
    </script>
</body>
</html>