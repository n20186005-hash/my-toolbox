<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDEE Calculator</title>
    
    <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
    <meta name="tool-id" content="tdee_calculator">
    <meta name="category" content="health">
    <meta name="icon" content="üî•">
    
    <!-- ÈªòËÆ§Ëã±ÊñáÂÜÖÂÆπ -->
    <meta name="title" content="TDEE Calculator">
    <meta name="description" content="Calculate your Total Daily Energy Expenditure">
    
    <!-- Â§öËØ≠Ë®ÄÈÖçÁΩÆ -->
    <meta name="lang-title-zh-CN" content="ÊÄªÊØèÊó•ËÉΩÈáèÊ∂àËÄóËÆ°ÁÆóÂô®">
    <meta name="lang-description-zh-CN" content="ËÆ°ÁÆóÊÇ®ÁöÑÊÄªÊØèÊó•ËÉΩÈáèÊ∂àËÄó">
    
    <meta name="lang-title-zh-TW" content="Á∏ΩÊØèÊó•ËÉΩÈáèÊ∂àËÄóË®àÁÆóÂô®">
    <meta name="lang-description-zh-TW" content="Ë®àÁÆóÊÇ®ÁöÑÁ∏ΩÊØèÊó•ËÉΩÈáèÊ∂àËÄó">
    
    <meta name="lang-title-ja" content="TDEEË®àÁÆóÊ©ü">
    <meta name="lang-description-ja" content="Á∑è‰∏ÄÊó•„Ç®„Éç„É´„ÇÆ„ÉºÊ∂àË≤ªÈáè„ÇíË®àÁÆó„Åó„Åæ„Åô">
    
    <meta name="lang-title-ru" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¢–î–≠–≠">
    <meta name="lang-description-ru" content="–í—ã—á–∏—Å–ª–∏—Ç–µ —Å–≤–æ—é –æ–±—â—É—é —Å—É—Ç–æ—á–Ω—É—é —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å">
    
    <meta name="lang-title-es" content="Calculadora TDEE">
    <meta name="lang-description-es" content="Calcule su Gasto Energ√©tico Diario Total">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .warning { background-color: #fee2e2; border: 1px solid #ef4444; color: #b91c1c; padding: 10px; border-radius: 5px; margin-top: 10px; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="tdee_calculator" 
         data-category="health" 
         data-title="TDEE Calculator" 
         data-icon="üî•">
        
        <!-- ËØ≠Ë®ÄÈÄâÊã©Âô® -->
        <div class="absolute top-4 right-4">
            <select id="tdee-lang" onchange="TDEECalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üî• TDEE Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="weight_label">Weight (lbs)</label>
                <input type="number" id="weight" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 150" min="50" max="400" value="150">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="height_label">Height (inches)</label>
                <input type="number" id="height" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 68" min="40" max="96" value="68">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="age_label">Age (years)</label>
                <input type="number" id="age" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 30" min="18" max="120" value="30">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="gender_label">Gender</label>
                <div class="flex gap-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="gender" value="male" checked class="text-blue-600 focus:ring-blue-500">
                        <span data-i18n="male">Male</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="gender" value="female" class="text-blue-600 focus:ring-blue-500">
                        <span data-i18n="female">Female</span>
                    </label>
                </div>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="activity_label">Activity Level</label>
                <select id="activity" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="1.2" data-i18n="activity_sedentary">Sedentary (little exercise)</option>
                    <option value="1.375" data-i18n="activity_light">Lightly Active (light exercise)</option>
                    <option value="1.55" data-i18n="activity_mod" selected>Moderately Active (moderate exercise)</option>
                    <option value="1.725" data-i18n="activity_very">Very Active (hard exercise)</option>
                    <option value="1.9" data-i18n="activity_extra">Extra Active (very hard exercise)</option>
                </select>
            </div>
        </div>

        <button onclick="TDEECalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">Calculate TDEE</button>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
            <div class="text-sm text-gray-500 mb-2" data-i18n="res_label">Total Daily Energy Expenditure</div>
            <div id="tdee-result" class="text-3xl font-bold text-blue-800">--</div>
            <div id="bmr-result" class="mt-2 text-lg text-blue-700"></div>
            
            <div class="mt-4 p-3 bg-white rounded border border-gray-100 text-left text-sm">
                <div data-i18n="formula_label" class="font-medium mb-1">Formula: TDEE = BMR √ó Activity Factor</div>
                <div id="tdee-formula" class="text-gray-600">--</div>
            </div>
            
            <div class="warning text-sm mt-4" data-i18n="disclaimer">Disclaimer: This is an estimate only. Actual energy needs may vary.</div>
        </div>
    </div>

    <script>
        const TDEECalc = {
            i18n: {
                'en': {
                    title: 'üî• TDEE Calculator',
                    weight_label: 'Weight (lbs)',
                    height_label: 'Height (inches)',
                    age_label: 'Age (years)',
                    gender_label: 'Gender',
                    male: 'Male',
                    female: 'Female',
                    activity_label: 'Activity Level',
                    activity_sedentary: 'Sedentary (little exercise)',
                    activity_light: 'Lightly Active (light exercise)',
                    activity_mod: 'Moderately Active (moderate exercise)',
                    activity_very: 'Very Active (hard exercise)',
                    activity_extra: 'Extra Active (very hard exercise)',
                    btn_calc: 'Calculate TDEE',
                    res_label: 'Total Daily Energy Expenditure',
                    bmr_label: 'Basal Metabolic Rate:',
                    formula_label: 'Formula: TDEE = BMR √ó Activity Factor',
                    err_invalid: 'Please enter valid numbers',
                    disclaimer: 'Disclaimer: This is an estimate only. Actual energy needs may vary.',
                    unit: 'calories/day'
                },
                'zh-CN': {
                    title: 'üî• ÊÄªÊØèÊó•ËÉΩÈáèÊ∂àËÄóËÆ°ÁÆóÂô®',
                    weight_label: '‰ΩìÈáçÔºàÁ£ÖÔºâ',
                    height_label: 'Ë∫´È´òÔºàËã±ÂØ∏Ôºâ',
                    age_label: 'Âπ¥ÈæÑÔºàÂ≤ÅÔºâ',
                    gender_label: 'ÊÄßÂà´',
                    male: 'Áî∑',
                    female: 'Â•≥',
                    activity_label: 'Ê¥ªÂä®Ê∞¥Âπ≥',
                    activity_sedentary: '‰πÖÂùê‰∏çÂä®ÔºàÂæàÂ∞ëËøêÂä®Ôºâ',
                    activity_light: 'ËΩªÂ∫¶Ê¥ªÂä®ÔºàÂ∞ëÈáèËøêÂä®Ôºâ',
                    activity_mod: '‰∏≠Â∫¶Ê¥ªÂä®ÔºàÈÄÇÂ∫¶ËøêÂä®Ôºâ',
                    activity_very: 'È´òÂ∫¶Ê¥ªÂä®ÔºàÂ§ßÈáèËøêÂä®Ôºâ',
                    activity_extra: 'ÊûÅÈ´òÊ¥ªÂä®ÔºàÂâßÁÉàËøêÂä®Ôºâ',
                    btn_calc: 'ËÆ°ÁÆóTDEE',
                    res_label: 'ÊÄªÊØèÊó•ËÉΩÈáèÊ∂àËÄó',
                    bmr_label: 'Âü∫Á°Ä‰ª£Ë∞¢ÁéáÔºö',
                    formula_label: 'ÂÖ¨ÂºèÔºöTDEE = Âü∫Á°Ä‰ª£Ë∞¢Áéá √ó Ê¥ªÂä®Á≥ªÊï∞',
                    err_invalid: 'ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊï∞Â≠ó',
                    disclaimer: 'ÂÖçË¥£Â£∞ÊòéÔºöËøôÂè™ÊòØ‰∏Ä‰∏™‰º∞ËÆ°ÂÄº„ÄÇÂÆûÈôÖËÉΩÈáèÈúÄÊ±ÇÂèØËÉΩÊúâÊâÄ‰∏çÂêå„ÄÇ',
                    unit: 'Âç°Ë∑ØÈáå/Â§©'
                },
                'zh-TW': {
                    title: 'üî• Á∏ΩÊØèÊó•ËÉΩÈáèÊ∂àËÄóË®àÁÆóÂô®',
                    weight_label: 'È´îÈáçÔºàÁ£ÖÔºâ',
                    height_label: 'Ë∫´È´òÔºàËã±ÂØ∏Ôºâ',
                    age_label: 'Âπ¥ÈΩ°ÔºàÊ≠≤Ôºâ',
                    gender_label: 'ÊÄßÂà•',
                    male: 'Áî∑',
                    female: 'Â•≥',
                    activity_label: 'Ê¥ªÂãïÊ∞¥Âπ≥',
                    activity_sedentary: '‰πÖÂùê‰∏çÂãïÔºàÂæàÂ∞ëÈÅãÂãïÔºâ',
                    activity_light: 'ËºïÂ∫¶Ê¥ªÂãïÔºàÂ∞ëÈáèÈÅãÂãïÔºâ',
                    activity_mod: '‰∏≠Â∫¶Ê¥ªÂãïÔºàÈÅ©Â∫¶ÈÅãÂãïÔºâ',
                    activity_very: 'È´òÂ∫¶Ê¥ªÂãïÔºàÂ§ßÈáèÈÅãÂãïÔºâ',
                    activity_extra: 'Ê•µÈ´òÊ¥ªÂãïÔºàÂäáÁÉàÈÅãÂãïÔºâ',
                    btn_calc: 'Ë®àÁÆóTDEE',
                    res_label: 'Á∏ΩÊØèÊó•ËÉΩÈáèÊ∂àËÄó',
                    bmr_label: 'Âü∫Á§é‰ª£Ë¨ùÁéáÔºö',
                    formula_label: 'ÂÖ¨ÂºèÔºöTDEE = Âü∫Á§é‰ª£Ë¨ùÁéá √ó Ê¥ªÂãï‰øÇÊï∏',
                    err_invalid: 'Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÊï∏Â≠ó',
                    disclaimer: 'ÂÖçË≤¨ËÅ≤ÊòéÔºöÈÄôÂè™ÊòØ‰∏ÄÂÄã‰º∞Ë®àÂÄº„ÄÇÂØ¶ÈöõËÉΩÈáèÈúÄÊ±ÇÂèØËÉΩÊúâÊâÄ‰∏çÂêå„ÄÇ',
                    unit: 'Âç°Ë∑ØÈáå/Â§©'
                },
                'ja': {
                    title: 'üî• TDEEË®àÁÆóÊ©ü',
                    weight_label: '‰ΩìÈáçÔºà„Éù„É≥„ÉâÔºâ',
                    height_label: 'Ë∫´Èï∑Ôºà„Ç§„É≥„ÉÅÔºâ',
                    age_label: 'Âπ¥ÈΩ¢ÔºàÊ≠≥Ôºâ',
                    gender_label: 'ÊÄßÂà•',
                    male: 'Áî∑ÊÄß',
                    female: 'Â•≥ÊÄß',
                    activity_label: 'Ê¥ªÂãï„É¨„Éô„É´',
                    activity_sedentary: 'Â∫ß‰Ωç‰∏≠ÂøÉÔºà„Åª„Å®„Çì„Å©ÈÅãÂãï„Å™„ÅóÔºâ',
                    activity_light: 'ËªΩÂ∫¶Ê¥ªÂãïÔºàËªΩ„ÅÑÈÅãÂãïÔºâ',
                    activity_mod: '‰∏≠Á≠âÂ∫¶Ê¥ªÂãïÔºàÈÅ©Â∫¶„Å™ÈÅãÂãïÔºâ',
                    activity_very: 'È´òÂ∫¶Ê¥ªÂãïÔºàÊøÄ„Åó„ÅÑÈÅãÂãïÔºâ',
                    activity_extra: 'Ë∂ÖÈ´òÂ∫¶Ê¥ªÂãïÔºàÈùûÂ∏∏„Å´ÊøÄ„Åó„ÅÑÈÅãÂãïÔºâ',
                    btn_calc: 'TDEE„ÇíË®àÁÆó',
                    res_label: 'Á∑è‰∏ÄÊó•„Ç®„Éç„É´„ÇÆ„ÉºÊ∂àË≤ªÈáè',
                    bmr_label: 'Âü∫Á§é‰ª£Ë¨ùÁéáÔºö',
                    formula_label: 'ÂÖ¨ÂºèÔºöTDEE = Âü∫Á§é‰ª£Ë¨ùÁéá √ó Ê¥ªÂãï‰øÇÊï∞',
                    err_invalid: 'ÊúâÂäπ„Å™Êï∞Â≠ó„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                    disclaimer: 'ÂÖçË≤¨‰∫ãÈ†ÖÔºö„Åì„Çå„ÅØÊé®ÂÆöÂÄ§„Å´„Åô„Åé„Åæ„Åõ„Çì„ÄÇÂÆüÈöõ„ÅÆ„Ç®„Éç„É´„ÇÆ„ÉºÂøÖË¶ÅÈáè„ÅØÁï∞„Å™„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ',
                    unit: '„Ç´„É≠„É™„Éº/Êó•'
                },
                'ru': {
                    title: 'üî• –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¢–î–≠–≠',
                    weight_label: '–í–µ—Å (—Ñ—É–Ω—Ç—ã)',
                    height_label: '–†–æ—Å—Ç (–¥—é–π–º—ã)',
                    age_label: '–í–æ–∑—Ä–∞—Å—Ç (–≥–æ–¥—ã)',
                    gender_label: '–ü–æ–ª',
                    male: '–ú—É–∂—Å–∫–æ–π',
                    female: '–ñ–µ–Ω—Å–∫–∏–π',
                    activity_label: '–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
                    activity_sedentary: '–°–∏–¥—è—á–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ (–º–∞–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π)',
                    activity_light: '–õ–µ–≥–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–π (–ª—ë–≥–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    activity_mod: '–£–º–µ—Ä–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã–π (—É–º–µ—Ä–µ–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    activity_very: '–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–π (–Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    activity_extra: '–≠–∫—Å—Ç—Ä–∞ –∞–∫—Ç–∏–≤–Ω—ã–π (–æ—á–µ–Ω—å –Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    btn_calc: '–í—ã—á–∏—Å–ª–∏—Ç—å –¢–î–≠–≠',
                    res_label: '–û–±—â–∞—è —Å—É—Ç–æ—á–Ω–∞—è —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å',
                    bmr_label: '–ë–∞–∑–æ–≤—ã–π –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç:',
                    formula_label: '–§–æ—Ä–º—É–ª–∞: –¢–î–≠–≠ = –ë–ú–† √ó –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
                    err_invalid: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞',
                    disclaimer: '–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: –≠—Ç–æ —Ç–æ–ª—å–∫–æ –æ—Ü–µ–Ω–∫–∞. –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –Ω—É–∂–¥—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.',
                    unit: '–∫–∞–ª–æ—Ä–∏–π/–¥–µ–Ω—å'
                },
                'es': {
                    title: 'üî• Calculadora TDEE',
                    weight_label: 'Peso (libras)',
                    height_label: 'Altura (pulgadas)',
                    age_label: 'Edad (a√±os)',
                    gender_label: 'G√©nero',
                    male: 'Masculino',
                    female: 'Femenino',
                    activity_label: 'Nivel de actividad',
                    activity_sedentary: 'Sedentario (poco ejercicio)',
                    activity_light: 'Ligeramente activo (ejercicio ligero)',
                    activity_mod: 'Moderadamente activo (ejercicio moderado)',
                    activity_very: 'Muy activo (ejercicio intenso)',
                    activity_extra: 'Extra activo (ejercicio muy intenso)',
                    btn_calc: 'Calcular TDEE',
                    res_label: 'Gasto Energ√©tico Diario Total',
                    bmr_label: 'Tasa Metab√≥lica Basal:',
                    formula_label: 'F√≥rmula: TDEE = TMB √ó Factor de actividad',
                    err_invalid: 'Por favor, ingrese n√∫meros v√°lidos',
                    disclaimer: 'Descargo de responsabilidad: Esto es solo una estimaci√≥n. Las necesidades energ√©ticas reales pueden variar.',
                    unit: 'calor√≠as/d√≠a'
                }
            },

            init: () => {},

            changeLang: () => {
                const lang = document.getElementById('tdee-lang').value;
                const texts = TDEECalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="tdee_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // ÁøªËØë‰∏ãÊãâÈÄâÈ°π
                document.querySelectorAll('#activity option').forEach(option => {
                    const key = option.getAttribute('data-i18n');
                    if (texts[key]) option.innerText = texts[key];
                });

                TDEECalc.calc();
            },

            calc: () => {
                const weight = parseFloat(document.getElementById('weight').value) || 0;
                const height = parseFloat(document.getElementById('height').value) || 0;
                const age = parseFloat(document.getElementById('age').value) || 0;
                const gender = document.querySelector('input[name="gender"]:checked').value;
                const activity = parseFloat(document.getElementById('activity').value) || 0;
                const lang = document.getElementById('tdee-lang').value;
                const texts = TDEECalc.i18n[lang];

                const resultEl = document.getElementById('tdee-result');
                const bmrEl = document.getElementById('bmr-result');
                const formulaEl = document.getElementById('tdee-formula');

                // È™åËØÅËæìÂÖ•
                if (isNaN(weight) || isNaN(height) || isNaN(age) || isNaN(activity) || 
                    weight <= 0 || height <= 0 || age <= 0 || activity <= 0) {
                    resultEl.innerText = texts.err_invalid;
                    resultEl.className = "text-xl font-bold text-red-600";
                    bmrEl.innerText = "";
                    formulaEl.innerText = "";
                    return;
                }

                // ËÆ°ÁÆóBMR (Âü∫Á°Ä‰ª£Ë∞¢Áéá) ‰ΩøÁî®Mifflin-St JeorÂÖ¨Âºè
                let bmr;
                if (gender === 'male') {
                    bmr = 10 * (weight / 2.205) + 6.25 * (height * 2.54) - 5 * age + 5;
                } else {
                    bmr = 10 * (weight / 2.205) + 6.25 * (height * 2.54) - 5 * age - 161;
                }

                // ËÆ°ÁÆóTDEE (ÊÄªÊØèÊó•ËÉΩÈáèÊ∂àËÄó)
                const tdee = bmr * activity;

                // ÊòæÁ§∫ÁªìÊûú
                resultEl.className = "text-3xl font-bold text-blue-800";
                resultEl.innerText = Math.round(tdee) + ' ' + texts.unit;
                bmrEl.innerText = `${texts.bmr_label} ${Math.round(bmr)} ${texts.unit}`;
                formulaEl.innerText = `${Math.round(tdee)} = ${Math.round(bmr)} √ó ${activity}`;
            }
        };

        document.addEventListener('DOMContentLoaded', TDEECalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ëá™Âä®ÂåπÈÖçÊµèËßàÂô®ËØ≠Ë®Ä
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('tdee-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    TDEECalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>