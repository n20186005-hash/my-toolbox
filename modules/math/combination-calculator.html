<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combination Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="combination_calculator">
    <meta name="category" content="Math">
    <meta name="icon" content="C(n,k)">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Combination Calculator">
    <meta name="description" content="Calculate combinations C(n,k) - the number of ways to choose k elements from a set of n elements.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="组合数计算器">
    <meta name="lang-description-zh-CN" content="计算组合数C(n,k) - 从n个元素中选择k个元素的方式数量。">
    
    <meta name="lang-title-zh-TW" content="組合數計算器">
    <meta name="lang-description-zh-TW" content="計算組合數C(n,k) - 從n個元素中選擇k個元素的方式數量。">
    
    <meta name="lang-title-ja" content="組合せ計算機">
    <meta name="lang-description-ja" content="組合せC(n,k)を計算します - n個の要素からk個の要素を選択する方法の数。">
    
    <meta name="lang-title-ru" content="Калькулятор сочетаний">
    <meta name="lang-description-ru" content="Вычислить сочетания C(n,k) - количество способов выбрать k элементов из множества из n элементов.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .result-area { margin-top: 20px; padding: 15px; background: #e8f4f8; border-radius: 8px; }
        input[type="number"], button { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .input-group { display: flex; gap: 10px; margin-bottom: 15px; }
        .input-item { flex: 1; }
        .result-value { font-size: 1.2rem; font-weight: 500; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/math/combination-calculator.html" />
</head>
<body>

    <div class="tool-module active" 
         data-id="combination_calculator" 
         data-category="calculators" 
         data-title="Combination Calculator" 
         data-icon="C(n,k)">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="combination-lang" onchange="CombinationCalculator.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">C(n,k) Combination Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- 输入区域 -->
            <div class="input-group">
                <div class="input-item">
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="total_elements">Total elements (n)</label>
                    <input type="number" id="n-value" min="0" max="1000" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0">
                </div>
                <div class="input-item">
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="choose_elements">Elements to choose (k)</label>
                    <input type="number" id="k-value" min="0" max="1000" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0">
                </div>
            </div>
            
            <!-- 操作按钮 -->
            <div class="flex gap-2">
                <button onclick="CombinationCalculator.clearValue()" class="flex-1 bg-gray-600 text-white py-2 rounded font-bold hover:bg-gray-700 transition" data-i18n="clear">Clear</button>
                <button onclick="CombinationCalculator.calculate()" class="flex-1 bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Calculate</button>
            </div>
        </div>

        <!-- 错误提示 -->
        <div id="combination-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- 结果展示 -->
        <div id="combination-result" class="hidden">
            <div class="text-sm text-gray-500 mb-2" data-i18n="result">Result</div>
            <div class="result-area">
                <div class="result-value" id="combination-value"></div>
            </div>
        </div>

        <!-- 说明信息 -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="what_is_combination">What is a combination?</p>
            <p class="mt-2" data-i18n="combination_definition">A combination is a selection of k elements from a set of n elements without regard to the order of selection. The formula for combinations is: C(n,k) = n! / (k! * (n-k)!)</p>
            <p class="mt-2" data-i18n="combination_note">Note: C(n,k) = 0 when k > n</p>
        </div>
    </div>

    <script>
        const CombinationCalculator = {
            // 计算阶乘（用于组合数计算）
            factorial: function(n) {
                if (n < 0) return NaN;
                if (n === 0 || n === 1) return 1;
                
                let result = 1;
                for (let i = 2; i <= n; i++) {
                    result *= i;
                }
                return result;
            },
            
            i18n: {
                'en': {
                    title: 'C(n,k) Combination Calculator',
                    total_elements: 'Total elements (n)',
                    choose_elements: 'Elements to choose (k)',
                    calculate: 'Calculate',
                    clear: 'Clear',
                    result: 'Result',
                    what_is_combination: 'What is a combination?',
                    combination_definition: 'A combination is a selection of k elements from a set of n elements without regard to the order of selection. The formula for combinations is: C(n,k) = n! / (k! * (n-k)!)',
                    combination_note: 'Note: C(n,k) = 0 when k > n',
                    err_invalid: 'Please enter valid non-negative integers (n ≥ k ≥ 0)',
                    result_format: 'C(%d, %d) = %d'
                },
                'zh-CN': {
                    title: 'C(n,k) 组合数计算器',
                    total_elements: '总元素数 (n)',
                    choose_elements: '要选择的元素数 (k)',
                    calculate: '计算',
                    clear: '清除',
                    result: '结果',
                    what_is_combination: '什么是组合数？',
                    combination_definition: '组合数是从n个元素的集合中选择k个元素的方式数量，不考虑选择顺序。组合数公式为：C(n,k) = n! / (k! * (n-k)!)',
                    combination_note: '注意：当k > n时，C(n,k) = 0',
                    err_invalid: '请输入有效的非负整数（n ≥ k ≥ 0）',
                    result_format: 'C(%d, %d) = %d'
                },
                'zh-TW': {
                    title: 'C(n,k) 組合數計算器',
                    total_elements: '總元素數 (n)',
                    choose_elements: '要選擇的元素數 (k)',
                    calculate: '計算',
                    clear: '清除',
                    result: '結果',
                    what_is_combination: '什麼是組合數？',
                    combination_definition: '組合數是從n個元素的集合中選擇k個元素的方式數量，不考慮選擇順序。組合數公式為：C(n,k) = n! / (k! * (n-k)!)',
                    combination_note: '注意：當k > n時，C(n,k) = 0',
                    err_invalid: '請輸入有效的非負整數（n ≥ k ≥ 0）',
                    result_format: 'C(%d, %d) = %d'
                },
                'ja': {
                    title: 'C(n,k) 組合せ計算機',
                    total_elements: '総要素数 (n)',
                    choose_elements: '選択する要素数 (k)',
                    calculate: '計算',
                    clear: 'クリア',
                    result: '結果',
                    what_is_combination: '組合せとは何ですか？',
                    combination_definition: '組合せとは、n個の要素の集合からk個の要素を選択する方法の数で、選択の順序は考慮されません。組合せの公式は：C(n,k) = n! / (k! * (n-k)!) です。',
                    combination_note: '注：k > n の場合、C(n,k) = 0 です',
                    err_invalid: '有効な非負の整数を入力してください（n ≥ k ≥ 0）',
                    result_format: 'C(%d, %d) = %d'
                },
                'ru': {
                    title: 'Калькулятор сочетаний C(n,k)',
                    total_elements: 'Всего элементов (n)',
                    choose_elements: 'Элементов для выбора (k)',
                    calculate: 'Вычислить',
                    clear: 'Очистить',
                    result: 'Результат',
                    what_is_combination: 'Что такое сочетание?',
                    combination_definition: 'Сочетание — это выбор k элементов из множества из n элементов без учета порядка выбора. Формула для сочетаний: C(n,k) = n! / (k! * (n-k)!)',
                    combination_note: 'Примечание: C(n,k) = 0, когда k > n',
                    err_invalid: 'Пожалуйста, введите правильные неотрицательные целые числа (n ≥ k ≥ 0)',
                    result_format: 'C(%d, %d) = %d'
                }
            },
            
            // 计算组合数
            calculate: function() {
                const nInput = document.getElementById('n-value');
                const kInput = document.getElementById('k-value');
                const n = parseInt(nInput.value, 10);
                const k = parseInt(kInput.value, 10);
                const errorEl = document.getElementById('combination-error');
                const resultEl = document.getElementById('combination-result');
                const valueEl = document.getElementById('combination-value');
                const lang = this.getCurrentLang();
                
                // 验证输入
                if (isNaN(n) || isNaN(k) || n < 0 || k < 0 || k > n || !Number.isInteger(n) || !Number.isInteger(k)) {
                    errorEl.textContent = this.i18n[lang].err_invalid;
                    errorEl.classList.remove('hidden');
                    resultEl.classList.add('hidden');
                    return;
                }
                
                // 清除错误
                errorEl.classList.add('hidden');
                
                // 计算组合数
                let result;
                if (k === 0 || k === n) {
                    result = 1;
                } else if (k > n) {
                    result = 0;
                } else {
                    // 优化计算，使用较小的阶乘
                    if (k > n - k) {
                        k = n - k;
                    }
                    result = 1;
                    for (let i = 1; i <= k; i++) {
                        result = result * (n - k + i) / i;
                    }
                    result = Math.round(result); // 处理浮点数精度问题
                }
                
                // 显示结果
                valueEl.textContent = this.i18n[lang].result_format.replace('%d', n).replace('%d', k).replace('%d', result);
                resultEl.classList.remove('hidden');
            },
            
            // 清除输入
            clearValue: function() {
                document.getElementById('n-value').value = '';
                document.getElementById('k-value').value = '';
                document.getElementById('combination-result').classList.add('hidden');
                document.getElementById('combination-error').classList.add('hidden');
            },
            
            // 切换语言
            changeLang: function() {
                const lang = this.getCurrentLang();
                const elements = document.querySelectorAll('[data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[lang][key]) {
                        el.textContent = this.i18n[lang][key];
                    }
                });
                
                // 如果有值，重新计算以更新显示
                if (document.getElementById('n-value').value && document.getElementById('k-value').value) {
                    this.calculate();
                }
            },
            
            // 获取当前语言
            getCurrentLang: function() {
                return document.getElementById('combination-lang').value;
            }
        };
        
        // 初始化
        CombinationCalculator.init = function() {
            // 可以添加初始化逻辑
        };
        
        // 页面加载时初始化
        window.onload = function() {
            CombinationCalculator.init();
        };
    </script>

    <div id="related-tools-container"></div>
    <script src="../../scripts/related.js"></script>
    
</body>
</html>