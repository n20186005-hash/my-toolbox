<!DOCTYPE html>
<html lang="en">
<head>
    <!-- æ ‡ç­¾ä¸å…ƒæ•°æ®å¿…é¡»åŒ…å«çš„ä»£ç  -->
    <meta name="category" content="development-tools">
    <meta name="icon" content="ğŸ“…">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Toolbox Calculator</title>
    
    <link rel="canonical" href="https://toolboxpro.top/modules/math/math-toolbox-calculator.html" />
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Math.js ç”¨äºè®¡ç®—æ¼”ç¤º -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/12.4.0/math.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3b82f6',
                        primaryDark: '#2563eb',
                        slate: {
                            850: '#1e293b', // è‡ªå®šä¹‰æ·±è‰²èƒŒæ™¯
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['Fira Code', 'Menlo', 'Monaco', 'monospace'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap');

        body {
            font-family: 'Inter', sans-serif;
        }

        /* ç»ç’ƒæ‹Ÿæ€å¡ç‰‡ */
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* äº¤äº’å¡ç‰‡ */
        .card {
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent 30%, rgba(255,255,255,0.4) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: 0.5s;
            pointer-events: none;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            border-color: #3b82f6;
        }
        .card:hover::after {
            transform: translateX(100%);
        }
        
        /* æ»šåŠ¨æ¡ç¾åŒ– */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #475569;
        }
        
        /* ä»£ç å—æ ·å¼ */
        .code-snippet {
            font-family: 'Fira Code', monospace;
            background-color: #f1f5f9;
            color: #0f172a;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.85em;
            letter-spacing: -0.02em;
            border: 1px solid #e2e8f0;
        }
        .dark .code-snippet {
            background-color: #0f172a;
            color: #e2e8f0;
            border-color: #334155;
        }

        .category-btn {
            position: relative;
            overflow: hidden;
        }
        .category-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.5);
        }
        
        select.custom-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1rem;
        }

        /* æ¨¡æ€æ¡†åŠ¨ç”» */
        #shareModal {
            backdrop-filter: blur(8px);
            transition: opacity 0.3s ease;
        }
        
        /* æ¸å˜èƒŒæ™¯ */
        .bg-gradient-header {
            background: linear-gradient(to bottom, rgba(59, 130, 246, 0.05) 0%, transparent 100%);
        }
        .dark .bg-gradient-header {
            background: linear-gradient(to bottom, rgba(30, 41, 59, 0.5) 0%, transparent 100%);
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-slate-50 text-slate-800 font-sans leading-relaxed dark:bg-slate-950 dark:text-slate-100 transition-colors duration-300 min-h-screen flex flex-col selection:bg-blue-100 dark:selection:bg-blue-900">

    <!-- é¡¶éƒ¨å·¥å…·æ  -->
    <div class="fixed top-4 right-4 z-50 flex gap-3">
        <!-- åˆ†äº«æŒ‰é’® -->
        <button onclick="openShareModal()" class="glass-card p-2.5 rounded-xl shadow-sm hover:bg-white/80 dark:hover:bg-slate-800/80 transition-all text-blue-600 dark:text-blue-400 hover:scale-105 active:scale-95" title="Share">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>
        </button>
        <!-- æ¨¡å¼åˆ‡æ¢ -->
        <button onclick="toggleTheme()" class="glass-card p-2.5 rounded-xl shadow-sm hover:bg-white/80 dark:hover:bg-slate-800/80 transition-all hover:scale-105 active:scale-95" title="Switch Theme">
            <svg id="theme-icon-sun" class="w-5 h-5 text-amber-500 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"></path></svg>
            <svg id="theme-icon-moon" class="w-5 h-5 text-slate-400" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
        </button>
        <!-- è¯­è¨€åˆ‡æ¢ -->
        <div class="relative">
            <select id="lang-select" onchange="changeLanguage(this.value)" class="custom-select w-full appearance-none glass-card pl-3 pr-10 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-blue-500/50 cursor-pointer">
                <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                <option value="zh-CN">ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
                <option value="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</option>
                <option value="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                <option value="pl">ğŸ‡µğŸ‡± Polski</option>
            </select>
        </div>
    </div>

    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <header class="bg-gradient-header pt-20 pb-12 px-4 border-b border-slate-200/50 dark:border-slate-800/50">
        <div class="max-w-6xl mx-auto">
            <div class="text-center mb-10 animate-fade-in">
                <div class="inline-block p-3 bg-blue-50 dark:bg-slate-800 rounded-2xl mb-4 shadow-sm">
                    <span class="text-4xl">ğŸ§®</span>
                </div>
                <h1 id="ui-title" class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-indigo-600 dark:from-blue-400 dark:to-indigo-300 mb-4 tracking-tight">Math Toolbox Calculator</h1>
                <p id="ui-subtitle" class="text-slate-500 dark:text-slate-400 max-w-2xl mx-auto text-lg leading-relaxed">
                    Comprehensive reference library and calculation bench for calculus, complex numbers, probability, matrices, and more.
                </p>
            </div>

            <!-- è®¡ç®—å™¨æ¼”ç¤ºåŒº -->
            <div class="max-w-3xl mx-auto glass-card rounded-2xl p-1 shadow-lg animate-slide-up">
                <div class="bg-white/50 dark:bg-slate-900/50 rounded-xl p-6 backdrop-blur-sm">
                    <label class="block text-xs font-bold text-slate-400 uppercase mb-3 flex justify-between items-center tracking-wider">
                        <span id="ui-calc-title" class="flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                            Calculation Bench
                        </span>
                        <span id="ui-calc-example" class="text-blue-500 hover:text-blue-600 cursor-pointer text-xs bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded transition-colors" onclick="loadExample()">Fill Example</span>
                    </label>
                    <div class="flex gap-3">
                        <div class="relative flex-1 group">
                            <input type="text" id="calcInput" placeholder="Enter expression, e.g., 5! or sin(45 deg)" 
                                class="w-full pl-4 pr-4 py-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 focus:outline-none transition-all font-mono text-lg shadow-sm group-hover:border-blue-300 dark:group-hover:border-blue-700"
                                onkeydown="if(event.key === 'Enter') calculate()">
                        </div>
                        <button id="ui-calc-btn" onclick="calculate()" class="bg-gradient-to-br from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-3 rounded-xl font-bold transition-all shadow-md hover:shadow-lg active:scale-95 text-lg">
                            =
                        </button>
                    </div>
                    <div class="mt-4 p-4 rounded-lg bg-slate-50 dark:bg-slate-950/50 border border-slate-100 dark:border-slate-800 min-h-[3.5rem] flex items-center justify-end">
                        <div id="calcResult" class="font-mono text-2xl font-bold text-slate-700 dark:text-slate-200 break-all text-right w-full"></div>
                    </div>
                    <p id="ui-calc-note" class="text-[10px] text-slate-400 mt-2 text-right italic opacity-70">Note: Some symbolic functions (like integrals/derivatives) are for syntax reference only; the JS engine supports numerical operations.</p>
                </div>
            </div>
        </div>
    </header>

    <!-- ä¸»ä½“å†…å®¹ -->
    <div class="flex-1 max-w-7xl mx-auto w-full px-4 py-10 grid grid-cols-1 lg:grid-cols-4 gap-8">
        
        <!-- å·¦ä¾§å¯¼èˆª (ç§»åŠ¨ç«¯ä¸ºæ¨ªå‘æ»šåŠ¨) -->
        <div class="lg:col-span-1 space-y-4">
            <div class="sticky top-24">
                <div class="relative mb-6 group">
                    <input type="text" id="searchInput" placeholder="Search functions..." oninput="filterFunctions()"
                        class="w-full pl-11 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-sm focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 outline-none transition-all shadow-sm">
                    <svg class="w-5 h-5 text-slate-400 absolute left-3.5 top-3.5 group-focus-within:text-blue-500 transition-colors" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                </div>
                
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 px-1">Navigation</h3>
                <nav class="flex lg:flex-col overflow-x-auto lg:overflow-visible gap-2 pb-4 lg:pb-0 scrollbar-hide" id="categoryNav">
                    <!-- åŠ¨æ€ç”Ÿæˆåˆ†ç±»æŒ‰é’® -->
                </nav>
            </div>
        </div>

        <!-- å³ä¾§å†…å®¹åŒº -->
        <div class="lg:col-span-3">
            <div id="contentArea" class="space-y-10 animate-fade-in">
                <!-- åŠ¨æ€ç”Ÿæˆå†…å®¹å¡ç‰‡ -->
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨åŠŸèƒ½ä»‹ç»ä¸ä½¿ç”¨æŒ‡å— -->
    <div class="border-t border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900 mt-8">
        <div class="max-w-7xl mx-auto px-4 py-16 grid grid-cols-1 md:grid-cols-2 gap-10">
            <div class="bg-slate-50 dark:bg-slate-800/50 p-8 rounded-3xl border border-slate-100 dark:border-slate-700/50">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-3 text-slate-800 dark:text-slate-100">
                    <div class="bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg text-blue-600 dark:text-blue-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <span id="ui-feature-title">Features</span>
                </h3>
                <ul class="space-y-4 text-sm text-slate-600 dark:text-slate-300 leading-relaxed" id="ui-feature-list">
                    <!-- åŠ¨æ€å¡«å…… -->
                </ul>
            </div>
            <div class="bg-slate-50 dark:bg-slate-800/50 p-8 rounded-3xl border border-slate-100 dark:border-slate-700/50">
                <h3 class="text-2xl font-bold mb-6 flex items-center gap-3 text-slate-800 dark:text-slate-100">
                    <div class="bg-green-100 dark:bg-green-900/30 p-2 rounded-lg text-green-600 dark:text-green-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <span id="ui-guide-title">User Guide</span>
                </h3>
                <ol class="space-y-4 text-sm text-slate-600 dark:text-slate-300 leading-relaxed list-decimal list-inside" id="ui-guide-list">
                    <!-- åŠ¨æ€å¡«å…… -->
                </ol>
            </div>
        </div>
    </div>

    <!-- åˆ†äº«æ¨¡æ€æ¡† -->
    <div id="shareModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden p-6 animate-slide-up border border-slate-100 dark:border-slate-700">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-slate-800 dark:text-white" id="ui-share-title">Share Tool</h3>
                <button onclick="closeShareModal()" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 text-2xl w-8 h-8 flex items-center justify-center rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">&times;</button>
            </div>
            
            <div class="space-y-5">
                <!-- é“¾æ¥ -->
                <div>
                    <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider" id="ui-share-link">Tool Link</label>
                    <div class="flex gap-2">
                        <input type="text" id="shareUrl" readonly class="flex-1 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-xs p-3 rounded-lg text-slate-600 dark:text-slate-300 font-mono focus:outline-none">
                        <button onclick="copyToClipboard('shareUrl')" class="bg-blue-600 hover:bg-blue-700 text-white text-xs px-4 py-2 rounded-lg font-bold transition-colors shadow-sm" id="ui-copy-btn-1">Copy</button>
                    </div>
                </div>
                <!-- æ–‡æœ¬æ‘˜è¦ -->
                <div>
                    <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider" id="ui-share-text">Text Summary</label>
                    <div class="relative group">
                        <textarea id="shareTextSummary" readonly rows="3" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-xs p-3 rounded-lg resize-none text-slate-600 dark:text-slate-300 font-sans focus:outline-none"></textarea>
                        <button onclick="copyToClipboard('shareTextSummary')" class="absolute top-2 right-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity font-bold">COPY</button>
                    </div>
                </div>
                <!-- HTML åµŒå…¥ -->
                <div>
                    <label class="block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-2 tracking-wider" id="ui-share-html">HTML Embed</label>
                    <div class="relative group">
                        <textarea id="shareHtmlEmbed" readonly rows="2" class="w-full bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 text-xs p-3 rounded-lg resize-none text-slate-600 dark:text-slate-300 font-mono focus:outline-none"></textarea>
                        <button onclick="copyToClipboard('shareHtmlEmbed')" class="absolute top-2 right-2 bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity font-bold">COPY</button>
                    </div>
                </div>
            </div>
            <div id="copyNotice" class="mt-4 flex items-center justify-center gap-2 text-green-600 dark:text-green-400 text-sm font-medium h-6 opacity-0 transition-opacity bg-green-50 dark:bg-green-900/20 rounded-lg">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                <span id="copyNoticeText">Copied to clipboard!</span>
            </div>
        </div>
    </div>

    <!-- æ•°æ®ä¸é€»è¾‘ -->
    <script>
        // --- å¤šè¯­è¨€å­—å…¸ ---
        const i18n = {
            "en": {
                ui: {
                    title: "Math Toolbox Calculator",
                    subtitle: "Comprehensive reference library and calculation bench for calculus, complex numbers, probability, matrices, and more.",
                    calcTitle: "Calculation Bench (via math.js)",
                    calcExample: "Fill Example: det([[1,2],[3,4]])",
                    calcPlaceholder: "Enter expression, e.g., 5! or sin(45 deg)",
                    calcBtn: "=",
                    calcNote: "Note: Some symbolic functions (like integrals/derivatives) are for syntax reference only; the JS engine supports numerical operations.",
                    searchPlaceholder: "Search functions...",
                    noResults: "No functions found",
                    clickToTry: "Click to try",
                    featureTitle: "Features",
                    guideTitle: "User Guide",
                    shareTitle: "Share Tool",
                    shareLink: "Tool Link",
                    shareText: "Text Summary",
                    shareHtml: "HTML Embed",
                    copyBtn: "Copy",
                    copied: "Copied to clipboard!",
                    featureList: [
                        "â€¢ <strong>Extensive Library</strong>: Covers calculus, linear algebra, statistics, and more.",
                        "â€¢ <strong>Real-time Calculation</strong>: Built-in Math.js engine for instant numerical computing.",
                        "â€¢ <strong>Multi-language Support</strong>: Supports major global languages.",
                        "â€¢ <strong>Responsive Design</strong>: Perfectly adapted for desktop and mobile devices."
                    ],
                    guideList: [
                        "1. <strong>Find Functions</strong>: Switch between math domains using the sidebar/top navigation.",
                        "2. <strong>Use Calculator</strong>: Click any function card to auto-fill the calculation box.",
                        "3. <strong>Calculate</strong>: Press Enter or click '=' button to get results.",
                        "4. <strong>Share</strong>: Click the share icon top-right to copy links or embed code."
                    ]
                },
                data: [
                    { id: "basic", name: "Basic Ops", icon: "ğŸ”¢", items: [{ name: "abs(x)", desc: "Absolute value. E.g., abs(-4.5) = 4.5" }, { name: "root(x,n)", desc: "n-th root of x. E.g., root(8, 3) = 2" }, { name: "log(x,a)", desc: "Logarithm of x with base a. E.g., log(100, 10) = 2" }, { name: "n!", desc: "Factorial. E.g., 5! = 120" }] },
                    { id: "calculus", name: "Calculus", icon: "âˆ«", items: [{ name: "diff(f(x),x,a)", desc: "Derivative at point a. E.g., diff(sqrt(x),x,5)" }, { name: "diff(f(x),x,a,n)", desc: "n-th derivative at point a." }, { name: "int(f(x),x,a,b)", desc: "Definite integral from a to b." }, { name: "sum(f(n),n,min,max)", desc: "Summation âˆ‘. Sum of f(n) from min to max." }, { name: "product(f(n),n,min,max)", desc: "Product âˆ. Product of f(n) from min to max." }] },
                    { id: "complex", name: "Complex", icon: "â„‚", items: [{ name: "abs(z)", desc: "Modulus. E.g., abs(2+3i)" }, { name: "arg(z)", desc: "Argument (radians). E.g., arg(2+3i)" }, { name: "re(z)", desc: "Real part. E.g., re(2+3i) = 2" }, { name: "im(z)", desc: "Imaginary part. E.g., im(2+3i) = 3" }, { name: "conj(z)", desc: "Conjugate. E.g., conj(2+3i) = 2-3i" }] },
                    { id: "probability", name: "Probability", icon: "ğŸ²", subsections: [{ title: "Combinatorics", items: [{ name: "binomial(n,k)", desc: "Combinations C(n,k). Number of ways to choose k from n." }, { name: "permute(n,k)", desc: "Permutations P(n,k). Number of ordered ways to choose k from n." }] }, { title: "Normal Dist.", items: [{ name: "normcdf(a,Âµ,Ïƒ)", desc: "P(X < a), where X ~ N(Âµ, Ïƒ)" }, { name: "normcdfrange(a,b,Âµ,Ïƒ)", desc: "P(a < X < b), where X ~ N(Âµ, Ïƒ)" }, { name: "invnorm(a,Âµ,Ïƒ)", desc: "Inverse CDF, returns m such that P(X < m) = a" }, { name: "normpdf(x,Âµ,Ïƒ)", desc: "Probability Density Function PDF" }] }, { title: "Binomial Dist.", items: [{ name: "binompdf(m,n,p)", desc: "P(X = m), where X ~ B(n, p)" }, { name: "binomcdf(m,n,p)", desc: "P(X â‰¤ m), where X ~ B(n, p)" }, { name: "invbinom(a,n,p)", desc: "Inverse CDF, returns m such that P(X â‰¤ m) = a" }] }, { title: "Other Dist.", items: [{ name: "poissonpdf(m,Î»)", desc: "Poisson prob P(X=m)" }, { name: "tcdf(a,k)", desc: "Student's t prob P(X<a), k degrees of freedom" }, { name: "geompdf(m,p)", desc: "Geometric prob P(X=m)" }, { name: "hgeompdf(m,N,K,n)", desc: "Hypergeometric prob" }] }, { title: "Random", items: [{ name: "random()", desc: "Random float between [0,1]" }, { name: "randint(a,b)", desc: "Random integer between [a,b]" }, { name: "randintnorep(a,b,n)", desc: "n unique random integers between [a,b]" }] }] },
                    { id: "matrices", name: "Matrices", icon: "[ ]", items: [{ name: "dim(M)", desc: "Dimensions [rows, cols]" }, { name: "transpose(M)", desc: "Transpose matrix" }, { name: "det(M)", desc: "Determinant" }, { name: "inverse(M)", desc: "Inverse matrix" }, { name: "identity(n)", desc: "Identity matrix of size n" }, { name: "trace(M)", desc: "Trace (sum of diagonal elements)" }, { name: "ref(M)", desc: "Row Echelon Form" }, { name: "rref(M)", desc: "Reduced Row Echelon Form" }, { name: "dot(U,V)", desc: "Dot product" }, { name: "cross(U,V)", desc: "Cross product (3D)" }, { name: "norm(U)", desc: "Vector norm (length)" }] },
                    { id: "list", name: "Statistics", icon: "ğŸ“Š", items: [{ name: "mean(L)", desc: "Mean value" }, { name: "stddev(L)", desc: "Population standard deviation" }, { name: "samplestddev(L)", desc: "Sample standard deviation" }, { name: "med(L)", desc: "Median" }, { name: "var(L)", desc: "Variance" }, { name: "sort(L)", desc: "Sort ascending" }, { name: "sum(L)", desc: "Sum of elements" }] },
                    { id: "arithmetic", name: "Arithmetic", icon: "Ã·", items: [{ name: "gcd(p,q)", desc: "Greatest Common Divisor. E.g., gcd(55, 11) = 11" }, { name: "lcm(p,q)", desc: "Least Common Multiple. E.g., lcm(13, 2) = 26" }, { name: "factor(n)", desc: "Prime factorization. E.g., factor(24) = 2^3 Ã— 3" }, { name: "rem(p,q)", desc: "Remainder. rem(50, 45) = 5" }, { name: "quo(p,q)", desc: "Quotient. quo(80, 39) = 2" }] },
                    { id: "trig", name: "Trigonometry", icon: "â–³", items: [{ name: "sinh, cosh, tanh", desc: "Hyperbolic sine, cosine, tangent" }, { name: "arsinh, arcosh, artanh", desc: "Inverse hyperbolic functions" }, { name: "csc, sec, cot", desc: "Cosecant, Secant, Cotangent" }, { name: "arccsc, arcsec, arccot", desc: "Inverse Cosecant, Secant, Cotangent" }] },
                    { id: "decimal", name: "Decimal", icon: ".00", items: [{ name: "floor(x)", desc: "Round down. floor(5.8) = 5" }, { name: "ceiling(x)", desc: "Round up. ceil(5.4) = 6" }, { name: "frac(x)", desc: "Fractional part. frac(5.8) = 0.8" }, { name: "round(x,n)", desc: "Round to n decimals. round(8.6576, 2) = 8.66" }] },
                    { id: "logic", name: "Logic", icon: "bool", items: [{ name: "piecewise", desc: "Piecewise template. (-x, x<0, x, xâ‰¥0)" }, { name: "and, or, not, xor", desc: "Logical operators" }, { name: "â‰¤, â‰¥, â‰ ", desc: "Comparison operators" }] },
                    { id: "units", name: "Units", icon: "âš–ï¸", displayType: "list", content: `<div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-4"><h4 class="font-bold text-blue-600">Length</h4><p class="text-sm">in, ft, yd, mi, au, ly, pc (Imperial/Astro)</p><p class="text-sm">pm, nm, Âµm, mm, cm, m, km (Metric)</p><h4 class="font-bold text-blue-600">Time</h4><p class="text-sm">ns, Âµs, ms, s, min, h, day, week, month, year</p><h4 class="font-bold text-blue-600">Volume</h4><p class="text-sm">tsp, tbsp, cup, pt, qt, gal (Imperial)</p><p class="text-sm">mL, cL, dL, L (Metric)</p><h4 class="font-bold text-blue-600">Constants</h4><ul class="text-sm space-y-1"><li>c: Speed of light</li><li>e: Elementary charge</li><li>G: Gravitational constant</li><li>g0: Standard gravity (9.80665)</li><li>Na: Avogadro constant</li></ul></div><div class="space-y-4"><h4 class="font-bold text-blue-600">Mass</h4><p class="text-sm">oz, lb, ton (Imperial)</p><p class="text-sm">Âµg, mg, g, kg, t (Metric)</p><h4 class="font-bold text-blue-600">Electricity</h4><p class="text-sm">A (Ampere), V (Volt), Î© (Ohm), F (Farad)</p><h4 class="font-bold text-blue-600">Energy & Power</h4><p class="text-sm">J (Joule), W (Watt), eV (Electronvolt)</p><h4 class="font-bold text-blue-600">Temperature</h4><p class="text-sm">K (Kelvin), Â°F (Fahrenheit), Â°C (Celsius)</p></div></div>` }
                ]
            },
            "zh-CN": {
                ui: {
                    title: "æ•°å­¦å·¥å…·ç®±è®¡ç®—å™¨",
                    subtitle: "é›†æˆå¾®ç§¯åˆ†ã€å¤æ•°ã€æ¦‚ç‡ç»Ÿè®¡ã€çŸ©é˜µå‘é‡ç­‰é«˜çº§å‡½æ•°çš„ç»¼åˆå‚è€ƒåº“ä¸è®¡ç®—å®éªŒå°ã€‚",
                    calcTitle: "è®¡ç®—è¯•éªŒå° (åŸºäº math.js)",
                    calcExample: "å¡«å…¥ç¤ºä¾‹: det([[1,2],[3,4]])",
                    calcPlaceholder: "è¾“å…¥è¡¨è¾¾å¼ï¼Œä¾‹å¦‚: 5! æˆ– sin(45 deg)",
                    calcBtn: "=",
                    calcNote: "æ³¨ï¼šéƒ¨åˆ†å¤æ‚çš„ç¬¦å·å‡½æ•°ï¼ˆå¦‚ç§¯åˆ†/æ±‚å¯¼ï¼‰åœ¨æ­¤ä»…ä½œä¸ºè¯­æ³•å‚è€ƒï¼ŒJSå¼•æ“å¯èƒ½ä¸æ”¯æŒç¬¦å·è¿ç®—ã€‚",
                    searchPlaceholder: "æœç´¢å‡½æ•°...",
                    noResults: "æœªæ‰¾åˆ°ç›¸å…³å‡½æ•°",
                    clickToTry: "ç‚¹å‡»è¯•ç”¨",
                    featureTitle: "åŠŸèƒ½ä»‹ç»",
                    guideTitle: "ä½¿ç”¨æŒ‡å—",
                    shareTitle: "åˆ†äº«æ­¤å·¥å…·",
                    shareLink: "å·¥å…·é“¾æ¥",
                    shareText: "æ–‡æœ¬æ‘˜è¦",
                    shareHtml: "HTML åµŒå…¥",
                    copyBtn: "å¤åˆ¶",
                    copied: "å·²å¤åˆ¶åˆ°å‰ªè´´æ¿!",
                    featureList: [
                        "â€¢ <strong>æµ·é‡å‡½æ•°åº“</strong>ï¼šæ¶µç›–å¾®ç§¯åˆ†ã€çº¿æ€§ä»£æ•°ã€ç»Ÿè®¡å­¦ç­‰å¤šä¸ªé¢†åŸŸã€‚",
                        "â€¢ <strong>å®æ—¶è®¡ç®—</strong>ï¼šå†…ç½® Math.js å¼•æ“ï¼Œæ”¯æŒå³æ—¶æ•°å€¼è¿ç®—ã€‚",
                        "â€¢ <strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šæ”¯æŒå…­ç§ä¸»æµè¯­è¨€ï¼Œå…¨çƒé€šç”¨ã€‚",
                        "â€¢ <strong>å“åº”å¼è®¾è®¡</strong>ï¼šå®Œç¾é€‚é…æ¡Œé¢ä¸ç§»åŠ¨ç«¯è®¾å¤‡ã€‚"
                    ],
                    guideList: [
                        "1. <strong>æŸ¥æ‰¾å‡½æ•°</strong>ï¼šé€šè¿‡å·¦ä¾§ï¼ˆæˆ–é¡¶éƒ¨ï¼‰åˆ†ç±»æ åˆ‡æ¢ä¸åŒæ•°å­¦é¢†åŸŸã€‚",
                        "2. <strong>ä½¿ç”¨è®¡ç®—å™¨</strong>ï¼šç‚¹å‡»ä»»æ„å‡½æ•°å¡ç‰‡å¯å¿«é€Ÿå¡«å…¥ä¸Šæ–¹è®¡ç®—æ¡†ã€‚",
                        "3. <strong>æ‰§è¡Œè¿ç®—</strong>ï¼šè¾“å…¥å‚æ•°åæŒ‰å›è½¦æˆ–ç‚¹å‡»â€œè®¡ç®—â€æŒ‰é’®è·å–ç»“æœã€‚",
                        "4. <strong>åˆ†äº«å·¥å…·</strong>ï¼šç‚¹å‡»å³ä¸Šè§’åˆ†äº«æŒ‰é’®ï¼Œå³å¯å¤åˆ¶é“¾æ¥æˆ–åµŒå…¥ä»£ç ã€‚"
                    ]
                },
                data: [
                    { id: "basic", name: "åŸºç¡€è¿ç®—", icon: "ğŸ”¢", items: [{ name: "abs(x)", desc: "è®¡ç®—ç»å¯¹å€¼ã€‚ä¾‹å¦‚ï¼šabs(-4.5) = 4.5" }, { name: "root(x,n)", desc: "è®¡ç®— x çš„ n æ¬¡æ–¹æ ¹ã€‚ä¾‹å¦‚ï¼šroot(8, 3) = 2" }, { name: "log(x,a)", desc: "è®¡ç®—ä»¥ a ä¸ºåº• x çš„å¯¹æ•°ã€‚ä¾‹å¦‚ï¼šlog(100, 10) = 2" }, { name: "n!", desc: "é˜¶ä¹˜ã€‚è¿”å› n ä¸æ‰€æœ‰å°äºå®ƒçš„æ­£æ•´æ•°çš„ä¹˜ç§¯ã€‚ä¾‹å¦‚ï¼š5! = 120" }] },
                    { id: "calculus", name: "å¾®ç§¯åˆ†", icon: "âˆ«", items: [{ name: "diff(f(x),x,a)", desc: "è®¡ç®—å‡½æ•°åœ¨æŸä¸€ç‚¹ a çš„å¯¼æ•° f'(a)ã€‚ä¾‹å¦‚ï¼šdiff(sqrt(x),x,5)" }, { name: "diff(f(x),x,a,n)", desc: "è®¡ç®—å‡½æ•°åœ¨æŸä¸€ç‚¹ a çš„ n é˜¶å¯¼æ•° f^(n)(a)ã€‚" }, { name: "int(f(x),x,a,b)", desc: "è®¡ç®—å‡½æ•°åœ¨åŒºé—´ [a, b] ä¸Šçš„å®šç§¯åˆ†ã€‚" }, { name: "sum(f(n),n,min,max)", desc: "æ±‚å’Œç¬¦å· âˆ‘ã€‚è®¡ç®— f(n) ä» min åˆ° max çš„æ€»å’Œã€‚" }, { name: "product(f(n),n,min,max)", desc: "æ±‚ç§¯ç¬¦å· âˆã€‚è®¡ç®— f(n) ä» min åˆ° max çš„ä¹˜ç§¯ã€‚" }] },
                    { id: "complex", name: "å¤æ•°", icon: "â„‚", items: [{ name: "abs(z)", desc: "å¤æ•°çš„æ¨¡ã€‚ä¾‹å¦‚ï¼šabs(2+3i)" }, { name: "arg(z)", desc: "å¤æ•°çš„è¾è§’ï¼ˆå¼§åº¦ï¼‰ã€‚ä¾‹å¦‚ï¼šarg(2+3i)" }, { name: "re(z)", desc: "å¤æ•°çš„å®éƒ¨ã€‚ä¾‹å¦‚ï¼šre(2+3i) = 2" }, { name: "im(z)", desc: "å¤æ•°çš„è™šéƒ¨ã€‚ä¾‹å¦‚ï¼šim(2+3i) = 3" }, { name: "conj(z)", desc: "å¤æ•°çš„å…±è½­ã€‚ä¾‹å¦‚ï¼šconj(2+3i) = 2-3i" }] },
                    { id: "probability", name: "æ¦‚ç‡ä¸ç»Ÿè®¡", icon: "ğŸ²", subsections: [{ title: "ç»„åˆæ•°å­¦", items: [{ name: "binomial(n,k)", desc: "ç»„åˆæ•° C(n,k)ã€‚ä» n ä¸ªå…ƒç´ ä¸­é€‰å– k ä¸ªçš„æ–¹æ³•æ•°ã€‚" }, { name: "permute(n,k)", desc: "æ’åˆ—æ•° P(n,k)ã€‚ä» n ä¸ªå…ƒç´ ä¸­æœ‰åºé€‰å– k ä¸ªçš„æ–¹æ³•æ•°ã€‚" }] }, { title: "æ­£æ€åˆ†å¸ƒ (Normal)", items: [{ name: "normcdf(a,Âµ,Ïƒ)", desc: "P(X < a)ï¼Œå…¶ä¸­ X ~ N(Âµ, Ïƒ)" }, { name: "normcdfrange(a,b,Âµ,Ïƒ)", desc: "P(a < X < b)ï¼Œå…¶ä¸­ X ~ N(Âµ, Ïƒ)" }, { name: "invnorm(a,Âµ,Ïƒ)", desc: "åå‡½æ•°ï¼Œè¿”å› m ä½¿å¾— P(X < m) = a" }, { name: "normpdf(x,Âµ,Ïƒ)", desc: "æ¦‚ç‡å¯†åº¦å‡½æ•° PDF" }] }, { title: "äºŒé¡¹åˆ†å¸ƒ (Binomial)", items: [{ name: "binompdf(m,n,p)", desc: "P(X = m)ï¼Œå…¶ä¸­ X ~ B(n, p)" }, { name: "binomcdf(m,n,p)", desc: "P(X â‰¤ m)ï¼Œå…¶ä¸­ X ~ B(n, p)" }, { name: "invbinom(a,n,p)", desc: "åå‡½æ•°ï¼Œè¿”å› m ä½¿å¾— P(X â‰¤ m) = a" }] }, { title: "å…¶ä»–åˆ†å¸ƒ", items: [{ name: "poissonpdf(m,Î»)", desc: "æ³Šæ¾åˆ†å¸ƒæ¦‚ç‡ P(X=m)" }, { name: "tcdf(a,k)", desc: "å­¦ç”Ÿtåˆ†å¸ƒ P(X<a)ï¼Œk ä¸ºè‡ªç”±åº¦" }, { name: "geompdf(m,p)", desc: "å‡ ä½•åˆ†å¸ƒ P(X=m)" }, { name: "hgeompdf(m,N,K,n)", desc: "è¶…å‡ ä½•åˆ†å¸ƒæ¦‚ç‡" }] }, { title: "éšæœºæ•°", items: [{ name: "random()", desc: "è¿”å› [0,1] ä¹‹é—´çš„éšæœºæµ®ç‚¹æ•°" }, { name: "randint(a,b)", desc: "è¿”å› [a,b] ä¹‹é—´çš„éšæœºæ•´æ•°" }, { name: "randintnorep(a,b,n)", desc: "è¿”å› [a,b] ä¹‹é—´ n ä¸ªä¸é‡å¤çš„éšæœºæ•´æ•°" }] }] },
                    { id: "matrices", name: "çŸ©é˜µä¸å‘é‡", icon: "[ ]", items: [{ name: "dim(M)", desc: "è¿”å›çŸ©é˜µçš„ç»´åº¦ [è¡Œ, åˆ—]" }, { name: "transpose(M)", desc: "è½¬ç½®çŸ©é˜µ" }, { name: "det(M)", desc: "è®¡ç®—çŸ©é˜µè¡Œåˆ—å¼" }, { name: "inverse(M)", desc: "è®¡ç®—é€†çŸ©é˜µ" }, { name: "identity(n)", desc: "åˆ›å»º n é˜¶å•ä½çŸ©é˜µ" }, { name: "trace(M)", desc: "è®¡ç®—çŸ©é˜µçš„è¿¹ï¼ˆå¯¹è§’çº¿å…ƒç´ ä¹‹å’Œï¼‰" }, { name: "ref(M)", desc: "è¡Œé˜¶æ¢¯å½¢çŸ©é˜µ" }, { name: "rref(M)", desc: "ç®€åŒ–è¡Œé˜¶æ¢¯å½¢çŸ©é˜µ" }, { name: "dot(U,V)", desc: "å‘é‡ç‚¹ç§¯" }, { name: "cross(U,V)", desc: "å‘é‡å‰ç§¯ï¼ˆ3ç»´ï¼‰" }, { name: "norm(U)", desc: "å‘é‡çš„æ¨¡ï¼ˆé•¿åº¦ï¼‰" }] },
                    { id: "list", name: "åˆ—è¡¨ç»Ÿè®¡", icon: "ğŸ“Š", items: [{ name: "mean(L)", desc: "å¹³å‡å€¼" }, { name: "stddev(L)", desc: "æ€»ä½“æ ‡å‡†å·®" }, { name: "samplestddev(L)", desc: "æ ·æœ¬æ ‡å‡†å·®" }, { name: "med(L)", desc: "ä¸­ä½æ•°" }, { name: "var(L)", desc: "æ–¹å·®" }, { name: "sort(L)", desc: "å‡åºæ’åº" }, { name: "sum(L)", desc: "åˆ—è¡¨å…ƒç´ æ±‚å’Œ" }] },
                    { id: "arithmetic", name: "ç®—æœ¯", icon: "Ã·", items: [{ name: "gcd(p,q)", desc: "æœ€å¤§å…¬çº¦æ•°ã€‚ä¾‹å¦‚ gcd(55, 11) = 11" }, { name: "lcm(p,q)", desc: "æœ€å°å…¬å€æ•°ã€‚ä¾‹å¦‚ lcm(13, 2) = 26" }, { name: "factor(n)", desc: "æ•´æ•°åˆ†è§£è´¨å› æ•°ã€‚ä¾‹å¦‚ factor(24) = 2^3 Ã— 3" }, { name: "rem(p,q)", desc: "æ±‚ä½™æ•°ã€‚rem(50, 45) = 5" }, { name: "quo(p,q)", desc: "æ±‚å•†ã€‚quo(80, 39) = 2" }] },
                    { id: "trig", name: "ä¸‰è§’å­¦", icon: "â–³", items: [{ name: "sinh, cosh, tanh", desc: "åŒæ›²æ­£å¼¦ã€ä½™å¼¦ã€æ­£åˆ‡" }, { name: "arsinh, arcosh, artanh", desc: "ååŒæ›²å‡½æ•°" }, { name: "csc, sec, cot", desc: "ä½™å‰²ã€æ­£å‰²ã€ä½™åˆ‡" }, { name: "arccsc, arcsec, arccot", desc: "åä½™å‰²ã€åæ­£å‰²ã€åä½™åˆ‡" }] },
                    { id: "decimal", name: "å°æ•°è¿ç®—", icon: ".00", items: [{ name: "floor(x)", desc: "å‘ä¸‹å–æ•´ã€‚floor(5.8) = 5" }, { name: "ceiling(x)", desc: "å‘ä¸Šå–æ•´ã€‚ceil(5.4) = 6" }, { name: "frac(x)", desc: "å–å°æ•°éƒ¨åˆ†ã€‚frac(5.8) = 0.8" }, { name: "round(x,n)", desc: "å››èˆäº”å…¥åˆ° n ä½å°æ•°ã€‚round(8.6576, 2) = 8.66" }] },
                    { id: "logic", name: "é€»è¾‘", icon: "bool", items: [{ name: "piecewise", desc: "åˆ†æ®µå‡½æ•°æ¨¡æ¿ã€‚(-x, x<0, x, xâ‰¥0)" }, { name: "and, or, not, xor", desc: "é€»è¾‘è¿ç®—ç¬¦ï¼šä¸ã€æˆ–ã€éã€å¼‚æˆ–" }, { name: "â‰¤, â‰¥, â‰ ", desc: "æ¯”è¾ƒè¿ç®—ç¬¦" }] },
                    { id: "units", name: "å•ä½ä¸å¸¸æ•°", icon: "âš–ï¸", displayType: "list", content: `<div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-4"><h4 class="font-bold text-blue-600">é•¿åº¦ (Length)</h4><p class="text-sm">in, ft, yd, mi, au, ly, pc (è‹±åˆ¶/å¤©æ–‡)</p><p class="text-sm">pm, nm, Âµm, mm, cm, m, km (å…¬åˆ¶)</p><h4 class="font-bold text-blue-600">æ—¶é—´ (Time)</h4><p class="text-sm">ns, Âµs, ms, s, min, h, day, week, month, year</p><h4 class="font-bold text-blue-600">ä½“ç§¯ (Volume)</h4><p class="text-sm">tsp, tbsp, cup, pt, qt, gal (è‹±åˆ¶)</p><p class="text-sm">mL, cL, dL, L (å…¬åˆ¶)</p><h4 class="font-bold text-blue-600">ç‰©ç†å¸¸æ•° (Constants)</h4><ul class="text-sm space-y-1"><li>c: å…‰é€Ÿ</li><li>e: åŸºæœ¬ç”µè·</li><li>G: ä¸‡æœ‰å¼•åŠ›å¸¸æ•°</li><li>g0: é‡åŠ›åŠ é€Ÿåº¦ (9.80665)</li><li>Na: é˜¿ä¼ä¼½å¾·ç½—å¸¸æ•°</li></ul></div><div class="space-y-4"><h4 class="font-bold text-blue-600">è´¨é‡ (Mass)</h4><p class="text-sm">oz, lb, ton (è‹±åˆ¶)</p><p class="text-sm">Âµg, mg, g, kg, t (å…¬åˆ¶)</p><h4 class="font-bold text-blue-600">ç”µå­¦ (Electricity)</h4><p class="text-sm">A (å®‰åŸ¹), V (ä¼ç‰¹), Î© (æ¬§å§†), F (æ³•æ‹‰)</p><h4 class="font-bold text-blue-600">èƒ½é‡ä¸åŠŸç‡</h4><p class="text-sm">J (ç„¦è€³), W (ç“¦ç‰¹), eV (ç”µå­ä¼ç‰¹)</p><h4 class="font-bold text-blue-600">æ¸©åº¦ (Temperature)</h4><p class="text-sm">K (å¼€å°”æ–‡), Â°F (åæ°), Â°C (æ‘„æ°)</p></div></div>` }
                ]
            },
            "zh-TW": {
                ui: {
                    title: "æ•¸å­¸å·¥å…·ç®±è¨ˆç®—å™¨",
                    subtitle: "é›†æˆå¾®ç©åˆ†ã€è¤‡æ•¸ã€æ©Ÿç‡çµ±è¨ˆã€çŸ©é™£å‘é‡ç­‰é«˜ç´šå‡½æ•¸çš„ç¶œåˆåƒè€ƒåº«èˆ‡è¨ˆç®—å¯¦é©—å°ã€‚",
                    calcTitle: "è¨ˆç®—å¯¦é©—å° (åŸºæ–¼ math.js)",
                    calcExample: "å¡«å…¥ç¯„ä¾‹: det([[1,2],[3,4]])",
                    calcPlaceholder: "è¼¸å…¥è¡¨é”å¼ï¼Œä¾‹å¦‚: 5! æˆ– sin(45 deg)",
                    calcBtn: "=",
                    calcNote: "è¨»ï¼šéƒ¨åˆ†è¤‡é›œçš„ç¬¦è™Ÿå‡½æ•¸ï¼ˆå¦‚ç©åˆ†/æ±‚å°ï¼‰åœ¨æ­¤åƒ…ä½œç‚ºèªæ³•åƒè€ƒï¼ŒJSå¼•æ“å¯èƒ½ä¸æ”¯æ´ç¬¦è™Ÿé‹ç®—ã€‚",
                    searchPlaceholder: "æœå°‹å‡½æ•¸...",
                    noResults: "æœªæ‰¾åˆ°ç›¸é—œå‡½æ•¸",
                    clickToTry: "é»æ“Šè©¦ç”¨",
                    featureTitle: "åŠŸèƒ½ä»‹ç´¹",
                    guideTitle: "ä½¿ç”¨æŒ‡å—",
                    shareTitle: "åˆ†äº«æ­¤å·¥å…·",
                    shareLink: "å·¥å…·é€£çµ",
                    shareText: "æ–‡æœ¬æ‘˜è¦",
                    shareHtml: "HTML åµŒå…¥",
                    copyBtn: "è¤‡è£½",
                    copied: "å·²è¤‡è£½åˆ°å‰ªè²¼æ¿!",
                    featureList: [
                        "â€¢ <strong>æµ·é‡å‡½æ•¸åº«</strong>ï¼šæ¶µè“‹å¾®ç©åˆ†ã€ç·šæ€§ä»£æ•¸ã€çµ±è¨ˆå­¸ç­‰å¤šå€‹é ˜åŸŸã€‚",
                        "â€¢ <strong>å¯¦æ™‚è¨ˆç®—</strong>ï¼šå…§å»º Math.js å¼•æ“ï¼Œæ”¯æŒå³æ™‚æ•¸å€¼é‹ç®—ã€‚",
                        "â€¢ <strong>å¤šèªè¨€æ”¯æŒ</strong>ï¼šæ”¯æŒå…­ç¨®ä¸»æµèªè¨€ï¼Œå…¨çƒé€šç”¨ã€‚",
                        "â€¢ <strong>éŸ¿æ‡‰å¼è¨­è¨ˆ</strong>ï¼šå®Œç¾é©é…æ¡Œé¢èˆ‡ç§»å‹•ç«¯è¨­å‚™ã€‚"
                    ],
                    guideList: [
                        "1. <strong>æŸ¥æ‰¾å‡½æ•¸</strong>ï¼šé€šéå·¦å´ï¼ˆæˆ–é ‚éƒ¨ï¼‰åˆ†é¡æ¬„åˆ‡æ›ä¸åŒæ•¸å­¸é ˜åŸŸã€‚",
                        "2. <strong>ä½¿ç”¨è¨ˆç®—å™¨</strong>ï¼šé»æ“Šä»»æ„å‡½æ•¸å¡ç‰‡å¯å¿«é€Ÿå¡«å…¥ä¸Šæ–¹è¨ˆç®—æ¡†ã€‚",
                        "3. <strong>åŸ·è¡Œé‹ç®—</strong>ï¼šè¼¸å…¥åƒæ•¸å¾ŒæŒ‰å›è»Šæˆ–é»æ“Šâ€œè¨ˆç®—â€æŒ‰éˆ•ç²å–çµæœã€‚",
                        "4. <strong>åˆ†äº«å·¥å…·</strong>ï¼šé»æ“Šå³ä¸Šè§’åˆ†äº«æŒ‰éˆ•ï¼Œå³å¯è¤‡è£½é€£çµæˆ–åµŒå…¥ä»£ç¢¼ã€‚"
                    ]
                },
                data: [
                    { id: "basic", name: "åŸºç¤é‹ç®—", icon: "ğŸ”¢", items: [{ name: "abs(x)", desc: "è¨ˆç®—çµ•å°å€¼ã€‚ä¾‹å¦‚ï¼šabs(-4.5) = 4.5" }, { name: "root(x,n)", desc: "è¨ˆç®— x çš„ n æ¬¡æ–¹æ ¹ã€‚ä¾‹å¦‚ï¼šroot(8, 3) = 2" }, { name: "log(x,a)", desc: "è¨ˆç®—ä»¥ a ç‚ºåº• x çš„å°æ•¸ã€‚ä¾‹å¦‚ï¼šlog(100, 10) = 2" }, { name: "n!", desc: "éšä¹˜ã€‚è¿”å› n èˆ‡æ‰€æœ‰å°æ–¼å®ƒçš„æ­£æ•´æ•¸çš„ä¹˜ç©ã€‚ä¾‹å¦‚ï¼š5! = 120" }] },
                    { id: "calculus", name: "å¾®ç©åˆ†", icon: "âˆ«", items: [{ name: "diff(f(x),x,a)", desc: "è¨ˆç®—å‡½æ•¸åœ¨æŸä¸€é» a çš„å°æ•¸ f'(a)ã€‚ä¾‹å¦‚ï¼šdiff(sqrt(x),x,5)" }, { name: "diff(f(x),x,a,n)", desc: "è¨ˆç®—å‡½æ•¸åœ¨æŸä¸€é» a çš„ n éšå°æ•¸ f^(n)(a)ã€‚" }, { name: "int(f(x),x,a,b)", desc: "è¨ˆç®—å‡½æ•¸åœ¨å€é–“ [a, b] ä¸Šçš„å®šç©åˆ†ã€‚" }, { name: "sum(f(n),n,min,max)", desc: "æ±‚å’Œç¬¦è™Ÿ âˆ‘ã€‚è¨ˆç®— f(n) å¾ min åˆ° max çš„ç¸½å’Œã€‚" }, { name: "product(f(n),n,min,max)", desc: "æ±‚ç©ç¬¦è™Ÿ âˆã€‚è¨ˆç®— f(n) å¾ min åˆ° max çš„ä¹˜ç©ã€‚" }] },
                    { id: "complex", name: "è¤‡æ•¸", icon: "â„‚", items: [{ name: "abs(z)", desc: "è¤‡æ•¸çš„æ¨¡ã€‚ä¾‹å¦‚ï¼šabs(2+3i)" }, { name: "arg(z)", desc: "è¤‡æ•¸çš„è¼»è§’ï¼ˆå¼§åº¦ï¼‰ã€‚ä¾‹å¦‚ï¼šarg(2+3i)" }, { name: "re(z)", desc: "è¤‡æ•¸çš„å¯¦éƒ¨ã€‚ä¾‹å¦‚ï¼šre(2+3i) = 2" }, { name: "im(z)", desc: "è¤‡æ•¸çš„è™›éƒ¨ã€‚ä¾‹å¦‚ï¼šim(2+3i) = 3" }, { name: "conj(z)", desc: "è¤‡æ•¸çš„å…±è»›ã€‚ä¾‹å¦‚ï¼šconj(2+3i) = 2-3i" }] },
                    { id: "probability", name: "æ©Ÿç‡èˆ‡çµ±è¨ˆ", icon: "ğŸ²", subsections: [{ title: "çµ„åˆæ•¸å­¸", items: [{ name: "binomial(n,k)", desc: "çµ„åˆæ•¸ C(n,k)ã€‚å¾ n å€‹å…ƒç´ ä¸­é¸å– k å€‹çš„æ–¹æ³•æ•¸ã€‚" }, { name: "permute(n,k)", desc: "æ’åˆ—æ•¸ P(n,k)ã€‚å¾ n å€‹å…ƒç´ ä¸­æœ‰åºé¸å– k å€‹çš„æ–¹æ³•æ•¸ã€‚" }] }, { title: "å¸¸æ…‹åˆ†ä½ˆ (Normal)", items: [{ name: "normcdf(a,Âµ,Ïƒ)", desc: "P(X < a)ï¼Œå…¶ä¸­ X ~ N(Âµ, Ïƒ)" }, { name: "normcdfrange(a,b,Âµ,Ïƒ)", desc: "P(a < X < b)ï¼Œå…¶ä¸­ X ~ N(Âµ, Ïƒ)" }, { name: "invnorm(a,Âµ,Ïƒ)", desc: "åå‡½æ•¸ï¼Œè¿”å› m ä½¿å¾— P(X < m) = a" }, { name: "normpdf(x,Âµ,Ïƒ)", desc: "æ©Ÿç‡å¯†åº¦å‡½æ•¸ PDF" }] }, { title: "äºŒé …åˆ†ä½ˆ (Binomial)", items: [{ name: "binompdf(m,n,p)", desc: "P(X = m)ï¼Œå…¶ä¸­ X ~ B(n, p)" }, { name: "binomcdf(m,n,p)", desc: "P(X â‰¤ m)ï¼Œå…¶ä¸­ X ~ B(n, p)" }, { name: "invbinom(a,n,p)", desc: "åå‡½æ•¸ï¼Œè¿”å› m ä½¿å¾— P(X â‰¤ m) = a" }] }, { title: "å…¶ä»–åˆ†ä½ˆ", items: [{ name: "poissonpdf(m,Î»)", desc: "æ³Šæ¾åˆ†ä½ˆæ©Ÿç‡ P(X=m)" }, { name: "tcdf(a,k)", desc: "å­¸ç”Ÿtåˆ†ä½ˆ P(X<a)ï¼Œk ç‚ºè‡ªç”±åº¦" }, { name: "geompdf(m,p)", desc: "å¹¾ä½•åˆ†ä½ˆ P(X=m)" }, { name: "hgeompdf(m,N,K,n)", desc: "è¶…å¹¾ä½•åˆ†ä½ˆæ©Ÿç‡" }] }, { title: "éš¨æ©Ÿæ•¸", items: [{ name: "random()", desc: "è¿”å› [0,1] ä¹‹é–“çš„éš¨æ©Ÿæµ®é»æ•¸" }, { name: "randint(a,b)", desc: "è¿”å› [a,b] ä¹‹é–“çš„éš¨æ©Ÿæ•´æ•¸" }, { name: "randintnorep(a,b,n)", desc: "è¿”å› [a,b] ä¹‹é–“ n å€‹ä¸é‡è¤‡çš„éš¨æ©Ÿæ•´æ•¸" }] }] },
                    { id: "matrices", name: "çŸ©é™£èˆ‡å‘é‡", icon: "[ ]", items: [{ name: "dim(M)", desc: "è¿”å›çŸ©é™£çš„ç¶­åº¦ [è¡Œ, åˆ—]" }, { name: "transpose(M)", desc: "è½‰ç½®çŸ©é™£" }, { name: "det(M)", desc: "è¨ˆç®—çŸ©é™£è¡Œåˆ—å¼" }, { name: "inverse(M)", desc: "è¨ˆç®—é€†çŸ©é™£" }, { name: "identity(n)", desc: "å»ºç«‹ n éšå–®ä½çŸ©é™£" }, { name: "trace(M)", desc: "è¨ˆç®—çŸ©é™£çš„è·¡ï¼ˆå°è§’ç·šå…ƒç´ ä¹‹å’Œï¼‰" }, { name: "ref(M)", desc: "åˆ—æ¢¯å½¢çŸ©é™£" }, { name: "rref(M)", desc: "ç°¡åŒ–åˆ—æ¢¯å½¢çŸ©é™£" }, { name: "dot(U,V)", desc: "å‘é‡é»ç©" }, { name: "cross(U,V)", desc: "å‘é‡å¤–ç©ï¼ˆ3ç¶­ï¼‰" }, { name: "norm(U)", desc: "å‘é‡çš„æ¨¡ï¼ˆé•·åº¦ï¼‰" }] },
                    { id: "list", name: "åˆ—è¡¨çµ±è¨ˆ", icon: "ğŸ“Š", items: [{ name: "mean(L)", desc: "å¹³å‡å€¼" }, { name: "stddev(L)", desc: "æ¯é«”æ¨™æº–å·®" }, { name: "samplestddev(L)", desc: "æ¨£æœ¬æ¨™æº–å·®" }, { name: "med(L)", desc: "ä¸­ä½æ•¸" }, { name: "var(L)", desc: "è®Šç•°æ•¸" }, { name: "sort(L)", desc: "å‡åºæ’åº" }, { name: "sum(L)", desc: "åˆ—è¡¨å…ƒç´ æ±‚å’Œ" }] },
                    { id: "arithmetic", name: "ç®—è¡“", icon: "Ã·", items: [{ name: "gcd(p,q)", desc: "æœ€å¤§å…¬å› æ•¸ã€‚ä¾‹å¦‚ gcd(55, 11) = 11" }, { name: "lcm(p,q)", desc: "æœ€å°å…¬å€æ•¸ã€‚ä¾‹å¦‚ lcm(13, 2) = 26" }, { name: "factor(n)", desc: "æ•´æ•¸åˆ†è§£è³ªå› æ•¸ã€‚ä¾‹å¦‚ factor(24) = 2^3 Ã— 3" }, { name: "rem(p,q)", desc: "æ±‚é¤˜æ•¸ã€‚rem(50, 45) = 5" }, { name: "quo(p,q)", desc: "æ±‚å•†ã€‚quo(80, 39) = 2" }] },
                    { id: "trig", name: "ä¸‰è§’å­¸", icon: "â–³", items: [{ name: "sinh, cosh, tanh", desc: "é›™æ›²æ­£å¼¦ã€é¤˜å¼¦ã€æ­£åˆ‡" }, { name: "arsinh, arcosh, artanh", desc: "åé›™æ›²å‡½æ•¸" }, { name: "csc, sec, cot", desc: "é¤˜å‰²ã€æ­£å‰²ã€é¤˜åˆ‡" }, { name: "arccsc, arcsec, arccot", desc: "åé¤˜å‰²ã€åæ­£å‰²ã€åé¤˜åˆ‡" }] },
                    { id: "decimal", name: "å°æ•¸é‹ç®—", icon: ".00", items: [{ name: "floor(x)", desc: "å‘ä¸‹å–æ•´ã€‚floor(5.8) = 5" }, { name: "ceiling(x)", desc: "å‘ä¸Šå–æ•´ã€‚ceil(5.4) = 6" }, { name: "frac(x)", desc: "å–å°æ•¸éƒ¨åˆ†ã€‚frac(5.8) = 0.8" }, { name: "round(x,n)", desc: "å››æ¨äº”å…¥åˆ° n ä½å°æ•¸ã€‚round(8.6576, 2) = 8.66" }] },
                    { id: "logic", name: "é‚è¼¯", icon: "bool", items: [{ name: "piecewise", desc: "åˆ†æ®µå‡½æ•¸æ¨¡æ¿ã€‚(-x, x<0, x, xâ‰¥0)" }, { name: "and, or, not, xor", desc: "é‚è¼¯é‹ç®—ç¬¦ï¼šèˆ‡ã€æˆ–ã€éã€äº’æ–¥æˆ–" }, { name: "â‰¤, â‰¥, â‰ ", desc: "æ¯”è¼ƒé‹ç®—ç¬¦" }] },
                    { id: "units", name: "å–®ä½èˆ‡å¸¸æ•¸", icon: "âš–ï¸", displayType: "list", content: `<div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-4"><h4 class="font-bold text-blue-600">é•·åº¦ (Length)</h4><p class="text-sm">in, ft, yd, mi, au, ly, pc (è‹±åˆ¶/å¤©æ–‡)</p><p class="text-sm">pm, nm, Âµm, mm, cm, m, km (å…¬åˆ¶)</p><h4 class="font-bold text-blue-600">æ™‚é–“ (Time)</h4><p class="text-sm">ns, Âµs, ms, s, min, h, day, week, month, year</p><h4 class="font-bold text-blue-600">é«”ç© (Volume)</h4><p class="text-sm">tsp, tbsp, cup, pt, qt, gal (è‹±åˆ¶)</p><p class="text-sm">mL, cL, dL, L (å…¬åˆ¶)</p><h4 class="font-bold text-blue-600">ç‰©ç†å¸¸æ•¸ (Constants)</h4><ul class="text-sm space-y-1"><li>c: å…‰é€Ÿ</li><li>e: åŸºæœ¬é›»è·</li><li>G: è¬æœ‰å¼•åŠ›å¸¸æ•¸</li><li>g0: é‡åŠ›åŠ é€Ÿåº¦ (9.80665)</li><li>Na: äºä½›åŠ å¥å¸¸æ•¸</li></ul></div><div class="space-y-4"><h4 class="font-bold text-blue-600">è³ªé‡ (Mass)</h4><p class="text-sm">oz, lb, ton (è‹±åˆ¶)</p><p class="text-sm">Âµg, mg, g, kg, t (å…¬åˆ¶)</p><h4 class="font-bold text-blue-600">é›»å­¸ (Electricity)</h4><p class="text-sm">A (å®‰åŸ¹), V (ä¼ç‰¹), Î© (æ­å§†), F (æ³•æ‹‰)</p><h4 class="font-bold text-blue-600">èƒ½é‡èˆ‡åŠŸç‡</h4><p class="text-sm">J (ç„¦è€³), W (ç“¦ç‰¹), eV (é›»å­ä¼ç‰¹)</p><h4 class="font-bold text-blue-600">æº«åº¦ (Temperature)</h4><p class="text-sm">K (å‡±æ°), Â°F (è¯æ°), Â°C (æ”æ°)</p></div></div>` }
                ]
            },
            "es": {
                ui: {
                    title: "Calculadora de Herramientas",
                    subtitle: "Biblioteca completa de funciones avanzadas para cÃ¡lculo, nÃºmeros complejos, probabilidad, matrices y mÃ¡s.",
                    calcTitle: "Calculadora (vÃ­a math.js)",
                    calcExample: "Ejemplo: det([[1,2],[3,4]])",
                    calcPlaceholder: "Ingrese expresiÃ³n, ej: 5! o sin(45 deg)",
                    calcBtn: "=",
                    calcNote: "Nota: Algunas funciones simbÃ³licas complejas (como integrales) son solo referencia de sintaxis.",
                    searchPlaceholder: "Buscar funciÃ³n...",
                    noResults: "No se encontraron funciones",
                    clickToTry: "Clic para probar",
                    featureTitle: "CaracterÃ­sticas",
                    guideTitle: "GuÃ­a de Uso",
                    shareTitle: "Compartir Herramienta",
                    shareLink: "Enlace",
                    shareText: "Resumen",
                    shareHtml: "CÃ³digo HTML",
                    copyBtn: "Copiar",
                    copied: "Â¡Copiado!",
                    featureList: [
                        "â€¢ <strong>Biblioteca Extensa</strong>: Cubre cÃ¡lculo, Ã¡lgebra lineal, estadÃ­sticas y mÃ¡s.",
                        "â€¢ <strong>CÃ¡lculo en Tiempo Real</strong>: Motor Math.js integrado.",
                        "â€¢ <strong>Soporte MultilingÃ¼e</strong>: Seis idiomas principales soportados.",
                        "â€¢ <strong>DiseÃ±o Responsivo</strong>: Funciona en escritorio y mÃ³vil."
                    ],
                    guideList: [
                        "1. <strong>Buscar FunciÃ³n</strong>: Use la barra lateral para navegar.",
                        "2. <strong>Usar Calculadora</strong>: Haga clic en una tarjeta para rellenar.",
                        "3. <strong>Ejecutar</strong>: Presione Enter o Calcular.",
                        "4. <strong>Compartir</strong>: Use el botÃ³n de compartir arriba a la derecha."
                    ]
                },
                data: [
                    { id: "basic", name: "BÃ¡sicos", icon: "ğŸ”¢", items: [{ name: "abs(x)", desc: "Valor absoluto. Ej: abs(-4.5) = 4.5" }, { name: "root(x,n)", desc: "RaÃ­z n-Ã©sima de x. Ej: root(8, 3) = 2" }, { name: "log(x,a)", desc: "Logaritmo de x en base a." }, { name: "n!", desc: "Factorial. Ej: 5! = 120" }] },
                    { id: "calculus", name: "CÃ¡lculo", icon: "âˆ«", items: [{ name: "diff(f(x),x,a)", desc: "Derivada en el punto a." }, { name: "int(f(x),x,a,b)", desc: "Integral definida entre a y b." }, { name: "sum(f(n),n,min,max)", desc: "Sumatoria âˆ‘." }, { name: "product(f(n),n,min,max)", desc: "Productoria âˆ." }] },
                    { id: "complex", name: "Complejos", icon: "â„‚", items: [{ name: "abs(z)", desc: "MÃ³dulo." }, { name: "arg(z)", desc: "Argumento (radianes)." }, { name: "conj(z)", desc: "Conjugado." }] },
                    { id: "probability", name: "Probabilidad", icon: "ğŸ²", subsections: [{ title: "Combinatoria", items: [{ name: "binomial(n,k)", desc: "Combinaciones C(n,k)." }, { name: "permute(n,k)", desc: "Permutaciones P(n,k)." }] }, { title: "Distribuciones", items: [{ name: "normcdf(a,Âµ,Ïƒ)", desc: "Normal P(X < a)" }, { name: "binompdf(m,n,p)", desc: "Binomial P(X=m)" }] }] },
                    { id: "matrices", name: "Matrices", icon: "[ ]", items: [{ name: "dim(M)", desc: "DimensiÃ³n [filas, cols]" }, { name: "det(M)", desc: "Determinante" }, { name: "inverse(M)", desc: "Inversa" }, { name: "dot(U,V)", desc: "Producto punto" }] },
                    { id: "list", name: "EstadÃ­stica", icon: "ğŸ“Š", items: [{ name: "mean(L)", desc: "Media" }, { name: "stddev(L)", desc: "DesviaciÃ³n estÃ¡ndar" }, { name: "sort(L)", desc: "Ordenar ascendente" }] },
                    { id: "arithmetic", name: "AritmÃ©tica", icon: "Ã·", items: [{ name: "gcd(p,q)", desc: "MÃ¡ximo comÃºn divisor" }, { name: "lcm(p,q)", desc: "MÃ­nimo comÃºn mÃºltiplo" }] },
                    { id: "trig", name: "TrigonometrÃ­a", icon: "â–³", items: [{ name: "sinh, cosh, tanh", desc: "HiperbÃ³licas" }, { name: "csc, sec, cot", desc: "Cosecante, Secante, Cotangente" }] },
                    { id: "decimal", name: "Decimales", icon: ".00", items: [{ name: "floor(x)", desc: "Suelo" }, { name: "round(x,n)", desc: "Redondear" }] },
                    { id: "logic", name: "LÃ³gica", icon: "bool", items: [{ name: "and, or, not", desc: "Operadores lÃ³gicos" }] },
                    { id: "units", name: "Unidades", icon: "âš–ï¸", displayType: "list", content: `<div class="p-4">Unidades y constantes (VisualizaciÃ³n simplificada para espaÃ±ol)</div>` }
                ]
            },
            "ru": {
                ui: {
                    title: "ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€",
                    subtitle: "ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ğ°Ñ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğ¹, ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ† Ğ¸ Ğ¼Ğ½Ğ¾Ğ³Ğ¾Ğ³Ğ¾ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾.",
                    calcTitle: "ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ (math.js)",
                    calcExample: "ĞŸÑ€Ğ¸Ğ¼ĞµÑ€: det([[1,2],[3,4]])",
                    calcPlaceholder: "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 5! Ğ¸Ğ»Ğ¸ sin(45 deg)",
                    calcBtn: "=",
                    calcNote: "ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ğµ: Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ (Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ğ»Ñ‹) Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´ĞµĞ½Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ ÑĞ¿Ñ€Ğ°Ğ²ĞºĞ¸.",
                    searchPlaceholder: "ĞŸĞ¾Ğ¸ÑĞº Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸...",
                    noResults: "Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹",
                    clickToTry: "ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ",
                    featureTitle: "Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸",
                    guideTitle: "Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ",
                    shareTitle: "ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ",
                    shareLink: "Ğ¡ÑÑ‹Ğ»ĞºĞ°",
                    shareText: "Ğ¢ĞµĞºÑÑ‚",
                    shareHtml: "HTML ĞºĞ¾Ğ´",
                    copyBtn: "ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",
                    copied: "Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!",
                    featureList: [
                        "â€¢ <strong>Ğ‘Ğ¾Ğ»ÑŒÑˆĞ°Ñ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°</strong>: ĞœĞ°Ñ‚. Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·, Ğ°Ğ»Ğ³ĞµĞ±Ñ€Ğ°, ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°.",
                        "â€¢ <strong>ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚</strong>: Ğ”Ğ²Ğ¸Ğ¶Ğ¾Ğº Math.js.",
                        "â€¢ <strong>ĞœÑƒĞ»ÑŒÑ‚Ğ¸ÑĞ·Ñ‹Ñ‡Ğ½Ğ¾ÑÑ‚ÑŒ</strong>: ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° 6 ÑĞ·Ñ‹ĞºĞ¾Ğ².",
                        "â€¢ <strong>ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ</strong>: Ğ”Ğ»Ñ ĞŸĞš Ğ¸ Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ…."
                    ],
                    guideList: [
                        "1. <strong>ĞŸĞ¾Ğ¸ÑĞº</strong>: Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ ÑĞ»ĞµĞ²Ğ°.",
                        "2. <strong>Ğ’Ñ‹Ğ±Ğ¾Ñ€</strong>: ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Ğ½Ğ° ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºÑƒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸.",
                        "3. <strong>Ğ Ğ°ÑÑ‡ĞµÑ‚</strong>: ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ Enter Ğ¸Ğ»Ğ¸ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ'.",
                        "4. <strong>ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ</strong>: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ²Ğ²ĞµÑ€Ñ…Ñƒ ÑĞ¿Ñ€Ğ°Ğ²Ğ°."
                    ]
                },
                data: [
                    { id: "basic", name: "Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ", icon: "ğŸ”¢", items: [{ name: "abs(x)", desc: "ĞœĞ¾Ğ´ÑƒĞ»ÑŒ Ñ‡Ğ¸ÑĞ»Ğ°." }, { name: "root(x,n)", desc: "ĞšĞ¾Ñ€ĞµĞ½ÑŒ n-Ğ¹ ÑÑ‚ĞµĞ¿ĞµĞ½Ğ¸." }, { name: "n!", desc: "Ğ¤Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¸Ğ°Ğ»." }] },
                    { id: "calculus", name: "Ğ˜ÑÑ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ", icon: "âˆ«", items: [{ name: "diff(f(x),x,a)", desc: "ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ½Ğ°Ñ Ğ² Ñ‚Ğ¾Ñ‡ĞºĞµ." }, { name: "int(f(x),x,a,b)", desc: "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ğ»." }] },
                    { id: "complex", name: "ĞšĞ¾Ğ¼Ğ¿Ğ»ĞµĞºÑĞ½Ñ‹Ğµ", icon: "â„‚", items: [{ name: "abs(z)", desc: "ĞœĞ¾Ğ´ÑƒĞ»ÑŒ." }, { name: "arg(z)", desc: "ĞÑ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚." }, { name: "conj(z)", desc: "Ğ¡Ğ¾Ğ¿Ñ€ÑĞ¶ĞµĞ½Ğ½Ğ¾Ğµ." }] },
                    { id: "probability", name: "Ğ’ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ", icon: "ğŸ²", subsections: [{ title: "ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ°Ñ‚Ğ¾Ñ€Ğ¸ĞºĞ°", items: [{ name: "binomial(n,k)", desc: "Ğ¡Ğ¾Ñ‡ĞµÑ‚Ğ°Ğ½Ğ¸Ñ." }] }] },
                    { id: "matrices", name: "ĞœĞ°Ñ‚Ñ€Ğ¸Ñ†Ñ‹", icon: "[ ]", items: [{ name: "det(M)", desc: "ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ÑŒ" }, { name: "inverse(M)", desc: "ĞĞ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ Ğ¼Ğ°Ñ‚Ñ€Ğ¸Ñ†Ğ°" }] },
                    { id: "list", name: "Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°", icon: "ğŸ“Š", items: [{ name: "mean(L)", desc: "Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ" }, { name: "stddev(L)", desc: "Ğ¡Ñ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ğ½Ğ¾Ğµ Ğ¾Ñ‚ĞºĞ»Ğ¾Ğ½ĞµĞ½Ğ¸Ğµ" }] },
                    { id: "arithmetic", name: "ĞÑ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸ĞºĞ°", icon: "Ã·", items: [{ name: "gcd(p,q)", desc: "ĞĞĞ”" }, { name: "lcm(p,q)", desc: "ĞĞĞš" }] },
                    { id: "trig", name: "Ğ¢Ñ€Ğ¸Ğ³Ğ¾Ğ½Ğ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ", icon: "â–³", items: [{ name: "sinh, cosh, tanh", desc: "Ğ“Ğ¸Ğ¿ĞµÑ€Ğ±Ğ¾Ğ»Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ" }] },
                    { id: "decimal", name: "Ğ”ĞµÑÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ", icon: ".00", items: [{ name: "floor(x)", desc: "ĞĞºÑ€ÑƒĞ³Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ½Ğ¸Ğ·" }, { name: "round(x,n)", desc: "ĞĞºÑ€ÑƒĞ³Ğ»ĞµĞ½Ğ¸Ğµ" }] },
                    { id: "units", name: "Ğ•Ğ´Ğ¸Ğ½Ğ¸Ñ†Ñ‹", icon: "âš–ï¸", displayType: "list", content: `<div class="p-4">Ğ•Ğ´Ğ¸Ğ½Ğ¸Ñ†Ñ‹ Ğ¸ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹</div>` }
                ]
            },
            "hi": {
                ui: {
                    title: "à¤—à¤£à¤¿à¤¤ à¤Ÿà¥‚à¤²à¤¬à¥‰à¤•à¥à¤¸ à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°",
                    subtitle: "à¤•à¥ˆà¤²à¤•à¥à¤²à¤¸, à¤•à¥‰à¤®à¥à¤ªà¥à¤²à¥‡à¤•à¥à¤¸ à¤¨à¤‚à¤¬à¤°, à¤¸à¤¾à¤‚à¤–à¥à¤¯à¤¿à¤•à¥€ à¤”à¤° à¤®à¥ˆà¤Ÿà¥à¤°à¤¿à¤•à¥à¤¸ à¤•à¥‡ à¤²à¤¿à¤ à¤µà¥à¤¯à¤¾à¤ªà¤• à¤²à¤¾à¤‡à¤¬à¥à¤°à¥‡à¤°à¥€à¥¤",
                    calcTitle: "à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤° (math.js)",
                    calcExample: "à¤‰à¤¦à¤¾à¤¹à¤°à¤£: det([[1,2],[3,4]])",
                    calcPlaceholder: "à¤µà¥à¤¯à¤‚à¤œà¤• à¤¦à¤°à¥à¤œ à¤•à¤°à¥‡à¤‚, à¤œà¥ˆà¤¸à¥‡: 5! à¤¯à¤¾ sin(45 deg)",
                    calcBtn: "=",
                    calcNote: "à¤¨à¥‹à¤Ÿ: à¤•à¥à¤› à¤œà¤Ÿà¤¿à¤² à¤•à¤¾à¤°à¥à¤¯ à¤•à¥‡à¤µà¤² à¤¸à¤‚à¤¦à¤°à¥à¤­ à¤•à¥‡ à¤²à¤¿à¤ à¤¹à¥ˆà¤‚à¥¤",
                    searchPlaceholder: "à¤«à¤¼à¤‚à¤•à¥à¤¶à¤¨ à¤–à¥‹à¤œà¥‡à¤‚...",
                    noResults: "à¤•à¥‹à¤ˆ à¤ªà¤°à¤¿à¤£à¤¾à¤® à¤¨à¤¹à¥€à¤‚",
                    clickToTry: "à¤•à¥‹à¤¶à¤¿à¤¶ à¤•à¤°à¥‡à¤‚",
                    featureTitle: "à¤µà¤¿à¤¶à¥‡à¤·à¤¤à¤¾à¤à¤‚",
                    guideTitle: "à¤‰à¤ªà¤¯à¥‹à¤— à¤—à¤¾à¤‡à¤¡",
                    shareTitle: "à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚",
                    shareLink: "à¤²à¤¿à¤‚à¤•",
                    shareText: "à¤¸à¤¾à¤°à¤¾à¤‚à¤¶",
                    shareHtml: "HTML à¤•à¥‹à¤¡",
                    copyBtn: "à¤•à¥‰à¤ªà¥€",
                    copied: "à¤•à¥‰à¤ªà¥€ à¤•à¤¿à¤¯à¤¾ à¤—à¤¯à¤¾!",
                    featureList: [
                        "â€¢ <strong>à¤µà¤¿à¤¶à¤¾à¤² à¤²à¤¾à¤‡à¤¬à¥à¤°à¥‡à¤°à¥€</strong>: à¤•à¥ˆà¤²à¤•à¥à¤²à¤¸, à¤¬à¥€à¤œà¤—à¤£à¤¿à¤¤, à¤¸à¤¾à¤‚à¤–à¥à¤¯à¤¿à¤•à¥€à¥¤",
                        "â€¢ <strong>à¤¤à¥à¤µà¤°à¤¿à¤¤ à¤—à¤£à¤¨à¤¾</strong>: Math.js à¤‡à¤‚à¤œà¤¨à¥¤",
                        "â€¢ <strong>à¤¬à¤¹à¥à¤­à¤¾à¤·à¥€</strong>: 6 à¤­à¤¾à¤·à¤¾à¤“à¤‚ à¤•à¤¾ à¤¸à¤®à¤°à¥à¤¥à¤¨à¥¤",
                        "â€¢ <strong>à¤‰à¤¤à¥à¤¤à¤°à¤¦à¤¾à¤¯à¥€</strong>: à¤®à¥‹à¤¬à¤¾à¤‡à¤² à¤”à¤° à¤¡à¥‡à¤¸à¥à¤•à¤Ÿà¥‰à¤ª à¤•à¥‡ à¤²à¤¿à¤à¥¤"
                    ],
                    guideList: [
                        "1. <strong>à¤–à¥‹à¤œà¥‡à¤‚</strong>: à¤¶à¥à¤°à¥‡à¤£à¥€ à¤šà¥à¤¨à¥‡à¤‚à¥¤",
                        "2. <strong>à¤šà¥à¤¨à¥‡à¤‚</strong>: à¤•à¤¾à¤°à¥à¤¡ à¤ªà¤° à¤•à¥à¤²à¤¿à¤• à¤•à¤°à¥‡à¤‚à¥¤",
                        "3. <strong>à¤—à¤£à¤¨à¤¾</strong>: à¤à¤‚à¤Ÿà¤° à¤¦à¤¬à¤¾à¤à¤‚à¥¤",
                        "4. <strong>à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚</strong>: à¤¶à¥‡à¤¯à¤° à¤¬à¤Ÿà¤¨ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚à¥¤"
                    ]
                },
                data: [
                    { id: "basic", name: "à¤¬à¥à¤¨à¤¿à¤¯à¤¾à¤¦à¥€", icon: "ğŸ”¢", items: [{ name: "abs(x)", desc: "à¤¨à¤¿à¤°à¤ªà¥‡à¤•à¥à¤· à¤®à¤¾à¤¨à¥¤" }, { name: "n!", desc: "à¤•à¥à¤°à¤®à¤—à¥à¤£à¤¿à¤¤ (Factorial)à¥¤" }] },
                    { id: "calculus", name: "à¤•à¤²à¤¨ (Calculus)", icon: "âˆ«", items: [{ name: "diff(f(x),x,a)", desc: "à¤…à¤µà¤•à¤²à¤¨ (Derivative)à¥¤" }, { name: "int(f(x),x,a,b)", desc: "à¤¸à¤®à¤¾à¤•à¤²à¤¨ (Integral)à¥¤" }] },
                    { id: "complex", name: "à¤®à¤¿à¤¶à¥à¤°à¤¿à¤¤ à¤¸à¤‚à¤–à¥à¤¯à¤¾", icon: "â„‚", items: [{ name: "abs(z)", desc: "à¤®à¤¾à¤ªà¤¾à¤‚à¤•à¥¤" }] },
                    { id: "matrices", name: "à¤®à¥ˆà¤Ÿà¥à¤°à¤¿à¤•à¥à¤¸", icon: "[ ]", items: [{ name: "det(M)", desc: "à¤¸à¤¾à¤°à¤£à¤¿à¤• (Determinant)à¥¤" }] },
                    { id: "list", name: "à¤¸à¤¾à¤‚à¤–à¥à¤¯à¤¿à¤•à¥€", icon: "ğŸ“Š", items: [{ name: "mean(L)", desc: "à¤®à¤§à¥à¤¯à¤®à¤¾à¤¨ (Mean)à¥¤" }] },
                    { id: "units", name: "à¤‡à¤•à¤¾à¤‡à¤¯à¤¾à¤", icon: "âš–ï¸", displayType: "list", content: `<div class="p-4">à¤‡à¤•à¤¾à¤‡à¤¯à¤¾à¤ à¤”à¤° à¤¸à¥à¤¥à¤¿à¤°à¤¾à¤‚à¤•</div>` }
                ]
            },
            "pl": {
                ui: {
                    title: "Kalkulator Matematyczny",
                    subtitle: "Kompleksowa biblioteka funkcji do rachunku rÃ³Å¼niczkowego, liczb zespolonych, statystyki i macierzy.",
                    calcTitle: "Kalkulator (math.js)",
                    calcExample: "PrzykÅ‚ad: det([[1,2],[3,4]])",
                    calcPlaceholder: "Wpisz wyraÅ¼enie, np.: 5! lub sin(45 deg)",
                    calcBtn: "=",
                    calcNote: "Uwaga: NiektÃ³re funkcje symboliczne sÅ‚uÅ¼Ä… tylko jako odniesienie.",
                    searchPlaceholder: "Szukaj funkcji...",
                    noResults: "Brak wynikÃ³w",
                    clickToTry: "Kliknij",
                    featureTitle: "Funkcje",
                    guideTitle: "Instrukcja",
                    shareTitle: "UdostÄ™pnij",
                    shareLink: "Link",
                    shareText: "Tekst",
                    shareHtml: "Kod HTML",
                    copyBtn: "Kopiuj",
                    copied: "Skopiowano!",
                    featureList: [
                        "â€¢ <strong>Biblioteka</strong>: Rachunek rÃ³Å¼niczkowy, algebra, statystyka.",
                        "â€¢ <strong>Szybkie obliczenia</strong>: Silnik Math.js.",
                        "â€¢ <strong>WielojÄ™zycznoÅ›Ä‡</strong>: 6 jÄ™zykÃ³w.",
                        "â€¢ <strong>ResponsywnoÅ›Ä‡</strong>: Mobile i Desktop."
                    ],
                    guideList: [
                        "1. <strong>Szukaj</strong>: Wybierz kategoriÄ™.",
                        "2. <strong>Wybierz</strong>: Kliknij kartÄ™.",
                        "3. <strong>Oblicz</strong>: NaciÅ›nij Enter.",
                        "4. <strong>UdostÄ™pnij</strong>: UÅ¼yj przycisku udostÄ™pniania."
                    ]
                },
                data: [
                    { id: "basic", name: "Podstawowe", icon: "ğŸ”¢", items: [{ name: "abs(x)", desc: "WartoÅ›Ä‡ bezwzglÄ™dna." }, { name: "n!", desc: "Silnia." }] },
                    { id: "calculus", name: "Rachunek", icon: "âˆ«", items: [{ name: "diff", desc: "Pochodna." }, { name: "int", desc: "CaÅ‚ka." }] },
                    { id: "matrices", name: "Macierze", icon: "[ ]", items: [{ name: "det(M)", desc: "Wyznacznik." }] },
                    { id: "list", name: "Statystyka", icon: "ğŸ“Š", items: [{ name: "mean(L)", desc: "Åšrednia." }] },
                    { id: "units", name: "Jednostki", icon: "âš–ï¸", displayType: "list", content: `<div class="p-4">Jednostki i staÅ‚e</div>` }
                ]
            }
        };

        let currentLang = 'en';
        let activeCategory = 'basic';
        let currentData = i18n['en'].data;

        // --- åˆå§‹åŒ–é€»è¾‘ ---
        function init() {
            // 1. è¯»å– URL å‚æ•°
            const params = new URLSearchParams(window.location.search);
            const langParam = params.get('lang');
            if (langParam && i18n[langParam]) {
                currentLang = langParam;
            } else {
                currentLang = 'en'; // é»˜è®¤è‹±è¯­
            }
            document.getElementById('lang-select').value = currentLang;

            // 2. æ›´æ–°è¯­è¨€
            updateLanguage(currentLang);
            
            // 3. æ¢å¤ä¸»é¢˜
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
                updateThemeIcons(true);
            }
        }

        // --- åˆ‡æ¢è¯­è¨€ ---
        function changeLanguage(lang) {
            currentLang = lang;
            
            // å®‰å…¨ä¿®å¤ï¼štry-catch åŒ…è£¹ history æ“ä½œ
            try {
                const url = new URL(window.location);
                url.searchParams.set('lang', lang);
                window.history.pushState({}, '', url);
            } catch (e) {
                console.warn('History API not available in this environment:', e);
            }

            updateLanguage(lang);
        }

        function updateLanguage(lang) {
            const langObj = i18n[lang];
            
            // æ›´æ–° UI æ–‡æœ¬
            document.getElementById('ui-title').innerText = langObj.ui.title;
            document.getElementById('ui-subtitle').innerText = langObj.ui.subtitle;
            document.getElementById('ui-calc-title').innerText = langObj.ui.calcTitle;
            document.getElementById('ui-calc-example').innerText = langObj.ui.calcExample;
            document.getElementById('calcInput').placeholder = langObj.ui.calcPlaceholder;
            document.getElementById('ui-calc-btn').innerText = langObj.ui.calcBtn;
            document.getElementById('ui-calc-note').innerText = langObj.ui.calcNote;
            document.getElementById('searchInput').placeholder = langObj.ui.searchPlaceholder;
            
            // æ›´æ–°åŠŸèƒ½ä»‹ç»å’ŒæŒ‡å—
            document.getElementById('ui-feature-title').innerText = langObj.ui.featureTitle;
            document.getElementById('ui-guide-title').innerText = langObj.ui.guideTitle;
            
            // æ›´æ–°åˆ—è¡¨å†…å®¹
            const featureListEl = document.getElementById('ui-feature-list');
            if (langObj.ui.featureList) {
                featureListEl.innerHTML = langObj.ui.featureList.map(item => `<li>${item}</li>`).join('');
            }
            
            const guideListEl = document.getElementById('ui-guide-list');
            if (langObj.ui.guideList) {
                guideListEl.innerHTML = langObj.ui.guideList.map(item => `<li>${item}</li>`).join('');
            }

            // æ›´æ–°åˆ†äº«æ¨¡æ€æ¡†æ–‡æœ¬
            document.getElementById('ui-share-title').innerText = langObj.ui.shareTitle;
            document.getElementById('ui-share-link').innerText = langObj.ui.shareLink;
            document.getElementById('ui-share-text').innerText = langObj.ui.shareText;
            document.getElementById('ui-share-html').innerText = langObj.ui.shareHtml;
            document.getElementById('ui-copy-btn-1').innerText = langObj.ui.copyBtn;

            // æ›´æ–°æ•°æ®æº
            currentData = langObj.data;
            
            // é‡ç»˜
            renderNav();
            renderContent(activeCategory);
            updateShareContent();
        }

        // --- æ¸²æŸ“å¯¼èˆª ---
        function renderNav() {
            const nav = document.getElementById('categoryNav');
            nav.innerHTML = currentData.map(cat => `
                <button onclick="setActiveCategory('${cat.id}')" 
                    class="category-btn flex items-center gap-3 px-5 py-3.5 rounded-xl text-left border border-transparent hover:bg-slate-100 dark:hover:bg-slate-800 transition-all ${cat.id === activeCategory ? 'active shadow-lg shadow-blue-500/20' : 'text-slate-600 dark:text-slate-400'} group w-full">
                    <span class="text-xl group-hover:scale-110 transition-transform duration-300">${cat.icon}</span>
                    <span class="font-medium text-sm whitespace-nowrap">${cat.name}</span>
                    ${cat.id === activeCategory ? '<div class="absolute right-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white/30 rounded-l-full"></div>' : ''}
                </button>
            `).join('');
        }

        function setActiveCategory(id) {
            activeCategory = id;
            renderNav();
            renderContent(id);
            if (window.innerWidth < 1024) {
                document.getElementById('contentArea').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // --- æ¸²æŸ“å†…å®¹ ---
        function renderContent(id) {
            const container = document.getElementById('contentArea');
            const data = currentData.find(c => c.id === id);
            
            if (!data) return;

            if (data.displayType === 'list') {
                container.innerHTML = `
                    <div class="card bg-white dark:bg-slate-800 p-8 animate-fade-in border border-slate-100 dark:border-slate-700">
                        <h2 class="text-3xl font-bold mb-8 flex items-center gap-4 text-slate-800 dark:text-white">
                            <span class="p-3 rounded-2xl bg-blue-50 dark:bg-blue-900/20 text-blue-600">${data.icon}</span> 
                            ${data.name}
                        </h2>
                        ${data.content}
                    </div>
                `;
                return;
            }

            let html = `
                <div class="mb-8 flex items-center justify-between animate-fade-in">
                    <h2 class="text-3xl font-bold text-slate-800 dark:text-white flex items-center gap-3">
                        <span class="p-2 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-md text-2xl">${data.icon}</span> 
                        ${data.name}
                    </h2>
                </div>
            `;

            if (data.subsections) {
                html += data.subsections.map(sub => `
                    <div class="mb-10 animate-fade-in">
                        <h3 class="text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 mb-5 border-b border-slate-200 dark:border-slate-700 pb-3 flex items-center gap-2">
                            <span class="w-1.5 h-1.5 rounded-full bg-blue-500"></span>
                            ${sub.title}
                        </h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                            ${sub.items.map(item => createCard(item)).join('')}
                        </div>
                    </div>
                `).join('');
            } else {
                html += `<div class="grid grid-cols-1 md:grid-cols-2 gap-5 animate-fade-in">
                    ${data.items.map(item => createCard(item)).join('')}
                </div>`;
            }

            container.innerHTML = html;
        }

        function createCard(item) {
            const clickText = i18n[currentLang].ui.clickToTry || "Click to try";
            // æå–å‡½æ•°å
            const funcName = item.name.split('(')[0];
            
            return `
                <div class="card bg-white dark:bg-slate-800 p-5 border border-slate-100 dark:border-slate-700 hover:border-blue-400/50 dark:hover:border-blue-500/50 group cursor-pointer relative" onclick="fillCalculator('${item.name}')">
                    <div class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-2 group-hover:translate-x-0">
                        <span class="text-xs font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 px-2 py-1 rounded-full">${clickText} &rarr;</span>
                    </div>
                    <div class="flex flex-col gap-3">
                        <div>
                            <code class="code-snippet font-bold text-blue-700 dark:text-blue-300 text-base shadow-sm">${funcName}</code>
                        </div>
                        <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed min-h-[2.5em]">${item.desc}</p>
                        <div class="mt-1 text-xs text-slate-400 font-mono truncate opacity-60 group-hover:opacity-100 transition-opacity">${item.name}</div>
                    </div>
                </div>
            `;
        }

        // --- æœç´¢åŠŸèƒ½ ---
        function filterFunctions() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const container = document.getElementById('contentArea');
            
            if (!query) {
                renderContent(activeCategory);
                return;
            }

            let results = [];
            currentData.forEach(cat => {
                if (cat.items) {
                    const matches = cat.items.filter(i => i.name.toLowerCase().includes(query) || i.desc.toLowerCase().includes(query));
                    if (matches.length) results.push({ catName: cat.name, items: matches });
                }
                if (cat.subsections) {
                    cat.subsections.forEach(sub => {
                        const matches = sub.items.filter(i => i.name.toLowerCase().includes(query) || i.desc.toLowerCase().includes(query));
                        if (matches.length) results.push({ catName: `${cat.name} - ${sub.title}`, items: matches });
                    });
                }
            });

            if (results.length === 0) {
                container.innerHTML = `
                    <div class="flex flex-col items-center justify-center py-20 text-slate-400 animate-fade-in">
                        <svg class="w-16 h-16 mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <p class="text-lg font-medium">${i18n[currentLang].ui.noResults}</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = results.map(group => `
                <div class="mb-8 animate-fade-in">
                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4 px-1 flex items-center gap-2">
                        <span class="w-2 h-0.5 bg-slate-300 dark:bg-slate-600"></span>
                        ${group.catName}
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                        ${group.items.map(item => createCard(item)).join('')}
                    </div>
                </div>
            `).join('');
        }

        // --- è®¡ç®—å™¨é€»è¾‘ ---
        function calculate() {
            const input = document.getElementById('calcInput');
            const resultDisplay = document.getElementById('calcResult');
            const expr = input.value;

            try {
                const result = math.evaluate(expr);
                let output = result;
                if (typeof result === 'object' && result.entries) {
                    output = math.format(result, { notation: 'fixed', precision: 4 });
                } else if (typeof result === 'number') {
                    output = Number.isInteger(result) ? result : result.toFixed(6).replace(/\.?0+$/, '');
                } else if (result.toString().startsWith('Complex')) {
                     output = result.toString();
                }

                resultDisplay.innerText = `= ${output}`;
                resultDisplay.classList.remove('text-red-500');
                resultDisplay.classList.add('text-slate-700', 'dark:text-slate-200');
            } catch (e) {
                resultDisplay.innerText = "Error: " + e.message;
                resultDisplay.classList.add('text-red-500');
            }
        }

        function fillCalculator(text) {
            const input = document.getElementById('calcInput');
            const funcName = text.split('(')[0] + '(';
            input.value = funcName;
            input.focus();
            const len = input.value.length;
            input.setSelectionRange(len, len);
        }

        function loadExample() {
            document.getElementById('calcInput').value = 'det([[1,2],[3,4]])';
            calculate();
        }

        // --- åˆ†äº«åŠŸèƒ½ ---
        function updateShareContent() {
            const langData = i18n[currentLang].ui;
            const url = window.location.href;
            const summary = `${langData.title} - ${langData.subtitle}`;
            const html = `<a href="${url}" target="_blank">${langData.title}</a>`;
            
            document.getElementById('shareUrl').value = url;
            document.getElementById('shareTextSummary').value = summary;
            document.getElementById('shareHtmlEmbed').value = html;
        }

        function openShareModal() { 
            updateShareContent();
            document.getElementById('shareModal').classList.remove('hidden'); 
        }
        function closeShareModal() { document.getElementById('shareModal').classList.add('hidden'); }

        function copyToClipboard(inputId) {
            const input = document.getElementById(inputId);
            input.select();
            document.execCommand('copy');
            
            const notice = document.getElementById('copyNotice');
            const noticeText = document.getElementById('copyNoticeText');
            noticeText.innerText = i18n[currentLang].ui.copied;
            notice.style.opacity = '1';
            setTimeout(() => notice.style.opacity = '0', 2000);
        }

        function toggleTheme() {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateThemeIcons(isDark);
        }

        function updateThemeIcons(isDark) {
            document.getElementById('theme-icon-sun').classList.toggle('hidden', !isDark);
            document.getElementById('theme-icon-moon').classList.toggle('hidden', isDark);
        }

        window.onload = init;

    </script>
    
    <!-- ç»“å°¾å¿…é¡»åŒ…å«çš„ä»£ç  -->

    <div id="related-tools-container"></div>

    <script src="/scripts/related.js"></script>

</body>
</html>