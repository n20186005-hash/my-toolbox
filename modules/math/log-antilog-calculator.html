<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Category Meta Tag -->
    <meta name="category" content="math">
    <meta name="icon" content="âŒ¨ï¸">
    <meta name="description" content="Online Logarithm and Antilogarithm Calculator - Calculate logs with base e, 10, 2 or custom base.">
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2280%22>log</text></svg>">
    
    <title>å¯¹æ•°/åå¯¹æ•°è®¡ç®—å™¨ | Log Calculator Pro</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#059669', hover: '#047857' }, /* Emerald */
                        secondary: { DEFAULT: '#0ea5e9', hover: '#0284c7' }, /* Sky */
                        bg: { light: '#ecfdf5', dark: '#0f172a' }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.4s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide::-webkit-scrollbar { display: none; }
            .glass {
                @apply bg-white/90 dark:bg-slate-800/90 backdrop-blur-lg border border-emerald-200 dark:border-slate-700;
            }
            .input-field {
                @apply w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-white focus:ring-4 focus:ring-primary/20 focus:border-primary outline-none transition-all text-lg font-mono placeholder:text-slate-400;
            }
            .btn-primary {
                @apply bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-emerald-500/30 transition-all transform active:scale-95 flex items-center justify-center gap-2 text-base;
            }
            .btn-secondary {
                @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 font-medium py-3 px-6 rounded-xl transition-all text-base;
            }
            .chip-btn {
                @apply px-4 py-2 rounded-lg border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 text-slate-600 dark:text-slate-400 text-sm font-bold cursor-pointer hover:border-emerald-400 hover:text-emerald-600 transition-all flex-1 text-center;
            }
            .chip-btn.active {
                @apply bg-emerald-50 dark:bg-emerald-900/30 border-emerald-500 text-emerald-700 dark:text-emerald-400 ring-2 ring-emerald-500/20;
            }
            .mode-switch {
                @apply flex p-1 bg-slate-100 dark:bg-slate-800 rounded-xl mb-6;
            }
            .mode-btn {
                @apply flex-1 py-2 text-sm font-bold rounded-lg transition-all text-center text-slate-500 dark:text-slate-400 cursor-pointer;
            }
            .mode-btn.active {
                @apply bg-white dark:bg-slate-700 text-emerald-600 dark:text-emerald-400 shadow-sm;
            }
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-bg-light dark:bg-bg-dark min-h-screen font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300 overflow-x-hidden">

    <!-- Background -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0 opacity-40 dark:opacity-20">
        <div class="absolute top-[-10%] left-[-10%] w-[600px] h-[600px] bg-emerald-200 rounded-full blur-[120px] mix-blend-multiply dark:mix-blend-screen"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-teal-300 rounded-full blur-[100px] mix-blend-multiply dark:mix-blend-screen"></div>
    </div>

    <div class="container mx-auto px-4 py-6 max-w-5xl relative z-10 flex flex-col min-h-screen">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-emerald-500 to-teal-700 text-white flex items-center justify-center text-xl shadow-lg shadow-emerald-500/20 font-serif font-bold tracking-tight">
                    log
                </div>
                <div>
                    <h1 class="text-2xl font-bold tracking-tight text-slate-900 dark:text-white" data-i18n="title">å¯¹æ•°/åå¯¹æ•°è®¡ç®—å™¨</h1>
                    <p class="text-xs text-slate-500 font-medium" data-i18n="subtitle">ä»»æ„åº•æ•°å¯¹æ•°è¿ç®—å·¥å…·</p>
                </div>
            </div>

            <div class="flex items-center gap-2 bg-white dark:bg-slate-800 p-1.5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm">
                 <select id="lang-selector" class="bg-transparent text-sm font-medium px-2 py-1 rounded focus:outline-none cursor-pointer text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700">
                    <option value="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                </select>
                <div class="w-px h-5 bg-slate-300 dark:bg-slate-600 mx-1"></div>
                <button id="mode-toggle" class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-500 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                    <i class="fa fa-moon-o dark:hidden"></i>
                    <i class="fa fa-sun-o hidden dark:inline"></i>
                </button>
            </div>
        </header>

        <!-- Main Tool Area -->
        <div class="grid md:grid-cols-2 gap-6 mb-8">
            
            <!-- Input Section -->
            <div class="glass rounded-3xl shadow-lg p-6 flex flex-col justify-center border-t-4 border-t-emerald-500">
                
                <!-- Mode Switch -->
                <div class="mode-switch">
                    <div class="mode-btn active" id="mode-log" onclick="App.setMode('log')">
                        <i class="fa fa-superscript mr-1"></i> <span data-i18n="mode_log">å¯¹æ•° (Log)</span>
                    </div>
                    <div class="mode-btn" id="mode-antilog" onclick="App.setMode('antilog')">
                        <i class="fa fa-undo mr-1"></i> <span data-i18n="mode_antilog">åå¯¹æ•° (Anti-Log)</span>
                    </div>
                </div>

                <div class="space-y-6">
                    <!-- Base Selection -->
                    <div>
                        <label class="block text-sm font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wide" data-i18n="lbl_base">åº•æ•° (Base a):</label>
                        <div class="flex gap-2 mb-2">
                            <button class="chip-btn" onclick="App.setBase('e')" id="btn-base-e">e</button>
                            <button class="chip-btn active" onclick="App.setBase('10')" id="btn-base-10">10</button>
                            <button class="chip-btn" onclick="App.setBase('2')" id="btn-base-2">2</button>
                            <button class="chip-btn" onclick="App.setBase('custom')" id="btn-base-custom" data-i18n="btn_custom">å…¶å®ƒ</button>
                        </div>
                        <div id="custom-base-wrapper" class="hidden animate-slide-up">
                            <input type="number" id="input-base-custom" class="input-field text-sm h-10" placeholder="Enter base" oninput="App.calculate()">
                        </div>
                    </div>

                    <!-- Main Input -->
                    <div>
                        <label class="block text-sm font-bold text-slate-500 dark:text-slate-400 mb-2 uppercase tracking-wide" id="lbl-input-main">çœŸæ•° (Value x):</label>
                        <div class="relative">
                            <input type="number" id="input-val" class="input-field" placeholder="100" oninput="App.calculate()">
                            <!-- Dynamic Symbol -->
                            <div class="absolute right-4 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none font-serif italic text-xl" id="input-symbol">x</div>
                        </div>
                    </div>

                    <!-- Buttons -->
                    <div class="grid grid-cols-2 gap-3 pt-2">
                        <button onclick="App.calculate()" class="btn-primary">
                            <span data-i18n="btn_calc">è®¡ç®—</span>
                        </button>
                        <button onclick="App.clearInput()" class="btn-secondary text-red-500 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20">
                            <span data-i18n="btn_clear">æ¸…é™¤</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Result Section -->
            <div class="glass rounded-3xl shadow-lg p-6 flex flex-col justify-center items-center text-center border-t-4 border-t-teal-500 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-4 opacity-10">
                    <i class="fa fa-calculator text-9xl"></i>
                </div>
                
                <label class="block text-sm font-bold text-slate-500 dark:text-slate-400 mb-6 uppercase tracking-wide z-10" id="lbl-result">ç»“æœ (n)ï¼š</label>
                
                <div class="relative z-10 w-full py-4">
                    <div id="result-val" class="text-5xl md:text-6xl font-bold text-emerald-600 dark:text-emerald-400 font-mono break-all leading-tight min-h-[1.2em]">
                        -
                    </div>
                </div>
                
                <!-- Dynamic Formula Display -->
                <div class="bg-slate-50 dark:bg-slate-800/50 px-6 py-3 rounded-xl border border-slate-100 dark:border-slate-700 mt-4 z-10 w-full max-w-sm">
                    <div id="calc-formula" class="text-lg font-mono text-slate-600 dark:text-slate-300 overflow-x-auto whitespace-nowrap">
                        <span class="opacity-50" data-i18n="msg_waiting">ç­‰å¾…è¾“å…¥...</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Description Section -->
        <section class="glass rounded-3xl p-8 shadow-xl mb-12">
            <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                <i class="fa fa-book text-primary"></i> <span data-i18n="desc_title">å…³äºå¯¹æ•°</span>
            </h2>
            
            <div class="prose dark:prose-invert max-w-none text-slate-600 dark:text-slate-300 space-y-6 leading-relaxed">
                <!-- Definition -->
                <div class="bg-emerald-50 dark:bg-emerald-900/20 border-l-4 border-emerald-500 p-4 rounded-r-lg">
                    <h3 class="font-bold text-emerald-800 dark:text-emerald-200 mb-2 text-sm uppercase" data-i18n="def_title">å®šä¹‰</h3>
                    <p data-i18n="def_text" class="text-sm text-emerald-800 dark:text-emerald-300">
                        å¦‚æœ $a$ çš„ $n$ æ¬¡æ–¹ç­‰äº $x$ ($a>0$ï¼Œä¸” $a \ne 1$)ï¼Œé‚£ä¹ˆæ•° $n$ å«åšä»¥ $a$ ä¸ºåº• $x$ çš„<strong>å¯¹æ•° (logarithm)</strong>ï¼Œè®°ä½œ $n = \log_a x$ã€‚
                    </p>
                    <ul class="list-disc list-inside text-xs mt-2 text-emerald-700/80 dark:text-emerald-400/80 font-mono">
                        <li>a : åº•æ•° (Base)</li>
                        <li>x : çœŸæ•° (Argument)</li>
                        <li>n : å¯¹æ•° (Result)</li>
                    </ul>
                </div>

                <!-- Special Logs -->
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-bold text-slate-800 dark:text-white mb-2 text-sm" data-i18n="term_common">å¸¸ç”¨å¯¹æ•° (Common Logarithm)</h4>
                        <p class="text-sm" data-i18n="desc_common">
                            ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°ï¼Œè®°ä½œ <strong>lg</strong> æˆ– $\log_{10}$ã€‚å¸¸ç”¨äºç§‘å­¦è®¡æ•°æ³•ã€åˆ†è´è®¡ç®—ç­‰å·¥ç¨‹é¢†åŸŸã€‚
                        </p>
                    </div>
                    <div>
                        <h4 class="font-bold text-slate-800 dark:text-white mb-2 text-sm" data-i18n="term_natural">è‡ªç„¶å¯¹æ•° (Natural Logarithm)</h4>
                        <p class="text-sm" data-i18n="desc_natural">
                            ä»¥æ— ç†æ•° $e$ ($e \approx 2.71828...$) ä¸ºåº•çš„å¯¹æ•°ï¼Œè®°ä½œ <strong>ln</strong> æˆ– $\log_e$ã€‚å¸¸ç”¨äºå¾®ç§¯åˆ†ã€å¤åˆ©è®¡ç®—ç­‰ã€‚
                        </p>
                    </div>
                </div>

                <p class="text-sm text-slate-500 border-t border-slate-200 dark:border-slate-700 pt-4" data-i18n="note_zero">
                    <strong>æ³¨æ„ï¼š</strong> é›¶æ²¡æœ‰å¯¹æ•°ï¼ˆ$\log_a 0$ æœªå®šä¹‰ï¼‰ï¼Œè´Ÿæ•°åœ¨å®æ•°èŒƒå›´å†…ä¹Ÿæ²¡æœ‰å¯¹æ•°ã€‚
                </p>
            </div>
        </section>
        
        <footer class="text-center text-xs text-slate-400 py-6 mt-auto">
            <p>&copy; <span id="year"></span> Log Calculator. Generated for Educational Purposes.</p>
        </footer>
    </div>

    <script>
        // --- Localization Data ---
        const i18nData = {
            'zh-CN': {
                title: "å¯¹æ•°/åå¯¹æ•°è®¡ç®—å™¨", subtitle: "ä»»æ„åº•æ•°å¯¹æ•°è¿ç®—å·¥å…·",
                mode_log: "å¯¹æ•° (Log)", mode_antilog: "åå¯¹æ•° (Anti-Log)",
                lbl_base: "åº•æ•° (Base a):", btn_custom: "å…¶å®ƒ",
                lbl_input_log: "çœŸæ•° (Value x):", lbl_input_antilog: "æŒ‡æ•° (Exponent n):",
                btn_calc: "è®¡ç®—", btn_clear: "æ¸…é™¤",
                lbl_result: "ç»“æœï¼š",
                msg_waiting: "ç­‰å¾…è¾“å…¥...", msg_error: "æ— æ•ˆè¾“å…¥",
                desc_title: "å…³äºå¯¹æ•°",
                def_title: "å®šä¹‰",
                def_text: "å¦‚æœ a çš„ n æ¬¡æ–¹ç­‰äº x (a>0ï¼Œä¸” aâ‰ 1)ï¼Œé‚£ä¹ˆæ•° n å«åšä»¥ a ä¸ºåº• x çš„å¯¹æ•° (logarithm)ï¼Œè®°ä½œ n = logâ‚ xã€‚",
                term_common: "å¸¸ç”¨å¯¹æ•° (Common Logarithm)",
                desc_common: "ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°ï¼Œè®°ä½œ lg æˆ– logâ‚â‚€ã€‚å¸¸ç”¨äºç§‘å­¦è®¡æ•°æ³•ã€åˆ†è´è®¡ç®—ç­‰å·¥ç¨‹é¢†åŸŸã€‚",
                term_natural: "è‡ªç„¶å¯¹æ•° (Natural Logarithm)",
                desc_natural: "ä»¥æ— ç†æ•° e (e â‰ˆ 2.71828...) ä¸ºåº•çš„å¯¹æ•°ï¼Œè®°ä½œ ln æˆ– logâ‚‘ã€‚å¸¸ç”¨äºå¾®ç§¯åˆ†ã€å¤åˆ©è®¡ç®—ç­‰ã€‚",
                note_zero: "æ³¨æ„ï¼šé›¶æ²¡æœ‰å¯¹æ•°ï¼Œè´Ÿæ•°åœ¨å®æ•°èŒƒå›´å†…ä¹Ÿæ²¡æœ‰å¯¹æ•°ã€‚"
            },
            'en': {
                title: "Log/Antilog Calculator", subtitle: "Any Base Logarithm Tool",
                mode_log: "Logarithm", mode_antilog: "Antilogarithm",
                lbl_base: "Base (a):", btn_custom: "Custom",
                lbl_input_log: "Argument (x):", lbl_input_antilog: "Exponent (n):",
                btn_calc: "Calculate", btn_clear: "Clear",
                lbl_result: "Result:",
                msg_waiting: "Waiting...", msg_error: "Invalid Input",
                desc_title: "About Logarithms",
                def_title: "Definition",
                def_text: "If a raised to the power of n equals x (a>0, aâ‰ 1), then n is called the logarithm of x to base a, written as n = logâ‚ x.",
                term_common: "Common Logarithm",
                desc_common: "Logarithm with base 10, written as lg or logâ‚â‚€. Used in engineering (decibels, Richter scale).",
                term_natural: "Natural Logarithm",
                desc_natural: "Logarithm with base e (e â‰ˆ 2.71828...), written as ln. Fundamental in calculus and growth modeling.",
                note_zero: "Note: Zero has no logarithm. Negative numbers have no real logarithm."
            }
        };

        const App = {
            currentLang: 'zh-CN',
            mode: 'log', // 'log' or 'antilog'
            baseType: '10', // 'e', '10', '2', 'custom'
            
            init() {
                const urlParams = new URLSearchParams(window.location.search);
                this.currentLang = urlParams.get('lang') || 'zh-CN';
                
                const langSelector = document.getElementById('lang-selector');
                if(langSelector) {
                    langSelector.value = this.currentLang;
                    langSelector.addEventListener('change', (e) => {
                        this.currentLang = e.target.value;
                        this.updateUrl(this.currentLang);
                        this.translateUI(this.currentLang);
                        this.updateLabels();
                        this.calculate();
                    });
                }
                
                if (!urlParams.has('lang')) this.updateUrl(this.currentLang);

                this.translateUI(this.currentLang);
                this.updateLabels();
                this.handleTheme();
                this.updateYear();
                
                // Initial Calc
                this.calculate();
            },

            updateUrl(lang) {
                try {
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', lang);
                    window.history.pushState({}, '', newUrl);
                } catch (e) { console.log(e); }
            },

            translateUI(lang) {
                const data = i18nData[lang] || i18nData['en'];
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(data[key]) el.innerHTML = data[key];
                });
            },

            updateYear() {
                document.getElementById('year').textContent = new Date().getFullYear();
            },

            // --- Mode & Base Handling ---
            setMode(m) {
                this.mode = m;
                document.getElementById('mode-log').className = `mode-btn ${m === 'log' ? 'active' : ''}`;
                document.getElementById('mode-antilog').className = `mode-btn ${m === 'antilog' ? 'active' : ''}`;
                
                this.updateLabels();
                this.calculate();
            },

            setBase(b) {
                this.baseType = b;
                ['e', '10', '2', 'custom'].forEach(t => {
                    document.getElementById(`btn-base-${t}`).className = `chip-btn ${b === t ? 'active' : ''}`;
                });
                
                const customWrapper = document.getElementById('custom-base-wrapper');
                if (b === 'custom') {
                    customWrapper.classList.remove('hidden');
                    document.getElementById('input-base-custom').focus();
                } else {
                    customWrapper.classList.add('hidden');
                }
                
                this.calculate();
            },

            updateLabels() {
                const langData = i18nData[this.currentLang];
                const lblInput = document.getElementById('lbl-input-main');
                const symInput = document.getElementById('input-symbol');
                const lblResult = document.getElementById('lbl-result');

                if (this.mode === 'log') {
                    lblInput.textContent = langData.lbl_input_log;
                    symInput.textContent = 'x';
                    lblResult.textContent = this.currentLang === 'zh-CN' ? "ç»“æœ (n)ï¼š" : "Result (n):";
                } else {
                    lblInput.textContent = langData.lbl_input_antilog;
                    symInput.textContent = 'n';
                    lblResult.textContent = this.currentLang === 'zh-CN' ? "ç»“æœ (x)ï¼š" : "Result (x):";
                }
            },

            // --- Core Calculation ---
            calculate() {
                const inputVal = document.getElementById('input-val').value;
                const resultEl = document.getElementById('result-val');
                const formulaEl = document.getElementById('calc-formula');
                
                if (inputVal === '') {
                    resultEl.textContent = '-';
                    formulaEl.innerHTML = `<span class="opacity-50">${i18nData[this.currentLang].msg_waiting}</span>`;
                    return;
                }

                const val = parseFloat(inputVal); // x or n
                let base = 10;

                // Determine Base
                if (this.baseType === 'e') base = Math.E;
                else if (this.baseType === '10') base = 10;
                else if (this.baseType === '2') base = 2;
                else {
                    const customBaseVal = document.getElementById('input-base-custom').value;
                    if (customBaseVal === '') return; // Wait for base input
                    base = parseFloat(customBaseVal);
                }

                // Error Handling for Base
                if (isNaN(base) || base <= 0 || base === 1) {
                    resultEl.innerHTML = `<span class="text-3xl text-red-400">Error</span>`;
                    formulaEl.innerHTML = `<span class="text-red-400 text-sm">Base must be > 0 and â‰  1</span>`;
                    return;
                }

                let result = 0;
                let formulaHtml = '';

                if (this.mode === 'log') {
                    // Logarithm: log_base(val)
                    if (val <= 0) {
                        resultEl.innerHTML = `<span class="text-3xl text-red-400">NaN / -âˆ</span>`;
                        formulaEl.innerHTML = `<span class="text-red-400 text-sm">x must be > 0</span>`;
                        return;
                    }
                    
                    // Math.log is ln (base e)
                    // Change of base: log_b(x) = ln(x) / ln(b)
                    result = Math.log(val) / Math.log(base);
                    
                    // Display Logic
                    const baseStr = this.baseType === 'e' ? 'e' : parseFloat(base.toFixed(4));
                    const logSymbol = this.baseType === 'e' ? 'ln' : (this.baseType === '10' ? 'lg' : `log<sub>${baseStr}</sub>`);
                    formulaHtml = `${logSymbol}(${val}) = ${this.formatNumber(result)}`;

                } else {
                    // Antilogarithm: base^val
                    result = Math.pow(base, val);
                    
                    // Display Logic
                    const baseStr = this.baseType === 'e' ? 'e' : parseFloat(base.toFixed(4));
                    formulaHtml = `${baseStr}<sup>${val}</sup> = ${this.formatNumber(result)}`;
                }

                resultEl.textContent = this.formatNumber(result);
                formulaEl.innerHTML = formulaHtml;
            },

            formatNumber(num) {
                if (Math.abs(num) < 1e-10 && num !== 0) return '0';
                let s = num.toLocaleString(undefined, {maximumFractionDigits: 8});
                // Scientific for large/small
                if (Math.abs(num) > 1e12 || (Math.abs(num) < 1e-6 && num !== 0)) {
                    s = num.toPrecision(6).replace('+', '');
                } else if (s.length > 12) {
                    s = parseFloat(num.toFixed(8));
                }
                return s;
            },

            clearInput() {
                document.getElementById('input-val').value = '';
                document.getElementById('input-base-custom').value = '';
                this.calculate();
                document.getElementById('input-val').focus();
            },

            handleTheme() {
                const toggle = document.getElementById('mode-toggle');
                const html = document.documentElement;
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    html.classList.add('dark');
                }
                toggle.addEventListener('click', () => {
                    html.classList.toggle('dark');
                    localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
     <!--  ç»“å°¾å¿…é¡»åŒ…å«çš„ä»£ç  -->
    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
</body>
</html>