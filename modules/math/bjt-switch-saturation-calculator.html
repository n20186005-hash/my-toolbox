<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Category Meta Tag -->
    <meta name="category" content="engineering">
    <meta name="icon" content="⚡">
    <meta name="description" content="BJT Switch Saturation Calculator - Calculate base resistor for transistor saturation switching.">
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M30,30 L30,70 M70,30 L70,70 M30,50 L70,50%22 stroke=%22%23f59e0b%22 stroke-width=%228%22 fill=%22none%22/></svg>">
    
    <title>三极管开关饱和度计算器 | BJT Switch Calc</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#f59e0b', hover: '#d97706' }, /* Amber */
                        secondary: { DEFAULT: '#6366f1', hover: '#4f46e5' }, /* Indigo */
                        bg: { light: '#fffbeb', dark: '#0f172a' }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide::-webkit-scrollbar { display: none; }
            .glass {
                @apply bg-white/90 dark:bg-slate-800/90 backdrop-blur-lg border border-amber-200 dark:border-slate-700;
            }
            .input-group {
                @apply relative flex items-center;
            }
            .input-field {
                @apply w-full pl-3 pr-12 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-white focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all text-sm font-mono placeholder:text-slate-400;
            }
            .unit-label {
                @apply absolute right-3 text-slate-400 text-xs font-bold pointer-events-none;
            }
            .btn-primary {
                @apply bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white font-bold py-2 px-4 rounded-xl shadow-lg shadow-amber-500/20 transition-all active:scale-95 flex items-center justify-center gap-2 text-sm;
            }
            .btn-secondary {
                @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 font-medium py-2 px-4 rounded-xl transition-all text-sm;
            }
            
            /* Circuit SVG Styling */
            .circuit-line { stroke: currentColor; stroke-width: 2; fill: none; }
            .circuit-text { font-family: monospace; font-size: 10px; fill: currentColor; }
            .component-fill { fill: currentColor; }
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-bg-light dark:bg-bg-dark min-h-screen font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300 overflow-x-hidden">

    <!-- Header -->
    <header class="bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-500 to-orange-600 text-white flex items-center justify-center font-bold text-xs shadow-md">
                    BJT
                </div>
                <div>
                    <h1 class="text-lg font-bold text-slate-900 dark:text-white leading-tight" data-i18n="title">三极管开关饱和度计算器</h1>
                    <p class="text-[10px] text-slate-500 font-medium" data-i18n="subtitle">BJT Saturation Switch Calculator</p>
                </div>
            </div>
            
            <div class="flex items-center gap-2">
                <select id="lang-selector" class="bg-slate-100 dark:bg-slate-700 text-xs font-bold px-2 py-1.5 rounded-lg border-none focus:ring-0 cursor-pointer text-slate-600 dark:text-slate-300">
                    <option value="zh-CN">中文</option>
                    <option value="en">EN</option>
                </select>
                <button id="mode-toggle" class="w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 hover:text-primary transition-colors">
                    <i class="fa fa-moon-o dark:hidden"></i>
                    <i class="fa fa-sun-o hidden dark:inline"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-6 max-w-6xl grid lg:grid-cols-12 gap-6">
        
        <!-- Input Panel -->
        <div class="lg:col-span-4 space-y-6">
            <div class="glass rounded-2xl p-5 shadow-sm border-t-4 border-t-amber-500">
                
                <h3 class="text-sm font-bold text-slate-500 uppercase mb-4 flex items-center gap-2">
                    <i class="fa fa-sliders"></i> <span data-i18n="h_inputs">输入参数</span>
                </h3>

                <div class="space-y-4">
                    <!-- Rc -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="lbl_rc">集电极电阻 (Rc):</label>
                        <div class="input-group">
                            <input type="number" id="inp-rc" class="input-field" placeholder="1" value="1" oninput="App.calculate()">
                            <span class="unit-label">KΩ</span>
                        </div>
                    </div>
                    
                    <!-- VP -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="lbl_vp">正电压 (VP):</label>
                        <div class="input-group">
                            <input type="number" id="inp-vp" class="input-field" placeholder="5" value="5" oninput="App.calculate()">
                            <span class="unit-label">V</span>
                        </div>
                    </div>

                    <!-- Beta -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="lbl_beta">放大系数 β (Beta min):</label>
                        <div class="input-group">
                            <input type="number" id="inp-beta" class="input-field" value="150" oninput="App.calculate()">
                        </div>
                    </div>

                    <!-- VBE -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1" data-i18n="lbl_vbe">基极-发射极压降 (VBE):</label>
                        <div class="input-group">
                            <input type="number" id="inp-vbe" class="input-field" value="0.6" step="0.1" oninput="App.calculate()">
                            <span class="unit-label">V</span>
                        </div>
                    </div>

                    <button onclick="App.calculate()" class="btn-primary w-full mt-2">
                        <span data-i18n="btn_calc">计算电阻值</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Result / Diagram -->
        <div class="lg:col-span-8 space-y-6">
            
            <!-- Result Box -->
            <div class="glass rounded-2xl shadow-sm border-t-4 border-t-indigo-500 p-6 flex flex-col justify-center min-h-[160px]">
                <h3 class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-4 flex justify-between items-center">
                    <span data-i18n="h_result">计算结果</span>
                    <span id="status-badge" class="px-2 py-0.5 bg-emerald-100 text-emerald-700 rounded-full hidden">Saturated</span>
                </h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-2">
                    <div class="text-center p-3 bg-amber-50 dark:bg-amber-900/20 rounded-xl border border-amber-100 dark:border-amber-800/30">
                        <div class="text-[10px] text-amber-600 dark:text-amber-400 font-bold mb-1 uppercase" data-i18n="lbl_rb">基极电阻 (Rb)</div>
                        <div id="res-rb" class="text-2xl font-mono font-bold text-amber-700 dark:text-amber-300">- KΩ</div>
                        <div class="text-[10px] text-slate-400 mt-1" id="res-rb-ohm">- Ω</div>
                    </div>
                    
                    <div class="text-center p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800/30">
                        <div class="text-[10px] text-indigo-600 dark:text-indigo-400 font-bold mb-1 uppercase" data-i18n="lbl_ic">集电极电流 (Ic)</div>
                        <div id="res-ic" class="text-2xl font-mono font-bold text-indigo-700 dark:text-indigo-300">- mA</div>
                    </div>

                    <div class="text-center p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-xl border border-indigo-100 dark:border-indigo-800/30">
                        <div class="text-[10px] text-indigo-600 dark:text-indigo-400 font-bold mb-1 uppercase" data-i18n="lbl_ib">基极电流 (Ib)</div>
                        <div id="res-ib" class="text-2xl font-mono font-bold text-indigo-700 dark:text-indigo-300">- mA</div>
                    </div>
                </div>
            </div>

            <!-- Circuit Diagram -->
            <div class="glass rounded-2xl p-6 flex justify-center items-center bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 h-[260px]">
                <div id="circuit-container" class="w-full h-full flex justify-center items-center">
                    <svg viewBox="0 0 300 200" class="w-full h-full max-w-[350px] text-slate-600 dark:text-slate-300">
                        <!-- Vcc -->
                        <circle cx="150" cy="20" r="3" class="component-fill"/>
                        <text x="150" y="15" class="circuit-text font-bold" text-anchor="middle">VP (Vcc)</text>
                        <line x1="150" y1="20" x2="150" y2="40" class="circuit-line"/>

                        <!-- Rc -->
                        <rect x="140" y="40" width="20" height="40" class="circuit-line bg-white fill-white dark:fill-slate-800"/>
                        <text x="170" y="65" class="circuit-text font-bold text-indigo-500">Rc</text>
                        <line x1="150" y1="80" x2="150" y2="100" class="circuit-line"/>

                        <!-- Transistor NPN -->
                        <circle cx="150" cy="120" r="20" class="circuit-line opacity-20"/>
                        <line x1="150" y1="100" x2="150" y2="110" class="circuit-line"/> <!-- Collector Leg -->
                        <line x1="150" y1="110" x2="160" y2="105" class="circuit-line"/> <!-- Collector internal -->
                        
                        <line x1="140" y1="105" x2="140" y2="135" class="circuit-line" stroke-width="3"/> <!-- Base Plate -->
                        
                        <line x1="150" y1="130" x2="160" y2="135" class="circuit-line"/> <!-- Emitter internal -->
                        <line x1="155" y1="135" x2="160" y2="135" class="circuit-line"/> <!-- Arrow -->
                        <line x1="158" y1="131" x2="160" y2="135" class="circuit-line"/>
                        
                        <line x1="150" y1="130" x2="150" y2="160" class="circuit-line"/> <!-- Emitter Leg -->
                        
                        <line x1="140" y1="120" x2="110" y2="120" class="circuit-line"/> <!-- Base Leg -->

                        <!-- Rb -->
                        <rect x="70" y="110" width="40" height="20" class="circuit-line bg-white fill-white dark:fill-slate-800"/>
                        <text x="90" y="105" class="circuit-text font-bold text-amber-500" text-anchor="middle">Rb</text>
                        <line x1="70" y1="120" x2="40" y2="120" class="circuit-line"/>

                        <!-- Input -->
                        <circle cx="40" cy="120" r="3" class="component-fill"/>
                        <text x="40" y="140" class="circuit-text font-bold" text-anchor="middle">Vin (VP)</text>

                        <!-- Ground -->
                        <line x1="150" y1="160" x2="150" y2="175" class="circuit-line"/>
                        <line x1="135" y1="175" x2="165" y2="175" class="circuit-line"/>
                        <line x1="140" y1="180" x2="160" y2="180" class="circuit-line"/>
                        <line x1="145" y1="185" x2="155" y2="185" class="circuit-line"/>
                        <text x="150" y="195" class="circuit-text" text-anchor="middle">GND</text>
                        
                        <!-- Labels -->
                        <text x="175" y="125" class="circuit-text font-bold text-slate-400">Q1</text>
                        
                        <!-- Current Arrows -->
                        <path d="M155,50 L155,70 L152,65 M155,70 L158,65" class="circuit-line text-indigo-400" fill="none"/>
                        <text x="165" y="60" class="circuit-text text-indigo-400">Ic</text>
                        
                        <path d="M60,125 L80,125 L75,122 M80,125 L75,128" class="circuit-line text-amber-400" fill="none"/>
                        <text x="70" y="145" class="circuit-text text-amber-400">Ib</text>

                    </svg>
                </div>
            </div>

        </div>
    </div>

    <!-- Guide Section -->
    <section class="container mx-auto px-4 mb-12 max-w-6xl">
        <div class="glass rounded-2xl p-8 shadow-xl">
            <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                <i class="fa fa-book text-primary"></i> <span data-i18n="guide_title">计算公式与原理</span>
            </h2>
            
            <div class="grid md:grid-cols-2 gap-12">
                <div class="space-y-6 text-slate-600 dark:text-slate-300 leading-relaxed text-sm">
                    <p data-i18n="desc_p1">
                        为了使三极管作为开关工作在<strong>饱和区</strong>，基极电流 Ib 必须足够大，通常要求 Ib ≥ Ic / β。为了确保可靠饱和，设计时通常会使用最小 β 值。
                    </p>
                    <div class="bg-indigo-50 dark:bg-indigo-900/20 border-l-4 border-indigo-500 p-4 rounded-r-lg">
                        <h3 class="font-bold text-indigo-800 dark:text-indigo-200 mb-2 text-sm uppercase" data-i18n="h_formula">计算公式</h3>
                        <div class="space-y-2 font-mono text-indigo-900 dark:text-indigo-100 text-xs md:text-sm">
                            <p data-i18n="formula_ic">1. 集电极电流: $$ I_c \approx \frac{V_P}{R_c} $$</p>
                            <p data-i18n="formula_ib">2. 基极电流 (饱和): $$ I_b = \frac{I_c}{\beta_{min}} $$</p>
                            <p data-i18n="formula_rb">3. 基极电阻: $$ R_b = \frac{V_P - V_{BE}}{I_b} = \frac{(V_P - V_{BE}) \cdot \beta \cdot R_c}{V_P} $$</p>
                        </div>
                        <p class="text-[10px] mt-2 opacity-70" data-i18n="formula_note">
                            *假设饱和压降 Vce(sat) ≈ 0V。输入电压设为 VP (高电平)。
                        </p>
                    </div>
                </div>

                <div class="space-y-6 text-slate-600 dark:text-slate-300 leading-relaxed text-sm">
                    <div class="bg-slate-100 dark:bg-slate-800 p-4 rounded-lg">
                        <h3 class="font-bold text-slate-800 dark:text-slate-200 mb-2 text-sm uppercase" data-i18n="h_tips">设计提示</h3>
                        <ul class="list-disc list-inside space-y-2 text-xs">
                            <li data-i18n="tip_1"><strong>过驱动 (Overdrive):</strong> 在实际工程中，为了确保深度饱和（降低 Vce(sat)），通常会让计算出的 Ib 再增大 2-10 倍（即减小 Rb）。</li>
                            <li data-i18n="tip_2"><strong>功耗：</strong> 确保 Rb 和 Rc 的功率额定值满足 P = I²R。</li>
                            <li data-i18n="tip_3"><strong>速度：</strong> 深度饱和会增加关断时间（存储时间）。如果需要高速开关，可能需要加加速电容或使用肖特基钳位。</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="text-center text-xs text-slate-400 py-6">
        <p>&copy; <span id="year"></span> BJT Saturation Calculator. Generated for Educational Purposes.</p>
    </footer>

    <script>
        const i18nData = {
            'zh-CN': {
                title: "三极管开关饱和度计算器", subtitle: "BJT Switch Saturation Calculator",
                h_inputs: "输入参数",
                lbl_rc: "集电极电阻 (Rc):", lbl_vp: "正电压 (VP):",
                lbl_beta: "放大系数 β (Beta min):", lbl_vbe: "基极-发射极压降 (VBE):",
                btn_calc: "计算电阻值",
                h_result: "计算结果",
                lbl_rb: "基极电阻 (Rb)", lbl_ic: "集电极电流 (Ic)", lbl_ib: "基极电流 (Ib)",
                
                guide_title: "设计公式与原理",
                desc_p1: "为了使三极管作为开关工作在<strong>饱和区</strong>，基极电流 Ib 必须足够大，通常要求 Ib ≥ Ic / β。为了确保可靠饱和，设计时通常会使用最小 β 值。",
                h_formula: "计算公式",
                formula_ic: "1. 集电极电流: $$ I_c \\approx \\frac{V_P}{R_c} $$",
                formula_ib: "2. 基极电流 (饱和): $$ I_b = \\frac{I_c}{\\beta_{min}} $$",
                formula_rb: "3. 基极电阻: $$ R_b = \\frac{V_P - V_{BE}}{I_b} = \\frac{(V_P - V_{BE}) \\cdot \\beta \\cdot R_c}{V_P} $$",
                formula_note: "*假设饱和压降 Vce(sat) ≈ 0V。输入电压设为 VP (高电平)。",
                h_tips: "设计提示",
                tip_1: "<strong>过驱动 (Overdrive):</strong> 在实际工程中，为了确保深度饱和（降低 Vce(sat)），通常会让计算出的 Ib 再增大 2-10 倍（即减小 Rb）。",
                tip_2: "<strong>功耗：</strong> 确保 Rb 和 Rc 的功率额定值满足 P = I²R。",
                tip_3: "<strong>速度：</strong> 深度饱和会增加关断时间（存储时间）。如果需要高速开关，可能需要加加速电容或使用肖特基钳位。"
            },
            'en': {
                title: "BJT Switch Saturation Calculator", subtitle: "Base Resistor Calculator",
                h_inputs: "Parameters",
                lbl_rc: "Collector Resistor (Rc):", lbl_vp: "Supply Voltage (VP):",
                lbl_beta: "Current Gain β (Beta min):", lbl_vbe: "Base-Emitter Drop (VBE):",
                btn_calc: "Calculate Resistor",
                h_result: "Results",
                lbl_rb: "Base Resistor (Rb)", lbl_ic: "Collector Current (Ic)", lbl_ib: "Base Current (Ib)",
                
                guide_title: "Formulas & Theory",
                desc_p1: "To operate a BJT as a switch in the <strong>saturation region</strong>, the base current Ib must be sufficient, typically Ib ≥ Ic / β. We use the minimum β to ensure saturation across variations.",
                h_formula: "Formulas",
                formula_ic: "1. Collector Current: $$ I_c \\approx \\frac{V_P}{R_c} $$",
                formula_ib: "2. Base Current (Sat): $$ I_b = \\frac{I_c}{\\beta_{min}} $$",
                formula_rb: "3. Base Resistor: $$ R_b = \\frac{V_P - V_{BE}}{I_b} = \\frac{(V_P - V_{BE}) \\cdot \\beta \\cdot R_c}{V_P} $$",
                formula_note: "*Assuming Vce(sat) ≈ 0V. Input voltage is assumed to be VP (Logic High).",
                h_tips: "Design Tips",
                tip_1: "<strong>Overdrive:</strong> In practice, to ensure deep saturation (low Vce), design for Ib 2-10x higher than the calculated minimum (reduce Rb).",
                tip_2: "<strong>Power:</strong> Ensure Rb and Rc power ratings meet P = I²R.",
                tip_3: "<strong>Speed:</strong> Deep saturation increases turn-off time (storage time). For high speed, use a speed-up capacitor or Schottky clamp."
            }
        };

        const App = {
            lang: 'zh-CN',
            
            init() {
                this.setupLang();
                this.handleTheme();
                this.updateYear();
                this.calculate();
            },

            updateYear() {
                document.getElementById('year').textContent = new Date().getFullYear();
            },

            setupLang() {
                const sel = document.getElementById('lang-selector');
                const urlParams = new URLSearchParams(window.location.search);
                this.lang = urlParams.get('lang') || 'zh-CN';
                sel.value = this.lang;
                this.updateText();
                sel.addEventListener('change', (e) => {
                    this.lang = e.target.value;
                    try {
                        const newUrl = new URL(window.location);
                        newUrl.searchParams.set('lang', this.lang);
                        window.history.pushState({}, '', newUrl);
                    } catch (e) {}
                    this.updateText();
                });
            },

            updateText() {
                const dict = i18nData[this.lang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(dict[key]) el.innerHTML = dict[key];
                });
            },

            calculate() {
                const rc_k = parseFloat(document.getElementById('inp-rc').value);
                const vp = parseFloat(document.getElementById('inp-vp').value);
                const beta = parseFloat(document.getElementById('inp-beta').value);
                const vbe = parseFloat(document.getElementById('inp-vbe').value);

                const resRb = document.getElementById('res-rb');
                const resRbOhm = document.getElementById('res-rb-ohm');
                const resIc = document.getElementById('res-ic');
                const resIb = document.getElementById('res-ib');
                const badge = document.getElementById('status-badge');

                if (isNaN(rc_k) || isNaN(vp) || isNaN(beta) || isNaN(vbe) || rc_k <= 0 || vp <= 0) {
                    resRb.textContent = '-';
                    resRbOhm.textContent = '-';
                    resIc.textContent = '-';
                    resIb.textContent = '-';
                    badge.classList.add('hidden');
                    return;
                }

                if (vp <= vbe) {
                    resRb.textContent = 'Error';
                    resRbOhm.textContent = 'VP must be > VBE';
                    badge.classList.add('hidden');
                    return;
                }

                // 1. Calculate Ic (Collector Current)
                // Ic = VP / Rc (Assuming Vce_sat ~ 0)
                // Rc is in KΩ, VP in V -> Ic in mA
                const ic_mA = vp / rc_k;

                // 2. Calculate Ib (Base Current required for saturation)
                // Ib = Ic / Beta
                const ib_mA = ic_mA / beta;

                // 3. Calculate Rb (Base Resistor)
                // Rb = (VP - VBE) / Ib
                // VP, VBE in V, Ib in mA -> Rb in KΩ
                const rb_k = (vp - vbe) / ib_mA;
                const rb_ohm = rb_k * 1000;

                // Update UI
                resRb.textContent = rb_k.toFixed(2) + ' KΩ';
                resRbOhm.textContent = rb_ohm.toFixed(0) + ' Ω';
                resIc.textContent = ic_mA.toFixed(2) + ' mA';
                // Ib usually small, show more decimals or convert to uA if very small
                if (ib_mA < 1) {
                    resIb.textContent = (ib_mA * 1000).toFixed(1) + ' μA';
                } else {
                    resIb.textContent = ib_mA.toFixed(3) + ' mA';
                }

                badge.classList.remove('hidden');
            },

            handleTheme() {
                const toggle = document.getElementById('mode-toggle');
                const html = document.documentElement;
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    html.classList.add('dark');
                }
                toggle.addEventListener('click', () => {
                    html.classList.toggle('dark');
                    localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
     <!--  结尾必须包含的代码 -->
    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
</body>
</html>