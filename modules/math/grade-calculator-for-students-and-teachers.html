<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="education">
    <title>Grade Calculator - Calculate Your Weighted Average</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .input-row { transition: all 0.3s ease; }
        .input-row:hover { background-color: #f9fafb; }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-gray-50 text-gray-800 flex flex-col min-h-screen">

    <!-- Navbar -->
    <nav class="bg-white shadow-sm">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-calculator text-blue-600 text-2xl"></i>
                <h1 class="text-xl font-bold text-gray-800" data-i18n="title">Grade Calculator</h1>
            </div>
            <div>
                <select id="lang-selector" class="border border-gray-300 rounded-md p-1 text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="zh-CN">简体中文</option>
                    <option value="zh-TW">繁體中文</option>
                    <option value="en">English</option>
                    <option value="es">Español</option>
                    <option value="ru">Русский</option>
                    <option value="hi">हिन्दी</option>
                    <option value="pl">Polski</option>
                </select>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-4xl mx-auto px-4 py-8 w-full">
        
        <!-- Calculator Card -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
            <h2 class="text-2xl font-semibold mb-6 text-center border-b pb-4" data-i18n="calcTitle">Calculate Your Grade</h2>

            <div class="grid grid-cols-12 gap-4 mb-2 font-semibold text-gray-600 text-sm md:text-base">
                <div class="col-span-5" data-i18n="assignment">Assignment</div>
                <div class="col-span-3" data-i18n="grade">Grade (%)</div>
                <div class="col-span-3" data-i18n="weight">Weight</div>
                <div class="col-span-1"></div>
            </div>

            <div id="rows-container">
                <!-- Rows will be injected here -->
            </div>

            <div class="flex flex-col md:flex-row gap-4 mt-6">
                <button onclick="addRow()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg transition flex items-center justify-center gap-2">
                    <i class="fas fa-plus"></i> <span data-i18n="addRow">Add Row</span>
                </button>
                <button onclick="calculate()" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition flex-grow font-bold shadow-md" data-i18n="calculate">
                    Calculate
                </button>
                <button onclick="reset()" class="bg-red-100 hover:bg-red-200 text-red-600 px-4 py-2 rounded-lg transition" data-i18n="reset">
                    Reset
                </button>
            </div>

            <!-- Result Section -->
            <div id="result-area" class="hidden mt-8 p-6 bg-blue-50 rounded-xl border border-blue-100 text-center">
                <p class="text-gray-600 mb-1" data-i18n="yourGrade">Your Grade</p>
                <div class="text-4xl font-bold text-blue-700 mb-2"><span id="final-percent">0</span>%</div>
                <div class="text-xl text-gray-800 font-semibold"><span data-i18n="letterGrade">Letter Grade</span>: <span id="final-letter">F</span></div>
                <p class="text-sm text-gray-500 mt-2" id="calc-method-text"></p>
            </div>
        </div>

        <!-- Content & FAQ Section -->
        <article class="prose max-w-none text-gray-600">
            <h3 class="text-2xl font-bold text-gray-800 mb-4" data-i18n="contentTitle">About Grade Calculator</h3>
            <div id="dynamic-content">
                <!-- Content injected via JS -->
            </div>
        </article>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-t mt-12 py-8">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <p class="text-gray-500 text-sm mb-4">
                &copy; <span id="current-year"></span> <span data-i18n="footerRights">All Rights Reserved.</span>
            </p>
            <!-- Required Snippet -->
            <div id="related-tools-container"></div>
        </div>
    </footer>

    <script src="/scripts/related.js"></script>

    <script>
        // Translations
        const i18n = {
            'zh-CN': {
                title: '成绩计算器',
                calcTitle: '计算你的学期成绩',
                assignment: '作业/考试名称',
                grade: '分数',
                weight: '权重/占比',
                addRow: '添加一行',
                calculate: '计算成绩',
                reset: '重置',
                yourGrade: '你的最终成绩',
                letterGrade: '等级',
                footerRights: 'toolboxpro.top 版权所有。',
                contentTitle: '关于本工具',
                contentBody: `
                    <p class="mb-4">使用这个免费的在线成绩计算器，您可以轻松计算加权平均分或普通平均分。这对于学生跟踪学期进度或教师计算最终成绩非常有用。</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">如何使用？</h4>
                    <p class="mb-2">1. 输入作业或考试的名称（可选）。</p>
                    <p class="mb-2">2. 输入您获得的分数。</p>
                    <p class="mb-2">3. 输入该作业在总成绩中的权重（如果是加权计算）。如果不输入权重，将计算普通平均分。</p>
                    <p class="mb-4">4. 点击“计算成绩”查看结果。</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">常见问题 (FAQ)</h4>
                    <p><strong>什么是加权成绩？</strong><br>加权成绩意味着某些作业比其他作业更重要。例如，期末考试可能占总成绩的50%，而平时作业只占20%。</p>
                `
            },
            'zh-TW': {
                title: '成績計算器',
                calcTitle: '計算你的學期成績',
                assignment: '作業/考試名稱',
                grade: '分數',
                weight: '權重/佔比',
                addRow: '新增一行',
                calculate: '計算成績',
                reset: '重置',
                yourGrade: '你的最終成績',
                letterGrade: '等級',
                footerRights: 'toolboxpro.top 版權所有。',
                contentTitle: '關於本工具',
                contentBody: `
                    <p class="mb-4">使用這個免費的線上成績計算器，您可以輕鬆計算加權平均分或普通平均分。這對於學生追蹤學期進度或教師計算最終成績非常有用。</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">如何使用？</h4>
                    <p class="mb-2">1. 輸入作業或考試的名稱（可選）。</p>
                    <p class="mb-2">2. 輸入您獲得的分數。</p>
                    <p class="mb-2">3. 輸入該作業在總成績中的權重（如果是加權計算）。如果不輸入權重，將計算普通平均分。</p>
                    <p class="mb-4">4. 點擊「計算成績」查看結果。</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">常見問題 (FAQ)</h4>
                    <p><strong>什麼是加權成績？</strong><br>加權成績意味著某些作業比其他作業更重要。例如，期末考試可能佔總成績的50%，而平時作業只佔20%。</p>
                `
            },
            'en': {
                title: 'Grade Calculator',
                calcTitle: 'Calculate Your Grade',
                assignment: 'Assignment',
                grade: 'Grade',
                weight: 'Weight',
                addRow: 'Add Row',
                calculate: 'Calculate',
                reset: 'Reset',
                yourGrade: 'Your Grade',
                letterGrade: 'Letter Grade',
                footerRights: 'toolboxpro.top All Rights Reserved.',
                contentTitle: 'About Grade Calculator',
                contentBody: `
                    <p class="mb-4">Use this free online grade calculator to easily accept weighted or unweighted grades. This is perfect for high school and college students to track their semester progress.</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">How to use?</h4>
                    <p class="mb-2">1. Enter the name of the assignment (optional).</p>
                    <p class="mb-2">2. Enter the grade you received.</p>
                    <p class="mb-2">3. Enter the weight of the assignment. If left blank, it calculates a simple average.</p>
                    <p class="mb-4">4. Click "Calculate" to see your results.</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">FAQ</h4>
                    <p><strong>What is a weighted grade?</strong><br>A weighted grade means some assignments count more than others. For example, a Final Exam might be worth 50% of the grade.</p>
                `
            },
            'es': {
                title: 'Calculadora de Notas',
                calcTitle: 'Calcula tu Calificación',
                assignment: 'Asignación',
                grade: 'Nota',
                weight: 'Peso',
                addRow: 'Añadir Fila',
                calculate: 'Calcular',
                reset: 'Reiniciar',
                yourGrade: 'Tu Calificación',
                letterGrade: 'Letra',
                footerRights: 'toolboxpro.top Todos los derechos reservados.',
                contentTitle: 'Sobre la Calculadora',
                contentBody: `
                    <p class="mb-4">Utilice esta calculadora de notas gratuita para calcular promedios ponderados o simples. Ideal para estudiantes y profesores.</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">¿Cómo usarla?</h4>
                    <p class="mb-2">1. Ingrese el nombre de la tarea.</p>
                    <p class="mb-2">2. Ingrese la nota obtenida.</p>
                    <p class="mb-2">3. Ingrese el peso (%). Si se deja en blanco, se calcula un promedio simple.</p>
                    <p class="mb-4">4. Haga clic en "Calcular".</p>
                `
            },
            'ru': {
                title: 'Калькулятор Оценок',
                calcTitle: 'Рассчитайте свою оценку',
                assignment: 'Задание',
                grade: 'Оценка',
                weight: 'Вес',
                addRow: 'Добавить строку',
                calculate: 'Рассчитать',
                reset: 'Сброс',
                yourGrade: 'Ваша оценка',
                letterGrade: 'Буква',
                footerRights: 'toolboxpro.top Все права защищены.',
                contentTitle: 'О калькуляторе',
                contentBody: `
                    <p class="mb-4">Используйте этот бесплатный онлайн-калькулятор оценок для расчета средневзвешенных баллов.</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">Как использовать?</h4>
                    <p class="mb-2">1. Введите название задания.</p>
                    <p class="mb-2">2. Введите полученную оценку.</p>
                    <p class="mb-2">3. Введите вес задания (%).</p>
                    <p class="mb-4">4. Нажмите «Рассчитать».</p>
                `
            },
            'hi': {
                title: 'ग्रेड कैलकुलेटर',
                calcTitle: 'अपने ग्रेड की गणना करें',
                assignment: 'असाइनमेंट',
                grade: 'ग्रेड',
                weight: 'वजन (Weight)',
                addRow: 'पंक्ति जोड़ें',
                calculate: 'गणना करें',
                reset: 'रीसेट',
                yourGrade: 'आपका ग्रेड',
                letterGrade: 'अक्षर ग्रेड',
                footerRights: 'toolboxpro.top सर्वाधिकार सुरक्षित।',
                contentTitle: 'ग्रेड कैलकुलेटर के बारे में',
                contentBody: `
                    <p class="mb-4">इस मुफ्त ऑनलाइन ग्रेड कैलकुलेटर का उपयोग करके भारित औसत या सरल औसत की गणना करें।</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">कैसे उपयोग करें?</h4>
                    <p class="mb-2">1. असाइनमेंट का नाम दर्ज करें।</p>
                    <p class="mb-2">2. प्राप्त ग्रेड दर्ज करें।</p>
                    <p class="mb-2">3. वजन दर्ज करें। यदि खाली छोड़ दिया जाए, तो यह एक साधारण औसत की गणना करता है।</p>
                    <p class="mb-4">4. परिणाम देखने के लिए "गणना करें" पर क्लिक करें।</p>
                `
            },
            'pl': {
                title: 'Kalkulator Ocen',
                calcTitle: 'Oblicz swoje oceny',
                assignment: 'Zadanie',
                grade: 'Ocena',
                weight: 'Waga',
                addRow: 'Dodaj wiersz',
                calculate: 'Oblicz',
                reset: 'Resetuj',
                yourGrade: 'Twoja ocena',
                letterGrade: 'Stopień',
                footerRights: 'toolboxpro.top Wszelkie prawa zastrzeżone.',
                contentTitle: 'O kalkulatorze',
                contentBody: `
                    <p class="mb-4">Użyj tego darmowego kalkulatora, aby obliczyć średnią ważoną lub prostą.</p>
                    <h4 class="text-xl font-bold text-gray-800 mt-6 mb-2">Jak używać?</h4>
                    <p class="mb-2">1. Wpisz nazwę zadania.</p>
                    <p class="mb-2">2. Wpisz otrzymaną ocenę.</p>
                    <p class="mb-2">3. Wpisz wagę. Jeśli puste, liczona jest średnia prosta.</p>
                    <p class="mb-4">4. Kliknij "Oblicz".</p>
                `
            }
        };

        // Logic
        let currentLang = 'zh-CN';

        function init() {
            // Set Year
            document.getElementById('current-year').textContent = new Date().getFullYear();

            // Set Language from URL
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            if (langParam && i18n[langParam]) {
                currentLang = langParam;
            }
            document.getElementById('lang-selector').value = currentLang;
            
            // Initial render
            renderRows(5);
            updateContent();

            // Listeners
            document.getElementById('lang-selector').addEventListener('change', (e) => {
                changeLanguage(e.target.value);
            });
        }

        function changeLanguage(lang) {
            currentLang = lang;
            try {
                const newUrl = `${window.location.pathname}?lang=${lang}`;
                window.history.pushState({path: newUrl}, '', newUrl);
            } catch (e) {
                // Ignore security errors in sandboxed environments
                console.warn('URL update skipped due to environment restrictions');
            }
            updateContent();
        }

        function updateContent() {
            const t = i18n[currentLang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.textContent = t[key];
            });
            document.getElementById('dynamic-content').innerHTML = t.contentBody;
            document.documentElement.lang = currentLang;
        }

        function renderRows(count) {
            const container = document.getElementById('rows-container');
            let html = '';
            for(let i=0; i<count; i++) {
                html += `
                <div class="grid grid-cols-12 gap-4 mb-3 input-row items-center">
                    <div class="col-span-5">
                        <input type="text" class="w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="Task ${i+1}">
                    </div>
                    <div class="col-span-3">
                        <input type="number" class="grade-input w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="85">
                    </div>
                    <div class="col-span-3">
                        <input type="number" class="weight-input w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-blue-500 focus:outline-none" placeholder="20">
                    </div>
                    <div class="col-span-1 text-center">
                        <button onclick="this.parentElement.parentElement.remove()" class="text-gray-400 hover:text-red-500 transition"><i class="fas fa-times"></i></button>
                    </div>
                </div>`;
            }
            container.innerHTML += html; // Append to keep existing
        }

        function addRow() {
            renderRows(1);
        }

        function reset() {
            document.getElementById('rows-container').innerHTML = '';
            renderRows(5);
            document.getElementById('result-area').classList.add('hidden');
        }

        function getLetterGrade(percentage) {
            if (percentage >= 97) return 'A+';
            if (percentage >= 93) return 'A';
            if (percentage >= 90) return 'A-';
            if (percentage >= 87) return 'B+';
            if (percentage >= 83) return 'B';
            if (percentage >= 80) return 'B-';
            if (percentage >= 77) return 'C+';
            if (percentage >= 73) return 'C';
            if (percentage >= 70) return 'C-';
            if (percentage >= 67) return 'D+';
            if (percentage >= 63) return 'D';
            if (percentage >= 60) return 'D-';
            return 'F';
        }

        function calculate() {
            const grades = document.querySelectorAll('.grade-input');
            const weights = document.querySelectorAll('.weight-input');
            
            let totalWeightedScore = 0;
            let totalWeight = 0;
            let totalScoreSimple = 0;
            let countSimple = 0;
            let hasWeight = false;

            for (let i = 0; i < grades.length; i++) {
                const g = parseFloat(grades[i].value);
                const w = parseFloat(weights[i].value);

                if (!isNaN(g)) {
                    if (!isNaN(w) && w > 0) {
                        hasWeight = true;
                        totalWeightedScore += g * w;
                        totalWeight += w;
                    } else {
                        totalScoreSimple += g;
                        countSimple++;
                    }
                }
            }

            let result = 0;
            let methodText = "";

            if (hasWeight) {
                if (totalWeight === 0) {
                    alert("Total weight cannot be zero.");
                    return;
                }
                result = totalWeightedScore / totalWeight;
                methodText = i18n[currentLang].weight ? "Weighted Average Calculation" : "Weighted Calculation";
            } else if (countSimple > 0) {
                result = totalScoreSimple / countSimple;
                methodText = "Simple Average Calculation (No weights provided)";
            } else {
                return; // No data
            }

            document.getElementById('final-percent').textContent = result.toFixed(2);
            document.getElementById('final-letter').textContent = getLetterGrade(result);
            document.getElementById('result-area').classList.remove('hidden');
        }

        // Initialize
        window.onload = init;

    </script>
</body>
</html>