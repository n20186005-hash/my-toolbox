<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expression Calculator</title>
    
    <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
    <meta name="tool-id" content="expression_calculator">
    <meta name="category" content="Math">
    <meta name="icon" content="üìê">
    
    <!-- ÈªòËÆ§Ëã±ÊñáÂÜÖÂÆπ -->
    <meta name="title" content="Expression Calculator">
    <meta name="description" content="Evaluate mathematical expressions instantly.">
    
    <!-- Â§öËØ≠Ë®ÄÈÖçÁΩÆ -->
    <meta name="lang-title-zh-CN" content="Ë°®ËææÂºèËÆ°ÁÆóÂô®">
    <meta name="lang-description-zh-CN" content="Âç≥Êó∂ËÆ°ÁÆóÊï∞Â≠¶Ë°®ËææÂºè„ÄÇ">
    
    <meta name="lang-title-zh-TW" content="Ë°®ÈÅîÂºèË®àÁÆóÂô®">
    <meta name="lang-description-zh-TW" content="Âç≥ÊôÇË®àÁÆóÊï∏Â≠∏Ë°®ÈÅîÂºè„ÄÇ">
    
    <meta name="lang-title-ja" content="Êï∞ÂºèË®àÁÆóÊ©ü">
    <meta name="lang-description-ja" content="Êï∞Â≠¶Âºè„ÇíÂç≥Â∫ß„Å´Ë©ï‰æ°„Åó„Åæ„Åô„ÄÇ">
    
    <meta name="lang-title-ru" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏–π">
    <meta name="lang-description-ru" content="–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.">
    
    <meta name="lang-title-es" content="Calculadora de expresiones">
    <meta name="lang-description-es" content="Eval√∫a expresiones matem√°ticas instant√°neamente.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .warning { background-color: #fee2e2; border: 1px solid #ef4444; color: #b91c1c; padding: 10px; border-radius: 5px; margin-top: 10px; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/math/expression-calculator.html" />
</head>
<body>

    <div class="tool-module active" 
         data-id="expression_calculator" 
         data-category="math" 
         data-title="Expression Calculator" 
         data-icon="üìê">
        
        <!-- ËØ≠Ë®ÄÈÄâÊã©Âô® -->
        <div class="absolute top-4 right-4">
            <select id="expr-lang" onchange="ExprCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üìê Expression Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="expression_label">Mathematical Expression</label>
                <input type="text" id="expression" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 2*(3+5)/4" value="2*(3+5)/4">
                
                <div class="grid grid-cols-4 gap-2 mt-2">
                    <button onclick="ExprCalc.addToExpression('+')" class="p-2 border rounded bg-gray-100 hover:bg-gray-200">+</button>
                    <button onclick="ExprCalc.addToExpression('-')" class="p-2 border rounded bg-gray-100 hover:bg-gray-200">-</button>
                    <button onclick="ExprCalc.addToExpression('*')" class="p-2 border rounded bg-gray-100 hover:bg-gray-200">√ó</button>
                    <button onclick="ExprCalc.addToExpression('/')" class="p-2 border rounded bg-gray-100 hover:bg-gray-200">√∑</button>
                    
                    <button onclick="ExprCalc.addToExpression('(')" class="p-2 border rounded bg-gray-100 hover:bg-gray-200">(</button>
                    <button onclick="ExprCalc.addToExpression(')')" class="p-2 border rounded bg-gray-100 hover:bg-gray-200">)</button>
                    <button onclick="ExprCalc.addToExpression('^')" class="p-2 border rounded bg-gray-100 hover:bg-gray-200">^</button>
                    <button onclick="ExprCalc.clearExpression()" class="p-2 border rounded bg-gray-100 hover:bg-gray-200" data-i18n="clear_btn">Clear</button>
                </div>
            </div>
        </div>

        <button onclick="ExprCalc.calculate()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="calculate_btn">Calculate Result</button>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
            <div class="text-sm text-gray-500 mb-2" data-i18n="result_label">Calculation Result</div>
            <div id="expr-result" class="text-3xl font-bold text-blue-800">--</div>
            
            <div class="mt-4 p-3 bg-white rounded border border-gray-100 text-left text-sm">
                <div data-i18n="example_label" class="font-medium mb-1">Examples: 3+4*2, (5-2)/3, 2^3, sqrt(16)</div>
                <div data-i18n="supported_ops" class="text-gray-600">Supported operators: +, -, *, /, ^, ( ), sqrt(), sin(), cos(), tan()</div>
            </div>
            
            <div class="warning text-sm mt-4" data-i18n="disclaimer">Disclaimer: Ensure valid mathematical syntax. Results are for reference only.</div>
        </div>
    </div>

    <script>
        const ExprCalc = {
            i18n: {
                'en': {
                    title: 'üìê Expression Calculator',
                    expression_label: 'Mathematical Expression',
                    calculate_btn: 'Calculate Result',
                    clear_btn: 'Clear',
                    result_label: 'Calculation Result',
                    example_label: 'Examples: 3+4*2, (5-2)/3, 2^3, sqrt(16)',
                    supported_ops: 'Supported operators: +, -, *, /, ^, ( ), sqrt(), sin(), cos(), tan()',
                    error_invalid: 'Invalid expression',
                    disclaimer: 'Disclaimer: Ensure valid mathematical syntax. Results are for reference only.'
                },
                'zh-CN': {
                    title: 'üìê Ë°®ËææÂºèËÆ°ÁÆóÂô®',
                    expression_label: 'Êï∞Â≠¶Ë°®ËææÂºè',
                    calculate_btn: 'ËÆ°ÁÆóÁªìÊûú',
                    clear_btn: 'Ê∏ÖÈô§',
                    result_label: 'ËÆ°ÁÆóÁªìÊûú',
                    example_label: 'Á§∫‰æãÔºö3+4*2Ôºå(5-2)/3Ôºå2^3Ôºåsqrt(16)',
                    supported_ops: 'ÊîØÊåÅÁöÑËøêÁÆóÁ¨¶Ôºö+„ÄÅ-„ÄÅ*„ÄÅ/„ÄÅ^„ÄÅ( )„ÄÅsqrt()„ÄÅsin()„ÄÅcos()„ÄÅtan()',
                    error_invalid: 'Êó†ÊïàÁöÑË°®ËææÂºè',
                    disclaimer: 'ÂÖçË¥£Â£∞ÊòéÔºöËØ∑Á°Æ‰øùÊï∞Â≠¶ËØ≠Ê≥ïÊ≠£Á°Æ„ÄÇÁªìÊûú‰ªÖ‰æõÂèÇËÄÉ„ÄÇ'
                },
                'zh-TW': {
                    title: 'üìê Ë°®ÈÅîÂºèË®àÁÆóÂô®',
                    expression_label: 'Êï∏Â≠∏Ë°®ÈÅîÂºè',
                    calculate_btn: 'Ë®àÁÆóÁµêÊûú',
                    clear_btn: 'Ê∏ÖÈô§',
                    result_label: 'Ë®àÁÆóÁµêÊûú',
                    example_label: 'Á§∫‰æãÔºö3+4*2Ôºå(5-2)/3Ôºå2^3Ôºåsqrt(16)',
                    supported_ops: 'ÊîØÊåÅÁöÑÈÅãÁÆóÂ≠êÔºö+„ÄÅ-„ÄÅ*„ÄÅ/„ÄÅ^„ÄÅ( )„ÄÅsqrt()„ÄÅsin()„ÄÅcos()„ÄÅtan()',
                    error_invalid: 'ÁÑ°ÊïàÁöÑË°®ÈÅîÂºè',
                    disclaimer: 'ÂÖçË≤¨ËÅ≤ÊòéÔºöË´ãÁ¢∫‰øùÊï∏Â≠∏Ë™ûÊ≥ïÊ≠£Á¢∫„ÄÇÁµêÊûúÂÉÖ‰æõÂèÉËÄÉ„ÄÇ'
                },
                'ja': {
                    title: 'üìê Êï∞ÂºèË®àÁÆóÊ©ü',
                    expression_label: 'Êï∞Â≠¶Âºè',
                    calculate_btn: 'ÁµêÊûú„ÇíË®àÁÆó',
                    clear_btn: '„ÇØ„É™„Ç¢',
                    result_label: 'Ë®àÁÆóÁµêÊûú',
                    example_label: '‰æãÔºö3+4*2„ÄÅ(5-2)/3„ÄÅ2^3„ÄÅsqrt(16)',
                    supported_ops: '„Çµ„Éù„Éº„Éà„Åï„Çå„Å¶„ÅÑ„ÇãÊºîÁÆóÂ≠êÔºö+„ÄÅ-„ÄÅ*„ÄÅ/„ÄÅ^„ÄÅ( )„ÄÅsqrt()„ÄÅsin()„ÄÅcos()„ÄÅtan()',
                    error_invalid: 'ÁÑ°Âäπ„Å™Âºè',
                    disclaimer: 'ÂÖçË≤¨‰∫ãÈ†ÖÔºöÊúâÂäπ„Å™Êï∞Â≠¶ÁöÑÊßãÊñá„ÇíÁ¢∫Ë™ç„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇÁµêÊûú„ÅØÂèÇËÄÉÁî®„Åß„Åô„ÄÇ'
                },
                'ru': {
                    title: 'üìê –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏–π',
                    expression_label: '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ',
                    calculate_btn: '–í—ã—á–∏—Å–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç',
                    clear_btn: '–û—á–∏—Å—Ç–∏—Ç—å',
                    result_label: '–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è',
                    example_label: '–ü—Ä–∏–º–µ—Ä—ã: 3+4*2, (5-2)/3, 2^3, sqrt(16)',
                    supported_ops: '–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã: +, -, *, /, ^, ( ), sqrt(), sin(), cos(), tan()',
                    error_invalid: '–ù–µ–≤–µ—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ',
                    disclaimer: '–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.'
                },
                'es': {
                    title: 'üìê Calculadora de expresiones',
                    expression_label: 'Expresi√≥n matem√°tica',
                    calculate_btn: 'Calcular resultado',
                    clear_btn: 'Limpiar',
                    result_label: 'Resultado del c√°lculo',
                    example_label: 'Ejemplos: 3+4*2, (5-2)/3, 2^3, sqrt(16)',
                    supported_ops: 'Operadores admitidos: +, -, *, /, ^, ( ), sqrt(), sin(), cos(), tan()',
                    error_invalid: 'Expresi√≥n inv√°lida',
                    disclaimer: 'Descargo de responsabilidad: Aseg√∫rese de usar una sintaxis matem√°tica v√°lida. Los resultados son solo para referencia.'
                }
            },

            init: () => {},

            changeLang: () => {
                const lang = document.getElementById('expr-lang').value;
                const texts = ExprCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="expression_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
            },

            addToExpression: (value) => {
                const input = document.getElementById('expression');
                input.value += value;
                input.focus();
            },

            clearExpression: () => {
                document.getElementById('expression').value = '';
                document.getElementById('expr-result').innerText = '--';
            },

            calculate: () => {
                const expr = document.getElementById('expression').value.trim();
                const lang = document.getElementById('expr-lang').value;
                const texts = ExprCalc.i18n[lang];
                const resultEl = document.getElementById('expr-result');

                if (!expr) {
                    resultEl.innerText = texts.error_invalid;
                    resultEl.className = "text-xl font-bold text-red-600";
                    return;
                }

                try {
                    // ÊõøÊç¢^‰∏∫Math.powËØ≠Ê≥ï
                    let processedExpr = expr.replace(/(\d+)\^(\d+)/g, 'Math.pow($1, $2)');
                    // ÊîØÊåÅÊï∞Â≠¶ÂáΩÊï∞
                    processedExpr = processedExpr.replace(/sqrt\(/g, 'Math.sqrt(')
                                                .replace(/sin\(/g, 'Math.sin(')
                                                .replace(/cos\(/g, 'Math.cos(')
                                                .replace(/tan\(/g, 'Math.tan(');

                    // ËÆ°ÁÆóÁªìÊûú
                    const result = eval(processedExpr);
                    
                    if (isNaN(result) || !isFinite(result)) {
                        throw new Error('Invalid result');
                    }

                    resultEl.className = "text-3xl font-bold text-blue-800";
                    resultEl.innerText = result.toFixed(6).replace(/\.?0+$/, '');
                } catch (e) {
                    resultEl.innerText = texts.error_invalid;
                    resultEl.className = "text-xl font-bold text-red-600";
                }
            }
        };

        document.addEventListener('DOMContentLoaded', ExprCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ëá™Âä®ÂåπÈÖçÊµèËßàÂô®ËØ≠Ë®Ä
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('expr-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    ExprCalc.changeLang();
                }
            }
        });
    </script>


    <div id="related-tools-container"></div>
    <script src="../../scripts/related.js"></script>
    
</body>

</html>
