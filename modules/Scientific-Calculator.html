<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Scientific Calculator Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f3f4f6; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .calc-btn { 
            @apply rounded text-center py-3 font-medium transition active:scale-95 select-none cursor-pointer;
            background-color: #f3f4f6; color: #374151;
        }
        .calc-btn:hover { background-color: #e5e7eb; }
        .calc-btn.op { background-color: #dbeafe; color: #1e40af; }
        .calc-btn.op:hover { background-color: #bfdbfe; }
        .calc-btn.eq { background-color: #2563eb; color: white; }
        .calc-btn.eq:hover { background-color: #1d4ed8; }
        .calc-btn.fn { background-color: #f9fafb; color: #4b5563; font-size: 0.9em; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="sci_calc" 
         data-category="math" 
         data-title="Scientific Calculator" 
         data-icon="üßÆ">
        
        <div class="absolute top-4 right-4">
            <select id="sc-lang" onchange="SciCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üßÆ Scientific Calculator</h2>

        <!-- Display -->
        <div class="bg-gray-900 rounded p-4 mb-4 text-right">
            <div id="sc-history" class="text-gray-400 text-sm h-5 overflow-hidden font-mono"></div>
            <div id="sc-display" class="text-white text-3xl font-mono overflow-x-auto whitespace-nowrap">0</div>
        </div>

        <!-- Buttons Grid -->
        <div class="grid grid-cols-5 gap-2 text-sm">
            <!-- Row 1: Functions -->
            <button class="calc-btn fn" onclick="SciCalc.fn('sin')">sin</button>
            <button class="calc-btn fn" onclick="SciCalc.fn('cos')">cos</button>
            <button class="calc-btn fn" onclick="SciCalc.fn('tan')">tan</button>
            <button class="calc-btn fn" onclick="SciCalc.insert('(')">(</button>
            <button class="calc-btn fn" onclick="SciCalc.insert(')')">)</button>

            <!-- Row 2: Functions -->
            <button class="calc-btn fn" onclick="SciCalc.fn('sqrt')">‚àö</button>
            <button class="calc-btn fn" onclick="SciCalc.fn('pow')">x^y</button>
            <button class="calc-btn fn" onclick="SciCalc.fn('log')">log</button>
            <button class="calc-btn fn" onclick="SciCalc.fn('ln')">ln</button>
            <button class="calc-btn bg-red-100 text-red-600 hover:bg-red-200" onclick="SciCalc.clearAll()">AC</button>

            <!-- Row 3 -->
            <button class="calc-btn" onclick="SciCalc.insert('7')">7</button>
            <button class="calc-btn" onclick="SciCalc.insert('8')">8</button>
            <button class="calc-btn" onclick="SciCalc.insert('9')">9</button>
            <button class="calc-btn" onclick="SciCalc.del()">DEL</button>
            <button class="calc-btn op" onclick="SciCalc.insert('/')">√∑</button>

            <!-- Row 4 -->
            <button class="calc-btn" onclick="SciCalc.insert('4')">4</button>
            <button class="calc-btn" onclick="SciCalc.insert('5')">5</button>
            <button class="calc-btn" onclick="SciCalc.insert('6')">6</button>
            <button class="calc-btn op" onclick="SciCalc.insert('*')">√ó</button>
            <button class="calc-btn op" onclick="SciCalc.insert('-')">-</button>

            <!-- Row 5 -->
            <button class="calc-btn" onclick="SciCalc.insert('1')">1</button>
            <button class="calc-btn" onclick="SciCalc.insert('2')">2</button>
            <button class="calc-btn" onclick="SciCalc.insert('3')">3</button>
            <button class="calc-btn op" onclick="SciCalc.insert('+')">+</button>
            <button class="calc-btn eq row-span-2 flex items-center justify-center" onclick="SciCalc.calc()">=</button>

            <!-- Row 6 -->
            <button class="calc-btn col-span-2" onclick="SciCalc.insert('0')">0</button>
            <button class="calc-btn" onclick="SciCalc.insert('.')">.</button>
            <button class="calc-btn" onclick="SciCalc.fn('pi')">œÄ</button>
            <!-- = button spans from row 5 -->
        </div>
    </div>

    <script>
        const SciCalc = {
            current: '0',
            history: '',
            i18n: {
                'en': { title: 'üßÆ Scientific Calculator' },
                'zh-CN': { title: 'üßÆ ÁßëÂ≠¶ËÆ°ÁÆóÂô®' },
                'zh-TW': { title: 'üßÆ ÁßëÂ≠∏Ë®àÁÆóÂô®' },
                'ja': { title: 'üßÆ Èñ¢Êï∞ÈõªÂçì' },
                'ru': { title: 'üßÆ –ù–∞—É—á–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä' },
                'es': { title: 'üßÆ Calculadora Cient√≠fica' }
            },

            changeLang: () => {
                const lang = document.getElementById('sc-lang').value;
                const texts = SciCalc.i18n[lang];
                document.querySelector('[data-id="sci_calc"] [data-i18n="title"]').innerText = texts.title;
            },

            updateUI: () => {
                document.getElementById('sc-display').innerText = SciCalc.current;
                document.getElementById('sc-history').innerText = SciCalc.history;
            },

            insert: (char) => {
                if (SciCalc.current === '0' && !['.', '+', '-', '*', '/'].includes(char)) {
                    SciCalc.current = char;
                } else {
                    SciCalc.current += char;
                }
                SciCalc.updateUI();
            },

            del: () => {
                SciCalc.current = SciCalc.current.slice(0, -1);
                if (SciCalc.current === '') SciCalc.current = '0';
                SciCalc.updateUI();
            },

            clearAll: () => {
                SciCalc.current = '0';
                SciCalc.history = '';
                SciCalc.updateUI();
            },

            fn: (type) => {
                if(SciCalc.current === '0') SciCalc.current = '';
                
                switch(type) {
                    case 'sin': SciCalc.current += 'sin('; break;
                    case 'cos': SciCalc.current += 'cos('; break;
                    case 'tan': SciCalc.current += 'tan('; break;
                    case 'log': SciCalc.current += 'log('; break;
                    case 'ln':  SciCalc.current += 'ln('; break;
                    case 'sqrt': SciCalc.current += 'sqrt('; break;
                    case 'pow': SciCalc.current += '^'; break;
                    case 'pi': SciCalc.current += 'œÄ'; break;
                }
                if(SciCalc.current === '') SciCalc.current = '0'; // revert if empty
                SciCalc.updateUI();
            },

            calc: () => {
                try {
                    let expression = SciCalc.current;
                    SciCalc.history = expression + ' =';
                    
                    // Replace user friendly symbols with JS Math functions
                    expression = expression.replace(/√ó/g, '*')
                                         .replace(/√∑/g, '/')
                                         .replace(/œÄ/g, 'Math.PI')
                                         .replace(/sin\(/g, 'Math.sin(') // Note: JS uses radians
                                         .replace(/cos\(/g, 'Math.cos(')
                                         .replace(/tan\(/g, 'Math.tan(')
                                         .replace(/sqrt\(/g, 'Math.sqrt(')
                                         .replace(/log\(/g, 'Math.log10(')
                                         .replace(/ln\(/g, 'Math.log(')
                                         .replace(/\^/g, '**');

                    // Advanced check for degree mode could be added here. Currently assuming Radians for simplicity.
                    
                    // Safe eval wrapper
                    const result = Function('"use strict";return (' + expression + ')')();
                    
                    // Format
                    let resStr = parseFloat(result.toFixed(8)).toString(); // avoid long floats
                    SciCalc.current = resStr;
                } catch (e) {
                    SciCalc.current = 'Error';
                }
                SciCalc.updateUI();
            }
        };
    </script>
</body>
</html>