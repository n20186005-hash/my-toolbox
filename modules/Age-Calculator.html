<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Age Calculator Module</title>
    <meta name="tool-id" content="age_calc">
    <meta name="category" content="date">
    <meta name="icon" content="üéÇ">
    <meta name="description" content="Á≤æÂáÜËÆ°ÁÆóÂá∫ÁîüÊó•ÊúüÂà∞ÁõÆÊ†áÊó•ÊúüÁöÑÂπ¥ÈæÑÔºåÁ≤æÁ°ÆÂà∞Âπ¥„ÄÅÊúà„ÄÅÊó•„ÄÇ">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fdf4ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="age_calc" 
         data-category="date" 
         data-title="Age Calculator" 
         data-icon="üéÇ">
        
        <div class="absolute top-4 right-4">
            <select id="ac-lang" onchange="AgeCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üéÇ Age Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_dob">Date of Birth</label>
                <input type="date" id="ac-dob" class="w-full p-2 border rounded focus:ring-2 focus:ring-purple-500 outline-none">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_at">Age at Date</label>
                <input type="date" id="ac-target" class="w-full p-2 border rounded focus:ring-2 focus:ring-purple-500 outline-none">
            </div>
        </div>

        <button onclick="AgeCalc.calc()" class="w-full bg-purple-600 text-white py-2 rounded font-bold hover:bg-purple-700 transition mb-6" data-i18n="btn_calc">Calculate Age</button>

        <div class="bg-purple-50 p-4 rounded-lg border border-purple-100 hidden" id="ac-result-box">
            <h4 class="text-sm font-bold text-purple-800 mb-2" data-i18n="res_age">Age</h4>
            <div id="ac-main-res" class="text-2xl font-bold text-gray-800 mb-4">--</div>
            
            <h4 class="text-sm font-bold text-purple-800 mb-2 border-t border-purple-200 pt-2" data-i18n="res_summary">Summary</h4>
            <div class="grid grid-cols-2 gap-2 text-sm text-gray-600">
                <div><span data-i18n="sum_months">Total Months:</span> <span id="res-months" class="font-bold text-gray-800"></span></div>
                <div><span data-i18n="sum_weeks">Total Weeks:</span> <span id="res-weeks" class="font-bold text-gray-800"></span></div>
                <div><span data-i18n="sum_days">Total Days:</span> <span id="res-days" class="font-bold text-gray-800"></span></div>
                <div><span data-i18n="sum_hours">Total Hours:</span> <span id="res-hours" class="font-bold text-gray-800"></span></div>
            </div>
        </div>
    </div>

    <script>
        const AgeCalc = {
            i18n: {
                'en': {
                    title: 'üéÇ Age Calculator',
                    lbl_dob: 'Date of Birth',
                    lbl_at: 'Age at Date',
                    btn_calc: 'Calculate Age',
                    res_age: 'Age',
                    res_summary: 'Summary',
                    sum_months: 'Total Months:',
                    sum_weeks: 'Total Weeks:',
                    sum_days: 'Total Days:',
                    sum_hours: 'Total Hours:',
                    fmt_ymd: '{y} years {m} months {d} days',
                    err_future: 'Date of birth cannot be in the future relative to the target date.'
                },
                'zh-CN': {
                    title: 'üéÇ Âπ¥ÈæÑËÆ°ÁÆóÂô®',
                    lbl_dob: 'Âá∫ÁîüÊó•Êúü',
                    lbl_at: 'ËÆ°ÁÆóÊó•Êúü',
                    btn_calc: 'ËÆ°ÁÆóÂπ¥ÈæÑ',
                    res_age: 'Âπ¥ÈæÑ',
                    res_summary: 'ËØ¶ÁªÜÁªüËÆ°',
                    sum_months: 'ÊÄªÊúàÊï∞:',
                    sum_weeks: 'ÊÄªÂë®Êï∞:',
                    sum_days: 'ÊÄªÂ§©Êï∞:',
                    sum_hours: 'ÊÄªÂ∞èÊó∂:',
                    fmt_ymd: '{y} Â≤Å {m} ‰∏™Êúà {d} Â§©',
                    err_future: 'Âá∫ÁîüÊó•Êúü‰∏çËÉΩÊôö‰∫éËÆ°ÁÆóÊó•Êúü„ÄÇ'
                },
                'zh-TW': {
                    title: 'üéÇ Âπ¥ÈΩ°Ë®àÁÆóÂô®',
                    lbl_dob: 'Âá∫ÁîüÊó•Êúü',
                    lbl_at: 'Ë®àÁÆóÊó•Êúü',
                    btn_calc: 'Ë®àÁÆóÂπ¥ÈΩ°',
                    res_age: 'Âπ¥ÈΩ°',
                    res_summary: 'Ë©≥Á¥∞Áµ±Ë®à',
                    sum_months: 'Á∏ΩÊúàÊï∏:',
                    sum_weeks: 'Á∏ΩÈÄ±Êï∏:',
                    sum_days: 'Á∏ΩÂ§©Êï∏:',
                    sum_hours: 'Á∏ΩÂ∞èÊôÇ:',
                    fmt_ymd: '{y} Ê≠≤ {m} ÂÄãÊúà {d} Â§©',
                    err_future: 'Âá∫ÁîüÊó•Êúü‰∏çËÉΩÊôöÊñºË®àÁÆóÊó•Êúü„ÄÇ'
                },
                'ja': {
                    title: 'üéÇ Âπ¥ÈΩ¢Ë®àÁÆó',
                    lbl_dob: 'ÁîüÂπ¥ÊúàÊó•',
                    lbl_at: 'Âü∫Ê∫ñÊó•',
                    btn_calc: 'Âπ¥ÈΩ¢„ÇíË®àÁÆó',
                    res_age: 'Âπ¥ÈΩ¢',
                    res_summary: 'Ê¶ÇË¶Å',
                    sum_months: 'Á∑èÊúàÊï∞:',
                    sum_weeks: 'Á∑èÈÄ±Êï∞:',
                    sum_days: 'Á∑èÊó•Êï∞:',
                    sum_hours: 'Á∑èÊôÇÈñì:',
                    fmt_ymd: '{y} Ê≠≥ {m} „É∂Êúà {d} Êó•',
                    err_future: 'ÁîüÂπ¥ÊúàÊó•„ÅØÂü∫Ê∫ñÊó•„Çà„ÇäÂâç„Åß„ÅÇ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ'
                },
                'ru': {
                    title: 'üéÇ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–æ–∑—Ä–∞—Å—Ç–∞',
                    lbl_dob: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è',
                    lbl_at: '–ù–∞ –¥–∞—Ç—É',
                    btn_calc: '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
                    res_age: '–í–æ–∑—Ä–∞—Å—Ç',
                    res_summary: '–ò—Ç–æ–≥',
                    sum_months: '–í—Å–µ–≥–æ –º–µ—Å—è—Ü–µ–≤:',
                    sum_weeks: '–í—Å–µ–≥–æ –Ω–µ–¥–µ–ª—å:',
                    sum_days: '–í—Å–µ–≥–æ –¥–Ω–µ–π:',
                    sum_hours: '–í—Å–µ–≥–æ —á–∞—Å–æ–≤:',
                    fmt_ymd: '{y} –ª–µ—Ç {m} –º–µ—Å. {d} –¥–Ω.',
                    err_future: '–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –±—É–¥—É—â–µ–º.'
                },
                'es': {
                    title: 'üéÇ Calculadora de Edad',
                    lbl_dob: 'Fecha de Nacimiento',
                    lbl_at: 'Edad en la fecha',
                    btn_calc: 'Calcular Edad',
                    res_age: 'Edad',
                    res_summary: 'Resumen',
                    sum_months: 'Meses totales:',
                    sum_weeks: 'Semanas totales:',
                    sum_days: 'D√≠as totales:',
                    sum_hours: 'Horas totales:',
                    fmt_ymd: '{y} a√±os {m} meses {d} d√≠as',
                    err_future: 'La fecha de nacimiento no puede ser futura.'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('ac-lang').value;
                const texts = AgeCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="age_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(texts[key]) el.innerText = texts[key];
                });
                if(document.getElementById('ac-result-box').style.display !== 'none') {
                    AgeCalc.calc();
                }
            },

            calc: () => {
                const dobStr = document.getElementById('ac-dob').value;
                const targetStr = document.getElementById('ac-target').value;
                
                if (!dobStr || !targetStr) return;

                const dob = new Date(dobStr);
                const target = new Date(targetStr);
                
                const lang = document.getElementById('ac-lang').value;
                const txt = AgeCalc.i18n[lang];

                if (dob > target) {
                    alert(txt.err_future);
                    return;
                }

                // Calculate YMD
                let years = target.getFullYear() - dob.getFullYear();
                let months = target.getMonth() - dob.getMonth();
                let days = target.getDate() - dob.getDate();

                if (days < 0) {
                    months--;
                    // Get days in previous month
                    const prevMonth = new Date(target.getFullYear(), target.getMonth(), 0);
                    days += prevMonth.getDate();
                }

                if (months < 0) {
                    years--;
                    months += 12;
                }

                // Calculate Totals
                const diffTime = Math.abs(target - dob);
                const totalDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                const totalWeeks = Math.floor(totalDays / 7);
                const totalHours = totalDays * 24;
                const totalMonthsApprox = (years * 12) + months; // Rough approximation for summary

                // Display
                const resString = txt.fmt_ymd
                    .replace('{y}', years)
                    .replace('{m}', months)
                    .replace('{d}', days);

                document.getElementById('ac-main-res').innerText = resString;
                document.getElementById('res-months').innerText = totalMonthsApprox;
                document.getElementById('res-weeks').innerText = totalWeeks.toLocaleString();
                document.getElementById('res-days').innerText = totalDays.toLocaleString();
                document.getElementById('res-hours').innerText = totalHours.toLocaleString();

                document.getElementById('ac-result-box').classList.remove('hidden');
            }
        };

        // Init date inputs
        document.getElementById('ac-dob').value = '2000-01-01';
        document.getElementById('ac-target').valueAsDate = new Date();
    </script>
</body>
</html>