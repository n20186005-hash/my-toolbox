<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Percent Error Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="percent_error_calc">
    <meta name="category" content="math">
    <meta name="icon" content="%">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Percent Error Calculator">
    <meta name="description" content="Calculate percentage error between measured/experimental value and actual/theoretical value.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="百分比误差计算器">
    <meta name="lang-description-zh-CN" content="计算测量/实验值与实际/理论值之间的百分比误差。">
    
    <meta name="lang-title-zh-TW" content="百分比誤差計算器">
    <meta name="lang-description-zh-TW" content="計算測量/實驗值與實際/理論值之間的百分比誤差。">
    
    <meta name="lang-title-ja" content="誤差率計算ツール">
    <meta name="lang-description-ja" content="測定値/実験値と実際の値/理論値の間の誤差率を計算します。">
    
    <meta name="lang-title-ru" content="Калькулятор процентной ошибки">
    <meta name="lang-description-ru" content="Рассчитайте процентную ошибку между измеренным/экспериментальным значением и фактическим/теоретическим значением.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .result-container { word-break: break-all; }
        .formula-box { background: #f8fafc; padding: 10px; border-radius: 6px; font-family: monospace; margin: 10px 0; }
        .details-box { background: #e8f4f8; padding: 15px; border-radius: 8px; margin: 15px 0; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="percent_error_calc" 
         data-category="math" 
         data-title="Percent Error Calculator" 
         data-icon="%">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="percent-error-lang" onchange="PercentErrorCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">% Percent Error Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- 测量值输入 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="measured_value">Measured/Experimental Value</label>
                <input type="number" id="error-measured" step="any" value="25.5" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- 实际值输入 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="actual_value">Actual/Theoretical Value</label>
                <input type="number" id="error-actual" step="any" value="25" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- 精度选择 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="precision">Precision (decimal places)</label>
                <input type="number" id="error-precision" min="0" max="6" value="2" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- 计算按钮 -->
            <button onclick="PercentErrorCalc.calculate()" class="w-full bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Calculate Percent Error</button>
        </div>

        <!-- 错误提示 -->
        <div id="error-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- 结果展示 -->
        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100">
            <div class="text-sm text-gray-500 mb-2" data-i18n="result">Result</div>
            <div id="error-result" class="text-2xl font-bold text-blue-800 min-h-[60px] result-container">--</div>
            
            <!-- 公式展示 -->
            <div id="error-formula" class="formula-box mt-4"></div>
            
            <!-- 详细信息 -->
            <div class="details-box">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <div class="text-sm text-gray-500 mb-1" data-i18n="absolute_error">Absolute Error:</div>
                        <div id="absolute-error" class="text-md text-gray-800">--</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-500 mb-1" data-i18n="relative_error">Relative Error:</div>
                        <div id="relative-error" class="text-md text-gray-800">--</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 快速示例 -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="examples">Quick Examples:</p>
            <div class="grid grid-cols-2 gap-2 mt-2">
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="PercentErrorCalc.loadExample(25.5, 25, 2)">Measured=25.5, Actual=25</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="PercentErrorCalc.loadExample(9.8, 10, 2)">Measured=9.8, Actual=10</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="PercentErrorCalc.loadExample(150, 145, 2)">Measured=150, Actual=145</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="PercentErrorCalc.loadExample(0.52, 0.5, 3)">Measured=0.52, Actual=0.5</div>
            </div>
        </div>

        <!-- 说明信息 -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="notes">Notes:</p>
            <ul class="list-disc list-inside mt-2 space-y-1" data-i18n="notes_list">
                <li>Percent Error Formula: % Error = |(Measured - Actual) / Actual| × 100%</li>
                <li>Absolute Error: |Measured - Actual|</li>
                <li>Relative Error: |(Measured - Actual) / Actual|</li>
                <li>Percent error is always positive (absolute value)</li>
                <li>Actual value cannot be zero (would result in division by zero)</li>
            </ul>
        </div>
    </div>

    <script>
        const PercentErrorCalc = {
            i18n: {
                'en': {
                    title: '% Percent Error Calculator',
                    measured_value: 'Measured/Experimental Value',
                    actual_value: 'Actual/Theoretical Value',
                    precision: 'Precision (decimal places)',
                    calculate: 'Calculate Percent Error',
                    result: 'Result',
                    absolute_error: 'Absolute Error',
                    relative_error: 'Relative Error',
                    examples: 'Quick Examples:',
                    notes: 'Notes:',
                    notes_list: `
                        <li>Percent Error Formula: % Error = |(Measured - Actual) / Actual| × 100%</li>
                        <li>Absolute Error: |Measured - Actual|</li>
                        <li>Relative Error: |(Measured - Actual) / Actual|</li>
                        <li>Percent error is always positive (absolute value)</li>
                        <li>Actual value cannot be zero (would result in division by zero)</li>
                    `,
                    err_actual_zero: 'Actual value cannot be zero',
                    err_invalid_values: 'Please enter valid numeric values',
                    formula: 'Percent Error = |({measured} - {actual}) / {actual}| × 100% = {result}',
                    result_format: '{value}%'
                },
                'zh-CN': {
                    title: '% 百分比误差计算器',
                    measured_value: '测量/实验值',
                    actual_value: '实际/理论值',
                    precision: '精度（小数位数）',
                    calculate: '计算百分比误差',
                    result: '结果',
                    absolute_error: '绝对误差',
                    relative_error: '相对误差',
                    examples: '快速示例：',
                    notes: '注意：',
                    notes_list: `
                        <li>百分比误差公式：%误差 = |(测量值 - 实际值) / 实际值| × 100%</li>
                        <li>绝对误差：|测量值 - 实际值|</li>
                        <li>相对误差：|(测量值 - 实际值) / 实际值|</li>
                        <li>百分比误差始终为正值（绝对值）</li>
                        <li>实际值不能为零（否则会导致除以零）</li>
                    `,
                    err_actual_zero: '实际值不能为零',
                    err_invalid_values: '请输入有效的数值',
                    formula: '百分比误差 = |({measured} - {actual}) / {actual}| × 100% = {result}',
                    result_format: '{value}%'
                },
                'zh-TW': {
                    title: '% 百分比誤差計算器',
                    measured_value: '測量/實驗值',
                    actual_value: '實際/理論值',
                    precision: '精度（小數位數）',
                    calculate: '計算百分比誤差',
                    result: '結果',
                    absolute_error: '絕對誤差',
                    relative_error: '相對誤差',
                    examples: '快速示例：',
                    notes: '注意：',
                    notes_list: `
                        <li>百分比誤差公式：%誤差 = |(測量值 - 實際值) / 實際值| × 100%</li>
                        <li>絕對誤差：|測量值 - 實際值|</li>
                        <li>相對誤差：|(測量值 - 實際值) / 實際值|</li>
                        <li>百分比誤差始終為正值（絕對值）</li>
                        <li>實際值不能為零（否則會導致除以零）</li>
                    `,
                    err_actual_zero: '實際值不能為零',
                    err_invalid_values: '請輸入有效的數值',
                    formula: '百分比誤差 = |({measured} - {actual}) / {actual}| × 100% = {result}',
                    result_format: '{value}%'
                },
                'ja': {
                    title: '% 誤差率計算ツール',
                    measured_value: '測定値/実験値',
                    actual_value: '実際の値/理論値',
                    precision: '精度（小数桁数）',
                    calculate: '誤差率を計算',
                    result: '結果',
                    absolute_error: '絶対誤差',
                    relative_error: '相対誤差',
                    examples: 'クイックサンプル：',
                    notes: '注意：',
                    notes_list: `
                        <li>誤差率の公式：%誤差 = |(測定値 - 実際の値) / 実際の値| × 100%</li>
                        <li>絶対誤差：|測定値 - 実際の値|</li>
                        <li>相対誤差：|(測定値 - 実際の値) / 実際の値|</li>
                        <li>誤差率は常に正の値です（絶対値）</li>
                        <li>実際の値はゼロにすることができません（ゼロ除算になります）</li>
                    `,
                    err_actual_zero: '実際の値はゼロにできません',
                    err_invalid_values: '有効な数値を入力してください',
                    formula: '誤差率 = |({measured} - {actual}) / {actual}| × 100% = {result}',
                    result_format: '{value}%'
                },
                'ru': {
                    title: '% Калькулятор процентной ошибки',
                    measured_value: 'Измеренное/экспериментальное значение',
                    actual_value: 'Фактическое/теоретическое значение',
                    precision: 'Точность (десятичные знаки)',
                    calculate: 'Рассчитать процентную ошибку',
                    result: 'Результат',
                    absolute_error: 'Абсолютная ошибка',
                    relative_error: 'Относительная ошибка',
                    examples: 'Быстрые примеры:',
                    notes: 'Примечания:',
                    notes_list: `
                        <li>Формула процентной ошибки: % Ошибка = |(Измеренное - Фактическое) / Фактическое| × 100%</li>
                        <li>Абсолютная ошибка: |Измеренное - Фактическое|</li>
                        <li>Относительная ошибка: |(Измеренное - Фактическое) / Фактическое|</li>
                        <li>Процентная ошибка всегда положительна (абсолютное значение)</li>
                        <li>Фактическое значение не может быть нулевым (приведет к делению на ноль)</li>
                    `,
                    err_actual_zero: 'Фактическое значение не может быть нулевым',
                    err_invalid_values: 'Пожалуйста, введите действительные числовые значения',
                    formula: 'Процентная ошибка = |({measured} - {actual}) / {actual}| × 100% = {result}',
                    result_format: '{value}%'
                }
            },

            init: () => {
                // 设置默认值
                document.getElementById('error-measured').value = '25.5';
                document.getElementById('error-actual').value = '25';
                document.getElementById('error-precision').value = '2';
            },

            loadExample: (measured, actual, precision) => {
                document.getElementById('error-measured').value = measured;
                document.getElementById('error-actual').value = actual;
                document.getElementById('error-precision').value = precision;
                PercentErrorCalc.calculate();
            },

            changeLang: () => {
                const lang = document.getElementById('percent-error-lang').value;
                const texts = PercentErrorCalc.i18n[lang];
                
                // 更新普通文本
                document.querySelectorAll('[data-id="percent_error_calc"] [data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) {
                        if (key === 'notes_list') {
                            el.innerHTML = texts[key];
                        } else {
                            el.innerText = texts[key];
                        }
                    }
                });
            },

            showError: (message) => {
                const errorEl = document.getElementById('error-error');
                errorEl.innerText = message;
                errorEl.classList.remove('hidden');
            },

            clearError: () => {
                const errorEl = document.getElementById('error-error');
                errorEl.classList.add('hidden');
                errorEl.innerText = '';
            },

            calculate: () => {
                const lang = document.getElementById('percent-error-lang').value;
                const texts = PercentErrorCalc.i18n[lang];
                const precision = parseInt(document.getElementById('error-precision').value) || 2;
                
                PercentErrorCalc.clearError();
                
                try {
                    // 获取输入值
                    const measured = parseFloat(document.getElementById('error-measured').value);
                    const actual = parseFloat(document.getElementById('error-actual').value);
                    
                    // 验证输入
                    if (isNaN(measured) || isNaN(actual)) {
                        throw new Error(texts.err_invalid_values);
                    }
                    
                    if (actual === 0) {
                        throw new Error(texts.err_actual_zero);
                    }
                    
                    // 计算误差值
                    const absoluteError = Math.abs(measured - actual);
                    const relativeError = absoluteError / Math.abs(actual);
                    const percentError = relativeError * 100;
                    
                    // 格式化结果
                    const formattedPercent = percentError.toFixed(precision);
                    const formattedAbsolute = absoluteError.toFixed(precision);
                    const formattedRelative = relativeError.toFixed(precision);
                    
                    // 显示结果
                    document.getElementById('error-result').innerText = texts.result_format.replace('{value}', formattedPercent);
                    
                    // 显示公式
                    const formulaEl = document.getElementById('error-formula');
                    formulaEl.innerText = texts.formula
                        .replace('{measured}', measured)
                        .replace('{actual}', actual)
                        .replace('{result}', formattedPercent + '%');
                    
                    // 显示详细信息
                    document.getElementById('absolute-error').innerText = formattedAbsolute;
                    document.getElementById('relative-error').innerText = formattedRelative;
                    
                } catch (e) {
                    PercentErrorCalc.showError(e.message);
                    document.getElementById('error-result').innerText = '--';
                    document.getElementById('error-formula').innerText = '';
                    document.getElementById('absolute-error').innerText = '--';
                    document.getElementById('relative-error').innerText = '--';
                }
            }
        };

        // 初始化
        document.addEventListener('DOMContentLoaded', PercentErrorCalc.init);
        
        // 自动匹配浏览器语言
        document.addEventListener('DOMContentLoaded', () => {
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('percent-error-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    PercentErrorCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>