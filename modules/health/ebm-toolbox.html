<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Essential Meta Tags -->
    <meta name="category" content="health">
    <meta name="icon" content="ü©∫">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evidence-Based Medicine Calculator Toolbox</title>
    
    <link rel="canonical" href="https://toolboxpro.top/modules/health/ebm-toolbox.html" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#0284c7', // Sky Blue for Medical
                        primaryDark: '#0369a1',
                        slate: {
                            850: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['Fira Code', 'monospace'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(10px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap'); /* Traditional Chinese */
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap'); /* Simplified Chinese */

        body { font-family: 'Inter', sans-serif; }
        
        /* Font adjustments for specific languages */
        body[data-lang="zh-TW"] { font-family: 'Noto Sans TC', sans-serif; }
        body[data-lang="zh-CN"] { font-family: 'Noto Sans SC', sans-serif; }

        /* Glassmorphism */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.6);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
        }
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2);
        }

        /* Hover Cards */
        .card {
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: #0284c7;
        }
        
        /* Tab Buttons */
        .toggle-btn {
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        .toggle-btn.active {
            background-color: white;
            color: #0284c7;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transform: scale(1.05);
        }
        .dark .toggle-btn.active {
            background-color: #0284c7;
            color: white;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
        }
        .toggle-btn:not(.active) {
            color: #64748b;
        }
        .dark .toggle-btn:not(.active) {
            color: #94a3b8;
        }
        .dark .toggle-btn:not(.active):hover {
            color: white;
            background-color: rgba(255,255,255,0.05);
        }

        /* Inputs */
        .input-group label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: #64748b;
            font-weight: 700;
            margin-bottom: 0.35rem;
            display: block;
        }
        .dark .input-group label { color: #94a3b8; }
        
        input[type="number"], input[type="text"], textarea {
            transition: all 0.2s;
        }
        input[type="number"]:focus, input[type="text"]:focus, textarea:focus {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px -1px rgba(2, 132, 199, 0.1);
        }
        
        /* Gradient Header */
        .bg-gradient-header {
            background: linear-gradient(180deg, rgba(2, 132, 199, 0.08) 0%, rgba(255,255,255,0) 100%);
        }
        .dark .bg-gradient-header {
            background: linear-gradient(180deg, rgba(3, 105, 161, 0.2) 0%, rgba(15, 23, 42, 0) 100%);
        }

        /* 2x2 Grid Table Styling */
        .matrix-input {
            width: 100%;
            text-align: center;
            font-family: 'Fira Code', monospace;
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #e2e8f0;
            transition: all 0.2s;
            font-size: 1.1rem;
        }
        .dark .matrix-input {
            background-color: #1e293b;
            border-color: #334155;
            color: white;
        }
        .matrix-input:focus {
            outline: none;
            border-color: #0284c7;
            ring: 2px solid #0284c7;
            background-color: #f0f9ff;
        }
        .dark .matrix-input:focus {
            background-color: #0f172a;
        }
        
        .result-row {
            display: flex;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            align-items: center;
        }
        .dark .result-row { border-bottom: 1px solid rgba(255,255,255,0.05); }

        /* Educational Content Styles */
        .edu-section {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px dashed rgba(0,0,0,0.1);
        }
        .dark .edu-section { border-top-color: rgba(255,255,255,0.1); }
        
        .edu-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        .dark .edu-title { color: #f8fafc; }

        .edu-card {
            background-color: rgba(255,255,255,0.6);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }
        .edu-card:hover {
            background-color: rgba(255,255,255,0.8);
        }
        .dark .edu-card {
            background-color: rgba(30, 41, 59, 0.4);
            border-color: rgba(255,255,255,0.05);
        }
        .dark .edu-card:hover {
            background-color: rgba(30, 41, 59, 0.6);
        }

        .toggle-answer-btn {
            font-size: 0.85rem;
            font-weight: 600;
            color: #0284c7;
            cursor: pointer;
            text-decoration: none;
            margin-top: 0.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            border-radius: 0.375rem;
            transition: background-color 0.2s;
        }
        .toggle-answer-btn:hover { background-color: rgba(2, 132, 199, 0.1); }
        
        table.edu-table {
            width: 100%;
            font-size: 0.85rem;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 0.5rem;
            overflow: hidden;
            margin: 1rem 0;
            border: 1px solid #e2e8f0;
        }
        .dark table.edu-table { border-color: #334155; }
        
        table.edu-table th, table.edu-table td {
            padding: 0.75rem;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
            border-right: 1px solid #e2e8f0;
        }
        .dark table.edu-table th, .dark table.edu-table td { border-color: #334155; }
        
        table.edu-table th { background-color: #f8fafc; font-weight: 600; color: #475569; }
        .dark table.edu-table th { background-color: #1e293b; color: #cbd5e1; }
        table.edu-table tr:last-child td { border-bottom: none; }
        table.edu-table tr td:last-child, table.edu-table th:last-child { border-right: none; }

        /* Modal */
        #shareModal { backdrop-filter: blur(8px); transition: opacity 0.3s ease; }
        .hidden { display: none; }
        
        /* Scrollbar hide */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-slate-50 text-slate-800 font-sans leading-relaxed dark:bg-slate-950 dark:text-slate-100 transition-colors duration-300 min-h-screen flex flex-col selection:bg-sky-100 dark:selection:bg-sky-900" data-lang="en">

    <!-- Top Toolbar -->
    <div class="fixed top-4 right-4 z-50 flex gap-3">
        <!-- Share Button -->
        <button onclick="openShareModal()" class="glass-card p-2.5 rounded-xl shadow-sm hover:bg-white/80 dark:hover:bg-slate-800/80 transition-all text-sky-600 dark:text-sky-400 hover:scale-105" title="Share Tool">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>
        </button>
        <!-- Theme Toggle -->
        <button onclick="toggleTheme()" class="glass-card p-2.5 rounded-xl shadow-sm hover:bg-white/80 dark:hover:bg-slate-800/80 transition-all hover:scale-105" title="Switch Theme">
            <svg id="theme-icon-sun" class="w-5 h-5 text-amber-500 hidden" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"></path></svg>
            <svg id="theme-icon-moon" class="w-5 h-5 text-slate-400" fill="currentColor" viewBox="0 0 20 20"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg>
        </button>
        <!-- Language -->
        <div class="relative">
            <select id="lang-select" onchange="changeLanguage(this.value)" class="appearance-none glass-card pl-3 pr-10 py-2.5 rounded-xl text-sm font-medium text-slate-600 dark:text-slate-300 focus:outline-none focus:ring-2 focus:ring-sky-500/50 cursor-pointer hover:bg-white/80 dark:hover:bg-slate-800/80 transition-colors">
                <option value="en">üá∫üá∏ English</option>
                <option value="zh-CN">üá®üá≥ ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">üáπüáº ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="es">üá™üá∏ Espa√±ol</option>
                <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π</option>
                <option value="hi">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
                <option value="pl">üáµüá± Polski</option>
            </select>
        </div>
    </div>

    <!-- Header -->
    <header class="bg-gradient-header pt-24 pb-12 px-4 border-b border-slate-200/50 dark:border-slate-800/50 relative">
        <div class="max-w-4xl mx-auto text-center animate-fade-in">
            <div class="inline-block p-4 bg-white dark:bg-slate-800 rounded-3xl mb-6 shadow-md ring-1 ring-slate-900/5">
                <span class="text-5xl drop-shadow-sm">ü©∫</span>
            </div>
            <h1 id="ui-title" class="text-3xl md:text-5xl font-extrabold text-slate-800 dark:text-white mb-4 tracking-tight">EBM Toolbox</h1>
            <p id="ui-subtitle" class="text-slate-500 dark:text-slate-400 max-w-2xl mx-auto text-lg leading-relaxed font-medium">
                Evidence-Based Medicine Calculator Suite. A guide for personal use and testing purposes.
            </p>
            <div class="mt-6 flex justify-center items-center gap-2 text-xs font-semibold bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 py-2 px-4 rounded-full inline-flex border border-red-100 dark:border-red-900/30">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
                <span id="ui-disclaimer">Medical decisions should NOT be based solely on the results of this program.</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="max-w-6xl mx-auto w-full px-4 py-8">
        
        <!-- Tabs -->
        <div class="flex justify-center mb-10 overflow-x-auto pb-4 md:pb-0 scrollbar-hide sticky top-4 z-40 pointer-events-none">
            <div class="bg-white/80 dark:bg-slate-800/80 backdrop-blur-md p-1.5 rounded-2xl inline-flex shadow-lg ring-1 ring-slate-200 dark:ring-slate-700 pointer-events-auto">
                <button onclick="switchTab('nnt')" id="btn-nnt" class="toggle-btn active px-5 py-3 rounded-xl font-bold text-xs md:text-sm flex items-center gap-2">
                    <span>üíä</span> <span id="tab-nnt">OR to NNT</span>
                </button>
                <button onclick="switchTab('diag')" id="btn-diag" class="toggle-btn px-5 py-3 rounded-xl font-bold text-xs md:text-sm flex items-center gap-2">
                    <span>üî¨</span> <span id="tab-diag">Diagnostic</span>
                </button>
                <button onclick="switchTab('pros')" id="btn-pros" class="toggle-btn px-5 py-3 rounded-xl font-bold text-xs md:text-sm flex items-center gap-2">
                    <span>üîÆ</span> <span id="tab-pros">Prospective</span>
                </button>
                <button onclick="switchTab('case')" id="btn-case" class="toggle-btn px-5 py-3 rounded-xl font-bold text-xs md:text-sm flex items-center gap-2">
                    <span>üîé</span> <span id="tab-case">Case-Control</span>
                </button>
                <button onclick="switchTab('rct')" id="btn-rct" class="toggle-btn px-5 py-3 rounded-xl font-bold text-xs md:text-sm flex items-center gap-2">
                    <span>üé≤</span> <span id="tab-rct">RCT</span>
                </button>
                <button onclick="switchTab('edurx')" id="btn-edurx" class="toggle-btn px-5 py-3 rounded-xl font-bold text-xs md:text-sm flex items-center gap-2">
                    <span>üéì</span> <span id="tab-edurx">Edu Rx</span>
                </button>
            </div>
        </div>

        <!-- 1. OR to NNT Converter -->
        <div id="section-nnt" class="glass-card rounded-3xl p-1 shadow-2xl animate-slide-up ring-1 ring-slate-900/5 dark:ring-white/10">
            <div class="bg-white/60 dark:bg-slate-900/60 rounded-2xl p-6 md:p-10 backdrop-blur-xl">
                <div class="flex items-center justify-between mb-8 border-b border-slate-200 dark:border-slate-700 pb-4">
                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3" id="title-nnt">
                        <span class="bg-sky-100 dark:bg-sky-900 p-2 rounded-lg text-2xl">üíä</span>
                        Odds Ratio to NNT Converter
                    </h2>
                    <span class="text-xs bg-sky-100 dark:bg-sky-900/40 text-sky-700 dark:text-sky-300 px-3 py-1 rounded-full font-medium border border-sky-200 dark:border-sky-800">Conversion</span>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                    <div class="space-y-8">
                        <div class="bg-blue-50 dark:bg-blue-900/20 p-5 rounded-2xl text-sm text-slate-600 dark:text-slate-300 border border-blue-100 dark:border-blue-900/30">
                            <h4 id="instr-nnt-title" class="font-bold text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                Instructions
                            </h4>
                            <ul class="list-disc pl-5 space-y-1">
                                <li id="instr-nnt-1">Enter a number > 1 or < 1 in Odds Ratio (OR).</li>
                                <li id="instr-nnt-2">Enter PEER between 0 and 1 (Patient's Expected Event Rate).</li>
                            </ul>
                        </div>
                        <div class="space-y-6">
                            <div class="input-group">
                                <label id="lbl-or">Odds Ratio (OR)</label>
                                <div class="relative">
                                    <input type="number" id="nnt-or" placeholder="e.g. 0.75" step="0.01" class="w-full px-4 py-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-sky-500 font-mono text-lg shadow-sm" oninput="calculateNNT()">
                                </div>
                            </div>
                            <div class="input-group">
                                <label id="lbl-peer">Patient's Expected Event Rate (PEER)</label>
                                <div class="relative">
                                    <input type="number" id="nnt-peer" placeholder="e.g. 0.20" step="0.01" max="1" min="0" class="w-full px-4 py-4 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 focus:ring-2 focus:ring-sky-500 font-mono text-lg shadow-sm" oninput="calculateNNT()">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-900 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 flex flex-col justify-center items-center shadow-inner relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4 opacity-5">
                            <svg class="w-32 h-32" fill="currentColor" viewBox="0 0 24 24"><path d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
                        </div>
                        <p class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-6 relative z-10" id="res-nnt-label">Number Needed to Treat (NNT)</p>
                        <div id="res-nnt-val" class="text-7xl font-black text-sky-600 dark:text-sky-400 tracking-tight font-mono relative z-10 drop-shadow-sm">--</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. Diagnostic Test Calculator -->
        <div id="section-diag" class="glass-card rounded-3xl p-1 shadow-2xl animate-slide-up ring-1 ring-slate-900/5 dark:ring-white/10 hidden">
            <div class="bg-white/60 dark:bg-slate-900/60 rounded-2xl p-6 md:p-10 backdrop-blur-xl">
                <div class="flex items-center justify-between mb-6 border-b border-slate-200 dark:border-slate-700 pb-4">
                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3" id="title-diag">
                        <span class="bg-purple-100 dark:bg-purple-900 p-2 rounded-lg text-2xl">üî¨</span>
                        Diagnostic Test Calculator
                    </h2>
                    <span class="text-xs bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 px-3 py-1 rounded-full font-medium border border-purple-200 dark:border-purple-800">2x2 Table</span>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                    <div>
                        <!-- 2x2 Matrix -->
                        <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl mb-6 border border-slate-200 dark:border-slate-700 shadow-sm">
                            <h4 id="diag-table-title" class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-4 text-center">Contingency Table</h4>
                            <div class="grid grid-cols-3 gap-4 text-center mb-2">
                                <div></div>
                                <div class="text-xs font-bold uppercase text-rose-500 bg-rose-50 dark:bg-rose-900/20 py-1 rounded" id="col-disease">Disease (+)</div>
                                <div class="text-xs font-bold uppercase text-emerald-500 bg-emerald-50 dark:bg-emerald-900/20 py-1 rounded" id="col-no-disease">No Disease (-)</div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center mb-4">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-pos">Test Pos (+)</div>
                                <input type="number" id="diag-a" class="matrix-input bg-rose-50/50 dark:bg-slate-700/50" placeholder="A (TP)" oninput="calcDiag()">
                                <input type="number" id="diag-b" class="matrix-input bg-slate-50 dark:bg-slate-700/50" placeholder="B (FP)" oninput="calcDiag()">
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-neg">Test Neg (-)</div>
                                <input type="number" id="diag-c" class="matrix-input bg-slate-50 dark:bg-slate-700/50" placeholder="C (FN)" oninput="calcDiag()">
                                <input type="number" id="diag-d" class="matrix-input bg-emerald-50/50 dark:bg-slate-700/50" placeholder="D (TN)" oninput="calcDiag()">
                            </div>
                        </div>

                        <!-- Option 2: LR input -->
                        <div class="border-t border-slate-200 dark:border-slate-700 pt-6 mt-4">
                            <p class="text-xs font-bold text-slate-400 mb-4 uppercase tracking-wider flex items-center gap-2" id="opt-lr">
                                <span>‚ö°</span> Or enter Likelihood Ratios directly:
                            </p>
                            <div class="grid grid-cols-2 gap-4">
                                <div class="input-group">
                                    <label>LR+</label>
                                    <input type="number" id="diag-lr-pos" class="w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-2 focus:ring-purple-500 font-mono shadow-sm" oninput="calcDiagFromLR()">
                                </div>
                                <div class="input-group">
                                    <label>LR-</label>
                                    <input type="number" id="diag-lr-neg" class="w-full p-3 rounded-xl border border-slate-200 dark:border-slate-700 dark:bg-slate-800 focus:ring-2 focus:ring-purple-500 font-mono shadow-sm" oninput="calcDiagFromLR()">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Results -->
                    <div class="bg-gradient-to-br from-slate-50 to-white dark:from-slate-800 dark:to-slate-900 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 h-full shadow-inner flex flex-col">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-6 flex items-center gap-2" id="res-header">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                            Results (Estimate & 95% CI)
                        </h3>
                        
                        <div class="space-y-4 text-sm flex-1">
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium" id="res-sens">Sensitivity</span>
                                <span id="val-sens" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium" id="res-spec">Specificity</span>
                                <span id="val-spec" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium" id="res-ppv">PPV</span>
                                <span id="val-ppv" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium" id="res-npv">NPV</span>
                                <span id="val-npv" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="my-4 border-t border-slate-200 dark:border-slate-700"></div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">Likelihood Ratio + (LR+)</span>
                                <span id="val-lrp" class="font-mono font-bold text-blue-600 text-lg">----</span>
                            </div>
                            <div class="result-row border-none group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">Likelihood Ratio - (LR-)</span>
                                <span id="val-lrn" class="font-mono font-bold text-blue-600 text-lg">----</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Content: Sensitivity & Specificity -->
                <div class="edu-section">
                    <h3 class="edu-title" id="edu-sens-title">
                        <svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        More Details on Sensitivity and Specificity
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-slate-600 dark:text-slate-300">
                        <div class="edu-card" id="edu-sens-def">
                            <!-- Dynamic Content -->
                        </div>
                        <div class="edu-card" id="edu-sens-formula">
                            <!-- Dynamic Content -->
                        </div>
                        <div class="edu-card md:col-span-2" id="edu-sens-practice">
                            <!-- Dynamic Content -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 3. Prospective Study Calculator -->
        <div id="section-pros" class="glass-card rounded-3xl p-1 shadow-2xl animate-slide-up ring-1 ring-slate-900/5 dark:ring-white/10 hidden">
            <div class="bg-white/60 dark:bg-slate-900/60 rounded-2xl p-6 md:p-10 backdrop-blur-xl">
                <div class="flex items-center justify-between mb-6 border-b border-slate-200 dark:border-slate-700 pb-4">
                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3" id="title-pros">
                        <span class="bg-green-100 dark:bg-green-900 p-2 rounded-lg text-2xl">üîÆ</span>
                        Prospective Study Calculator
                    </h2>
                    <span class="text-xs bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-300 px-3 py-1 rounded-full font-medium border border-green-200 dark:border-green-800">Cohort</span>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                    <div>
                        <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm">
                            <h4 id="pros-table-title" class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-4 text-center">Outcome Table</h4>
                            <div class="grid grid-cols-3 gap-4 text-center mb-2">
                                <div></div>
                                <div class="text-xs font-bold uppercase text-slate-500 bg-slate-50 dark:bg-slate-900/50 py-1 rounded" id="col-outcome">Outcome (+)</div>
                                <div class="text-xs font-bold uppercase text-slate-500 bg-slate-50 dark:bg-slate-900/50 py-1 rounded" id="col-no-outcome">No Outcome (-)</div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center mb-4">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-treated">Treated</div>
                                <input type="number" id="pros-a" class="matrix-input" placeholder="A" oninput="calcPros()">
                                <input type="number" id="pros-b" class="matrix-input" placeholder="B" oninput="calcPros()">
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-not-treated">Not Treated</div>
                                <input type="number" id="pros-c" class="matrix-input" placeholder="C" oninput="calcPros()">
                                <input type="number" id="pros-d" class="matrix-input" placeholder="D" oninput="calcPros()">
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-slate-50 to-white dark:from-slate-800 dark:to-slate-900 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 h-full shadow-inner flex flex-col">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2" id="res-header-pros">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                            Results
                        </h3>
                        <div class="space-y-4 flex-1">
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">Chi-squared</span>
                                <span id="pros-chi" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">Relative Risk (RR)</span>
                                <span id="pros-rr" class="font-mono font-bold text-blue-600 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">ARR</span>
                                <span id="pros-arr" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="my-4 border-t border-slate-200 dark:border-slate-700"></div>
                            <div class="result-row border-none pt-2 bg-green-50 dark:bg-green-900/10 rounded-xl px-4 py-4">
                                <span class="text-green-700 dark:text-green-300 font-bold uppercase text-xs tracking-wider">NNT</span>
                                <span id="pros-nnt" class="font-mono font-black text-3xl text-green-600 dark:text-green-400">----</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Content: OR vs RR -->
                <div class="edu-section">
                    <h3 class="edu-title" id="edu-rr-title">
                        <svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                        Calculation of Odds Ratio (OR) / Relative Risk (RR)
                    </h3>
                    <div class="edu-card text-sm text-slate-600 dark:text-slate-300" id="edu-rr-content">
                        <!-- Dynamic Content -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 4. Case-Control Study Calculator -->
        <div id="section-case" class="glass-card rounded-3xl p-1 shadow-2xl animate-slide-up ring-1 ring-slate-900/5 dark:ring-white/10 hidden">
            <div class="bg-white/60 dark:bg-slate-900/60 rounded-2xl p-6 md:p-10 backdrop-blur-xl">
                <div class="flex items-center justify-between mb-6 border-b border-slate-200 dark:border-slate-700 pb-4">
                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3" id="title-case">
                        <span class="bg-amber-100 dark:bg-amber-900 p-2 rounded-lg text-2xl">üîé</span>
                        Case-Control Study Calculator
                    </h2>
                    <span class="text-xs bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300 px-3 py-1 rounded-full font-medium border border-amber-200 dark:border-amber-800">Retrospective</span>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                    <div>
                        <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm">
                            <h4 id="case-table-title" class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-4 text-center">Exposure Table</h4>
                            <div class="grid grid-cols-3 gap-4 text-center mb-2">
                                <div></div>
                                <div class="text-xs font-bold uppercase text-slate-500 bg-slate-50 dark:bg-slate-900/50 py-1 rounded" id="col-case">Case</div>
                                <div class="text-xs font-bold uppercase text-slate-500 bg-slate-50 dark:bg-slate-900/50 py-1 rounded" id="col-control">Control</div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center mb-4">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-exposed">Exposed</div>
                                <input type="number" id="case-a" class="matrix-input" placeholder="A" oninput="calcCase()">
                                <input type="number" id="case-b" class="matrix-input" placeholder="B" oninput="calcCase()">
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-not-exposed">Not Exposed</div>
                                <input type="number" id="case-c" class="matrix-input" placeholder="C" oninput="calcCase()">
                                <input type="number" id="case-d" class="matrix-input" placeholder="D" oninput="calcCase()">
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-slate-50 to-white dark:from-slate-800 dark:to-slate-900 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 h-full shadow-inner flex flex-col justify-center">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2" id="res-header-case">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path></svg>
                            Results
                        </h3>
                        <div class="space-y-4">
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">Chi-squared</span>
                                <span id="case-chi" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="my-4 border-t border-slate-200 dark:border-slate-700"></div>
                            <div class="result-row border-none pt-4 bg-amber-50 dark:bg-amber-900/10 rounded-xl px-4 py-6 flex-col items-start gap-2">
                                <span class="text-amber-700 dark:text-amber-400 font-bold text-sm uppercase tracking-wider">Odds Ratio (OR)</span>
                                <div class="w-full flex justify-between items-baseline">
                                    <span id="case-or" class="font-mono font-black text-4xl text-amber-600 dark:text-amber-500">----</span>
                                    <div class="text-xs text-amber-600/70 dark:text-amber-400/70 font-mono" id="case-ci">95% CI: ----</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Content: Case-Control Specific -->
                <div class="edu-section">
                    <h3 class="edu-title" id="edu-or-title">
                        <svg class="w-6 h-6 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                        Why Odds Ratio?
                    </h3>
                    <div class="edu-card text-sm text-slate-600 dark:text-slate-300" id="edu-or-content">
                         <!-- Dynamic -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 5. RCT Calculator -->
        <div id="section-rct" class="glass-card rounded-3xl p-1 shadow-2xl animate-slide-up ring-1 ring-slate-900/5 dark:ring-white/10 hidden">
            <div class="bg-white/60 dark:bg-slate-900/60 rounded-2xl p-6 md:p-10 backdrop-blur-xl">
                <div class="flex items-center justify-between mb-6 border-b border-slate-200 dark:border-slate-700 pb-4">
                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3" id="title-rct">
                        <span class="bg-indigo-100 dark:bg-indigo-900 p-2 rounded-lg text-2xl">üé≤</span>
                        RCT Calculator
                    </h2>
                    <span class="text-xs bg-indigo-100 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 px-3 py-1 rounded-full font-medium border border-indigo-200 dark:border-indigo-800">Trial</span>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                    <div>
                        <div class="bg-white dark:bg-slate-800 p-6 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm">
                            <h4 id="rct-table-title" class="text-sm font-bold text-slate-500 uppercase tracking-wider mb-4 text-center">Results Table</h4>
                            <div class="grid grid-cols-3 gap-4 text-center mb-2">
                                <div></div>
                                <div class="text-xs font-bold uppercase text-slate-500 bg-slate-50 dark:bg-slate-900/50 py-1 rounded" id="col-outcome-rct">Outcome</div>
                                <div class="text-xs font-bold uppercase text-slate-500 bg-slate-50 dark:bg-slate-900/50 py-1 rounded" id="col-no-outcome-rct">No Outcome</div>
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center mb-4">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-exp">Experimental</div>
                                <input type="number" id="rct-a" class="matrix-input" placeholder="A" oninput="calcRCT()">
                                <input type="number" id="rct-b" class="matrix-input" placeholder="B" oninput="calcRCT()">
                            </div>
                            <div class="grid grid-cols-3 gap-4 items-center">
                                <div class="text-xs font-bold uppercase text-slate-500 text-right pr-2" id="row-ctrl">Control</div>
                                <input type="number" id="rct-c" class="matrix-input" placeholder="C" oninput="calcRCT()">
                                <input type="number" id="rct-d" class="matrix-input" placeholder="D" oninput="calcRCT()">
                            </div>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-slate-50 to-white dark:from-slate-800 dark:to-slate-900 rounded-2xl p-8 border border-slate-200 dark:border-slate-700 h-full shadow-inner flex flex-col">
                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4 flex items-center gap-2" id="res-header-rct">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"></path></svg>
                            Results
                        </h3>
                        <div class="space-y-4 flex-1">
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">Chi-squared</span>
                                <span id="rct-chi" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">Relative Risk (RR)</span>
                                <span id="rct-rr" class="font-mono font-bold text-blue-600 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">RRR</span>
                                <span id="rct-rrr" class="font-mono font-bold text-indigo-600 text-lg">----</span>
                            </div>
                            <div class="result-row group hover:bg-slate-100 dark:hover:bg-slate-800/50 rounded-lg px-2 transition-colors">
                                <span class="text-slate-600 dark:text-slate-400 font-medium">ARR</span>
                                <span id="rct-arr" class="font-mono font-bold text-slate-800 dark:text-slate-200 text-lg">----</span>
                            </div>
                            <div class="my-4 border-t border-slate-200 dark:border-slate-700"></div>
                            <div class="result-row border-none pt-2 bg-green-50 dark:bg-green-900/10 rounded-xl px-4 py-4">
                                <span class="text-green-700 dark:text-green-300 font-bold uppercase text-xs tracking-wider">NNT</span>
                                <span id="rct-nnt" class="font-mono font-black text-3xl text-green-600 dark:text-green-400">----</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Content: NNT Details -->
                <div class="edu-section">
                    <h3 class="edu-title" id="edu-nnt-title">
                        <svg class="w-6 h-6 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg>
                        More Details on Number Needed to Treat (NNT)
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-slate-600 dark:text-slate-300">
                        <div class="edu-card" id="edu-nnt-def">
                             <!-- Dynamic -->
                        </div>
                        <div class="edu-card" id="edu-nnt-example">
                             <!-- Dynamic -->
                        </div>
                        <div class="edu-card md:col-span-2" id="edu-nnt-practice">
                             <!-- Dynamic -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 6. Educational Prescriptions (New Tab) -->
        <div id="section-edurx" class="glass-card rounded-3xl p-1 shadow-2xl animate-slide-up ring-1 ring-slate-900/5 dark:ring-white/10 hidden">
            <div class="bg-white/60 dark:bg-slate-900/60 rounded-2xl p-6 md:p-10 backdrop-blur-xl">
                <div class="flex items-center justify-between mb-8 border-b border-slate-200 dark:border-slate-700 pb-4">
                    <h2 class="text-2xl font-bold text-slate-800 dark:text-white flex items-center gap-3" id="title-edurx">
                        <span class="bg-pink-100 dark:bg-pink-900 p-2 rounded-lg text-2xl">üéì</span>
                        Educational Prescriptions Logbook
                    </h2>
                    <span class="text-xs bg-pink-100 dark:bg-pink-900/40 text-pink-700 dark:text-pink-300 px-3 py-1 rounded-full font-medium border border-pink-200 dark:border-pink-800">Learning</span>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-sm text-slate-600 dark:text-slate-300">
                    <div class="space-y-6">
                        <div class="edu-card bg-white dark:bg-slate-800">
                            <h3 id="edurx-what-title" class="font-bold text-lg mb-3 text-slate-800 dark:text-white flex items-center gap-2">
                                <span class="text-xl">ü§î</span> What is it?
                            </h3>
                            <div id="edurx-what-content"></div>
                        </div>
                        <div class="edu-card bg-white dark:bg-slate-800">
                            <h3 id="edurx-why-title" class="font-bold text-lg mb-3 text-slate-800 dark:text-white flex items-center gap-2">
                                <span class="text-xl">üí°</span> Why use them?
                            </h3>
                            <div id="edurx-why-content"></div>
                        </div>
                    </div>
                    <div class="space-y-6">
                        <div class="edu-card bg-white dark:bg-slate-800">
                            <h3 id="edurx-tips-title" class="font-bold text-lg mb-3 text-slate-800 dark:text-white flex items-center gap-2">
                                <span class="text-xl">üöÄ</span> Tips for Success
                            </h3>
                            <div id="edurx-tips-content"></div>
                        </div>
                        <div class="bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-800 dark:to-slate-900 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 text-center shadow-inner">
                            <div class="text-5xl mb-4">üì•</div>
                            <h4 id="edurx-dl-title" class="font-bold text-xl text-slate-800 dark:text-white mb-2">Download Resources</h4>
                            <p id="edurx-dl-content" class="text-sm mb-6 text-slate-500 dark:text-slate-400">Access templates and the online logbook system.</p>
                            <button id="edurx-dl-btn" class="bg-slate-800 dark:bg-white text-white dark:text-slate-900 px-8 py-3 rounded-xl font-bold text-sm hover:scale-105 transition-all shadow-lg hover:shadow-xl">
                                Download Template (.DOC)
                            </button>
                            <p id="edurx-dl-note" class="text-[10px] mt-4 text-slate-400 font-medium">Login required for online logbook access.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm">
        <div class="bg-white dark:bg-slate-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden p-6 animate-slide-up border border-slate-100 dark:border-slate-700">
            <div class="flex justify-between items-center mb-6">
                <h3 id="ui-share-title" class="text-xl font-bold dark:text-white flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg>
                    Share Tool
                </h3>
                <button onclick="document.getElementById('shareModal').classList.add('hidden')" class="text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="space-y-4">
                <div>
                    <label id="ui-share-link-label" class="block text-xs font-bold text-slate-500 uppercase mb-2">Tool Link</label>
                    <div class="flex gap-2">
                        <input type="text" id="shareUrl" readonly class="flex-1 bg-slate-100 dark:bg-slate-900 border-none text-xs p-3 rounded-lg text-slate-600 dark:text-slate-300 font-mono">
                        <button id="ui-copy-btn-1" onclick="copyToClipboard('shareUrl')" class="bg-sky-600 text-white text-xs px-4 py-2 rounded-lg font-bold hover:bg-sky-700 transition-colors">Copy</button>
                    </div>
                </div>
                <div>
                    <label id="ui-share-text-label" class="block text-xs font-bold text-slate-500 uppercase mb-2">Text Summary</label>
                    <div class="relative">
                        <textarea id="shareTextSummary" readonly rows="3" class="w-full bg-slate-100 dark:bg-slate-900 border-none text-xs p-3 rounded-lg text-slate-600 dark:text-slate-300 resize-none font-sans"></textarea>
                        <button onclick="copyToClipboard('shareTextSummary')" class="absolute top-2 right-2 bg-slate-200 dark:bg-slate-700 text-xs px-2 py-1 rounded hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors">COPY</button>
                    </div>
                </div>
                <div>
                    <label id="ui-share-html-label" class="block text-xs font-bold text-slate-500 uppercase mb-2">HTML Embed</label>
                    <div class="relative">
                        <textarea id="shareHtmlEmbed" readonly rows="2" class="w-full bg-slate-100 dark:bg-slate-900 border-none text-xs p-3 rounded-lg text-slate-600 dark:text-slate-300 resize-none font-mono"></textarea>
                        <button onclick="copyToClipboard('shareHtmlEmbed')" class="absolute top-2 right-2 bg-slate-200 dark:bg-slate-700 text-xs px-2 py-1 rounded hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors">COPY</button>
                    </div>
                </div>
            </div>
            <div id="copyNotice" class="mt-4 text-center text-green-500 text-sm font-medium h-5 opacity-0 transition-opacity bg-green-50 dark:bg-green-900/30 py-1 rounded-lg">Copied successfully!</div>
        </div>
    </div>

    <!-- Translations Data -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // --- Internationalization Database ---
        const i18n = {
            "en": {
                title: "EBM Toolbox",
                subtitle: "Evidence-Based Medicine Calculator Suite. A guide for personal use and testing purposes.",
                disclaimer: "‚ö†Ô∏è Medical decisions should NOT be based solely on the results of this program.",
                tabs: { nnt: "OR to NNT", diag: "Diagnostic", pros: "Prospective", case: "Case-Control", rct: "RCT", edurx: "Edu Rx" },
                nnt: { 
                    title: "Odds Ratio to NNT Converter", 
                    instrTitle: "Instructions",
                    instr1: "Enter a number > 1 or < 1 in Odds Ratio (OR).",
                    instr2: "Enter PEER between 0 and 1 (Patient's Expected Event Rate).",
                    or: "Odds Ratio (OR)", peer: "Patient's Expected Event Rate (PEER)", res: "Number Needed to Treat (NNT)",
                    edu: {
                        title: "More Details on Number Needed to Treat (NNT)",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Definition & Formulas</h4><p class="mb-3">NNT is the number of patients who need to be treated to prevent one additional bad outcome.</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>NNT = 1 / ARR</li><li>ARR = |CER - EER|</li></ul><div class="mt-3 text-xs opacity-80"><strong>CER:</strong> Control group event rate<br><strong>EER:</strong> Experimental group event rate</div>`,
                        ex: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Example Calculation</h4><p class="text-xs mb-3 font-semibold text-slate-500 uppercase">Diabetes Control Trial (Neuropathy)</p><ul class="text-xs space-y-2"><li class="flex justify-between"><span>Control (Usual Care):</span> <span class="font-mono">9.6% (0.096)</span></li><li class="flex justify-between"><span>Experimental (Intensive):</span> <span class="font-mono">2.8% (0.028)</span></li><li class="border-t pt-2 mt-2">ARR = |9.6% - 2.8%| = 6.8%</li><li class="font-bold text-indigo-600 dark:text-indigo-400">NNT = 1 / 0.068 = 14.7 ‚âà 15</li></ul>`,
                        prac: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Practice Calculation</h4><p class="mb-3">Stroke Trial (5-year mortality): SU (59.1%) vs GW (70.9%). How many patients need to be treated in Stroke Units (SU) to prevent one death?</p><p class="font-mono text-xs mb-2">NNT = _______</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-nnt')"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>See our answer and compare</button><div id="ans-nnt" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">ARR = |0.709 - 0.591| = 0.118<br>NNT = 1 / 0.118 = 8.47 ‚âà 9</div>`
                    }
                },
                diag: { 
                    title: "Diagnostic Test Calculator", disease: "Disease (+)", nodisease: "No Disease (-)",
                    tableTitle: "Contingency Table",
                    pos: "Test Pos (+)", neg: "Test Neg (-)",
                    optLR: "Or enter Likelihood Ratios directly:",
                    resHead: "Results (Estimate & 95% CI)",
                    sens: "Sensitivity", spec: "Specificity", ppv: "PPV", npv: "NPV",
                    edu: {
                        title: "More Details on Sensitivity and Specificity",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Definition & Mnemonics</h4><ul class="space-y-3 list-disc pl-4"><li><strong>Sensitivity:</strong> Proportion of people with disease who have a positive test result.</li><li><strong>Specificity:</strong> Proportion of people without disease who have a negative test result.</li><li class="bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-100 dark:border-yellow-900/30"><strong>SnNout:</strong> When a sign/test has high <u>S</u>ensitivity, a <u>N</u>egative result rules <u>out</u> the diagnosis.</li><li class="bg-blue-50 dark:bg-blue-900/20 p-2 rounded border border-blue-100 dark:border-blue-900/30"><strong>SpPin:</strong> When a sign/test has high <u>Sp</u>ecificity, a <u>P</u>ositive result rules <u>in</u> the diagnosis.</li></ul>`,
                        formula: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Formulas</h4><p class="mb-3">Using the 2x2 table (a,b,c,d):</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>Sensitivity = a / (a + c)</li><li>Specificity = d / (b + d)</li><li>PPV = a / (a + b)</li><li>NPV = d / (c + d)</li></ul>`,
                        practice: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Practice Calculation</h4><p class="mb-3">A study on D-dimer for DVT (Stroke 1996;27:1516-1520):</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>DVT</th><th>Present</th><th>Absent</th></tr></thead><tbody><tr><td>Test + (>1591)</td><td>13 (a)</td><td>19 (b)</td></tr><tr><td>Test - (‚â§1591)</td><td>1 (c)</td><td>72 (d)</td></tr></tbody></table></div><p class="mb-2 font-semibold">Calculate Sensitivity and Specificity.</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-diag')"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>See our answer and compare</button><div id="ans-diag" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">Sensitivity = a/(a+c) = 13/14 = 93%<br>Specificity = d/(b+d) = 72/91 = 79%</div>`
                    }
                },
                pros: { title: "Prospective Study Calculator", tableTitle: "Outcome Table", outcome: "Outcome (+)", nooutcome: "No Outcome (-)", treated: "Treated", nottreated: "Not Treated",
                    edu: {
                        title: "Calculation of Odds Ratio (OR) / Relative Risk (RR)",
                        content: `<p class="mb-4 font-medium">Example: Trimethoprim-sulfamethoxazole prophylaxis in cirrhosis (Adverse Events).</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>Group</th><th>Event Occurs</th><th>Event Doesn't Occur</th><th>Totals</th></tr></thead><tbody><tr><td>Exposed (Exp)</td><td>1 (a)</td><td>29 (b)</td><td>30</td></tr><tr><td>Not Exposed (Ctrl)</td><td>9 (c)</td><td>21 (d)</td><td>30</td></tr></tbody></table></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 font-mono text-xs mt-6 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl"><div class="space-y-2"><p><strong>CER (Control Event Rate)</strong> = c/(c+d) = 9/30 = 0.30</p><p><strong>EER (Exp Event Rate)</strong> = a/(a+b) = 1/30 = 0.033</p></div><div class="space-y-2 border-l border-slate-200 dark:border-slate-700 pl-4"><p class="text-blue-600 dark:text-blue-400 font-bold">Relative Risk (RR) = EER/CER = 0.11</p><p><strong>Relative Odds (OR)</strong> = (a/b)/(c/d) = 0.08</p></div></div>`
                    }
                },
                case: { title: "Case-Control Study Calculator", tableTitle: "Exposure Table", case: "Case", control: "Control", exposed: "Exposed", notexposed: "Not Exposed",
                    edu: {
                        title: "Why Odds Ratio?",
                        content: `<p class="mb-3">In Case-Control studies, we start with the outcome (disease) and look back at exposure. We cannot calculate Incidence or Relative Risk directly because we don't know the total population at risk. Instead, we compare the <strong>Odds of Exposure</strong> in cases vs. controls.</p><ul class="list-disc pl-5 space-y-2"><li><strong>OR > 1:</strong> Exposure is associated with higher odds of outcome (Risk Factor).</li><li><strong>OR < 1:</strong> Exposure is associated with lower odds of outcome (Protective Factor).</li><li><strong>OR = 1:</strong> No association.</li></ul><p class="mt-4 font-mono text-xs bg-amber-50 dark:bg-amber-900/20 p-3 rounded border border-amber-100 dark:border-amber-900/30">Formula: OR = (A √ó D) / (B √ó C)</p>`
                    }
                },
                rct: { title: "RCT Calculator", tableTitle: "Results Table", exp: "Experimental", ctrl: "Control", outcome: "Outcome", nooutcome: "No Outcome" },
                edurx: { 
                    title: "Educational Prescriptions Logbook",
                    whatTitle: "What is it?",
                    whatContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>Specifies the <strong>clinical problem</strong> that generated the question.</li><li>States the question in all of its key elements (PICO).</li><li>Specifies <strong>who</strong> is responsible for answering it.</li><li>Reminds everyone of the <strong>deadline</strong>.</li><li>Reminds everyone of the steps of searching and appraising.</li></ul>`,
                    whyTitle: "Why use them?",
                    whyContent: `<p class="leading-relaxed">Questions arise but often get forgotten due to fatigue or constraints. Educational prescriptions help track these questions for later "filling". They can be used in morning reports or journal clubs to identify common themes.</p>`,
                    tipsTitle: "Tips for Success",
                    tipsContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>Include them as a regular part of rounds.</li><li>Use for Journal Club, noon rounds, morning report.</li><li>Ask learners to write prescriptions for you.</li><li>Make 2 copies: 1 for learner, 1 for you.</li><li>Involve the local clinical librarian.</li></ul>`,
                    dlTitle: "Download Resources",
                    dlContent: "Access templates and the online logbook system.",
                    dlBtn: "Download Template (.DOC)",
                    dlNote: "Login required for online logbook access."
                },
                share: {
                    title: "Share Tool",
                    link: "Tool Link",
                    summary: "Text Summary",
                    html: "HTML Embed",
                    copy: "Copy",
                    copied: "Copied successfully!"
                }
            },
            "zh-CN": {
                title: "Âæ™ËØÅÂåªÂ≠¶Â∑•ÂÖ∑ÁÆ±",
                subtitle: "Âæ™ËØÅÂåªÂ≠¶ËÆ°ÁÆóÂô®Â•ó‰ª∂„ÄÇ‰ªÖ‰æõ‰∏™‰∫∫‰ΩøÁî®ÂíåÊµãËØïÂèÇËÄÉ„ÄÇ",
                disclaimer: "‚ö†Ô∏è ËØ∑Âãø‰ªÖ‰æùÊçÆÊú¨Á®ãÂ∫èÁöÑÁªìÊûúÂÅöÂá∫‰ªª‰ΩïÂåªÁñóÂÜ≥ÂÆö„ÄÇ",
                tabs: { nnt: "ORËΩ¨NNT", diag: "ËØäÊñ≠ËØïÈ™å", pros: "ÂâçÁûªÊÄßÁ†îÁ©∂", case: "ÁóÖ‰æãÂØπÁÖß", rct: "ÈöèÊú∫ÂØπÁÖß", edurx: "ÊïôËÇ≤Â§ÑÊñπ" },
                nnt: { 
                    title: "‰ºòÂäøÊØî(OR)ËΩ¨ÈúÄÊ≤ªÊï∞(NNT)", 
                    instrTitle: "‰ΩøÁî®ËØ¥Êòé",
                    instr1: "Âú®‰ºòÂäøÊØî(OR)‰∏≠ËæìÂÖ• >1 Êàñ <1 ÁöÑÊï∞Â≠ó„ÄÇ",
                    instr2: "ËæìÂÖ• 0 Âà∞ 1 ‰πãÈó¥ÁöÑ PEERÔºàÊÇ£ËÄÖÈ¢ÑÊúü‰∫ã‰ª∂ÂèëÁîüÁéáÔºâ„ÄÇ",
                    or: "‰ºòÂäøÊØî (OR)", peer: "ÊÇ£ËÄÖÈ¢ÑÊúü‰∫ã‰ª∂ÂèëÁîüÁéá (PEER)", res: "ÈúÄÊ≤ªÊï∞ (NNT)",
                    edu: {
                        title: "ÂÖ≥‰∫éÈúÄÊ≤ªÊï∞ (NNT) ÁöÑÊõ¥Â§öËØ¶ÊÉÖ",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÂÆö‰πâ‰∏éÂÖ¨Âºè</h4><p class="mb-3">NNT ÊòØÊåá‰∏∫È¢ÑÈò≤‰∏Ä‰æãÈ¢ùÂ§ñÁöÑ‰∏çËâØÁªìÂ±ÄËÄåÈúÄË¶ÅÊ≤ªÁñóÁöÑÊÇ£ËÄÖÊï∞Èáè„ÄÇ</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>NNT = 1 / ARR</li><li>ARR = |CER - EER|</li></ul><div class="mt-3 text-xs opacity-80"><strong>CER:</strong> ÂØπÁÖßÁªÑ‰∫ã‰ª∂ÂèëÁîüÁéá<br><strong>EER:</strong> ÂÆûÈ™åÁªÑ‰∫ã‰ª∂ÂèëÁîüÁéá</div>`,
                        ex: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ËÆ°ÁÆóÁ§∫‰æã</h4><p class="text-xs mb-3 font-semibold text-slate-500 uppercase">Á≥ñÂ∞øÁóÖÊéßÂà∂ËØïÈ™å (Á•ûÁªèÁóÖÂèò)</p><ul class="text-xs space-y-2"><li class="flex justify-between"><span>ÂØπÁÖßÁªÑ (Â∏∏ËßÑÊä§ÁêÜ):</span> <span class="font-mono">9.6% (0.096)</span></li><li class="flex justify-between"><span>ÂÆûÈ™åÁªÑ (Âº∫ÂåñÊ≤ªÁñó):</span> <span class="font-mono">2.8% (0.028)</span></li><li class="border-t pt-2 mt-2">ARR = |9.6% - 2.8%| = 6.8%</li><li class="font-bold text-indigo-600 dark:text-indigo-400">NNT = 1 / 0.068 = 14.7 ‚âà 15</li></ul>`,
                        prac: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÁªÉ‰π†ËÆ°ÁÆó</h4><p class="mb-3">‰∏≠È£éËØïÈ™å (5Âπ¥Ê≠ª‰∫°Áéá): SU (59.1%) vs GW (70.9%). ÈúÄË¶ÅÂú®Âçí‰∏≠ÂçïÂÖÉ (SU) Ê≤ªÁñóÂ§öÂ∞ëÊÇ£ËÄÖÊâçËÉΩÈ¢ÑÈò≤‰∏Ä‰æãÊ≠ª‰∫°Ôºü</p><p class="font-mono text-xs mb-2">NNT = _______</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-nnt')"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>Êü•ÁúãÁ≠îÊ°àÂπ∂Ê†∏ÂØπ</button><div id="ans-nnt" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">ARR = |0.709 - 0.591| = 0.118<br>NNT = 1 / 0.118 = 8.47 ‚âà 9</div>`
                    }
                },
                diag: { 
                    title: "ËØäÊñ≠ËØïÈ™åËÆ°ÁÆóÂô®", disease: "ÊúâÁóÖ (+)", nodisease: "Êó†ÁóÖ (-)",
                    tableTitle: "ÂàóËÅîË°®",
                    pos: "ËØïÈ™åÈò≥ÊÄß (+)", neg: "ËØïÈ™åÈò¥ÊÄß (-)",
                    optLR: "ÊàñËÄÖÁõ¥Êé•ËæìÂÖ•‰ººÁÑ∂ÊØîÔºö",
                    resHead: "ÁªìÊûú (‰º∞ËÆ°ÂÄº & 95% ÁΩÆ‰ø°Âå∫Èó¥)",
                    sens: "ÊïèÊÑüÂ∫¶ (Sensitivity)", spec: "ÁâπÂºÇÂ∫¶ (Specificity)", ppv: "Èò≥ÊÄßÈ¢ÑÊµãÂÄº (PPV)", npv: "Èò¥ÊÄßÈ¢ÑÊµãÂÄº (NPV)",
                    edu: {
                        title: "ÊïèÊÑüÂ∫¶ÂíåÁâπÂºÇÂ∫¶ËØ¶Ëß£",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÂÆö‰πâ‰∏éÂä©ËÆ∞Á¨¶</h4><ul class="space-y-3 list-disc pl-4"><li><strong>ÊïèÊÑüÂ∫¶ (ÁúüÈò≥ÊÄßÁéá):</strong> ÊÇ£ÁóÖ‰∫∫Áæ§‰∏≠Ê£ÄÊµãÁªìÊûú‰∏∫Èò≥ÊÄßÁöÑÊØî‰æã„ÄÇ</li><li><strong>ÁâπÂºÇÂ∫¶ (ÁúüÈò¥ÊÄßÁéá):</strong> Êú™ÊÇ£ÁóÖ‰∫∫Áæ§‰∏≠Ê£ÄÊµãÁªìÊûú‰∏∫Èò¥ÊÄßÁöÑÊØî‰æã„ÄÇ</li><li class="bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-100 dark:border-yellow-900/30"><strong>SnNout:</strong> ÂΩìÊ†áÂøó/ÊµãËØïÂÖ∑ÊúâÈ´ò<u>Êïè</u>ÊÑüÂ∫¶(Sensitivity)Êó∂Ôºå<u>Èò¥</u>ÊÄß(Negative)ÁªìÊûúÂèØ‰ª•<u>Êéí</u>Èô§(out)ËØäÊñ≠„ÄÇ</li><li class="bg-blue-50 dark:bg-blue-900/20 p-2 rounded border border-blue-100 dark:border-blue-900/30"><strong>SpPin:</strong> ÂΩìÊ†áÂøó/ÊµãËØïÂÖ∑ÊúâÈ´ò<u>Áâπ</u>ÂºÇÂ∫¶(Specificity)Êó∂Ôºå<u>Èò≥</u>ÊÄß(Positive)ÁªìÊûúÂèØ‰ª•<u>Á°Æ</u>ËØä(in)ËØäÊñ≠„ÄÇ</li></ul>`,
                        formula: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÂÖ¨Âºè</h4><p class="mb-3">‰ΩøÁî® 2x2 Ë°®Ê†º (a,b,c,d):</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>ÊïèÊÑüÂ∫¶ = a / (a + c)</li><li>ÁâπÂºÇÂ∫¶ = d / (b + d)</li><li>PPV = a / (a + b)</li><li>NPV = d / (c + d)</li></ul>`,
                        practice: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÁªÉ‰π†ËÆ°ÁÆó</h4><p class="mb-3">D-‰∫åËÅö‰ΩìÁî®‰∫é DVT ÁöÑÁ†îÁ©∂ (Stroke 1996;27:1516-1520):</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>DVT</th><th>Êúâ</th><th>Êó†</th></tr></thead><tbody><tr><td>ÊµãËØï + (>1591)</td><td>13 (a)</td><td>19 (b)</td></tr><tr><td>ÊµãËØï - (‚â§1591)</td><td>1 (c)</td><td>72 (d)</td></tr></tbody></table></div><p class="mb-2 font-semibold">ËÆ°ÁÆóÊïèÊÑüÂ∫¶ÂíåÁâπÂºÇÂ∫¶„ÄÇ</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-diag')"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>Êü•ÁúãÁ≠îÊ°àÂπ∂Ê†∏ÂØπ</button><div id="ans-diag" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">ÊïèÊÑüÂ∫¶ = a/(a+c) = 13/14 = 93%<br>ÁâπÂºÇÂ∫¶ = d/(b+d) = 72/91 = 79%</div>`
                    }
                },
                pros: { title: "ÂâçÁûªÊÄßÁ†îÁ©∂ËÆ°ÁÆóÂô®", tableTitle: "ÁªìÂ±ÄË°®", outcome: "ÁªìÂ±ÄÂèëÁîü (+)", nooutcome: "ÁªìÂ±ÄÊú™ÂèëÁîü (-)", treated: "Ê≤ªÁñóÁªÑ", nottreated: "Êú™Ê≤ªÁñóÁªÑ",
                    edu: {
                        title: "‰ºòÂäøÊØî (OR) / Áõ∏ÂØπÈ£éÈô© (RR) ÁöÑËÆ°ÁÆó",
                        content: `<p class="mb-4 font-medium">Á§∫‰æãÔºöËÇùÁ°¨ÂåñÊÇ£ËÄÖ‰ΩøÁî®Áî≤Ê∞ßËãÑÂï∂-Á£∫ËÉ∫Áî≤ÊÅ∂ÂîëÈ¢ÑÈò≤ÊÑüÊüìÔºà‰∏çËâØ‰∫ã‰ª∂Ôºâ„ÄÇ</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>ÁªÑÂà´</th><th>‰∫ã‰ª∂ÂèëÁîü</th><th>‰∫ã‰ª∂Êú™ÂèëÁîü</th><th>ÊÄªËÆ°</th></tr></thead><tbody><tr><td>Êö¥Èú≤ÁªÑ (Exp)</td><td>1 (a)</td><td>29 (b)</td><td>30</td></tr><tr><td>ÈùûÊö¥Èú≤ÁªÑ (Ctrl)</td><td>9 (c)</td><td>21 (d)</td><td>30</td></tr></tbody></table></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 font-mono text-xs mt-6 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl"><div class="space-y-2"><p><strong>CER (ÂØπÁÖßÁªÑ‰∫ã‰ª∂Áéá)</strong> = c/(c+d) = 9/30 = 0.30</p><p><strong>EER (ÂÆûÈ™åÁªÑ‰∫ã‰ª∂Áéá)</strong> = a/(a+b) = 1/30 = 0.033</p></div><div class="space-y-2 border-l border-slate-200 dark:border-slate-700 pl-4"><p class="text-blue-600 dark:text-blue-400 font-bold">Áõ∏ÂØπÈ£éÈô© (RR) = EER/CER = 0.11</p><p><strong>Áõ∏ÂØπ‰ºòÂäø (OR)</strong> = (a/b)/(c/d) = 0.08</p></div></div>`
                    }
                },
                case: { title: "ÁóÖ‰æãÂØπÁÖßÁ†îÁ©∂ËÆ°ÁÆóÂô®", tableTitle: "Êö¥Èú≤Ë°®", case: "ÁóÖ‰æãÁªÑ", control: "ÂØπÁÖßÁªÑ", exposed: "Êö¥Èú≤", notexposed: "ÈùûÊö¥Èú≤",
                    edu: {
                        title: "‰∏∫‰ªÄ‰πà‰ΩøÁî®‰ºòÂäøÊØî (OR)Ôºü",
                        content: `<p class="mb-3">Âú®ÁóÖ‰æãÂØπÁÖßÁ†îÁ©∂‰∏≠ÔºåÊàë‰ª¨‰ªéÁªìÊûúÔºàÁñæÁóÖÔºâÂá∫ÂèëÔºåÂõûÈ°æÊö¥Èú≤ÊÉÖÂÜµ„ÄÇÊàë‰ª¨Êó†Ê≥ïÁõ¥Êé•ËÆ°ÁÆóÂèëÁóÖÁéáÊàñÁõ∏ÂØπÈ£éÈô©ÔºåÂõ†‰∏∫Êàë‰ª¨‰∏çÁü•ÈÅìÂ§Ñ‰∫éÈ£éÈô©‰∏≠ÁöÑÊÄª‰∫∫Âè£„ÄÇÁõ∏ÂèçÔºåÊàë‰ª¨ÊØîËæÉÁóÖ‰æãÁªÑ‰∏éÂØπÁÖßÁªÑÁöÑ<strong>Êö¥Èú≤‰ºòÂäø (Odds of Exposure)</strong>„ÄÇ</p><ul class="list-disc pl-5 space-y-2"><li><strong>OR > 1:</strong> Êö¥Èú≤‰∏éËæÉÈ´òÁöÑÁªìÊûúÂá†ÁéáÁõ∏ÂÖ≥ÔºàÈ£éÈô©Âõ†Á¥†Ôºâ„ÄÇ</li><li><strong>OR < 1:</strong> Êö¥Èú≤‰∏éËæÉ‰ΩéÁöÑÁªìÊûúÂá†ÁéáÁõ∏ÂÖ≥Ôºà‰øùÊä§Âõ†Á¥†Ôºâ„ÄÇ</li><li><strong>OR = 1:</strong> Êó†ÂÖ≥ËÅî„ÄÇ</li></ul><p class="mt-4 font-mono text-xs bg-amber-50 dark:bg-amber-900/20 p-3 rounded border border-amber-100 dark:border-amber-900/30">ÂÖ¨Âºè: OR = (A √ó D) / (B √ó C)</p>`
                    }
                },
                rct: { title: "ÈöèÊú∫ÂØπÁÖßËØïÈ™åËÆ°ÁÆóÂô®", tableTitle: "ÁªìÊûúË°®", exp: "ÂÆûÈ™åÁªÑ", ctrl: "ÂØπÁÖßÁªÑ", outcome: "ÁªìÂ±ÄÂèëÁîü", nooutcome: "ÁªìÂ±ÄÊú™ÂèëÁîü" },
                edurx: { 
                    title: "ÊïôËÇ≤Â§ÑÊñπÊó•Âøó",
                    whatTitle: "ËøôÊòØ‰ªÄ‰πàÔºü",
                    whatContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>ÊòéÁ°Æ‰∫ßÁîüÈóÆÈ¢òÁöÑ<strong>‰∏¥Â∫äÊÉÖÂ¢É</strong>„ÄÇ</li><li>‰ª• PICO Ê†ºÂºèÈôàËø∞ÈóÆÈ¢òÁöÑÂÖ≥ÈîÆË¶ÅÁ¥†„ÄÇ</li><li>ÊåáÂÆö<strong>Ë∞Å</strong>Ë¥üË¥£ÂõûÁ≠î„ÄÇ</li><li>ÊèêÈÜíÂ§ßÂÆ∂ÂõûÁ≠îÁöÑ<strong>Êà™Ê≠¢Êó•Êúü</strong>„ÄÇ</li><li>ÊèêÈÜíÂ§ßÂÆ∂ÊêúÁ¥¢ÂíåËØÑ‰º∞ÁöÑÊ≠•È™§„ÄÇ</li></ul>`,
                    whyTitle: "‰∏∫‰ªÄ‰πàË¶Å‰ΩøÁî®Ôºü",
                    whyContent: `<p class="leading-relaxed">ÈóÆÈ¢òÁªèÂ∏∏Âá∫Áé∞Ôºå‰ΩÜÁî±‰∫éÁñ≤Âä≥ÊàñÈôêÂà∂ÂæÄÂæÄË¢´ÈÅóÂøò„ÄÇÊïôËÇ≤Â§ÑÊñπÊúâÂä©‰∫éË∑üË∏™Ëøô‰∫õÈóÆÈ¢ò‰ª•‰æõÁ®çÂêé‚ÄúÈÖçËçØ‚Äù„ÄÇÂÆÉ‰ª¨ÂèØÁî®‰∫éÊó©‰ºöÊàñÊúüÂàä‰ø±‰πêÈÉ®Ôºå‰ª•ËØÜÂà´ÂÖ±Âêå‰∏ªÈ¢ò„ÄÇ</p>`,
                    tipsTitle: "ÊàêÂäüÁßòËØÄ",
                    tipsContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>Â∞ÜÂÖ∂‰Ωú‰∏∫Êü•ÊàøÁöÑÂ∏∏ËßÑÈÉ®ÂàÜ„ÄÇ</li><li>Áî®‰∫éÊúüÂàä‰ø±‰πêÈÉ®„ÄÅÂçàÈó¥Êü•Êàø„ÄÅÊó©‰ºöÊä•Âëä„ÄÇ</li><li>ËÆ©Â≠¶Âëò‰∏∫ÊÇ®ÂºÄÂ§ÑÊñπ„ÄÇ</li><li>‰∏ÄÂºè‰∏§‰ªΩÔºöÂ≠¶Âëò‰∏Ä‰ªΩÔºåÊÇ®‰∏Ä‰ªΩ„ÄÇ</li><li>ÈÇÄËØ∑ÂΩìÂú∞‰∏¥Â∫äÂõæ‰π¶È¶ÜÂëòÂèÇ‰∏é„ÄÇ</li></ul>`,
                    dlTitle: "‰∏ãËΩΩËµÑÊ∫ê",
                    dlContent: "Ëé∑ÂèñÊ®°ÊùøÂíåÂú®Á∫øÊó•ÂøóÁ≥ªÁªü„ÄÇ",
                    dlBtn: "‰∏ãËΩΩÊ®°Êùø (.DOC)",
                    dlNote: "ËÆøÈóÆÂú®Á∫øÊó•ÂøóÁ≥ªÁªüÈúÄË¶ÅÁôªÂΩï„ÄÇ"
                },
                share: {
                    title: "ÂàÜ‰∫´Ê≠§Â∑•ÂÖ∑",
                    link: "Â∑•ÂÖ∑ÈìæÊé•",
                    summary: "ÊñáÊú¨ÊëòË¶Å",
                    html: "HTML ÂµåÂÖ•‰ª£Á†Å",
                    copy: "Â§çÂà∂",
                    copied: "Â∑≤Â§çÂà∂Âà∞Ââ™Ë¥¥ÊùøÔºÅ"
                }
            },
            "zh-TW": {
                title: "ÂØ¶Ë≠âÈÜ´Â≠∏Â∑•ÂÖ∑ÁÆ±",
                subtitle: "ÂØ¶Ë≠âÈÜ´Â≠∏Ë®àÁÆóÂô®Â•ó‰ª∂„ÄÇÂÉÖ‰æõÂÄã‰∫∫‰ΩøÁî®ÂíåÊ∏¨Ë©¶ÂèÉËÄÉ„ÄÇ",
                disclaimer: "‚ö†Ô∏è Ë´ãÂãøÂÉÖ‰æùÊìöÊú¨Á®ãÂºèÁöÑÁµêÊûúÂÅöÂá∫‰ªª‰ΩïÈÜ´ÁôÇÊ±∫ÂÆö„ÄÇ",
                tabs: { nnt: "ORËΩâNNT", diag: "Ë®∫Êñ∑Ë©¶È©ó", pros: "ÂâçÁûªÊÄßÁ†îÁ©∂", case: "ÁóÖ‰æãÂ∞çÁÖß", rct: "Èö®Ê©üÂ∞çÁÖß", edurx: "ÊïôËÇ≤ËôïÊñπ" },
                nnt: { 
                    title: "ÂÑ™Âã¢ÊØî(OR)ËΩâÈúÄÊ≤ªÊï∏(NNT)", 
                    instrTitle: "‰ΩøÁî®Ë™™Êòé",
                    instr1: "Âú®ÂÑ™Âã¢ÊØî(OR)‰∏≠Ëº∏ÂÖ• >1 Êàñ <1 ÁöÑÊï∏Â≠ó„ÄÇ",
                    instr2: "Ëº∏ÂÖ• 0 Âà∞ 1 ‰πãÈñìÁöÑ PEERÔºàÊÇ£ËÄÖÈ†êÊúü‰∫ã‰ª∂ÁôºÁîüÁéáÔºâ„ÄÇ",
                    or: "ÂÑ™Âã¢ÊØî (OR)", peer: "ÊÇ£ËÄÖÈ†êÊúü‰∫ã‰ª∂ÁôºÁîüÁéá (PEER)", res: "ÈúÄÊ≤ªÊï∏ (NNT)",
                    edu: {
                        title: "ÈóúÊñºÈúÄÊ≤ªÊï∏ (NNT) ÁöÑÊõ¥Â§öË©≥ÊÉÖ",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÂÆöÁæ©ËàáÂÖ¨Âºè</h4><p class="mb-3">NNT ÊòØÊåáÁÇ∫È†êÈò≤‰∏Ä‰æãÈ°çÂ§ñÁöÑ‰∏çËâØÁµêÂ±ÄËÄåÈúÄË¶ÅÊ≤ªÁôÇÁöÑÊÇ£ËÄÖÊï∏Èáè„ÄÇ</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>NNT = 1 / ARR</li><li>ARR = |CER - EER|</li></ul><div class="mt-3 text-xs opacity-80"><strong>CER:</strong> Â∞çÁÖßÁµÑ‰∫ã‰ª∂ÁôºÁîüÁéá<br><strong>EER:</strong> ÂØ¶È©óÁµÑ‰∫ã‰ª∂ÁôºÁîüÁéá</div>`,
                        ex: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Ë®àÁÆóÁ§∫‰æã</h4><p class="text-xs mb-3 font-semibold text-slate-500 uppercase">Á≥ñÂ∞øÁóÖÊéßÂà∂Ë©¶È©ó (Á•ûÁ∂ìÁóÖËÆä)</p><ul class="text-xs space-y-2"><li class="flex justify-between"><span>Â∞çÁÖßÁµÑ (Â∏∏Ë¶èË≠∑ÁêÜ):</span> <span class="font-mono">9.6% (0.096)</span></li><li class="flex justify-between"><span>ÂØ¶È©óÁµÑ (Âº∑ÂåñÊ≤ªÁôÇ):</span> <span class="font-mono">2.8% (0.028)</span></li><li class="border-t pt-2 mt-2">ARR = |9.6% - 2.8%| = 6.8%</li><li class="font-bold text-indigo-600 dark:text-indigo-400">NNT = 1 / 0.068 = 14.7 ‚âà 15</li></ul>`,
                        prac: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Á∑¥ÁøíË®àÁÆó</h4><p class="mb-3">‰∏≠È¢®Ë©¶È©ó (5Âπ¥Ê≠ª‰∫°Áéá): SU (59.1%) vs GW (70.9%). ÈúÄË¶ÅÂú®Âçí‰∏≠ÂñÆÂÖÉ (SU) Ê≤ªÁôÇÂ§öÂ∞ëÊÇ£ËÄÖÊâçËÉΩÈ†êÈò≤‰∏Ä‰æãÊ≠ª‰∫°Ôºü</p><p class="font-mono text-xs mb-2">NNT = _______</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-nnt')"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>Êü•ÁúãÁ≠îÊ°à‰∏¶Ê†∏Â∞ç</button><div id="ans-nnt" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">ARR = |0.709 - 0.591| = 0.118<br>NNT = 1 / 0.118 = 8.47 ‚âà 9</div>`
                    }
                },
                diag: { 
                    title: "Ë®∫Êñ∑Ë©¶È©óË®àÁÆóÂô®", disease: "ÊúâÁóÖ (+)", nodisease: "ÁÑ°ÁóÖ (-)",
                    tableTitle: "ÂàóËÅØË°®",
                    pos: "Ë©¶È©óÈôΩÊÄß (+)", neg: "Ë©¶È©óÈô∞ÊÄß (-)",
                    optLR: "ÊàñËÄÖÁõ¥Êé•Ëº∏ÂÖ•‰ººÁÑ∂ÊØîÔºö",
                    resHead: "ÁµêÊûú (‰º∞Ë®àÂÄº & 95% ‰ø°Ë≥¥ÂçÄÈñì)",
                    sens: "ÊïèÊÑüÂ∫¶ (Sensitivity)", spec: "ÁâπÁï∞Â∫¶ (Specificity)", ppv: "ÈôΩÊÄßÈ†êÊ∏¨ÂÄº (PPV)", npv: "Èô∞ÊÄßÈ†êÊ∏¨ÂÄº (NPV)",
                    edu: {
                        title: "ÊïèÊÑüÂ∫¶ÂíåÁâπÁï∞Â∫¶Ë©≥Ëß£",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÂÆöÁæ©ËàáÂä©Ë®òÁ¨¶</h4><ul class="space-y-3 list-disc pl-4"><li><strong>ÊïèÊÑüÂ∫¶ (ÁúüÈôΩÊÄßÁéá):</strong> ÊÇ£ÁóÖ‰∫∫Áæ§‰∏≠Ê™¢Ê∏¨ÁµêÊûúÁÇ∫ÈôΩÊÄßÁöÑÊØî‰æã„ÄÇ</li><li><strong>ÁâπÁï∞Â∫¶ (ÁúüÈô∞ÊÄßÁéá):</strong> Êú™ÊÇ£ÁóÖ‰∫∫Áæ§‰∏≠Ê™¢Ê∏¨ÁµêÊûúÁÇ∫Èô∞ÊÄßÁöÑÊØî‰æã„ÄÇ</li><li class="bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-100 dark:border-yellow-900/30"><strong>SnNout:</strong> Áï∂Ê®ôË™å/Ê∏¨Ë©¶ÂÖ∑ÊúâÈ´ò<u>Êïè</u>ÊÑüÂ∫¶(Sensitivity)ÊôÇÔºå<u>Èô∞</u>ÊÄß(Negative)ÁµêÊûúÂèØ‰ª•<u>Êéí</u>Èô§(out)Ë®∫Êñ∑„ÄÇ</li><li class="bg-blue-50 dark:bg-blue-900/20 p-2 rounded border border-blue-100 dark:border-blue-900/30"><strong>SpPin:</strong> Áï∂Ê®ôË™å/Ê∏¨Ë©¶ÂÖ∑ÊúâÈ´ò<u>Áâπ</u>Áï∞Â∫¶(Specificity)ÊôÇÔºå<u>ÈôΩ</u>ÊÄß(Positive)ÁµêÊûúÂèØ‰ª•<u>Á¢∫</u>Ë®∫(in)Ë®∫Êñ∑„ÄÇ</li></ul>`,
                        formula: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">ÂÖ¨Âºè</h4><p class="mb-3">‰ΩøÁî® 2x2 Ë°®Ê†º (a,b,c,d):</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>ÊïèÊÑüÂ∫¶ = a / (a + c)</li><li>ÁâπÁï∞Â∫¶ = d / (b + d)</li><li>PPV = a / (a + b)</li><li>NPV = d / (c + d)</li></ul>`,
                        practice: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Á∑¥ÁøíË®àÁÆó</h4><p class="mb-3">D-‰∫åËÅöÈ´îÁî®Êñº DVT ÁöÑÁ†îÁ©∂ (Stroke 1996;27:1516-1520):</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>DVT</th><th>Êúâ</th><th>ÁÑ°</th></tr></thead><tbody><tr><td>Ê∏¨Ë©¶ + (>1591)</td><td>13 (a)</td><td>19 (b)</td></tr><tr><td>Ê∏¨Ë©¶ - (‚â§1591)</td><td>1 (c)</td><td>72 (d)</td></tr></tbody></table></div><p class="mb-2 font-semibold">Ë®àÁÆóÊïèÊÑüÂ∫¶ÂíåÁâπÁï∞Â∫¶„ÄÇ</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-diag')"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>Êü•ÁúãÁ≠îÊ°à‰∏¶Ê†∏Â∞ç</button><div id="ans-diag" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">ÊïèÊÑüÂ∫¶ = a/(a+c) = 13/14 = 93%<br>ÁâπÁï∞Â∫¶ = d/(b+d) = 72/91 = 79%</div>`
                    }
                },
                pros: { title: "ÂâçÁûªÊÄßÁ†îÁ©∂Ë®àÁÆóÂô®", tableTitle: "ÁµêÂ±ÄË°®", outcome: "ÁµêÂ±ÄÁôºÁîü (+)", nooutcome: "ÁµêÂ±ÄÊú™ÁôºÁîü (-)", treated: "Ê≤ªÁôÇÁµÑ", nottreated: "Êú™Ê≤ªÁôÇÁµÑ",
                    edu: {
                        title: "ÂÑ™Âã¢ÊØî (OR) / Áõ∏Â∞çÈ¢®Èö™ (RR) ÁöÑË®àÁÆó",
                        content: `<p class="mb-4 font-medium">Á§∫‰æãÔºöËÇùÁ°¨ÂåñÊÇ£ËÄÖ‰ΩøÁî®Áî≤Ê∞ßËãÑÂï∂-Á£∫ËÉ∫Áî≤ÊÉ°ÂîëÈ†êÈò≤ÊÑüÊüìÔºà‰∏çËâØ‰∫ã‰ª∂Ôºâ„ÄÇ</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>ÁµÑÂà•</th><th>‰∫ã‰ª∂ÁôºÁîü</th><th>‰∫ã‰ª∂Êú™ÁôºÁîü</th><th>Á∏ΩË®à</th></tr></thead><tbody><tr><td>Êö¥Èú≤ÁµÑ (Exp)</td><td>1 (a)</td><td>29 (b)</td><td>30</td></tr><tr><td>ÈùûÊö¥Èú≤ÁµÑ (Ctrl)</td><td>9 (c)</td><td>21 (d)</td><td>30</td></tr></tbody></table></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 font-mono text-xs mt-6 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl"><div class="space-y-2"><p><strong>CER (Â∞çÁÖßÁµÑ‰∫ã‰ª∂Áéá)</strong> = c/(c+d) = 9/30 = 0.30</p><p><strong>EER (ÂØ¶È©óÁµÑ‰∫ã‰ª∂Áéá)</strong> = a/(a+b) = 1/30 = 0.033</p></div><div class="space-y-2 border-l border-slate-200 dark:border-slate-700 pl-4"><p class="text-blue-600 dark:text-blue-400 font-bold">Áõ∏Â∞çÈ¢®Èö™ (RR) = EER/CER = 0.11</p><p><strong>Áõ∏Â∞çÂÑ™Âã¢ (OR)</strong> = (a/b)/(c/d) = 0.08</p></div></div>`
                    }
                },
                case: { title: "ÁóÖ‰æãÂ∞çÁÖßÁ†îÁ©∂Ë®àÁÆóÂô®", tableTitle: "Êö¥Èú≤Ë°®", case: "ÁóÖ‰æãÁµÑ", control: "Â∞çÁÖßÁµÑ", exposed: "Êö¥Èú≤", notexposed: "ÈùûÊö¥Èú≤",
                    edu: {
                        title: "ÁÇ∫‰ªÄÈ∫º‰ΩøÁî®ÂÑ™Âã¢ÊØî (OR)Ôºü",
                        content: `<p class="mb-3">Âú®ÁóÖ‰æãÂ∞çÁÖßÁ†îÁ©∂‰∏≠ÔºåÊàëÂÄëÂæûÁµêÊûúÔºàÁñæÁóÖÔºâÂá∫ÁôºÔºåÂõûÈ°ßÊö¥Èú≤ÊÉÖÊ≥Å„ÄÇÊàëÂÄëÁÑ°Ê≥ïÁõ¥Êé•Ë®àÁÆóÁôºÁóÖÁéáÊàñÁõ∏Â∞çÈ¢®Èö™ÔºåÂõ†ÁÇ∫ÊàëÂÄë‰∏çÁü•ÈÅìËôïÊñºÈ¢®Èö™‰∏≠ÁöÑÁ∏Ω‰∫∫Âè£„ÄÇÁõ∏ÂèçÔºåÊàëÂÄëÊØîËºÉÁóÖ‰æãÁµÑËàáÂ∞çÁÖßÁµÑÁöÑ<strong>Êö¥Èú≤ÂÑ™Âã¢ (Odds of Exposure)</strong>„ÄÇ</p><ul class="list-disc pl-5 space-y-2"><li><strong>OR > 1:</strong> Êö¥Èú≤ËàáËºÉÈ´òÁöÑÁµêÊûúÂπæÁéáÁõ∏ÈóúÔºàÈ¢®Èö™Âõ†Á¥†Ôºâ„ÄÇ</li><li><strong>OR < 1:</strong> Êö¥Èú≤ËàáËºÉ‰ΩéÁöÑÁµêÊûúÂπæÁéáÁõ∏ÈóúÔºà‰øùË≠∑Âõ†Á¥†Ôºâ„ÄÇ</li><li><strong>OR = 1:</strong> ÁÑ°ÈóúËÅØ„ÄÇ</li></ul><p class="mt-4 font-mono text-xs bg-amber-50 dark:bg-amber-900/20 p-3 rounded border border-amber-100 dark:border-amber-900/30">ÂÖ¨Âºè: OR = (A √ó D) / (B √ó C)</p>`
                    }
                },
                rct: { title: "Èö®Ê©üÂ∞çÁÖßË©¶È©óË®àÁÆóÂô®", tableTitle: "ÁµêÊûúË°®", exp: "ÂØ¶È©óÁµÑ", ctrl: "Â∞çÁÖßÁµÑ", outcome: "ÁµêÂ±ÄÁôºÁîü", nooutcome: "ÁµêÂ±ÄÊú™ÁôºÁîü" },
                edurx: { 
                    title: "ÊïôËÇ≤ËôïÊñπÊó•Ë™å",
                    whatTitle: "ÈÄôÊòØ‰ªÄÈ∫ºÔºü",
                    whatContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>ÊòéÁ¢∫Áî¢ÁîüÂïèÈ°åÁöÑ<strong>Ëá®Â∫äÊÉÖÂ¢É</strong>„ÄÇ</li><li>‰ª• PICO Ê†ºÂºèÈô≥Ëø∞ÂïèÈ°åÁöÑÈóúÈçµË¶ÅÁ¥†„ÄÇ</li><li>ÊåáÂÆö<strong>Ë™∞</strong>Ë≤†Ë≤¨ÂõûÁ≠î„ÄÇ</li><li>ÊèêÈÜíÂ§ßÂÆ∂ÂõûÁ≠îÁöÑ<strong>Êà™Ê≠¢Êó•Êúü</strong>„ÄÇ</li><li>ÊèêÈÜíÂ§ßÂÆ∂ÊêúÁ¥¢ÂíåË©ï‰º∞ÁöÑÊ≠•È©ü„ÄÇ</li></ul>`,
                    whyTitle: "ÁÇ∫‰ªÄÈ∫ºË¶Å‰ΩøÁî®Ôºü",
                    whyContent: `<p class="leading-relaxed">ÂïèÈ°åÁ∂ìÂ∏∏Âá∫ÁèæÔºå‰ΩÜÁî±ÊñºÁñ≤ÂãûÊàñÈôêÂà∂ÂæÄÂæÄË¢´ÈÅ∫Âøò„ÄÇÊïôËÇ≤ËôïÊñπÊúâÂä©ÊñºË∑üË∏™ÈÄô‰∫õÂïèÈ°å‰ª•‰æõÁ®çÂæå‚ÄúÈÖçËó•‚Äù„ÄÇÂÆÉÂÄëÂèØÁî®ÊñºÊó©ÊúÉÊàñÊúüÂàä‰ø±Ê®ÇÈÉ®Ôºå‰ª•Ë≠òÂà•ÂÖ±Âêå‰∏ªÈ°å„ÄÇ</p>`,
                    tipsTitle: "ÊàêÂäüÁßòË®£",
                    tipsContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>Â∞áÂÖ∂‰ΩúÁÇ∫Êü•ÊàøÁöÑÂ∏∏Ë¶èÈÉ®ÂàÜ„ÄÇ</li><li>Áî®ÊñºÊúüÂàä‰ø±Ê®ÇÈÉ®„ÄÅÂçàÈñìÊü•Êàø„ÄÅÊó©ÊúÉÂ†±Âëä„ÄÇ</li><li>ËÆìÂ≠∏Âì°ÁÇ∫ÊÇ®ÈñãËôïÊñπ„ÄÇ</li><li>‰∏ÄÂºèÂÖ©‰ªΩÔºöÂ≠∏Âì°‰∏Ä‰ªΩÔºåÊÇ®‰∏Ä‰ªΩ„ÄÇ</li><li>ÈÇÄË´ãÁï∂Âú∞Ëá®Â∫äÂúñÊõ∏È§®Âì°ÂèÉËàá„ÄÇ</li></ul>`,
                    dlTitle: "‰∏ãËºâË≥áÊ∫ê",
                    dlContent: "Áç≤ÂèñÊ®°ÊùøÂíåÂú®Á∑öÊó•Ë™åÁ≥ªÁµ±„ÄÇ",
                    dlBtn: "‰∏ãËºâÊ®°Êùø (.DOC)",
                    dlNote: "Ë®™ÂïèÂú®Á∑öÊó•Ë™åÁ≥ªÁµ±ÈúÄË¶ÅÁôªÈåÑ„ÄÇ"
                },
                share: {
                    title: "ÂàÜ‰∫´Ê≠§Â∑•ÂÖ∑",
                    link: "Â∑•ÂÖ∑ÈèàÊé•",
                    summary: "ÊñáÊú¨ÊëòË¶Å",
                    html: "HTML ÂµåÂÖ•‰ª£Á¢º",
                    copy: "Ë§áË£Ω",
                    copied: "Â∑≤Ë§áË£ΩÂà∞Ââ™Ë≤ºÊùøÔºÅ"
                }
            },
            "es": {
                title: "Caja de Herramientas MBE",
                subtitle: "Conjunto de calculadoras de Medicina Basada en Evidencia. Una gu√≠a para uso personal y pruebas.",
                disclaimer: "‚ö†Ô∏è Las decisiones m√©dicas NO deben basarse √∫nicamente en los resultados de este programa.",
                tabs: { nnt: "OR a NNT", diag: "Diagn√≥stico", pros: "Prospectivo", case: "Casos y Controles", rct: "ECA", edurx: "Edu Rx" },
                nnt: { 
                    title: "Convertidor de Odds Ratio a NNT", 
                    instrTitle: "Instrucciones",
                    instr1: "Ingrese un n√∫mero > 1 o < 1 en Odds Ratio (OR).",
                    instr2: "Ingrese PEER entre 0 y 1 (Tasa de eventos esperada del paciente).",
                    or: "Odds Ratio (OR)", peer: "Tasa de eventos esperada (PEER)", res: "N√∫mero Necesario a Tratar (NNT)",
                    edu: {
                        title: "M√°s detalles sobre el N√∫mero Necesario a Tratar (NNT)",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Definici√≥n y F√≥rmulas</h4><p class="mb-3">El NNT es el n√∫mero de pacientes que necesitan ser tratados para prevenir un resultado negativo adicional.</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>NNT = 1 / ARR</li><li>ARR = |CER - EER|</li></ul><div class="mt-3 text-xs opacity-80"><strong>CER:</strong> Tasa de eventos grupo control<br><strong>EER:</strong> Tasa de eventos grupo experimental</div>`,
                        ex: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Ejemplo de C√°lculo</h4><p class="text-xs mb-3 font-semibold text-slate-500 uppercase">Ensayo de Control de Diabetes (Neuropat√≠a)</p><ul class="text-xs space-y-2"><li class="flex justify-between"><span>Control (Cuidado Habitual):</span> <span class="font-mono">9.6% (0.096)</span></li><li class="flex justify-between"><span>Experimental (Intensivo):</span> <span class="font-mono">2.8% (0.028)</span></li><li class="border-t pt-2 mt-2">ARR = |9.6% - 2.8%| = 6.8%</li><li class="font-bold text-indigo-600 dark:text-indigo-400">NNT = 1 / 0.068 = 14.7 ‚âà 15</li></ul>`,
                        prac: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">C√°lculo de Pr√°ctica</h4><p class="mb-3">Ensayo de ACV (Mortalidad a 5 a√±os): SU (59.1%) vs GW (70.9%). ¬øCu√°ntos pacientes necesitan ser tratados en Unidades de Ictus (SU) para prevenir una muerte?</p><p class="font-mono text-xs mb-2">NNT = _______</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-nnt')">Ver respuesta y comparar</button><div id="ans-nnt" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">ARR = |0.709 - 0.591| = 0.118<br>NNT = 1 / 0.118 = 8.47 ‚âà 9</div>`
                    }
                },
                diag: { 
                    title: "Calculadora de Prueba Diagn√≥stica", disease: "Enfermedad (+)", nodisease: "No Enfermedad (-)",
                    tableTitle: "Tabla de Contingencia",
                    pos: "Prueba Pos (+)", neg: "Prueba Neg (-)",
                    optLR: "O ingrese Raz√≥n de Verosimilitud (LR):",
                    resHead: "Resultados (Estimaci√≥n e IC 95%)",
                    sens: "Sensibilidad", spec: "Especificidad", ppv: "VPP", npv: "VPN",
                    edu: {
                        title: "M√°s detalles sobre Sensibilidad y Especificidad",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Definici√≥n y Mnemotecnia</h4><ul class="space-y-3 list-disc pl-4"><li><strong>Sensibilidad:</strong> Proporci√≥n de personas con la enfermedad que tienen un resultado positivo.</li><li><strong>Especificidad:</strong> Proporci√≥n de personas sin la enfermedad que tienen un resultado negativo.</li><li class="bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-100 dark:border-yellow-900/30"><strong>SnNout:</strong> Alta <u>S</u>ensibilidad, resultado <u>N</u>egativo descarta (<u>out</u>) el diagn√≥stico.</li><li class="bg-blue-50 dark:bg-blue-900/20 p-2 rounded border border-blue-100 dark:border-blue-900/30"><strong>SpPin:</strong> Alta <u>E</u>specificidad (<u>Sp</u>ecificity), resultado <u>P</u>ositivo confirma (<u>in</u>) el diagn√≥stico.</li></ul>`,
                        formula: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">F√≥rmulas</h4><p class="mb-3">Usando la tabla 2x2 (a,b,c,d):</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>Sensibilidad = a / (a + c)</li><li>Especificidad = d / (b + d)</li><li>VPP = a / (a + b)</li><li>VPN = d / (c + d)</li></ul>`,
                        practice: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">C√°lculo de Pr√°ctica</h4><p class="mb-3">Estudio sobre D√≠mero-D para TVP (Stroke 1996;27:1516-1520):</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>TVP</th><th>Presente</th><th>Ausente</th></tr></thead><tbody><tr><td>Prueba + (>1591)</td><td>13 (a)</td><td>19 (b)</td></tr><tr><td>Prueba - (‚â§1591)</td><td>1 (c)</td><td>72 (d)</td></tr></tbody></table></div><p class="mb-2 font-semibold">Calcule Sensibilidad y Especificidad.</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-diag')">Ver respuesta y comparar</button><div id="ans-diag" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">Sensibilidad = a/(a+c) = 13/14 = 93%<br>Especificidad = d/(b+d) = 72/91 = 79%</div>`
                    }
                },
                pros: { title: "Calculadora de Estudio Prospectivo", tableTitle: "Tabla de Resultados", outcome: "Resultado (+)", nooutcome: "No Resultado (-)", treated: "Tratado", nottreated: "No Tratado",
                    edu: {
                        title: "C√°lculo de Odds Ratio (OR) / Riesgo Relativo (RR)",
                        content: `<p class="mb-4 font-medium">Ejemplo: Profilaxis con trimetoprima-sulfametoxazol en cirrosis.</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>Grupo</th><th>Evento Ocurre</th><th>Evento No Ocurre</th><th>Totales</th></tr></thead><tbody><tr><td>Expuesto (Exp)</td><td>1 (a)</td><td>29 (b)</td><td>30</td></tr><tr><td>No Expuesto (Ctrl)</td><td>9 (c)</td><td>21 (d)</td><td>30</td></tr></tbody></table></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 font-mono text-xs mt-6 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl"><div class="space-y-2"><p><strong>CER</strong> = c/(c+d) = 9/30 = 0.30</p><p><strong>EER</strong> = a/(a+b) = 1/30 = 0.033</p></div><div class="space-y-2 border-l border-slate-200 dark:border-slate-700 pl-4"><p class="text-blue-600 dark:text-blue-400 font-bold">Riesgo Relativo (RR) = EER/CER = 0.11</p><p><strong>Odds Relativo (OR)</strong> = (a/b)/(c/d) = 0.08</p></div></div>`
                    }
                },
                case: { title: "Calculadora de Casos y Controles", tableTitle: "Tabla de Exposici√≥n", case: "Caso", control: "Control", exposed: "Expuesto", notexposed: "No Expuesto",
                    edu: {
                        title: "¬øPor qu√© Odds Ratio?",
                        content: `<p class="mb-3">En estudios de Casos y Controles, comenzamos con el resultado (enfermedad) y miramos hacia atr√°s a la exposici√≥n. Comparamos las <strong>Odds de Exposici√≥n</strong> en casos vs. controles.</p><ul class="list-disc pl-5 space-y-2"><li><strong>OR > 1:</strong> Exposici√≥n asociada con mayores odds de resultado (Factor de Riesgo).</li><li><strong>OR < 1:</strong> Exposici√≥n asociada con menores odds (Factor Protector).</li><li><strong>OR = 1:</strong> Sin asociaci√≥n.</li></ul><p class="mt-4 font-mono text-xs bg-amber-50 dark:bg-amber-900/20 p-3 rounded border border-amber-100 dark:border-amber-900/30">F√≥rmula: OR = (A √ó D) / (B √ó C)</p>`
                    }
                },
                rct: { title: "Calculadora ECA", tableTitle: "Tabla de Resultados", exp: "Experimental", ctrl: "Control", outcome: "Resultado", nooutcome: "No Resultado" },
                edurx: { 
                    title: "Cuaderno de Recetas Educativas",
                    whatTitle: "¬øQu√© es?",
                    whatContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>Especifica el <strong>problema cl√≠nico</strong>.</li><li>Plantea la pregunta en elementos clave (PICO).</li><li>Especifica <strong>qui√©n</strong> es responsable.</li><li>Recuerda la <strong>fecha l√≠mite</strong>.</li></ul>`,
                    whyTitle: "¬øPor qu√© usarlas?",
                    whyContent: `<p class="leading-relaxed">Las preguntas surgen pero se olvidan. Las recetas educativas ayudan a rastrear estas preguntas para 'llenarlas' m√°s tarde.</p>`,
                    tipsTitle: "Consejos para el √©xito",
                    tipsContent: `<ul class="list-disc pl-5 space-y-2 leading-relaxed"><li>Incl√∫yalas regularmente en rondas.</li><li>√öselas para el Club de Revistas.</li><li>Pida a los estudiantes que escriban recetas.</li></ul>`,
                    dlTitle: "Descargar Recursos",
                    dlContent: "Acceda a plantillas y cuaderno online.",
                    dlBtn: "Descargar Plantilla (.DOC)",
                    dlNote: "Se requiere inicio de sesi√≥n."
                },
                share: {
                    title: "Compartir Herramienta",
                    link: "Enlace",
                    summary: "Resumen",
                    html: "Incrustar HTML",
                    copy: "Copiar",
                    copied: "¬°Copiado con √©xito!"
                }
            },
            "ru": {
                title: "–ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ EBM",
                subtitle: "–ù–∞–±–æ—Ä –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π –º–µ–¥–∏—Ü–∏–Ω—ã. –î–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.",
                disclaimer: "‚ö†Ô∏è –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ä–µ—à–µ–Ω–∏—è –ù–ï –¥–æ–ª–∂–Ω—ã –æ—Å–Ω–æ–≤—ã–≤–∞—Ç—å—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —ç—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã.",
                tabs: { nnt: "OR –≤ NNT", diag: "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞", pros: "–ü—Ä–æ—Å–ø–µ–∫—Ç–∏–≤–Ω–æ–µ", case: "–°–ª—É—á–∞–π-–ö–æ–Ω—Ç—Ä–æ–ª—å", rct: "–†–ö–ò", edurx: "Edu Rx" },
                nnt: { 
                    title: "–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä OR –≤ NNT", 
                    instrTitle: "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏",
                    instr1: "–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ > 1 –∏–ª–∏ < 1 –≤ –û—Ç–Ω–æ—à–µ–Ω–∏–µ —à–∞–Ω—Å–æ–≤ (OR).",
                    instr2: "–í–≤–µ–¥–∏—Ç–µ PEER –æ—Ç 0 –¥–æ 1 (–û–∂–∏–¥–∞–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞ —Å–æ–±—ã—Ç–∏–π —É –ø–∞—Ü–∏–µ–Ω—Ç–∞).",
                    or: "–û—Ç–Ω–æ—à–µ–Ω–∏–µ —à–∞–Ω—Å–æ–≤ (OR)", peer: "–û–∂–∏–¥–∞–µ–º–∞—è —á–∞—Å—Ç–æ—Ç–∞ —Å–æ–±—ã—Ç–∏–π (PEER)", res: "NNT (–ß–∏—Å–ª–æ –±–æ–ª—å–Ω—ã—Ö –¥–ª—è –ª–µ—á–µ–Ω–∏—è)",
                    edu: {
                        title: "–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ NNT",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ —Ñ–æ—Ä–º—É–ª—ã</h4><p class="mb-3">NNT - —ç—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–ª–µ—á–∏—Ç—å, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –æ–¥–∏–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –ø–ª–æ—Ö–æ–π –∏—Å—Ö–æ–¥.</p><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>NNT = 1 / ARR</li><li>ARR = |CER - EER|</li></ul>`,
                        ex: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞</h4><p class="text-xs mb-3 font-semibold text-slate-500 uppercase">–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–∏–∞–±–µ—Ç–∞</p><ul class="text-xs space-y-2"><li class="flex justify-between"><span>–ö–æ–Ω—Ç—Ä–æ–ª—å:</span> <span class="font-mono">9.6% (0.096)</span></li><li class="flex justify-between"><span>–≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç:</span> <span class="font-mono">2.8% (0.028)</span></li><li class="border-t pt-2 mt-2">ARR = |9.6% - 2.8%| = 6.8%</li><li class="font-bold text-indigo-600 dark:text-indigo-400">NNT = 1 / 0.068 = 14.7 ‚âà 15</li></ul>`,
                        prac: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">–ü—Ä–∞–∫—Ç–∏–∫–∞</h4><p class="mb-3">–°–∫–æ–ª—å–∫–æ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω–æ –ª–µ—á–∏—Ç—å –≤ –∏–Ω—Å—É–ª—å—Ç–Ω—ã—Ö –±–ª–æ–∫–∞—Ö (SU), —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –æ–¥–Ω—É —Å–º–µ—Ä—Ç—å?</p><p class="font-mono text-xs mb-2">NNT = _______</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-nnt')">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button><div id="ans-nnt" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">ARR = |0.709 - 0.591| = 0.118<br>NNT = 1 / 0.118 = 8.47 ‚âà 9</div>`
                    }
                },
                diag: { 
                    title: "–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤", disease: "–ë–æ–ª–µ–∑–Ω—å (+)", nodisease: "–ù–µ—Ç –±–æ–ª–µ–∑–Ω–∏ (-)",
                    tableTitle: "–¢–∞–±–ª–∏—Ü–∞ —Å–æ–ø—Ä—è–∂–µ–Ω–Ω–æ—Å—Ç–∏",
                    pos: "–¢–µ—Å—Ç –ü–æ–ª (+)", neg: "–¢–µ—Å—Ç –û—Ç—Ä (-)",
                    optLR: "–ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ –û—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–∞–≤–¥–æ–ø–æ–¥–æ–±–∏—è (LR):",
                    resHead: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã (–û—Ü–µ–Ω–∫–∞ –∏ 95% –î–ò)",
                    sens: "–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", spec: "–°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å", ppv: "PPV", npv: "NPV",
                    edu: {
                        title: "–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç–∏",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ</h4><ul class="space-y-3 list-disc pl-4"><li><strong>–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> –î–æ–ª—è –±–æ–ª—å–Ω—ã—Ö —Å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —Ç–µ—Å—Ç–æ–º.</li><li><strong>–°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å:</strong> –î–æ–ª—è –∑–¥–æ—Ä–æ–≤—ã—Ö —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º —Ç–µ—Å—Ç–æ–º.</li></ul>`,
                        formula: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">–§–æ—Ä–º—É–ª—ã</h4><ul class="space-y-2 font-mono text-xs bg-slate-50 dark:bg-slate-900/50 p-4 rounded-lg"><li>–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å = a / (a + c)</li><li>–°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å = d / (b + d)</li></ul>`,
                        practice: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">–ü—Ä–∞–∫—Ç–∏–∫–∞</h4><p class="mb-3">–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ D-–¥–∏–º–µ—Ä–∞ –ø—Ä–∏ –¢–ì–í:</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>–¢–ì–í</th><th>–ï—Å—Ç—å</th><th>–ù–µ—Ç</th></tr></thead><tbody><tr><td>–¢–µ—Å—Ç +</td><td>13 (a)</td><td>19 (b)</td></tr><tr><td>–¢–µ—Å—Ç -</td><td>1 (c)</td><td>72 (d)</td></tr></tbody></table></div><p class="mb-2 font-semibold">–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å.</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-diag')">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button><div id="ans-diag" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">Sens = 93%<br>Spec = 79%</div>`
                    }
                },
                pros: { title: "–ö–æ–≥–æ—Ä—Ç–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ", tableTitle: "–¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ö–æ–¥–æ–≤", outcome: "–ò—Å—Ö–æ–¥ (+)", nooutcome: "–ù–µ—Ç –∏—Å—Ö–æ–¥–∞ (-)", treated: "–õ–µ—á–µ–Ω–∏–µ", nottreated: "–ë–µ–∑ –ª–µ—á–µ–Ω–∏—è",
                    edu: {
                        title: "–†–∞—Å—á–µ—Ç OR / RR",
                        content: `<p class="mb-4 font-medium">–ü—Ä–∏–º–µ—Ä: –ü—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∞ –ø—Ä–∏ —Ü–∏—Ä—Ä–æ–∑–µ.</p><div class="overflow-x-auto"><table class="edu-table"><thead><tr><th>–ì—Ä—É–ø–ø–∞</th><th>–°–æ–±—ã—Ç–∏–µ</th><th>–ù–µ—Ç —Å–æ–±—ã—Ç–∏—è</th><th>–í—Å–µ–≥–æ</th></tr></thead><tbody><tr><td>–≠–∫—Å–ø.</td><td>1 (a)</td><td>29 (b)</td><td>30</td></tr><tr><td>–ö–æ–Ω—Ç—Ä.</td><td>9 (c)</td><td>21 (d)</td><td>30</td></tr></tbody></table></div><div class="grid grid-cols-1 md:grid-cols-2 gap-4 font-mono text-xs mt-6 bg-slate-50 dark:bg-slate-900/50 p-4 rounded-xl"><div class="space-y-2"><p><strong>RR</strong> = EER/CER = 0.11</p><p><strong>OR</strong> = (a/b)/(c/d) = 0.08</p></div></div>`
                    }
                },
                case: { title: "–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –°–ª—É—á–∞–π-–ö–æ–Ω—Ç—Ä–æ–ª—å", tableTitle: "–¢–∞–±–ª–∏—Ü–∞ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏", case: "–°–ª—É—á–∞–π", control: "–ö–æ–Ω—Ç—Ä–æ–ª—å", exposed: "–ü–æ–¥–≤–µ—Ä–∂–µ–Ω", notexposed: "–ù–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω",
                    edu: {
                        title: "–ü–æ—á–µ–º—É –û—Ç–Ω–æ—à–µ–Ω–∏–µ —à–∞–Ω—Å–æ–≤?",
                        content: `<p class="mb-3">–í –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö —Å–ª—É—á–∞–π-–∫–æ–Ω—Ç—Ä–æ–ª—å –º—ã —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º <strong>–®–∞–Ω—Å—ã —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏</strong>.</p><ul class="list-disc pl-5 space-y-2"><li><strong>OR > 1:</strong> –§–∞–∫—Ç–æ—Ä —Ä–∏—Å–∫–∞.</li><li><strong>OR < 1:</strong> –ó–∞—â–∏—Ç–Ω—ã–π —Ñ–∞–∫—Ç–æ—Ä.</li><li><strong>OR = 1:</strong> –ù–µ—Ç —Å–≤—è–∑–∏.</li></ul>`
                    }
                },
                rct: { title: "–†–ö–ò –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä", tableTitle: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã", exp: "–≠–∫—Å–ø–µ—Ä.", ctrl: "–ö–æ–Ω—Ç—Ä.", outcome: "–ò—Å—Ö–æ–¥", nooutcome: "–ù–µ—Ç –∏—Å—Ö–æ–¥–∞" },
                edurx: { 
                    title: "–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã",
                    whatTitle: "–ß—Ç–æ —ç—Ç–æ?",
                    whatContent: "–£—Ç–æ—á–Ω—è–µ—Ç –∫–ª–∏–Ω–∏—á–µ—Å–∫—É—é –ø—Ä–æ–±–ª–µ–º—É –∏ –≤–æ–ø—Ä–æ—Å (PICO).",
                    whyTitle: "–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?",
                    whyContent: "–ü–æ–º–æ–≥–∞–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∏–∑—É—á–µ–Ω–∏—è.",
                    tipsTitle: "–°–æ–≤–µ—Ç—ã",
                    tipsContent: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞ –æ–±—Ö–æ–¥–∞—Ö –∏ –≤ –∂—É—Ä–Ω–∞–ª—å–Ω—ã—Ö –∫–ª—É–±–∞—Ö.",
                    dlTitle: "–°–∫–∞—á–∞—Ç—å",
                    dlContent: "–î–æ—Å—Ç—É–ø –∫ —à–∞–±–ª–æ–Ω–∞–º.",
                    dlBtn: "–°–∫–∞—á–∞—Ç—å —à–∞–±–ª–æ–Ω (.DOC)",
                    dlNote: "–¢—Ä–µ–±—É–µ—Ç—Å—è –≤—Ö–æ–¥."
                },
                share: {
                    title: "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è",
                    link: "–°—Å—ã–ª–∫–∞",
                    summary: "–†–µ–∑—é–º–µ",
                    html: "HTML –∫–æ–¥",
                    copy: "–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å",
                    copied: "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!"
                }
            },
            "hi": {
                title: "EBM ‡§ü‡•Ç‡§≤‡§¨‡•â‡§ï‡•ç‡§∏",
                subtitle: "‡§∏‡§æ‡§ï‡•ç‡§∑‡•ç‡§Ø-‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞ ‡§∏‡•Ç‡§ü‡•§ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø‡§ó‡§§ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§î‡§∞ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è‡•§",
                disclaimer: "‚ö†Ô∏è ‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§ï‡•á‡§µ‡§≤ ‡§á‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§ï‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ‡•ã‡§Ç ‡§™‡§∞ ‡§Ü‡§ß‡§æ‡§∞‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§®‡•á ‡§ö‡§æ‡§π‡§ø‡§è‡•§",
                tabs: { nnt: "OR ‡§∏‡•á NNT", diag: "‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï", pros: "‡§™‡•ç‡§∞‡•â‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§ü‡§ø‡§µ", case: "‡§ï‡•á‡§∏-‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤", rct: "RCT", edurx: "Edu Rx" },
                nnt: { 
                    title: "OR ‡§∏‡•á NNT ‡§ï‡§®‡•ç‡§µ‡§∞‡•ç‡§ü‡§∞", 
                    instrTitle: "‡§®‡§ø‡§∞‡•ç‡§¶‡•á‡§∂",
                    instr1: "Odds Ratio (OR) ‡§Æ‡•á‡§Ç > 1 ‡§Ø‡§æ < 1 ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§",
                    instr2: "0 ‡§î‡§∞ 1 ‡§ï‡•á ‡§¨‡•Ä‡§ö PEER ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç‡•§",
                    or: "Odds Ratio (OR)", peer: "PEER", res: "Number Needed to Treat (NNT)",
                    edu: {
                        title: "NNT ‡§™‡§∞ ‡§Ö‡§ß‡§ø‡§ï ‡§µ‡§ø‡§µ‡§∞‡§£",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">‡§™‡§∞‡§ø‡§≠‡§æ‡§∑‡§æ</h4><p class="mb-3">NNT ‡§â‡§® ‡§∞‡•ã‡§ó‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•Ä ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§π‡•à ‡§ú‡§ø‡§®‡§ï‡§æ ‡§â‡§™‡§ö‡§æ‡§∞ ‡§è‡§ï ‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§¨‡•Å‡§∞‡•á ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§ï‡•ã ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§</p>`,
                        ex: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">‡§ó‡§£‡§®‡§æ ‡§â‡§¶‡§æ‡§π‡§∞‡§£</h4><p class="text-xs mb-3 font-semibold text-slate-500 uppercase">‡§Æ‡§ß‡•Å‡§Æ‡•á‡§π ‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£</p>`,
                        prac: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏</h4><p class="mb-3">‡§è‡§ï ‡§Æ‡•å‡§§ ‡§ï‡•ã ‡§∞‡•ã‡§ï‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§§‡§®‡•á ‡§∞‡•ã‡§ó‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡§æ ‡§á‡§≤‡§æ‡§ú ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï‡§§‡§æ ‡§π‡•à?</p><button class="toggle-answer-btn" onclick="toggleAnswer('ans-nnt')">‡§â‡§§‡•ç‡§§‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç</button><div id="ans-nnt" class="hidden mt-4 p-4 bg-green-50 dark:bg-green-900/20 rounded-xl border border-green-200 dark:border-green-800 text-green-800 dark:text-green-200 font-mono text-sm shadow-sm">NNT = 9</div>`
                    }
                },
                diag: { 
                    title: "‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§£ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞", disease: "‡§∞‡•ã‡§ó (+)", nodisease: "‡§∞‡•ã‡§ó ‡§®‡§π‡•Ä‡§Ç (-)",
                    tableTitle: "‡§Ü‡§ï‡§∏‡•ç‡§Æ‡§ø‡§ï‡§§‡§æ ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ",
                    pos: "‡§ü‡•á‡§∏‡•ç‡§ü ‡§™‡•â‡§ú‡§ø‡§ü‡§ø‡§µ (+)", neg: "‡§ü‡•á‡§∏‡•ç‡§ü ‡§®‡•á‡§ó‡•á‡§ü‡§ø‡§µ (-)",
                    optLR: "‡§Ø‡§æ Likelihood Ratios (LR) ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç:",
                    resHead: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ",
                    sens: "Sensitivity", spec: "Specificity", ppv: "PPV", npv: "NPV",
                    edu: {
                        title: "Sensitivity ‡§î‡§∞ Specificity ‡§µ‡§ø‡§µ‡§∞‡§£",
                        def: "Sensitivity: ‡§∞‡•ã‡§ó ‡§µ‡§æ‡§≤‡•á ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ú‡§ø‡§®‡§ï‡§æ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§∏‡§ï‡§æ‡§∞‡§æ‡§§‡•ç‡§Æ‡§ï ‡§π‡•à‡•§",
                        formula: "Sensitivity = a / (a + c)",
                        practice: "‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏ ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç‡•§"
                    }
                },
                pros: { title: "‡§™‡•ç‡§∞‡•â‡§∏‡•ç‡§™‡•á‡§ï‡•ç‡§ü‡§ø‡§µ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞", tableTitle: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ", outcome: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ (+)", nooutcome: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§®‡§π‡•Ä‡§Ç (-)", treated: "‡§â‡§™‡§ö‡§æ‡§∞‡§ø‡§§", nottreated: "‡§â‡§™‡§ö‡§æ‡§∞‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç",
                    edu: { title: "OR / RR ‡§ó‡§£‡§®‡§æ", content: "‡§∏‡§æ‡§™‡•á‡§ï‡•ç‡§∑ ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§î‡§∞ ‡§ë‡§°‡•ç‡§∏ ‡§Ö‡§®‡•Å‡§™‡§æ‡§§ ‡§ï‡•Ä ‡§ó‡§£‡§®‡§æ‡•§" }
                },
                case: { title: "‡§ï‡•á‡§∏-‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞", tableTitle: "‡§è‡§ï‡•ç‡§∏‡§™‡•ã‡§ú‡§º‡§∞ ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ", case: "‡§ï‡•á‡§∏", control: "‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤", exposed: "‡§â‡§ú‡§æ‡§ó‡§∞", notexposed: "‡§â‡§ú‡§æ‡§ó‡§∞ ‡§®‡§π‡•Ä‡§Ç",
                    edu: { title: "‡§ë‡§°‡•ç‡§∏ ‡§∞‡•á‡§∂‡•ç‡§Ø‡•ã ‡§ï‡•ç‡§Ø‡•ã‡§Ç?", content: "‡§ï‡•á‡§∏-‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§Æ‡•á‡§Ç ‡§π‡§Æ ‡§è‡§ï‡•ç‡§∏‡§™‡•ã‡§ú‡§º‡§∞ ‡§ë‡§°‡•ç‡§∏ ‡§ï‡•Ä ‡§§‡•Å‡§≤‡§®‡§æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§" }
                },
                rct: { title: "RCT ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞", tableTitle: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ", exp: "‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó‡§æ‡§§‡•ç‡§Æ‡§ï", ctrl: "‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤", outcome: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ", nooutcome: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§®‡§π‡•Ä‡§Ç" },
                edurx: { 
                    title: "‡§∂‡•à‡§ï‡•ç‡§∑‡§ø‡§ï ‡§®‡•Å‡§∏‡•ç‡§ñ‡•á ‡§≤‡•â‡§ó‡§¨‡•Å‡§ï",
                    whatTitle: "‡§Ø‡§π ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•à?",
                    whatContent: "‡§®‡•à‡§¶‡§æ‡§®‡§ø‡§ï ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§î‡§∞ ‡§™‡•ç‡§∞‡§∂‡•ç‡§® (PICO) ‡§ï‡•ã ‡§®‡§ø‡§∞‡•ç‡§¶‡§ø‡§∑‡•ç‡§ü ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§",
                    whyTitle: "‡§á‡§∏‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡§∞‡•á‡§Ç?",
                    whyContent: "‡§™‡•ç‡§∞‡§∂‡•ç‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§ü‡•ç‡§∞‡•à‡§ï ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§",
                    tipsTitle: "‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡•Å‡§ù‡§æ‡§µ",
                    tipsContent: "‡§∞‡§æ‡§â‡§Ç‡§°‡•ç‡§∏ ‡§Æ‡•á‡§Ç ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§∞‡•Ç‡§™ ‡§∏‡•á ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§ï‡§∞‡•á‡§Ç‡•§",
                    dlTitle: "‡§∏‡§Ç‡§∏‡§æ‡§ß‡§® ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
                    dlContent: "‡§ü‡•á‡§Æ‡•ç‡§™‡§≤‡•á‡§ü ‡§è‡§ï‡•ç‡§∏‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§",
                    dlBtn: "‡§ü‡•á‡§Æ‡•ç‡§™‡§≤‡•á‡§ü ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
                    dlNote: "‡§≤‡•â‡§ó‡§ø‡§® ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡•§"
                },
                share: {
                    title: "‡§∂‡•á‡§Ø‡§∞ ‡§ü‡•Ç‡§≤",
                    link: "‡§≤‡§ø‡§Ç‡§ï",
                    summary: "‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂",
                    html: "HTML ‡§è‡§Æ‡•ç‡§¨‡•á‡§°",
                    copy: "‡§ï‡•â‡§™‡•Ä",
                    copied: "‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ï‡•â‡§™‡•Ä ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!"
                }
            },
            "pl": {
                title: "Przybornik EBM",
                subtitle: "Zestaw kalkulator√≥w medycyny opartej na faktach. Do u≈ºytku osobistego i test√≥w.",
                disclaimer: "‚ö†Ô∏è Decyzje medyczne NIE powinny opieraƒá siƒô wy≈ÇƒÖcznie na wynikach tego programu.",
                tabs: { nnt: "OR na NNT", diag: "Diagnostyka", pros: "Prospektywne", case: "Kliniczno-Kontrolne", rct: "RCT", edurx: "Edu Rx" },
                nnt: { 
                    title: "Konwerter OR na NNT", 
                    instrTitle: "Instrukcje",
                    instr1: "Wprowad≈∫ liczbƒô > 1 lub < 1 w Odds Ratio (OR).",
                    instr2: "Wprowad≈∫ PEER miƒôdzy 0 a 1.",
                    or: "Iloraz Szans (OR)", peer: "Oczekiwana czƒôsto≈õƒá zdarze≈Ñ (PEER)", res: "NNT",
                    edu: {
                        title: "Wiƒôcej o NNT",
                        def: `<h4 class="font-bold mb-3 text-slate-800 dark:text-white text-base">Definicja</h4><p class="mb-3">NNT to liczba pacjent√≥w, kt√≥rych nale≈ºy poddaƒá leczeniu, aby zapobiec jednemu dodatkowemu z≈Çemu wynikowi.</p>`,
                        ex: "Przyk≈Çad obliczenia...",
                        prac: "ƒÜwiczenie..."
                    }
                },
                diag: { 
                    title: "Kalkulator Test√≥w Diagnostycznych", disease: "Choroba (+)", nodisease: "Brak Choroby (-)",
                    tableTitle: "Tabela Kontyngencji",
                    pos: "Test Poz (+)", neg: "Test Neg (-)",
                    optLR: "Lub wprowad≈∫ LR:",
                    resHead: "Wyniki",
                    sens: "Czu≈Ço≈õƒá", spec: "Swoisto≈õƒá", ppv: "PPV", npv: "NPV",
                    edu: { title: "Czu≈Ço≈õƒá i Swoisto≈õƒá", def: "Definicje...", formula: "Wzory...", practice: "ƒÜwiczenie..." }
                },
                pros: { title: "Kalkulator Bada≈Ñ Prospektywnych", tableTitle: "Tabela Wynik√≥w", outcome: "Wynik (+)", nooutcome: "Brak Wyniku (-)", treated: "Leczeni", nottreated: "Nieleczeni",
                    edu: { title: "Obliczanie OR / RR", content: "Przyk≈Çad..." }
                },
                case: { title: "Kalkulator Bada≈Ñ Kliniczno-Kontrolnych", tableTitle: "Tabela Ekspozycji", case: "Przypadek", control: "Kontrola", exposed: "Nara≈ºony", notexposed: "Nienara≈ºony",
                    edu: { title: "Dlaczego OR?", content: "Wyja≈õnienie..." }
                },
                rct: { title: "Kalkulator RCT", tableTitle: "Tabela Wynik√≥w", exp: "Eksperyment", ctrl: "Kontrola", outcome: "Wynik", nooutcome: "Brak Wyniku" },
                edurx: { 
                    title: "Dziennik Recept Edukacyjnych",
                    whatTitle: "Co to jest?",
                    whatContent: "Okre≈õla problem kliniczny i pytanie (PICO).",
                    whyTitle: "Dlaczego warto u≈ºywaƒá?",
                    whyContent: "Pomaga ≈õledziƒá pytania.",
                    tipsTitle: "Wskaz√≥wki",
                    tipsContent: "U≈ºywaj regularnie.",
                    dlTitle: "Pobierz Zasoby",
                    dlContent: "Dostƒôp do szablon√≥w.",
                    dlBtn: "Pobierz Szablon",
                    dlNote: "Wymagane logowanie."
                },
                share: {
                    title: "Udostƒôpnij",
                    link: "Link",
                    summary: "Podsumowanie",
                    html: "Kod HTML",
                    copy: "Kopiuj",
                    copied: "Skopiowano!"
                }
            }
        };

        let currentLang = 'en';

        // --- Core Logic ---

        // 1. OR to NNT
        function calculateNNT() {
            const or = parseFloat(document.getElementById('nnt-or').value);
            const peer = parseFloat(document.getElementById('nnt-peer').value);
            const el = document.getElementById('res-nnt-val');

            if (!or || !peer || peer <= 0 || peer >= 1) {
                el.innerText = "--";
                return;
            }

            // Formula: NNT = (1 - (PEER * (1 - OR))) / ((1 - PEER) * PEER * (1 - OR))
            // Denom check to avoid zero division
            const denom = (1 - peer) * peer * (1 - or);
            if (denom === 0) { el.innerText = "Error"; return; }
            
            const num = 1 - (peer * (1 - or));
            let nnt = num / denom;

            // Round to nearest whole number usually preferred in clinical setting, but we show 1 decimal
            el.innerText = Math.abs(nnt).toFixed(1);
        }

        // 2. Diagnostic
        function calcDiag() {
            const a = parseFloat(document.getElementById('diag-a').value) || 0;
            const b = parseFloat(document.getElementById('diag-b').value) || 0;
            const c = parseFloat(document.getElementById('diag-c').value) || 0;
            const d = parseFloat(document.getElementById('diag-d').value) || 0;

            if (a+c === 0 || b+d === 0) return;

            const sens = a / (a + c);
            const spec = d / (b + d);
            const ppv = (a + b) > 0 ? a / (a + b) : 0;
            const npv = (c + d) > 0 ? d / (c + d) : 0;
            
            const lrP = (1 - spec) === 0 ? "‚àû" : (sens / (1 - spec)).toFixed(2);
            const lrN = spec === 0 ? "‚àû" : ((1 - sens) / spec).toFixed(2);

            updateDiagRes('val-sens', sens, a + c);
            updateDiagRes('val-spec', spec, b + d);
            updateDiagRes('val-ppv', ppv, a + b);
            updateDiagRes('val-npv', npv, c + d);

            document.getElementById('val-lrp').innerText = lrP;
            document.getElementById('val-lrn').innerText = lrN;
        }

        function updateDiagRes(id, p, n) {
            // Wilson Score Interval simplified or standard error
            const se = Math.sqrt((p * (1 - p)) / n);
            const ci = 1.96 * se;
            const low = Math.max(0, p - ci);
            const high = Math.min(1, p + ci);
            document.getElementById(id).innerText = `${(p*100).toFixed(1)}% (${(low*100).toFixed(1)} - ${(high*100).toFixed(1)})`;
        }

        function calcDiagFromLR() {
            // Placeholder for direct LR input logic if needed, mostly display
            const lrP = document.getElementById('diag-lr-pos').value;
            const lrN = document.getElementById('diag-lr-neg').value;
            if(lrP) document.getElementById('val-lrp').innerText = parseFloat(lrP).toFixed(2);
            if(lrN) document.getElementById('val-lrn').innerText = parseFloat(lrN).toFixed(2);
        }

        // 3. Prospective
        function calcPros() {
            const a = parseFloat(document.getElementById('pros-a').value);
            const b = parseFloat(document.getElementById('pros-b').value);
            const c = parseFloat(document.getElementById('pros-c').value);
            const d = parseFloat(document.getElementById('pros-d').value);
            
            if(!a || !b || !c || !d) return;

            const totalTreated = a + b;
            const totalControl = c + d;
            
            const riskTreated = a / totalTreated;
            const riskControl = c / totalControl;

            const rr = riskTreated / riskControl;
            const arr = riskControl - riskTreated; // Absolute Risk Reduction
            const nnt = 1 / arr;
            const chi = calcChi(a,b,c,d);

            document.getElementById('pros-chi').innerText = chi.toFixed(2);
            document.getElementById('pros-rr').innerText = rr.toFixed(2);
            document.getElementById('pros-arr').innerText = (arr * 100).toFixed(2) + '%';
            document.getElementById('pros-nnt').innerText = Math.abs(nnt).toFixed(1);
        }

        // 4. Case Control
        function calcCase() {
            const a = parseFloat(document.getElementById('case-a').value);
            const b = parseFloat(document.getElementById('case-b').value);
            const c = parseFloat(document.getElementById('case-c').value);
            const d = parseFloat(document.getElementById('case-d').value);

            if(!a || !b || !c || !d) return;

            // OR = (a/c) / (b/d) = ad / bc
            const or = (a * d) / (b * c);
            const chi = calcChi(a,b,c,d);
            
            // Log OR CI
            const lnOr = Math.log(or);
            const seLnOr = Math.sqrt(1/a + 1/b + 1/c + 1/d);
            const ciLow = Math.exp(lnOr - 1.96 * seLnOr);
            const ciHigh = Math.exp(lnOr + 1.96 * seLnOr);

            document.getElementById('case-chi').innerText = chi.toFixed(2);
            document.getElementById('case-or').innerText = or.toFixed(2);
            document.getElementById('case-ci').innerText = `95% CI: ${ciLow.toFixed(2)} - ${ciHigh.toFixed(2)}`;
        }

        // 5. RCT
        function calcRCT() {
            const a = parseFloat(document.getElementById('rct-a').value);
            const b = parseFloat(document.getElementById('rct-b').value);
            const c = parseFloat(document.getElementById('rct-c').value);
            const d = parseFloat(document.getElementById('rct-d').value);

            if(!a || !b || !c || !d) return;

            const eer = a / (a + b);
            const cer = c / (c + d);
            
            const rr = eer / cer;
            const rrr = 1 - rr;
            const arr = cer - eer;
            const nnt = 1 / arr;
            const chi = calcChi(a,b,c,d);

            document.getElementById('rct-chi').innerText = chi.toFixed(2);
            document.getElementById('rct-rr').innerText = rr.toFixed(2);
            document.getElementById('rct-rrr').innerText = (rrr * 100).toFixed(2) + '%';
            document.getElementById('rct-arr').innerText = (arr * 100).toFixed(2) + '%';
            document.getElementById('rct-nnt').innerText = Math.abs(nnt).toFixed(1);
        }

        function calcChi(a,b,c,d) {
            const n = a + b + c + d;
            return (n * Math.pow(Math.abs(a*d - b*c) - n/2, 2)) / ((a+b)*(c+d)*(a+c)*(b+d)); 
            // Note: Yates correction applied above (- n/2). Remove if standard Pearson desired. 
            // Simpler: (n * (a*d - b*c)**2) / ((a+b)*(c+d)*(a+c)*(b+d))
        }

        // --- UI Functions ---
        function switchTab(id) {
            ['nnt', 'diag', 'pros', 'case', 'rct', 'edurx'].forEach(t => {
                document.getElementById('section-' + t).classList.add('hidden');
                document.getElementById('btn-' + t).classList.remove('active');
            });
            document.getElementById('section-' + id).classList.remove('hidden');
            document.getElementById('btn-' + id).classList.add('active');
        }

        function toggleTheme() {
            const isDark = document.documentElement.classList.toggle('dark');
            document.getElementById('theme-icon-sun').classList.toggle('hidden', !isDark);
            document.getElementById('theme-icon-moon').classList.toggle('hidden', isDark);
        }
        
        function toggleAnswer(id) {
            document.getElementById(id).classList.toggle('hidden');
        }

        function changeLanguage(lang) {
            currentLang = lang;
            const data = i18n[lang];
            
            // Update URL
            const url = new URL(window.location);
            url.searchParams.set('lang', lang);
            window.history.replaceState({}, '', url);

            // Update body attr for CSS
            document.body.setAttribute('data-lang', lang);
            
            // Header
            document.getElementById('ui-title').innerText = data.title;
            document.getElementById('ui-subtitle').innerText = data.subtitle;
            document.getElementById('ui-disclaimer').innerText = data.disclaimer;
            
            // Tabs
            document.getElementById('tab-nnt').innerText = data.tabs.nnt;
            document.getElementById('tab-diag').innerText = data.tabs.diag;
            document.getElementById('tab-pros').innerText = data.tabs.pros;
            document.getElementById('tab-case').innerText = data.tabs.case;
            document.getElementById('tab-rct').innerText = data.tabs.rct;
            document.getElementById('tab-edurx').innerText = data.tabs.edurx;

            // NNT Section
            document.getElementById('title-nnt').innerHTML = `<span class="bg-sky-100 dark:bg-sky-900 p-2 rounded-lg text-2xl">üíä</span> ` + data.nnt.title;
            document.getElementById('instr-nnt-title').innerHTML = `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> ` + data.nnt.instrTitle;
            document.getElementById('instr-nnt-1').innerText = data.nnt.instr1;
            document.getElementById('instr-nnt-2').innerText = data.nnt.instr2;
            document.getElementById('lbl-or').innerText = data.nnt.or;
            document.getElementById('lbl-peer').innerText = data.nnt.peer;
            document.getElementById('res-nnt-label').innerText = data.nnt.res;
            // NNT Edu
            document.getElementById('edu-nnt-title').innerHTML = `<svg class="w-6 h-6 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path></svg> ` + data.nnt.edu.title;
            document.getElementById('edu-nnt-def').innerHTML = data.nnt.edu.def;
            if(data.nnt.edu.ex) document.getElementById('edu-nnt-example').innerHTML = data.nnt.edu.ex;
            if(data.nnt.edu.prac) document.getElementById('edu-nnt-practice').innerHTML = data.nnt.edu.prac;

            // Diagnostic Section
            document.getElementById('title-diag').innerHTML = `<span class="bg-purple-100 dark:bg-purple-900 p-2 rounded-lg text-2xl">üî¨</span> ` + data.diag.title;
            document.getElementById('col-disease').innerText = data.diag.disease;
            document.getElementById('col-no-disease').innerText = data.diag.nodisease;
            document.getElementById('diag-table-title').innerText = data.diag.tableTitle;
            document.getElementById('row-pos').innerText = data.diag.pos;
            document.getElementById('row-neg').innerText = data.diag.neg;
            document.getElementById('opt-lr').innerHTML = `<span>‚ö°</span> ` + data.diag.optLR;
            document.getElementById('res-header').innerHTML = `<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg> ` + data.diag.resHead;
            document.getElementById('res-sens').innerText = data.diag.sens;
            document.getElementById('res-spec').innerText = data.diag.spec;
            document.getElementById('res-ppv').innerText = data.diag.ppv;
            document.getElementById('res-npv').innerText = data.diag.npv;
            // Diag Edu
            document.getElementById('edu-sens-title').innerHTML = `<svg class="w-6 h-6 text-purple-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> ` + data.diag.edu.title;
            if(data.diag.edu.def) document.getElementById('edu-sens-def').innerHTML = data.diag.edu.def;
            if(data.diag.edu.formula) document.getElementById('edu-sens-formula').innerHTML = data.diag.edu.formula;
            if(data.diag.edu.practice) document.getElementById('edu-sens-practice').innerHTML = data.diag.edu.practice;

            // Prospective
            document.getElementById('title-pros').innerHTML = `<span class="bg-green-100 dark:bg-green-900 p-2 rounded-lg text-2xl">üîÆ</span> ` + data.pros.title;
            document.getElementById('col-outcome').innerText = data.pros.outcome;
            document.getElementById('col-no-outcome').innerText = data.pros.nooutcome;
            document.getElementById('pros-table-title').innerText = data.pros.tableTitle;
            document.getElementById('row-treated').innerText = data.pros.treated;
            document.getElementById('row-not-treated').innerText = data.pros.nottreated;
            // Pros Edu
            document.getElementById('edu-rr-title').innerHTML = `<svg class="w-6 h-6 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg> ` + data.pros.edu.title;
            if(data.pros.edu.content) document.getElementById('edu-rr-content').innerHTML = data.pros.edu.content;

            // Case Control
            document.getElementById('title-case').innerHTML = `<span class="bg-amber-100 dark:bg-amber-900 p-2 rounded-lg text-2xl">üîé</span> ` + data.case.title;
            document.getElementById('col-case').innerText = data.case.case;
            document.getElementById('col-control').innerText = data.case.control;
            document.getElementById('case-table-title').innerText = data.case.tableTitle;
            document.getElementById('row-exposed').innerText = data.case.exposed;
            document.getElementById('row-not-exposed').innerText = data.case.notexposed;
            // Case Edu
            document.getElementById('edu-or-title').innerHTML = `<svg class="w-6 h-6 text-amber-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg> ` + data.case.edu.title;
            if(data.case.edu.content) document.getElementById('edu-or-content').innerHTML = data.case.edu.content;

            // RCT
            document.getElementById('title-rct').innerHTML = `<span class="bg-indigo-100 dark:bg-indigo-900 p-2 rounded-lg text-2xl">üé≤</span> ` + data.rct.title;
            document.getElementById('col-outcome-rct').innerText = data.rct.outcome;
            document.getElementById('col-no-outcome-rct').innerText = data.rct.nooutcome;
            document.getElementById('rct-table-title').innerText = data.rct.tableTitle;
            document.getElementById('row-exp').innerText = data.rct.exp;
            document.getElementById('row-ctrl').innerText = data.rct.ctrl;
            
            // Edu Rx
            document.getElementById('title-edurx').innerHTML = `<span class="bg-pink-100 dark:bg-pink-900 p-2 rounded-lg text-2xl">üéì</span> ` + data.edurx.title;
            document.getElementById('edurx-what-title').innerHTML = `<span class="text-xl">ü§î</span> ` + data.edurx.whatTitle;
            document.getElementById('edurx-what-content').innerHTML = data.edurx.whatContent;
            document.getElementById('edurx-why-title').innerHTML = `<span class="text-xl">üí°</span> ` + data.edurx.whyTitle;
            document.getElementById('edurx-why-content').innerHTML = data.edurx.whyContent;
            document.getElementById('edurx-tips-title').innerHTML = `<span class="text-xl">üöÄ</span> ` + data.edurx.tipsTitle;
            document.getElementById('edurx-tips-content').innerHTML = data.edurx.tipsContent;
            document.getElementById('edurx-dl-title').innerText = data.edurx.dlTitle;
            document.getElementById('edurx-dl-content').innerText = data.edurx.dlContent;
            document.getElementById('edurx-dl-btn').innerText = data.edurx.dlBtn;
            document.getElementById('edurx-dl-note').innerText = data.edurx.dlNote;

            // Share Modal
            document.getElementById('ui-share-title').innerHTML = `<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"></path></svg> ` + data.share.title;
            document.getElementById('ui-share-link-label').innerText = data.share.link;
            document.getElementById('ui-share-text-label').innerText = data.share.summary;
            document.getElementById('ui-share-html-label').innerText = data.share.html;
            document.getElementById('ui-copy-btn-1').innerText = data.share.copy;
            document.getElementById('copyNotice').innerText = data.share.copied;
        }

        // --- Share Functionality ---
        function updateShareContent() {
            const data = i18n[currentLang];
            const url = window.location.href;
            const summary = `${data.title} - ${data.subtitle}`;
            const html = `<iframe src="${url}" width="100%" height="600px" style="border:none;"></iframe>`;
            
            document.getElementById('shareUrl').value = url;
            document.getElementById('shareTextSummary').value = summary;
            document.getElementById('shareHtmlEmbed').value = html;
        }

        function openShareModal() { 
            updateShareContent();
            document.getElementById('shareModal').classList.remove('hidden'); 
        }
        
        function copyToClipboard(inputId) {
            const input = document.getElementById(inputId);
            input.select();
            document.execCommand('copy'); // Fallback
            // Modern API if available
            if(navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(input.value);
            }
            
            const notice = document.getElementById('copyNotice');
            notice.style.opacity = '1';
            setTimeout(() => notice.style.opacity = '0', 2000);
        }

        // Init
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const lang = urlParams.get('lang') || 'en';
            if(i18n[lang]) {
                document.getElementById('lang-select').value = lang;
                changeLanguage(lang);
            } else {
                changeLanguage('en');
            }

            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                toggleTheme();
            }
        });
    </script>
 <!--  ÁªìÂ∞æÂøÖÈ°ªÂåÖÂê´ÁöÑ‰ª£Á†Å -->

    <div id="related-tools-container"></div>

    <script src="/scripts/related.js"></script>

</body>

</html>