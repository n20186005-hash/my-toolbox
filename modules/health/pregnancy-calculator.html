<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pregnancy Calculator</title>
    
    <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
    <meta name="tool-id" content="pregnancy_calculator">
    <meta name="category" content="health">
    <meta name="icon" content="üë∂">
    
    <!-- ÈªòËÆ§Ëã±ÊñáÂÜÖÂÆπ -->
    <meta name="title" content="Pregnancy Calculator">
    <meta name="description" content="Estimate your due date, gestational age, and other important pregnancy milestones.">
    
    <!-- Â§öËØ≠Ë®ÄÈÖçÁΩÆ -->
    <meta name="lang-title-zh-CN" content="ÊÄÄÂ≠ïËÆ°ÁÆóÂô®">
    <meta name="lang-description-zh-CN" content="‰º∞ÁÆóÊÇ®ÁöÑÈ¢Ñ‰∫ßÊúü„ÄÅËÉéÈæÑÂíåÂÖ∂‰ªñÈáçË¶ÅÁöÑÊÄÄÂ≠ïÈáåÁ®ãÁ¢ë„ÄÇ">
    
    <meta name="lang-title-zh-TW" content="Êá∑Â≠ïË®àÁÆóÂô®">
    <meta name="lang-description-zh-TW" content="‰º∞ÁÆóÊÇ®ÁöÑÈ†êÁî¢Êúü„ÄÅËÉéÈΩ°ÂíåÂÖ∂‰ªñÈáçË¶ÅÁöÑÊá∑Â≠ïÈáåÁ®ãÁ¢ë„ÄÇ">
    
    <meta name="lang-title-ja" content="Â¶äÂ®†Ë®àÁÆó„ÉÑ„Éº„É´">
    <meta name="lang-description-ja" content="ÂàÜÂ®©‰∫àÂÆöÊó•„ÄÅÂú®ËÉéÊúüÈñì„ÄÅ„Åù„ÅÆ‰ªñ„ÅÆÈáçË¶Å„Å™Â¶äÂ®†„Éû„Ç§„É´„Çπ„Éà„Éº„É≥„ÇíÊé®ÂÆö„Åó„Åæ„Åô„ÄÇ">
    
    <meta name="lang-title-ru" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏">
    <meta name="lang-description-ru" content="–û—Ü–µ–Ω–∏—Ç–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—É—é –¥–∞—Ç—É —Ä–æ–¥–æ–≤, –≥–µ—Å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –∏ –¥—Ä—É–≥–∏–µ –≤–∞–∂–Ω—ã–µ –≤–µ—Ö–∏ –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .result-section { margin-top: 20px; padding: 15px; background: #e8f4f8; border-radius: 8px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 500; }
        input, select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .milestone-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px; margin-top: 15px; }
        .milestone-item { background: white; padding: 10px; border-radius: 4px; }
        .progress-container { margin: 20px 0; }
        .progress-bar { height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; background: #4ade80; width: 0%; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/health/pregnancy-calculator.html" />
</head>
<body>

    <div class="tool-module active" 
         data-id="pregnancy_calculator" 
         data-category="health" 
         data-title="Pregnancy Calculator" 
         data-icon="üë∂">
        
        <!-- ËØ≠Ë®ÄÈÄâÊã©Âô® -->
        <div class="absolute top-4 right-4">
            <select id="pregnancy-lang" onchange="PregnancyCalculator.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üë∂ Pregnancy Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- ËÆ°ÁÆóÊñπÂºèÈÄâÊã© -->
            <div class="form-group">
                <label data-i18n="calculation_method">Calculation Method</label>
                <select id="calc-method" onchange="PregnancyCalculator.toggleInputs()" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="lmp" selected data-i18n="last_period">Last Menstrual Period</option>
                    <option value="conception" data-i18n="conception_date">Conception Date</option>
                    <option value="ultrasound" data-i18n="ultrasound_date">Ultrasound Date</option>
                </select>
            </div>
            
            <!-- Êú´Ê¨°ÊúàÁªèËæìÂÖ• -->
            <div id="lmp-input" class="form-group">
                <label data-i18n="first_day_lmp">First Day of Last Menstrual Period</label>
                <input type="date" id="lmp-date" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- ÂèóÂ≠ïÊó•ÊúüËæìÂÖ• (ÈªòËÆ§ÈöêËóè) -->
            <div id="conception-input" class="form-group hidden">
                <label data-i18n="conception_date">Conception Date</label>
                <input type="date" id="conception-date" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- Ë∂ÖÂ£∞Ê≥¢Êó•ÊúüËæìÂÖ• (ÈªòËÆ§ÈöêËóè) -->
            <div id="ultrasound-input" class="form-group hidden">
                <label data-i18n="ultrasound_date">Ultrasound Date</label>
                <input type="date" id="ultrasound-date" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                <div class="mt-2">
                    <label data-i18n="gestational_age_at_ultrasound">Gestational Age at Ultrasound (weeks)</label>
                    <input type="number" id="ultrasound-weeks" min="4" max="40" value="12" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
            </div>
            
            <!-- Êìç‰ΩúÊåâÈíÆ -->
            <div class="flex gap-2">
                <button onclick="PregnancyCalculator.clearForm()" class="flex-1 bg-gray-600 text-white py-2 rounded font-bold hover:bg-gray-700 transition" data-i18n="clear">Clear</button>
                <button onclick="PregnancyCalculator.calculate()" class="flex-2 bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Calculate</button>
            </div>
        </div>

        <!-- ÈîôËØØÊèêÁ§∫ -->
        <div id="pregnancy-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- ÁªìÊûúÂ±ïÁ§∫ -->
        <div id="pregnancy-results" class="hidden">
            <div class="text-sm text-gray-500 mb-2" data-i18n="results">Results</div>
            <div class="result-section">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <div>
                        <div class="text-sm text-gray-500" data-i18n="due_date">Estimated Due Date</div>
                        <div class="text-lg font-medium" id="due-date">-</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-500" data-i18n="current_week">Current Week of Pregnancy</div>
                        <div class="text-lg font-medium" id="current-week">-</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-500" data-i18n="days_pregnant">Days Pregnant</div>
                        <div class="text-lg font-medium" id="days-pregnant">-</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-500" data-i18n="weeks_remaining">Weeks Remaining</div>
                        <div class="text-lg font-medium" id="weeks-remaining">-</div>
                    </div>
                </div>
                
                <div class="progress-container">
                    <div class="flex justify-between text-xs mb-1">
                        <span data-i18n="trimester1">1st Trimester</span>
                        <span data-i18n="trimester2">2nd Trimester</span>
                        <span data-i18n="trimester3">3rd Trimester</span>
                        <span data-i18n="due">Due</span>
                    </div>
                    <div class="progress-bar">
                        <div id="pregnancy-progress" class="progress-fill"></div>
                    </div>
                </div>
                
                <div class="mt-4">
                    <div class="text-sm text-gray-500 mb-2" data-i18n="key_milestones">Key Milestones</div>
                    <div class="milestone-grid" id="milestones">
                        <!-- ÈáåÁ®ãÁ¢ëÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ËØ¥Êòé‰ø°ÊÅØ -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="notes">Notes:</p>
            <ul class="list-disc list-inside mt-2 space-y-1">
                <li data-i18n="note1">The estimated due date is calculated as 40 weeks from the first day of your last menstrual period.</li>
                <li data-i18n="note2">Only about 5% of babies are born on their exact due date.</li>
                <li data-i18n="note3">This calculator provides estimates only and should not replace professional medical advice.</li>
            </ul>
        </div>
    </div>

    <script>
        const PregnancyCalculator = {
            // Â§öËØ≠Ë®ÄÊñáÊú¨
            i18n: {
                'en': {
                    title: 'üë∂ Pregnancy Calculator',
                    calculation_method: 'Calculation Method',
                    last_period: 'Last Menstrual Period',
                    conception_date: 'Conception Date',
                    ultrasound_date: 'Ultrasound Date',
                    first_day_lmp: 'First Day of Last Menstrual Period',
                    gestational_age_at_ultrasound: 'Gestational Age at Ultrasound (weeks)',
                    clear: 'Clear',
                    calculate: 'Calculate',
                    results: 'Results',
                    due_date: 'Estimated Due Date',
                    current_week: 'Current Week of Pregnancy',
                    days_pregnant: 'Days Pregnant',
                    weeks_remaining: 'Weeks Remaining',
                    trimester1: '1st Trimester',
                    trimester2: '2nd Trimester',
                    trimester3: '3rd Trimester',
                    due: 'Due',
                    key_milestones: 'Key Milestones',
                    notes: 'Notes:',
                    note1: 'The estimated due date is calculated as 40 weeks from the first day of your last menstrual period.',
                    note2: 'Only about 5% of babies are born on their exact due date.',
                    note3: 'This calculator provides estimates only and should not replace professional medical advice.',
                    err_invalid_date: 'Please enter a valid date',
                    milestone1: 'First Trimester Ends: ',
                    milestone2: 'Second Trimester Ends: ',
                    milestone3: 'Fetal Viability: ',
                    milestone4: 'Full Term: '
                },
                'zh-CN': {
                    title: 'üë∂ ÊÄÄÂ≠ïËÆ°ÁÆóÂô®',
                    calculation_method: 'ËÆ°ÁÆóÊñπÂºè',
                    last_period: 'Êú´Ê¨°ÊúàÁªè',
                    conception_date: 'ÂèóÂ≠ïÊó•Êúü',
                    ultrasound_date: 'Ë∂ÖÂ£∞Ê≥¢Êó•Êúü',
                    first_day_lmp: 'Êú´Ê¨°ÊúàÁªèÁ¨¨‰∏ÄÂ§©',
                    gestational_age_at_ultrasound: 'Ë∂ÖÂ£∞Ê≥¢Êó∂ÁöÑËÉéÈæÑÔºàÂë®Ôºâ',
                    clear: 'Ê∏ÖÈô§',
                    calculate: 'ËÆ°ÁÆó',
                    results: 'ÁªìÊûú',
                    due_date: 'È¢ÑËÆ°È¢Ñ‰∫ßÊúü',
                    current_week: 'ÂΩìÂâçÊÄÄÂ≠ïÂë®Êï∞',
                    days_pregnant: 'Â∑≤ÊÄÄÂ≠ïÂ§©Êï∞',
                    weeks_remaining: 'Ââ©‰ΩôÂë®Êï∞',
                    trimester1: 'Â≠ïÊó©Êúü',
                    trimester2: 'Â≠ï‰∏≠Êúü',
                    trimester3: 'Â≠ïÊôöÊúü',
                    due: 'È¢Ñ‰∫ßÊúü',
                    key_milestones: 'ÈáçË¶ÅÈáåÁ®ãÁ¢ë',
                    notes: 'ËØ¥ÊòéÔºö',
                    note1: 'È¢ÑËÆ°È¢Ñ‰∫ßÊúüÊòØ‰ªéÊú´Ê¨°ÊúàÁªèÁ¨¨‰∏ÄÂ§©ÂºÄÂßãËÆ°ÁÆóÁöÑ40Âë®„ÄÇ',
                    note2: 'Âè™ÊúâÁ∫¶5%ÁöÑÂ©¥ÂÑøÂú®Á°ÆÂàáÁöÑÈ¢Ñ‰∫ßÊúüÂá∫Áîü„ÄÇ',
                    note3: 'Êú¨ËÆ°ÁÆóÂô®‰ªÖÊèê‰æõ‰º∞ËÆ°ÂÄºÔºå‰∏çÂ∫îÊõø‰ª£‰∏ì‰∏öÂåªÁñóÂª∫ËÆÆ„ÄÇ',
                    err_invalid_date: 'ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊó•Êúü',
                    milestone1: 'Â≠ïÊó©ÊúüÁªìÊùü: ',
                    milestone2: 'Â≠ï‰∏≠ÊúüÁªìÊùü: ',
                    milestone3: 'ËÉéÂÑøÂ≠òÊ¥ªÊúü: ',
                    milestone4: 'Ë∂≥Êúà: '
                },
                'zh-TW': {
                    title: 'üë∂ Êá∑Â≠ïË®àÁÆóÂô®',
                    calculation_method: 'Ë®àÁÆóÊñπÂºè',
                    last_period: 'Êú´Ê¨°ÊúàÁ∂ì',
                    conception_date: 'ÂèóÂ≠ïÊó•Êúü',
                    ultrasound_date: 'Ë∂ÖËÅ≤Ê≥¢Êó•Êúü',
                    first_day_lmp: 'Êú´Ê¨°ÊúàÁ∂ìÁ¨¨‰∏ÄÂ§©',
                    gestational_age_at_ultrasound: 'Ë∂ÖËÅ≤Ê≥¢ÊôÇÁöÑËÉéÈΩ°ÔºàÈÄ±Ôºâ',
                    clear: 'Ê∏ÖÈô§',
                    calculate: 'Ë®àÁÆó',
                    results: 'ÁµêÊûú',
                    due_date: 'È†êË®àÈ†êÁî¢Êúü',
                    current_week: 'Áï∂ÂâçÊá∑Â≠ïÂë®Êï∏',
                    days_pregnant: 'Â∑≤Êá∑Â≠ïÂ§©Êï∏',
                    weeks_remaining: 'Ââ©È§òÈÄ±Êï∏',
                    trimester1: 'Â≠ïÊó©Êúü',
                    trimester2: 'Â≠ï‰∏≠Êúü',
                    trimester3: 'Â≠ïÊôöÊúü',
                    due: 'È†êÁî¢Êúü',
                    key_milestones: 'ÈáçË¶ÅÈáåÁ®ãÁ¢ë',
                    notes: 'Ë™™ÊòéÔºö',
                    note1: 'È†êË®àÈ†êÁî¢ÊúüÊòØÂæûÊú´Ê¨°ÊúàÁ∂ìÁ¨¨‰∏ÄÂ§©ÈñãÂßãË®àÁÆóÁöÑ40ÈÄ±„ÄÇ',
                    note2: 'Âè™ÊúâÁ¥Ñ5%ÁöÑÂ¨∞ÂÖíÂú®Á¢∫ÂàáÁöÑÈ†êÁî¢ÊúüÂá∫Áîü„ÄÇ',
                    note3: 'Êú¨Ë®àÁÆóÂô®ÂÉÖÊèê‰æõ‰º∞Ë®àÂÄºÔºå‰∏çÊáâÊõø‰ª£Â∞àÊ•≠ÈÜ´ÁôÇÂª∫Ë≠∞„ÄÇ',
                    err_invalid_date: 'Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÊó•Êúü',
                    milestone1: 'Â≠ïÊó©ÊúüÁµêÊùü: ',
                    milestone2: 'Â≠ï‰∏≠ÊúüÁµêÊùü: ',
                    milestone3: 'ËÉéÂÖíÂ≠òÊ¥ªÊúü: ',
                    milestone4: 'Ë∂≥Êúà: '
                },
                'ja': {
                    title: 'üë∂ Â¶äÂ®†Ë®àÁÆó„ÉÑ„Éº„É´',
                    calculation_method: 'Ë®àÁÆóÊñπÊ≥ï',
                    last_period: 'ÊúÄÁµÇÊúàÁµå',
                    conception_date: 'ÂèóËÉéÊó•',
                    ultrasound_date: 'Ë∂ÖÈü≥Ê≥¢Ê§úÊüªÊó•',
                    first_day_lmp: 'ÊúÄÁµÇÊúàÁµåÂàùÊó•',
                    gestational_age_at_ultrasound: 'Ë∂ÖÈü≥Ê≥¢Ê§úÊüªÊôÇ„ÅÆÂú®ËÉéÊúüÈñìÔºàÈÄ±Ôºâ',
                    clear: '„ÇØ„É™„Ç¢',
                    calculate: 'Ë®àÁÆó',
                    results: 'ÁµêÊûú',
                    due_date: 'Êé®ÂÆöÂàÜÂ®©Êó•',
                    current_week: 'ÁèæÂú®„ÅÆÂ¶äÂ®†ÈÄ±Êï∞',
                    days_pregnant: 'Â¶äÂ®†Êó•Êï∞',
                    weeks_remaining: 'ÊÆã„ÇäÈÄ±Êï∞',
                    trimester1: 'ÂâçÊúüÂ¶äÂ®†',
                    trimester2: '‰∏≠ÊúüÂ¶äÂ®†',
                    trimester3: 'ÂæåÊúüÂ¶äÂ®†',
                    due: 'ÂàÜÂ®©‰∫àÂÆö',
                    key_milestones: '‰∏ª„Å™„Éû„Ç§„É´„Çπ„Éà„Éº„É≥',
                    notes: 'Ê≥®ÈáàÔºö',
                    note1: 'Êé®ÂÆöÂàÜÂ®©Êó•„ÅØ„ÄÅÊúÄÁµÇÊúàÁµåÂàùÊó•„Åã„Çâ40ÈÄ±Âæå„Å®„Åó„Å¶Ë®àÁÆó„Åï„Çå„Åæ„Åô„ÄÇ',
                    note2: 'Ê≠£Á¢∫„Å™ÂàÜÂ®©‰∫àÂÆöÊó•„Å´Áîü„Åæ„Çå„ÇãËµ§„Å°„ÇÉ„Çì„ÅØÁ¥Ñ5ÔºÖ„Å†„Åë„Åß„Åô„ÄÇ',
                    note3: '„Åì„ÅÆË®àÁÆóÊ©ü„ÅØÊé®ÂÆöÂÄ§„ÇíÊèê‰æõ„Åô„Çã„ÇÇ„ÅÆ„Åß„ÅÇ„Çä„ÄÅÂ∞ÇÈñÄÁöÑ„Å™ÂåªÁôÇ„Ç¢„Éâ„Éê„Ç§„Çπ„Å´Âèñ„Å£„Å¶‰ª£„Çè„Çã„ÇÇ„ÅÆ„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ',
                    err_invalid_date: 'ÊúâÂäπ„Å™Êó•‰ªò„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                    milestone1: 'ÂâçÊúüÂ¶äÂ®†ÁµÇ‰∫Ü: ',
                    milestone2: '‰∏≠ÊúüÂ¶äÂ®†ÁµÇ‰∫Ü: ',
                    milestone3: 'ËÉéÂÖêÁîüÂ≠òÂèØËÉΩÊúü: ',
                    milestone4: 'Ê∫ÄÊúü: '
                },
                'ru': {
                    title: 'üë∂ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏',
                    calculation_method: '–ú–µ—Ç–æ–¥ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è',
                    last_period: '–ü–æ—Å–ª–µ–¥–Ω–∏–π –º–µ–Ω—Å—Ç—Ä—É–∞–ª—å–Ω—ã–π —Ü–∏–∫–ª',
                    conception_date: '–î–∞—Ç–∞ –∑–∞—á–∞—Ç–∏—è',
                    ultrasound_date: '–î–∞—Ç–∞ —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–∞',
                    first_day_lmp: '–ü–µ—Ä–≤—ã–π –¥–µ–Ω—å –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏',
                    gestational_age_at_ultrasound: '–ì–µ—Å—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç –ø—Ä–∏ —É–ª—å—Ç—Ä–∞–∑–≤—É–∫–µ (–Ω–µ–¥–µ–ª–∏)',
                    clear: '–û—á–∏—Å—Ç–∏—Ç—å',
                    calculate: '–í—ã—á–∏—Å–ª–∏—Ç—å',
                    results: '–†–µ–∑—É–ª—å—Ç–∞—Ç—ã',
                    due_date: '–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –¥–∞—Ç–∞ —Ä–æ–¥–æ–≤',
                    current_week: '–¢–µ–∫—É—â–∞—è –Ω–µ–¥–µ–ª—è –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏',
                    days_pregnant: '–î–Ω–µ–π –±–µ—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏',
                    weeks_remaining: '–û—Å—Ç–∞–≤—à–∏–µ—Å—è –Ω–µ–¥–µ–ª–∏',
                    trimester1: '1 —Ç—Ä–∏–º–µ—Å—Ç—Ä',
                    trimester2: '2 —Ç—Ä–∏–º–µ—Å—Ç—Ä',
                    trimester3: '3 —Ç—Ä–∏–º–µ—Å—Ç—Ä',
                    due: '–†–æ–¥—ã',
                    key_milestones: '–û—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ö–∏',
                    notes: '–ü—Ä–∏–º–µ—á–∞–Ω–∏—è:',
                    note1: '–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –¥–∞—Ç–∞ —Ä–æ–¥–æ–≤ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∫–∞–∫ 40 –Ω–µ–¥–µ–ª—å –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–µ–Ω—Å—Ç—Ä—É–∞—Ü–∏–∏.',
                    note2: '–¢–æ–ª—å–∫–æ –æ–∫–æ–ª–æ 5% –¥–µ—Ç–µ–π —Ä–æ–∂–¥–∞—é—Ç—Å—è –≤ —Ç–æ—á–Ω—É—é –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—É—é –¥–∞—Ç—É —Ä–æ–¥–æ–≤.',
                    note3: '–≠—Ç–æ—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ü–µ–Ω–∫–∏ –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–º–µ–Ω—è—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.',
                    err_invalid_date: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—É—é –¥–∞—Ç—É',
                    milestone1: '–û–∫–æ–Ω—á–∞–Ω–∏–µ 1 —Ç—Ä–∏–º–µ—Å—Ç—Ä–∞: ',
                    milestone2: '–û–∫–æ–Ω—á–∞–Ω–∏–µ 2 —Ç—Ä–∏–º–µ—Å—Ç—Ä–∞: ',
                    milestone3: '–ñ–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–ª–æ–¥–∞: ',
                    milestone4: '–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏: '
                }
            },
            
            // ÂàùÂßãÂåñ
            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang();
                    return;
                }
                // ËÆæÁΩÆÈªòËÆ§Êó•Êúü‰∏∫‰ªäÂ§©
                const today = new Date();
                const defaultDate = new Date(today.setMonth(today.getMonth() - 4));
                this.setDateInputValue('lmp-date', defaultDate);
            },
            
            // ÂàáÊç¢ËæìÂÖ•ÊòæÁ§∫
            toggleInputs: function() {
                const method = document.getElementById('calc-method').value;
                
                document.getElementById('lmp-input').classList.add('hidden');
                document.getElementById('conception-input').classList.add('hidden');
                document.getElementById('ultrasound-input').classList.add('hidden');
                
                document.getElementById(`${method}-input`).classList.remove('hidden');
            },
            
            // ËÆ°ÁÆóÊÄÄÂ≠ï‰ø°ÊÅØ
            calculate: function() {
                const method = document.getElementById('calc-method').value;
                let lmpDate, today = new Date();
                const errorEl = document.getElementById('pregnancy-error');
                const resultsEl = document.getElementById('pregnancy-results');
                
                // Ëé∑ÂèñÊó•ÊúüÂπ∂È™åËØÅ
                errorEl.classList.add('hidden');
                if (method === 'lmp') {
                    const dateStr = document.getElementById('lmp-date').value;
                    if (!dateStr) {
                        errorEl.textContent = this.i18n[this.getCurrentLang()].err_invalid_date;
                        errorEl.classList.remove('hidden');
                        return;
                    }
                    lmpDate = new Date(dateStr);
                } 
                else if (method === 'conception') {
                    const dateStr = document.getElementById('conception-date').value;
                    if (!dateStr) {
                        errorEl.textContent = this.i18n[this.getCurrentLang()].err_invalid_date;
                        errorEl.classList.remove('hidden');
                        return;
                    }
                    // ÂèóÂ≠ïÊó•ÊúüÂä†2Âë®‰Ωú‰∏∫Êú´Ê¨°ÊúàÁªèÊó•Êúü
                    lmpDate = new Date(dateStr);
                    lmpDate.setDate(lmpDate.getDate() - 14);
                }
                else if (method === 'ultrasound') {
                    const dateStr = document.getElementById('ultrasound-date').value;
                    const weeks = parseInt(document.getElementById('ultrasound-weeks').value);
                    if (!dateStr || isNaN(weeks)) {
                        errorEl.textContent = this.i18n[this.getCurrentLang()].err_invalid_date;
                        errorEl.classList.remove('hidden');
                        return;
                    }
                    // ‰ªéË∂ÖÂ£∞Ê≥¢Êó•ÊúüÂèçÊé®Êú´Ê¨°ÊúàÁªèÊó•Êúü
                    lmpDate = new Date(dateStr);
                    lmpDate.setDate(lmpDate.getDate() - (weeks * 7));
                }
                
                // ËÆ°ÁÆóÈ¢Ñ‰∫ßÊúü (Êú´Ê¨°ÊúàÁªè + 40Âë®)
                const dueDate = new Date(lmpDate);
                dueDate.setMonth(dueDate.getMonth() + 9);
                dueDate.setDate(dueDate.getDate() + 7);
                
                // ËÆ°ÁÆóÂ∑≤ÊÄÄÂ≠ïÂ§©Êï∞
                const timeDiff = today - lmpDate;
                const daysPregnant = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const currentWeek = Math.floor(daysPregnant / 7);
                const weeksRemaining = Math.max(0, 40 - currentWeek);
                
                // ËÆ°ÁÆóËøõÂ∫¶ÁôæÂàÜÊØî
                const progressPercent = Math.min(100, (currentWeek / 40) * 100);
                
                // Êõ¥Êñ∞ÁªìÊûúÊòæÁ§∫
                document.getElementById('due-date').textContent = this.formatDate(dueDate);
                document.getElementById('current-week').textContent = `${currentWeek} ${currentWeek === 1 ? 'week' : 'weeks'}`;
                document.getElementById('days-pregnant').textContent = daysPregnant;
                document.getElementById('weeks-remaining').textContent = `${weeksRemaining} ${weeksRemaining === 1 ? 'week' : 'weeks'}`;
                document.getElementById('pregnancy-progress').style.width = `${progressPercent}%`;
                
                // ËÆ°ÁÆóÂπ∂ÊòæÁ§∫ÈáåÁ®ãÁ¢ë
                this.updateMilestones(lmpDate);
                
                // ÊòæÁ§∫ÁªìÊûú
                resultsEl.classList.remove('hidden');
            },
            
            // Êõ¥Êñ∞ÈáåÁ®ãÁ¢ë
            updateMilestones: function(lmpDate) {
                const lang = this.getCurrentLang();
                const milestonesEl = document.getElementById('milestones');
                milestonesEl.innerHTML = '';
                
                // ËÆ°ÁÆóÂêÑ‰∏™ÈáåÁ®ãÁ¢ëÊó•Êúü
                const firstTrimesterEnd = new Date(lmpDate);
                firstTrimesterEnd.setDate(firstTrimesterEnd.getDate() + (12 * 7));
                
                const secondTrimesterEnd = new Date(lmpDate);
                secondTrimesterEnd.setDate(secondTrimesterEnd.getDate() + (27 * 7));
                
                const viability = new Date(lmpDate);
                viability.setDate(viability.getDate() + (24 * 7));
                
                const fullTerm = new Date(lmpDate);
                fullTerm.setDate(fullTerm.getDate() + (37 * 7));
                
                // ÂàõÂª∫ÈáåÁ®ãÁ¢ëÂÖÉÁ¥†
                const milestones = [
                    {key: 'milestone1', date: firstTrimesterEnd},
                    {key: 'milestone2', date: secondTrimesterEnd},
                    {key: 'milestone3', date: viability},
                    {key: 'milestone4', date: fullTerm}
                ];
                
                milestones.forEach(milestone => {
                    const item = document.createElement('div');
                    item.className = 'milestone-item';
                    item.textContent = `${this.i18n[lang][milestone.key]}${this.formatDate(milestone.date)}`;
                    milestonesEl.appendChild(item);
                });
            },
            
            // Ê∏ÖÈô§Ë°®Âçï
            clearForm: function() {
                document.getElementById('lmp-date').value = '';
                document.getElementById('conception-date').value = '';
                document.getElementById('ultrasound-date').value = '';
                document.getElementById('ultrasound-weeks').value = '12';
                document.getElementById('pregnancy-results').classList.add('hidden');
                document.getElementById('pregnancy-error').classList.add('hidden');
            },
            
            // ÂàáÊç¢ËØ≠Ë®Ä
            changeLang: function() {
                const lang = this.getCurrentLang();
                const elements = document.querySelectorAll('[data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[lang][key]) {
                        el.textContent = this.i18n[lang][key];
                    }
                });
                
                // Â¶ÇÊûúÊúâÁªìÊûúÔºåÈáçÊñ∞ËÆ°ÁÆó‰ª•Êõ¥Êñ∞ËØ≠Ë®Ä
                if (!document.getElementById('pregnancy-results').classList.contains('hidden')) {
                    this.calculate();
                }
            },
            
            // Ëé∑ÂèñÂΩìÂâçËØ≠Ë®Ä
            getCurrentLang: function() {
                return document.getElementById('pregnancy-lang').value;
            },
            
            // Ê†ºÂºèÂåñÊó•Êúü
            formatDate: function(date) {
                return new Intl.DateTimeFormat(this.getCurrentLang(), {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric'
                }).format(date);
            },
            
            // ËÆæÁΩÆÊó•ÊúüËæìÂÖ•ÂÄº
            setDateInputValue: function(id, date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                document.getElementById(id).value = `${year}-${month}-${day}`;
            }
        };
        
        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            PregnancyCalculator.init();
        });
    </script>

    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
    
</body>
</html>