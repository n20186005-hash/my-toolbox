<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Macro Calculator</title>
    
    <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
    <meta name="tool-id" content="macro_calculator">
    <meta name="category" content="health">
    <meta name="icon" content="ü•ó">
    
    <!-- ÈªòËÆ§Ëã±ÊñáÂÜÖÂÆπ -->
    <meta name="title" content="Macro Calculator">
    <meta name="description" content="Calculate your recommended macronutrient intake based on your goals.">
    
    <!-- Â§öËØ≠Ë®ÄÈÖçÁΩÆ -->
    <meta name="lang-title-zh-CN" content="ÂÆèÈáèËê•ÂÖªÁ¥†ËÆ°ÁÆóÂô®">
    <meta name="lang-description-zh-CN" content="Ê†πÊçÆÊÇ®ÁöÑÁõÆÊ†áËÆ°ÁÆóÊé®ËçêÁöÑÂÆèÈáèËê•ÂÖªÁ¥†ÊëÑÂÖ•Èáè„ÄÇ">
    
    <meta name="lang-title-zh-TW" content="Â∑®ÈáèÁáüÈ§äÁ¥†Ë®àÁÆóÂô®">
    <meta name="lang-description-zh-TW" content="Ê†πÊìöÊÇ®ÁöÑÁõÆÊ®ôË®àÁÆóÊé®Ëñ¶ÁöÑÂ∑®ÈáèÁáüÈ§äÁ¥†ÊîùÂèñÈáè„ÄÇ">
    
    <meta name="lang-title-ja" content="„Éû„ÇØ„É≠Ê†ÑÈ§äÁ¥†Ë®àÁÆóÊ©ü">
    <meta name="lang-description-ja" content="ÁõÆÊ®ô„ÅÆÁõÆÊ®ô„Å´Âü∫„Å•„ÅÑ„Å¶Êé®Â•®„Åï„Çå„Çã„Éû„ÇØ„É≠Ê†ÑÈ§äÁ¥†ÊëÇÂèñÈáè„ÇíË®àÁÆó„Åó„Åæ„Åô„ÄÇ">
    
    <meta name="lang-title-ru" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤">
    <meta name="lang-description-ru" content="–í—ã—á–∏—Å–ª–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .result-box { background-color: #f8fafc; border: 1px solid #e2e8f0; padding: 15px; border-radius: 5px; margin-top: 10px; }
        .warning { background-color: #fee2e2; border: 1px solid #ef4444; color: #b91c1c; padding: 10px; border-radius: 5px; margin-top: 10px; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/health/macro-calculator.html" />
</head>
<body>

    <div class="tool-module active" 
         data-id="macro_calculator" 
         data-category="health" 
         data-title="Macro Calculator" 
         data-icon="ü•ó">
        
        <!-- ËØ≠Ë®ÄÈÄâÊã©Âô® -->
        <div class="absolute top-4 right-4">
            <select id="macro-lang" onchange="MacroCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ü•ó Macro Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="unit_system">Unit System</label>
                <div class="flex gap-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="units" value="metric" checked class="text-green-600 focus:ring-green-500">
                        <span data-i18n="metric">Metric (cm, kg)</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="units" value="imperial" class="text-green-600 focus:ring-green-500">
                        <span data-i18n="imperial">Imperial (ft, lbs)</span>
                    </label>
                </div>
            </div>
            
            <div id="height-metric">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="height_cm">Height (cm)</label>
                <input type="number" id="height-cm" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g. 170" min="100" max="250" value="170">
            </div>
            <div id="height-imperial" style="display: none;">
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="height_ft">Height (ft)</label>
                        <input type="number" id="height-ft" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g. 5" min="3" max="7" value="5">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="height_in">Height (in)</label>
                        <input type="number" id="height-in" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g. 7" min="0" max="11" value="7">
                    </div>
                </div>
            </div>
            
            <div id="weight-metric">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="weight_kg">Weight (kg)</label>
                <input type="number" id="weight-kg" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g. 70" min="30" max="250" value="70">
            </div>
            <div id="weight-imperial" style="display: none;">
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="weight_lbs">Weight (lbs)</label>
                <input type="number" id="weight-lbs" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g. 154" min="66" max="550" value="154">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="age">Age (years)</label>
                <input type="number" id="age" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g. 30" min="18" max="120" value="30">
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="gender">Gender</label>
                <div class="flex gap-4">
                    <label class="inline-flex items-center">
                        <input type="radio" name="gender" value="male" checked class="text-green-600 focus:ring-green-500">
                        <span data-i18n="male">Male</span>
                    </label>
                    <label class="inline-flex items-center">
                        <input type="radio" name="gender" value="female" class="text-green-600 focus:ring-green-500">
                        <span data-i18n="female">Female</span>
                    </label>
                </div>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="activity_level">Activity Level</label>
                <select id="activity-level" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none">
                    <option value="sedentary" data-i18n="sedentary">Sedentary (little exercise)</option>
                    <option value="lightly" data-i18n="lightly">Lightly Active (light exercise)</option>
                    <option value="moderately" data-i18n="moderately" selected>Moderately Active (moderate exercise)</option>
                    <option value="very" data-i18n="very">Very Active (hard exercise)</option>
                    <option value="extra" data-i18n="extra">Extra Active (very hard exercise)</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="goal">Goal</label>
                <select id="goal" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none">
                    <option value="lose" data-i18n="lose">Lose Weight</option>
                    <option value="maintain" data-i18n="maintain" selected>Maintain Weight</option>
                    <option value="gain" data-i18n="gain">Gain Weight</option>
                </select>
            </div>
            
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="macro_split">Macro Split (%)</label>
                <div class="grid grid-cols-3 gap-2">
                    <div>
                        <label class="text-xs text-gray-500" data-i18n="protein">Protein</label>
                        <input type="number" id="protein-percent" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" value="25" min="10" max="50">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500" data-i18n="carbs">Carbs</label>
                        <input type="number" id="carbs-percent" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" value="50" min="10" max="70">
                    </div>
                    <div>
                        <label class="text-xs text-gray-500" data-i18n="fat">Fat</label>
                        <input type="number" id="fat-percent" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" value="25" min="10" max="50">
                    </div>
                </div>
            </div>
        </div>

        <button onclick="MacroCalc.calc()" class="w-full bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition mb-6" data-i18n="btn_calc">Calculate Macros</button>

        <div class="bg-green-50 p-6 rounded-lg border border-green-100">
            <div class="text-sm text-gray-500 mb-2" data-i18n="daily_calories">Daily Calorie Requirement</div>
            <div id="calories-result" class="text-2xl font-bold text-green-800">--</div>
            
            <div class="mt-6 grid grid-cols-3 gap-4">
                <div class="result-box text-center">
                    <div class="text-sm text-gray-500 mb-1" data-i18n="protein">Protein</div>
                    <div id="protein-result" class="text-xl font-bold text-green-800">--</div>
                    <div id="protein-grams" class="text-sm text-gray-600">-- g</div>
                </div>
                <div class="result-box text-center">
                    <div class="text-sm text-gray-500 mb-1" data-i18n="carbs">Carbs</div>
                    <div id="carbs-result" class="text-xl font-bold text-green-800">--</div>
                    <div id="carbs-grams" class="text-sm text-gray-600">-- g</div>
                </div>
                <div class="result-box text-center">
                    <div class="text-sm text-gray-500 mb-1" data-i18n="fat">Fat</div>
                    <div id="fat-result" class="text-xl font-bold text-green-800">--</div>
                    <div id="fat-grams" class="text-sm text-gray-600">-- g</div>
                </div>
            </div>
            
            <div class="warning text-sm mt-4" data-i18n="disclaimer">Disclaimer: This is a general guide. Consult a healthcare provider for personalized advice.</div>
        </div>
    </div>

    <script>
        const MacroCalc = {
            i18n: {
                'en': {
                    title: 'ü•ó Macro Calculator',
                    unit_system: 'Unit System',
                    metric: 'Metric (cm, kg)',
                    imperial: 'Imperial (ft, lbs)',
                    height_cm: 'Height (cm)',
                    height_ft: 'Height (ft)',
                    height_in: 'Height (in)',
                    weight_kg: 'Weight (kg)',
                    weight_lbs: 'Weight (lbs)',
                    age: 'Age (years)',
                    gender: 'Gender',
                    male: 'Male',
                    female: 'Female',
                    activity_level: 'Activity Level',
                    sedentary: 'Sedentary (little exercise)',
                    lightly: 'Lightly Active (light exercise)',
                    moderately: 'Moderately Active (moderate exercise)',
                    very: 'Very Active (hard exercise)',
                    extra: 'Extra Active (very hard exercise)',
                    goal: 'Goal',
                    lose: 'Lose Weight',
                    maintain: 'Maintain Weight',
                    gain: 'Gain Weight',
                    macro_split: 'Macro Split (%)',
                    protein: 'Protein',
                    carbs: 'Carbs',
                    fat: 'Fat',
                    btn_calc: 'Calculate Macros',
                    daily_calories: 'Daily Calorie Requirement',
                    disclaimer: 'Disclaimer: This is a general guide. Consult a healthcare provider for personalized advice.',
                    err_invalid: 'Please enter valid numbers',
                    calories_unit: 'calories',
                    percentage: '%'
                },
                'zh-CN': {
                    title: 'ü•ó ÂÆèÈáèËê•ÂÖªÁ¥†ËÆ°ÁÆóÂô®',
                    unit_system: 'Âçï‰ΩçÁ≥ªÁªü',
                    metric: 'ÂÖ¨Âà∂ÔºàÂéòÁ±≥ÔºåÂçÉÂÖãÔºâ',
                    imperial: 'Ëã±Âà∂ÔºàËã±Â∞∫ÔºåÁ£ÖÔºâ',
                    height_cm: 'Ë∫´È´òÔºàÂéòÁ±≥Ôºâ',
                    height_ft: 'Ë∫´È´òÔºàËã±Â∞∫Ôºâ',
                    height_in: 'Ë∫´È´òÔºàËã±ÂØ∏Ôºâ',
                    weight_kg: '‰ΩìÈáçÔºàÂçÉÂÖãÔºâ',
                    weight_lbs: '‰ΩìÈáçÔºàÁ£ÖÔºâ',
                    age: 'Âπ¥ÈæÑÔºàÂ≤ÅÔºâ',
                    gender: 'ÊÄßÂà´',
                    male: 'Áî∑',
                    female: 'Â•≥',
                    activity_level: 'Ê¥ªÂä®Ê∞¥Âπ≥',
                    sedentary: '‰πÖÂùêÔºàÂæàÂ∞ëËøêÂä®Ôºâ',
                    lightly: 'ËΩªÂ∫¶Ê¥ªÂä®ÔºàÂ∞ëÈáèËøêÂä®Ôºâ',
                    moderately: '‰∏≠Â∫¶Ê¥ªÂä®ÔºàÈÄÇÂ∫¶ËøêÂä®Ôºâ',
                    very: 'È´òÂ∫¶Ê¥ªÂä®ÔºàÂ§ßÈáèËøêÂä®Ôºâ',
                    extra: 'ÊûÅÈ´òÊ¥ªÂä®ÔºàÂâßÁÉàËøêÂä®Ôºâ',
                    goal: 'ÁõÆÊ†á',
                    lose: 'ÂáèÈáç',
                    maintain: 'Áª¥ÊåÅ‰ΩìÈáç',
                    gain: 'Â¢ûÈáç',
                    macro_split: 'ÂÆèÈáèËê•ÂÖªÁ¥†ÊØî‰æãÔºà%Ôºâ',
                    protein: 'ËõãÁôΩË¥®',
                    carbs: 'Á¢≥Ê∞¥ÂåñÂêàÁâ©',
                    fat: 'ËÑÇËÇ™',
                    btn_calc: 'ËÆ°ÁÆóÂÆèÈáèËê•ÂÖªÁ¥†',
                    daily_calories: 'ÊØèÊó•Âç°Ë∑ØÈáåÈúÄÊ±Ç',
                    disclaimer: 'ÂÖçË¥£Â£∞ÊòéÔºöËøôÊòØ‰∏ÄËà¨ÊåáÂçó„ÄÇËØ∑Âí®ËØ¢ÂåªÁñóÊúçÂä°Êèê‰æõËÄÖ‰ª•Ëé∑Âæó‰∏™ÊÄßÂåñÂª∫ËÆÆ„ÄÇ',
                    err_invalid: 'ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊï∞Â≠ó',
                    calories_unit: 'Âç°Ë∑ØÈáå',
                    percentage: '%'
                },
                'zh-TW': {
                    title: 'ü•ó Â∑®ÈáèÁáüÈ§äÁ¥†Ë®àÁÆóÂô®',
                    unit_system: 'ÂñÆ‰ΩçÁ≥ªÁµ±',
                    metric: 'ÂÖ¨Âà∂ÔºàÂÖ¨ÂàÜÔºåÂÖ¨Êñ§Ôºâ',
                    imperial: 'Ëã±Âà∂ÔºàËã±Â∞∫ÔºåÁ£ÖÔºâ',
                    height_cm: 'Ë∫´È´òÔºàÂÖ¨ÂàÜÔºâ',
                    height_ft: 'Ë∫´È´òÔºàËã±Â∞∫Ôºâ',
                    height_in: 'Ë∫´È´òÔºàËã±ÂØ∏Ôºâ',
                    weight_kg: 'È´îÈáçÔºàÂÖ¨Êñ§Ôºâ',
                    weight_lbs: 'È´îÈáçÔºàÁ£ÖÔºâ',
                    age: 'Âπ¥ÈΩ°ÔºàÊ≠≤Ôºâ',
                    gender: 'ÊÄßÂà•',
                    male: 'Áî∑',
                    female: 'Â•≥',
                    activity_level: 'Ê¥ªÂãïÊ∞¥Âπ≥',
                    sedentary: '‰πÖÂùêÔºàÂæàÂ∞ëÈÅãÂãïÔºâ',
                    lightly: 'ËºïÂ∫¶Ê¥ªÂãïÔºàÂ∞ëÈáèÈÅãÂãïÔºâ',
                    moderately: '‰∏≠Â∫¶Ê¥ªÂãïÔºàÈÅ©Â∫¶ÈÅãÂãïÔºâ',
                    very: 'È´òÂ∫¶Ê¥ªÂãïÔºàÂ§ßÈáèÈÅãÂãïÔºâ',
                    extra: 'Ê•µÈ´òÊ¥ªÂãïÔºàÂäáÁÉàÈÅãÂãïÔºâ',
                    goal: 'ÁõÆÊ®ô',
                    lose: 'Ê∏õÈáç',
                    maintain: 'Á∂≠ÊåÅÈ´îÈáç',
                    gain: 'Â¢ûÈáç',
                    macro_split: 'Â∑®ÈáèÁáüÈ§äÁ¥†ÊØî‰æãÔºà%Ôºâ',
                    protein: 'ËõãÁôΩË≥™',
                    carbs: 'Á¢≥Ê∞¥ÂåñÂêàÁâ©',
                    fat: 'ËÑÇËÇ™',
                    btn_calc: 'Ë®àÁÆóÂ∑®ÈáèÁáüÈ§äÁ¥†',
                    daily_calories: 'ÊØèÊó•Âç°Ë∑ØÈáåÈúÄÊ±Ç',
                    disclaimer: 'ÂÖçË≤¨ËÅ≤ÊòéÔºöÈÄôÊòØ‰∏ÄËà¨ÊåáÂçó„ÄÇË´ãË´ÆË©¢ÈÜ´ÁôÇÊúçÂãôÊèê‰æõËÄÖ‰ª•Áç≤ÂæóÂÄãÊÄßÂåñÂª∫Ë≠∞„ÄÇ',
                    err_invalid: 'Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÊï∏Â≠ó',
                    calories_unit: 'Âç°Ë∑ØÈáå',
                    percentage: '%'
                },
                'ja': {
                    title: 'ü•ó „Éû„ÇØ„É≠Ê†ÑÈ§äÁ¥†Ë®àÁÆóÊ©ü',
                    unit_system: 'Âçò‰ΩçÁ≥ª',
                    metric: '„É°„Éº„Éà„É´Ê≥ïÔºàcm„ÄÅkgÔºâ',
                    imperial: 'Â∏ùÂõΩÊ≥ïÔºà„Éï„Ç£„Éº„Éà„ÄÅ„Éù„É≥„ÉâÔºâ',
                    height_cm: 'Ë∫´Èï∑ÔºàcmÔºâ',
                    height_ft: 'Ë∫´Èï∑Ôºà„Éï„Ç£„Éº„ÉàÔºâ',
                    height_in: 'Ë∫´Èï∑Ôºà„Ç§„É≥„ÉÅÔºâ',
                    weight_kg: '‰ΩìÈáçÔºàkgÔºâ',
                    weight_lbs: '‰ΩìÈáçÔºà„Éù„É≥„ÉâÔºâ',
                    age: 'Âπ¥ÈΩ¢ÔºàÊ≠≥Ôºâ',
                    gender: 'ÊÄßÂà•',
                    male: 'Áî∑ÊÄß',
                    female: 'Â•≥ÊÄß',
                    activity_level: 'Ê¥ªÂãï„É¨„Éô„É´',
                    sedentary: '‰πÖÂùêÂûãÔºà„Åª„Å®„Çì„Å©ÈÅãÂãï„Å™„ÅóÔºâ',
                    lightly: 'ËªΩÂ∫¶Ê¥ªÂãïÔºàËªΩ„ÅÑÈÅãÂãïÔºâ',
                    moderately: '‰∏≠Á≠âÂ∫¶Ê¥ªÂãïÔºàÈÅ©Â∫¶„Å™ÈÅãÂãïÔºâ',
                    very: 'È´òÂ∫¶Ê¥ªÂãïÔºàÊøÄ„Åó„ÅÑÈÅãÂãïÔºâ',
                    extra: 'Ë∂ÖÈ´òÂ∫¶Ê¥ªÂãïÔºàÈùûÂ∏∏„Å´ÊøÄ„Åó„ÅÑÈÅãÂãïÔºâ',
                    goal: 'ÁõÆÊ®ô',
                    lose: 'Ê∏õÈáè',
                    maintain: '‰ΩìÈáçÁ∂≠ÊåÅ',
                    gain: 'Â¢óÈáè',
                    macro_split: '„Éû„ÇØ„É≠Ê†ÑÈ§äÁ¥†ÊØîÁéáÔºà%Ôºâ',
                    protein: '„Çø„É≥„Éë„ÇØË≥™',
                    carbs: 'ÁÇ≠Ê∞¥ÂåñÁâ©',
                    fat: 'ËÑÇË≥™',
                    btn_calc: '„Éû„ÇØ„É≠„ÇíË®àÁÆó',
                    daily_calories: '1Êó•„ÅÆ„Ç´„É≠„É™„ÉºÂøÖË¶ÅÈáè',
                    disclaimer: 'ÂÖçË≤¨‰∫ãÈ†ÖÔºö„Åì„Çå„ÅØ‰∏ÄËà¨ÁöÑ„Å™„Ç¨„Ç§„Éâ„Åß„Åô„ÄÇÂÄãÂà•„ÅÆ„Ç¢„Éâ„Éê„Ç§„Çπ„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÂåªÁôÇÊèê‰æõËÄÖ„Å´Áõ∏Ë´á„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    err_invalid: 'ÊúâÂäπ„Å™Êï∞Â≠ó„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                    calories_unit: '„Ç´„É≠„É™„Éº',
                    percentage: '%'
                },
                'ru': {
                    title: 'ü•ó –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤',
                    unit_system: '–°–∏—Å—Ç–µ–º–∞ –µ–¥–∏–Ω–∏—Ü',
                    metric: '–ú–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è (—Å–º, –∫–≥)',
                    imperial: '–ò–º–ø–µ—Ä—Å–∫–∞—è (—Ñ—É—Ç—ã, —Ñ—É–Ω—Ç—ã)',
                    height_cm: '–†–æ—Å—Ç (—Å–º)',
                    height_ft: '–†–æ—Å—Ç (—Ñ—É—Ç—ã)',
                    height_in: '–†–æ—Å—Ç (–¥—é–π–º—ã)',
                    weight_kg: '–í–µ—Å (–∫–≥)',
                    weight_lbs: '–í–µ—Å (—Ñ—É–Ω—Ç—ã)',
                    age: '–í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç)',
                    gender: '–ü–æ–ª',
                    male: '–ú—É–∂—Å–∫–æ–π',
                    female: '–ñ–µ–Ω—Å–∫–∏–π',
                    activity_level: '–£—Ä–æ–≤–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏',
                    sedentary: '–°–∏–¥—è—á–∏–π –æ–±—Ä–∞–∑ –∂–∏–∑–Ω–∏ (–º–∞–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π)',
                    lightly: '–õ–µ–≥–∫–æ–∞–∫—Ç–∏–≤–Ω—ã–π (–ª–µ–≥–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    moderately: '–£–º–µ—Ä–µ–Ω–Ω–æ–∞–∫—Ç–∏–≤–Ω—ã–π (—É–º–µ—Ä–µ–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    very: '–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–π (–Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    extra: '–≠–∫—Å—Ç—Ä–∞–∞–∫—Ç–∏–≤–Ω—ã–π (–æ—á–µ–Ω—å –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è)',
                    goal: '–¶–µ–ª—å',
                    lose: '–°–±—Ä–æ—Å –≤–µ—Å–∞',
                    maintain: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ—Å–∞',
                    gain: '–ù–∞–±–æ—Ä –≤–µ—Å–∞',
                    macro_split: '–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤ (%)',
                    protein: '–ë–µ–ª–æ–∫',
                    carbs: '–£–≥–ª–µ–≤–æ–¥—ã',
                    fat: '–ñ–∏—Ä—ã',
                    btn_calc: '–í—ã—á–∏—Å–ª–∏—Ç—å –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç—ã',
                    daily_calories: '–î–Ω–µ–≤–Ω–∞—è –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –∫–∞–ª–æ—Ä–∏—è—Ö',
                    disclaimer: '–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏: –≠—Ç–æ –æ–±—â–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–º—É —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É –∑–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–º–∏ —Å–æ–≤–µ—Ç–∞–º–∏.',
                    err_invalid: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞',
                    calories_unit: '–∫–∞–ª–æ—Ä–∏–π',
                    percentage: '%'
                }
            },

            init: () => {
                // ÁõëÂê¨Âçï‰ΩçÂàáÊç¢
                document.querySelectorAll('input[name="units"]').forEach(radio => {
                    radio.addEventListener('change', MacroCalc.toggleUnits);
                });
                
                // ÁõëÂê¨ÂÆèÈáèËê•ÂÖªÁ¥†ÁôæÂàÜÊØîÂèòÂåñÔºåÁ°Æ‰øùÊÄªÂíå‰∏∫100%
                const inputs = ['protein-percent', 'carbs-percent', 'fat-percent'];
                inputs.forEach(id => {
                    document.getElementById(id).addEventListener('change', (e) => {
                        let total = 0;
                        inputs.forEach(i => {
                            if (i !== id) total += parseFloat(document.getElementById(i).value) || 0;
                        });
                        const maxVal = 100 - total;
                        e.target.value = Math.min(Math.max(e.target.value, 10), maxVal);
                    });
                });
            },

            toggleUnits: () => {
                const isMetric = document.querySelector('input[name="units"][value="metric"]').checked;
                
                // ÊòæÁ§∫/ÈöêËóèÈ´òÂ∫¶ËæìÂÖ•Ê°Ü
                document.getElementById('height-metric').style.display = isMetric ? 'block' : 'none';
                document.getElementById('height-imperial').style.display = isMetric ? 'none' : 'block';
                
                // ÊòæÁ§∫/ÈöêËóèÈáçÈáèËæìÂÖ•Ê°Ü
                document.getElementById('weight-metric').style.display = isMetric ? 'block' : 'none';
                document.getElementById('weight-imperial').style.display = isMetric ? 'none' : 'block';
            },

            changeLang: () => {
                const lang = document.getElementById('macro-lang').value;
                const texts = MacroCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="macro_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // ÁøªËØë‰∏ãÊãâÈÄâÈ°π
                const activityOptions = document.querySelectorAll('#activity-level option');
                activityOptions.forEach(option => {
                    const key = option.getAttribute('data-i18n');
                    if (texts[key]) option.innerText = texts[key];
                });
                
                const goalOptions = document.querySelectorAll('#goal option');
                goalOptions.forEach(option => {
                    const key = option.getAttribute('data-i18n');
                    if (texts[key]) option.innerText = texts[key];
                });

                // ÈáçÊñ∞ËÆ°ÁÆó‰ª•Êõ¥Êñ∞ÁªìÊûúËØ≠Ë®Ä
                MacroCalc.calc();
            },

            // ËÆ°ÁÆóÂü∫Á°Ä‰ª£Ë∞¢Áéá (Mifflin-St JeorÂÖ¨Âºè)
            calculateBMR: (weightKg, heightCm, age, gender) => {
                if (gender === 'male') {
                    return 10 * weightKg + 6.25 * heightCm - 5 * age + 5;
                } else {
                    return 10 * weightKg + 6.25 * heightCm - 5 * age - 161;
                }
            },

            // Ê†πÊçÆÊ¥ªÂä®Ê∞¥Âπ≥Ëé∑ÂèñÁ≥ªÊï∞
            getActivityFactor: (level) => {
                const factors = {
                    'sedentary': 1.2,
                    'lightly': 1.375,
                    'moderately': 1.55,
                    'very': 1.725,
                    'extra': 1.9
                };
                return factors[level] || 1.55;
            },

            // Ê†πÊçÆÁõÆÊ†áË∞ÉÊï¥Âç°Ë∑ØÈáå
            adjustCaloriesForGoal: (tdee, goal) => {
                switch(goal) {
                    case 'lose': return tdee * 0.85; // ÂáèÂ∞ë15%Áî®‰∫éÂáèÈáç
                    case 'gain': return tdee * 1.15; // Â¢ûÂä†15%Áî®‰∫éÂ¢ûÈáç
                    default: return tdee; // Áª¥ÊåÅ‰ΩìÈáç
                }
            },

            calc: () => {
                const isMetric = document.querySelector('input[name="units"][value="metric"]').checked;
                const lang = document.getElementById('macro-lang').value;
                const texts = MacroCalc.i18n[lang];

                let weightKg, heightCm, age, gender, activityLevel, goal;
                let proteinPercent, carbsPercent, fatPercent;

                // Ëé∑ÂèñËæìÂÖ•ÂÄº
                if (isMetric) {
                    heightCm = parseFloat(document.getElementById('height-cm').value) || 0;
                    weightKg = parseFloat(document.getElementById('weight-kg').value) || 0;
                } else {
                    const feet = parseFloat(document.getElementById('height-ft').value) || 0;
                    const inches = parseFloat(document.getElementById('height-in').value) || 0;
                    heightCm = (feet * 12 + inches) * 2.54; // ËΩ¨Êç¢‰∏∫ÂéòÁ±≥
                    weightKg = parseFloat(document.getElementById('weight-lbs').value) * 0.453592 || 0; // ËΩ¨Êç¢‰∏∫ÂçÉÂÖã
                }
                
                age = parseFloat(document.getElementById('age').value) || 0;
                gender = document.querySelector('input[name="gender"]:checked').value;
                activityLevel = document.getElementById('activity-level').value;
                goal = document.getElementById('goal').value;
                
                proteinPercent = parseFloat(document.getElementById('protein-percent').value) / 100 || 0;
                carbsPercent = parseFloat(document.getElementById('carbs-percent').value) / 100 || 0;
                fatPercent = parseFloat(document.getElementById('fat-percent').value) / 100 || 0;

                // Ëé∑ÂèñÁªìÊûúÂÖÉÁ¥†
                const caloriesEl = document.getElementById('calories-result');
                const proteinEl = document.getElementById('protein-result');
                const proteinGramsEl = document.getElementById('protein-grams');
                const carbsEl = document.getElementById('carbs-result');
                const carbsGramsEl = document.getElementById('carbs-grams');
                const fatEl = document.getElementById('fat-result');
                const fatGramsEl = document.getElementById('fat-grams');

                // È™åËØÅËæìÂÖ•
                if (isNaN(weightKg) || isNaN(heightCm) || isNaN(age) || 
                    weightKg <= 0 || heightCm <= 0 || age < 18 || age > 120) {
                    caloriesEl.innerText = texts.err_invalid;
                    caloriesEl.className = "text-xl font-bold text-red-600";
                    proteinEl.innerText = '--';
                    proteinGramsEl.innerText = '-- g';
                    carbsEl.innerText = '--';
                    carbsGramsEl.innerText = '-- g';
                    fatEl.innerText = '--';
                    fatGramsEl.innerText = '-- g';
                    return;
                }

                // ËÆ°ÁÆóÂÆèÈáèËê•ÂÖªÁ¥†
                const bmr = MacroCalc.calculateBMR(weightKg, heightCm, age, gender);
                const tdee = bmr * MacroCalc.getActivityFactor(activityLevel);
                const calories = Math.round(MacroCalc.adjustCaloriesForGoal(tdee, goal));
                
                // ËÆ°ÁÆóÊØèÁßçÂÆèÈáèËê•ÂÖªÁ¥†ÁöÑÂç°Ë∑ØÈáåÂíåÂÖãÊï∞
                const proteinCalories = Math.round(calories * proteinPercent);
                const proteinGrams = Math.round(proteinCalories / 4);
                
                const carbsCalories = Math.round(calories * carbsPercent);
                const carbsGrams = Math.round(carbsCalories / 4);
                
                const fatCalories = Math.round(calories * fatPercent);
                const fatGrams = Math.round(fatCalories / 9);

                // ÊòæÁ§∫ÁªìÊûú
                caloriesEl.className = "text-2xl font-bold text-green-800";
                caloriesEl.innerText = `${calories} ${texts.calories_unit}`;
                
                proteinEl.innerText = `${Math.round(proteinPercent * 100)}${texts.percentage}`;
                proteinGramsEl.innerText = `${proteinGrams} g`;
                
                carbsEl.innerText = `${Math.round(carbsPercent * 100)}${texts.percentage}`;
                carbsGramsEl.innerText = `${carbsGrams} g`;
                
                fatEl.innerText = `${Math.round(fatPercent * 100)}${texts.percentage}`;
                fatGramsEl.innerText = `${fatGrams} g`;
            }
        };

        document.addEventListener('DOMContentLoaded', MacroCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ëá™Âä®ÂåπÈÖçÊµèËßàÂô®ËØ≠Ë®Ä
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('macro-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    MacroCalc.changeLang();
                }
            }
        });
    </script>


    <div id="related-tools-container"></div>
    <script src="../../scripts/related.js"></script>
    
</body>
</html>