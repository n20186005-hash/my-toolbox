<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ovulation Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="ovulation_calculator">
    <meta name="category" content="health">
    <meta name="icon" content="ğŸŒ™">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="Ovulation Calculator">
    <meta name="description" content="Estimate your ovulation period based on your menstrual cycle.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="æ’åµè®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="æ ¹æ®æ‚¨çš„æœˆç»å‘¨æœŸä¼°ç®—æ’åµå‘¨æœŸã€‚">
    
    <meta name="lang-title-zh-TW" content="æ’åµè¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="æ ¹æ“šæ‚¨çš„æœˆç¶“å‘¨æœŸä¼°ç®—æ’åµå‘¨æœŸã€‚">
    
    <meta name="lang-title-ja" content="æ’åµè¨ˆç®—æ©Ÿ">
    <meta name="lang-description-ja" content="æœˆçµŒå‘¨æœŸã«åŸºã¥ã„ã¦æ’åµæœŸé–“ã‚’æ¨å®šã—ã¾ã™ã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ¾Ğ²ÑƒĞ»ÑÑ†Ğ¸Ğ¸">
    <meta name="lang-description-ru" content="ĞÑ†ĞµĞ½Ğ¸Ñ‚Ğµ Ğ¿ĞµÑ€Ğ¸Ğ¾Ğ´ Ğ¾Ğ²ÑƒĞ»ÑÑ†Ğ¸Ğ¸ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ¼ĞµĞ½ÑÑ‚Ñ€ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ°.">
    
    <meta name="lang-title-es" content="Calculadora de ovulaciÃ³n">
    <meta name="lang-description-es" content="Estime su perÃ­odo de ovulaciÃ³n segÃºn su ciclo menstrual.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .calendar-day { display: inline-block; width: 30px; height: 30px; line-height: 30px; text-align: center; margin: 2px; border-radius: 50%; }
        .fertile-day { background-color: #dcfce7; border: 1px solid #22c55e; }
        .ovulation-day { background-color: #16a34a; color: white; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/health/ovulation-calculator.html" />
</head>
<body>

    <div class="tool-module active" 
         data-id="ovulation_calculator" 
         data-category="health" 
         data-title="Ovulation Calculator" 
         data-icon="ğŸŒ™">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="ovulation-lang" onchange="OvulationCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="es">EspaÃ±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸŒ™ Ovulation Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="last_period_label">First Day of Last Period</label>
                <input type="date" id="last-period" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="cycle_length_label">Average Cycle Length (days)</label>
                <input type="number" id="cycle-length" class="w-full p-2 border rounded focus:ring-2 focus:ring-green-500 outline-none" placeholder="e.g. 28" min="21" max="35" value="28">
            </div>
        </div>

        <button onclick="OvulationCalc.calc()" class="w-full bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition mb-6" data-i18n="btn_calc">Calculate Ovulation</button>

        <div class="bg-green-50 p-6 rounded-lg border border-green-100">
            <div class="text-sm text-gray-500 mb-3" data-i18n="res_label">Fertility Window Prediction</div>
            
            <div class="mb-4">
                <div class="font-medium mb-2" data-i18n="ovulation_date_label">Estimated Ovulation Date:</div>
                <div id="ovulation-date" class="text-xl font-bold text-green-800">--</div>
            </div>
            
            <div class="mb-4">
                <div class="font-medium mb-2" data-i18n="fertile_window_label">Fertile Window:</div>
                <div id="fertile-window" class="text-lg text-green-700">--</div>
            </div>
            
            <div class="mt-4 p-3 bg-white rounded border border-gray-100">
                <div class="font-medium mb-2" data-i18n="cycle_calendar_label">Cycle Calendar:</div>
                <div id="cycle-calendar" class="flex flex-wrap">
                    <!-- æ—¥å†å°†åœ¨è¿™é‡Œç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        const OvulationCalc = {
            i18n: {
                'en': {
                    title: 'ğŸŒ™ Ovulation Calculator',
                    last_period_label: 'First Day of Last Period',
                    cycle_length_label: 'Average Cycle Length (days)',
                    btn_calc: 'Calculate Ovulation',
                    res_label: 'Fertility Window Prediction',
                    ovulation_date_label: 'Estimated Ovulation Date:',
                    fertile_window_label: 'Fertile Window:',
                    cycle_calendar_label: 'Cycle Calendar:',
                    err_invalid: 'Please enter valid information',
                    fertile: 'Fertile',
                    ovulation: 'Ovulation'
                },
                'zh-CN': {
                    title: 'ğŸŒ™ æ’åµè®¡ç®—å™¨',
                    last_period_label: 'ä¸Šæ¬¡æœˆç»ç¬¬ä¸€å¤©',
                    cycle_length_label: 'å¹³å‡å‘¨æœŸé•¿åº¦ï¼ˆå¤©ï¼‰',
                    btn_calc: 'è®¡ç®—æ’åµæœŸ',
                    res_label: 'å—å­•çª—å£æœŸé¢„æµ‹',
                    ovulation_date_label: 'é¢„è®¡æ’åµæ—¥æœŸï¼š',
                    fertile_window_label: 'å—å­•çª—å£æœŸï¼š',
                    cycle_calendar_label: 'å‘¨æœŸæ—¥å†ï¼š',
                    err_invalid: 'è¯·è¾“å…¥æœ‰æ•ˆçš„ä¿¡æ¯',
                    fertile: 'æ˜“å—å­•',
                    ovulation: 'æ’åµæ—¥'
                },
                'zh-TW': {
                    title: 'ğŸŒ™ æ’åµè¨ˆç®—å™¨',
                    last_period_label: 'ä¸Šæ¬¡æœˆç¶“ç¬¬ä¸€å¤©',
                    cycle_length_label: 'å¹³å‡é€±æœŸé•·åº¦ï¼ˆå¤©ï¼‰',
                    btn_calc: 'è¨ˆç®—æ’åµæœŸ',
                    res_label: 'å—å­•çª—å£æœŸé æ¸¬',
                    ovulation_date_label: 'é è¨ˆæ’åµæ—¥æœŸï¼š',
                    fertile_window_label: 'å—å­•çª—å£æœŸï¼š',
                    cycle_calendar_label: 'é€±æœŸæ—¥æ›†ï¼š',
                    err_invalid: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„ä¿¡æ¯',
                    fertile: 'æ˜“å—å­•',
                    ovulation: 'æ’åµæ—¥'
                },
                'ja': {
                    title: 'ğŸŒ™ æ’åµè¨ˆç®—æ©Ÿ',
                    last_period_label: 'å‰å›ã®æœˆçµŒåˆæ—¥',
                    cycle_length_label: 'å¹³å‡å‘¨æœŸé•·ï¼ˆæ—¥ï¼‰',
                    btn_calc: 'æ’åµã‚’è¨ˆç®—',
                    res_label: 'å—èƒå¯èƒ½æœŸé–“ã®äºˆæ¸¬',
                    ovulation_date_label: 'æ¨å®šæ’åµæ—¥ï¼š',
                    fertile_window_label: 'å—èƒå¯èƒ½æœŸé–“ï¼š',
                    cycle_calendar_label: 'å‘¨æœŸã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ï¼š',
                    err_invalid: 'æœ‰åŠ¹ãªæƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                    fertile: 'å—èƒå¯èƒ½',
                    ovulation: 'æ’åµæ—¥'
                },
                'ru': {
                    title: 'ğŸŒ™ ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ¾Ğ²ÑƒĞ»ÑÑ†Ğ¸Ğ¸',
                    last_period_label: 'ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹ Ğ¼ĞµĞ½ÑÑ‚Ñ€ÑƒĞ°Ñ†Ğ¸Ğ¸',
                    cycle_length_label: 'Ğ¡Ñ€ĞµĞ´Ğ½ÑÑ Ğ´Ğ»Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ñ†Ğ¸ĞºĞ»Ğ° (Ğ´Ğ½ĞµĞ¹)',
                    btn_calc: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ğ¾Ğ²ÑƒĞ»ÑÑ†Ğ¸Ñ',
                    res_label: 'ĞŸÑ€Ğ¾Ğ³Ğ½Ğ¾Ğ·Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğµ Ñ„ĞµÑ€Ñ‚Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾',
                    ovulation_date_label: 'ĞŸÑ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ°Ğ³Ğ°ĞµĞ¼Ğ°Ñ Ğ´Ğ°Ñ‚Ğ° Ğ¾Ğ²ÑƒĞ»ÑÑ†Ğ¸Ğ¸:',
                    fertile_window_label: 'Ğ¤ĞµÑ€Ñ‚Ğ¸Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºĞ½Ğ¾:',
                    cycle_calendar_label: 'ĞšĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ Ñ†Ğ¸ĞºĞ»Ğ°:',
                    err_invalid: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ',
                    fertile: 'Ğ¤ĞµÑ€Ñ‚Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹',
                    ovulation: 'ĞĞ²ÑƒĞ»ÑÑ†Ğ¸Ñ'
                },
                'es': {
                    title: 'ğŸŒ™ Calculadora de ovulaciÃ³n',
                    last_period_label: 'Primer dÃ­a de la Ãºltima menstruaciÃ³n',
                    cycle_length_label: 'Longitud media del ciclo (dÃ­as)',
                    btn_calc: 'Calcular ovulaciÃ³n',
                    res_label: 'PredicciÃ³n de la ventana fÃ©rtil',
                    ovulation_date_label: 'Fecha estimada de ovulaciÃ³n:',
                    fertile_window_label: 'Ventana fÃ©rtil:',
                    cycle_calendar_label: 'Calendario del ciclo:',
                    err_invalid: 'Por favor, ingrese informaciÃ³n vÃ¡lida',
                    fertile: 'FÃ©rtil',
                    ovulation: 'OvulaciÃ³n'
                }
            },

            init: () => {
                // è®¾ç½®é»˜è®¤æ—¥æœŸä¸º30å¤©å‰
                const defaultDate = new Date();
                defaultDate.setDate(defaultDate.getDate() - 30);
                document.getElementById('last-period').valueAsDate = defaultDate;
            },

            changeLang: () => {
                const lang = document.getElementById('ovulation-lang').value;
                const texts = OvulationCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="ovulation_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // é‡æ–°è®¡ç®—ä»¥æ›´æ–°ç»“æœè¯­è¨€
                OvulationCalc.calc();
            },

            formatDate: (date, lang) => {
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return date.toLocaleDateString(lang, options);
            },

            calc: () => {
                const lastPeriod = document.getElementById('last-period').valueAsDate;
                const cycleLength = parseInt(document.getElementById('cycle-length').value) || 0;
                const lang = document.getElementById('ovulation-lang').value;
                const texts = OvulationCalc.i18n[lang];

                const ovulationDateEl = document.getElementById('ovulation-date');
                const fertileWindowEl = document.getElementById('fertile-window');
                const calendarEl = document.getElementById('cycle-calendar');

                // éªŒè¯è¾“å…¥
                if (!lastPeriod || isNaN(cycleLength) || cycleLength < 21 || cycleLength > 35) {
                    ovulationDateEl.innerText = texts.err_invalid;
                    ovulationDateEl.className = "text-xl font-bold text-red-600";
                    fertileWindowEl.innerText = "";
                    calendarEl.innerHTML = "";
                    return;
                }

                // è®¡ç®—æ’åµæ—¥ï¼ˆå‘¨æœŸé•¿åº¦å‡å»14å¤©ï¼‰
                const ovulationDate = new Date(lastPeriod);
                ovulationDate.setDate(lastPeriod.getDate() + cycleLength - 14);

                // è®¡ç®—å—å­•çª—å£æœŸï¼ˆæ’åµæ—¥å‰5å¤©åˆ°æ’åµæ—¥å1å¤©ï¼‰
                const fertileStart = new Date(ovulationDate);
                fertileStart.setDate(ovulationDate.getDate() - 5);
                const fertileEnd = new Date(ovulationDate);
                fertileEnd.setDate(ovulationDate.getDate() + 1);

                // æ˜¾ç¤ºç»“æœ
                ovulationDateEl.className = "text-xl font-bold text-green-800";
                ovulationDateEl.innerText = OvulationCalc.formatDate(ovulationDate, lang);
                fertileWindowEl.innerText = `${OvulationCalc.formatDate(fertileStart, lang)} - ${OvulationCalc.formatDate(fertileEnd, lang)}`;

                // ç”Ÿæˆå‘¨æœŸæ—¥å†
                calendarEl.innerHTML = "";
                for (let i = 0; i < cycleLength; i++) {
                    const day = new Date(lastPeriod);
                    day.setDate(lastPeriod.getDate() + i);
                    const dayNum = day.getDate();
                    
                    const dayEl = document.createElement('div');
                    dayEl.className = "calendar-day";
                    dayEl.innerText = dayNum;
                    
                    // æ ‡è®°æ’åµæ—¥å’Œæ˜“å—å­•æ—¥
                    if (i === cycleLength - 14) {
                        dayEl.classList.add('ovulation-day');
                        dayEl.title = texts.ovulation;
                    } else if (i >= cycleLength - 19 && i <= cycleLength - 13) {
                        dayEl.classList.add('fertile-day');
                        dayEl.title = texts.fertile;
                    }
                    
                    calendarEl.appendChild(dayEl);
                }
            }
        };

        document.addEventListener('DOMContentLoaded', OvulationCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // è‡ªåŠ¨åŒ¹é…æµè§ˆå™¨è¯­è¨€
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('ovulation-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    OvulationCalc.changeLang();
                }
            }
        });
    </script>


    <div id="related-tools-container"></div>
    <script src="../../scripts/related.js"></script>
    
</body>
</html>