<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="date_calc">
    <meta name="category" content="calculators">
    <meta name="icon" content="ğŸ“…">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="Date Calculator">
    <meta name="description" content="Calculate date differences, add or subtract days, months or years from a date.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="æ—¥æœŸè®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="è®¡ç®—æ—¥æœŸå·®å¼‚ï¼Œåœ¨æ—¥æœŸä¸ŠåŠ å‡å¤©æ•°ã€æœˆæ•°æˆ–å¹´æ•°ã€‚">
    
    <meta name="lang-title-zh-TW" content="æ—¥æœŸè¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="è¨ˆç®—æ—¥æœŸå·®ç•°ï¼Œåœ¨æ—¥æœŸä¸ŠåŠ å‡å¤©æ•¸ã€æœˆæ•¸æˆ–å¹´æ•¸ã€‚">
    
    <meta name="lang-title-ja" content="æ—¥ä»˜è¨ˆç®—ãƒ„ãƒ¼ãƒ«">
    <meta name="lang-description-ja" content="æ—¥ä»˜ã®å·®åˆ†ã‚’è¨ˆç®—ã—ãŸã‚Šã€æ—¥ä»˜ã«æ—¥æ•°ã€æœˆæ•°ã€å¹´æ•°ã‚’åŠ ç®—ã¾ãŸã¯æ¸›ç®—ã—ãŸã‚Šã—ã¾ã™ã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ´Ğ°Ñ‚">
    <meta name="lang-description-ru" content="Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚Ğµ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñƒ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ°Ñ‚Ğ°Ğ¼Ğ¸, Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ñ‡Ñ‚Ğ¸Ñ‚Ğµ Ğ´Ğ½Ğ¸, Ğ¼ĞµÑÑÑ†Ñ‹ Ğ¸Ğ»Ğ¸ Ğ³Ğ¾Ğ´Ñ‹ Ğ¸Ğ· Ğ´Ğ°Ñ‚Ñ‹.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 800px; margin: 0 auto; position: relative; }
        .result-container { word-break: break-all; }
        .date-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0; }
        @media (max-width: 600px) {
            .date-grid { grid-template-columns: 1fr; }
        }
        .date-card { background: #e8f4f8; padding: 15px; border-radius: 8px; }
        .result-card { background: #e6f4ea; padding: 15px; border-radius: 8px; }
        .calc-option { padding: 10px; border: 1px solid #ddd; border-radius: 8px; margin-bottom: 10px; cursor: pointer; }
        .calc-option.active { border-color: #3b82f6; background-color: #eff6ff; }
        .option-label { font-weight: bold; margin-bottom: 5px; display: block; }
        .option-desc { font-size: 0.85rem; color: #666; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="date_calc" 
         data-category="calculators" 
         data-title="Date Calculator" 
         data-icon="ğŸ“…">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="date-lang" onchange="DateCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ“… Date Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- è®¡ç®—ç±»å‹é€‰æ‹© -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="calc_type">Calculation Type</label>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="calc-option active" onclick="DateCalc.setCalcType('difference')" id="opt-difference">
                        <div class="option-label" data-i18n="date_diff">Date Difference</div>
                        <div class="option-desc" data-i18n="date_diff_desc">Calculate the difference between two dates</div>
                    </div>
                    <div class="calc-option" onclick="DateCalc.setCalcType('add')" id="opt-add">
                        <div class="option-label" data-i18n="add_to_date">Add to Date</div>
                        <div class="option-desc" data-i18n="add_to_date_desc">Add days, months or years to a date</div>
                    </div>
                    <div class="calc-option" onclick="DateCalc.setCalcType('subtract')" id="opt-subtract">
                        <div class="option-label" data-i18n="subtract_from_date">Subtract from Date</div>
                        <div class="option-desc" data-i18n="subtract_from_date_desc">Subtract days, months or years from a date</div>
                    </div>
                    <div class="calc-option" onclick="DateCalc.setCalcType('weekday')" id="opt-weekday">
                        <div class="option-label" data-i18n="weekday">Weekday Check</div>
                        <div class="option-desc" data-i18n="weekday_desc">Find out what day of the week a date is</div>
                    </div>
                </div>
            </div>
            
            <!-- æ—¥æœŸå·®å¼‚è®¡ç®— -->
            <div id="difference-calculator">
                <div class="date-grid">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="start_date">Start Date</label>
                        <input type="date" id="start-date" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="end_date">End Date</label>
                        <input type="date" id="end-date" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
                <div class="mt-2">
                    <label class="flex items-center gap-2">
                        <input type="checkbox" id="include-end-date" checked class="rounded">
                        <span class="text-sm text-gray-600" data-i18n="include_end_date">Include end date in calculation</span>
                    </label>
                </div>
            </div>
            
            <!-- æ—¥æœŸåŠ å‡è®¡ç®— -->
            <div id="add-calculator" class="hidden">
                <div class="mb-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="base_date">Base Date</label>
                    <input type="date" id="base-date-add" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
                <div class="grid grid-cols-3 gap-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="years">Years</label>
                        <input type="number" id="add-years" min="0" value="0" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="months">Months</label>
                        <input type="number" id="add-months" min="0" value="0" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="days">Days</label>
                        <input type="number" id="add-days" min="0" value="0" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
            </div>
            
            <!-- æ—¥æœŸå‡è®¡ç®— -->
            <div id="subtract-calculator" class="hidden">
                <div class="mb-3">
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="base_date">Base Date</label>
                    <input type="date" id="base-date-subtract" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
                <div class="grid grid-cols-3 gap-3">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="years">Years</label>
                        <input type="number" id="subtract-years" min="0" value="0" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="months">Months</label>
                        <input type="number" id="subtract-months" min="0" value="0" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="days">Days</label>
                        <input type="number" id="subtract-days" min="0" value="0" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                </div>
            </div>
            
            <!-- æ˜ŸæœŸå‡ æŸ¥è¯¢ -->
            <div id="weekday-calculator" class="hidden">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="target_date">Target Date</label>
                    <input type="date" id="weekday-date" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                </div>
            </div>
            
            <!-- æ“ä½œæŒ‰é’® -->
            <div class="flex gap-2 mt-4">
                <button onclick="DateCalc.setToday()" class="flex-1 bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition" data-i18n="set_today">Set Today's Date</button>
                <button onclick="DateCalc.clearForm()" class="flex-1 bg-gray-600 text-white py-2 rounded font-bold hover:bg-gray-700 transition" data-i18n="clear">Clear</button>
                <button onclick="DateCalc.calculate()" class="flex-2 bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Calculate</button>
            </div>
        </div>

        <!-- é”™è¯¯æç¤º -->
        <div id="date-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- ç»“æœå±•ç¤º -->
        <div id="date-results" class="hidden mt-4">
            <div class="text-sm text-gray-500 mb-2" data-i18n="results">Results</div>
            
            <div id="difference-results" class="result-card mb-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="total_days">Total Days</div>
                        <div class="font-bold text-lg" id="result-total-days">--</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="years_months_days">Years, Months, Days</div>
                        <div class="font-bold text-lg" id="result-ymd">--</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="weeks_days">Weeks and Days</div>
                        <div class="font-bold text-lg" id="result-wd">--</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600" data-i18n="workdays">Workdays (approx)</div>
                        <div class="font-bold text-lg" id="result-workdays">--</div>
                    </div>
                </div>
            </div>
            
            <div id="add-results" class="result-card mb-4 hidden">
                <div class="text-sm text-gray-600" data-i18n="result_date">Result Date</div>
                <div class="font-bold text-xl" id="result-add-date">--</div>
                <div class="mt-2 text-sm" data-i18n="result_weekday">Weekday: <span id="result-add-weekday">--</span></div>
            </div>
            
            <div id="subtract-results" class="result-card mb-4 hidden">
                <div class="text-sm text-gray-600" data-i18n="result_date">Result Date</div>
                <div class="font-bold text-xl" id="result-subtract-date">--</div>
                <div class="mt-2 text-sm" data-i18n="result_weekday">Weekday: <span id="result-subtract-weekday">--</span></div>
            </div>
            
            <div id="weekday-results" class="result-card mb-4 hidden">
                <div class="text-sm text-gray-600" data-i18n="date">Date</div>
                <div class="font-bold text-lg" id="result-weekday-date">--</div>
                <div class="mt-2">
                    <div class="text-sm text-gray-600" data-i18n="weekday">Weekday</div>
                    <div class="font-bold text-xl" id="result-weekday-name">--</div>
                </div>
                <div class="mt-2">
                    <div class="text-sm text-gray-600" data-i18n="day_of_year">Day of Year</div>
                    <div class="font-bold" id="result-day-of-year">--</div>
                </div>
            </div>
        </div>

        <!-- è¯´æ˜ä¿¡æ¯ -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="notes">Notes:</p>
            <ul class="list-disc list-inside mt-2 space-y-1" data-i18n="notes_list">
                <li>Date calculations account for leap years and varying month lengths</li>
                <li>Workdays calculation assumes 5-day workweek (Monday-Friday)</li>
                <li>Month calculations may produce unexpected results at month-end (e.g., January 31 + 1 month = February 28/29)</li>
            </ul>
        </div>
    </div>

    <script>
        const DateCalc = {
            currentCalcType: 'difference',
            
            i18n: {
                'en': {
                    title: 'ğŸ“… Date Calculator',
                    calc_type: 'Calculation Type',
                    date_diff: 'Date Difference',
                    date_diff_desc: 'Calculate the difference between two dates',
                    add_to_date: 'Add to Date',
                    add_to_date_desc: 'Add days, months or years to a date',
                    subtract_from_date: 'Subtract from Date',
                    subtract_from_date_desc: 'Subtract days, months or years from a date',
                    weekday: 'Weekday Check',
                    weekday_desc: 'Find out what day of the week a date is',
                    start_date: 'Start Date',
                    end_date: 'End Date',
                    include_end_date: 'Include end date in calculation',
                    base_date: 'Base Date',
                    years: 'Years',
                    months: 'Months',
                    days: 'Days',
                    target_date: 'Target Date',
                    set_today: 'Set Today\'s Date',
                    clear: 'Clear',
                    calculate: 'Calculate',
                    results: 'Results',
                    total_days: 'Total Days',
                    years_months_days: 'Years, Months, Days',
                    weeks_days: 'Weeks and Days',
                    workdays: 'Workdays (approx)',
                    result_date: 'Result Date',
                    result_weekday: 'Weekday: ',
                    date: 'Date',
                    weekday: 'Weekday',
                    day_of_year: 'Day of Year',
                    notes: 'Notes:',
                    notes_list: `
                        <li>Date calculations account for leap years and varying month lengths</li>
                        <li>Workdays calculation assumes 5-day workweek (Monday-Friday)</li>
                        <li>Month calculations may produce unexpected results at month-end (e.g., January 31 + 1 month = February 28/29)</li>
                    `,
                    err_no_dates: 'Please select both start and end dates',
                    err_start_after_end: 'Start date must be before end date',
                    err_no_base_date: 'Please select a base date',
                    err_no_target_date: 'Please select a target date',
                    err_no_values: 'Please enter at least one value to add/subtract'
                },
                'zh-CN': {
                    title: 'ğŸ“… æ—¥æœŸè®¡ç®—å™¨',
                    calc_type: 'è®¡ç®—ç±»å‹',
                    date_diff: 'æ—¥æœŸå·®å¼‚',
                    date_diff_desc: 'è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å·®å¼‚',
                    add_to_date: 'æ—¥æœŸåŠ ',
                    add_to_date_desc: 'åœ¨æ—¥æœŸä¸Šæ·»åŠ å¤©æ•°ã€æœˆæ•°æˆ–å¹´æ•°',
                    subtract_from_date: 'æ—¥æœŸå‡',
                    subtract_from_date_desc: 'ä»æ—¥æœŸä¸­å‡å»å¤©æ•°ã€æœˆæ•°æˆ–å¹´æ•°',
                    weekday: 'æ˜ŸæœŸæŸ¥è¯¢',
                    weekday_desc: 'æŸ¥è¯¢æŸä¸ªæ—¥æœŸæ˜¯æ˜ŸæœŸå‡ ',
                    start_date: 'å¼€å§‹æ—¥æœŸ',
                    end_date: 'ç»“æŸæ—¥æœŸ',
                    include_end_date: 'è®¡ç®—ä¸­åŒ…å«ç»“æŸæ—¥æœŸ',
                    base_date: 'åŸºå‡†æ—¥æœŸ',
                    years: 'å¹´',
                    months: 'æœˆ',
                    days: 'å¤©',
                    target_date: 'ç›®æ ‡æ—¥æœŸ',
                    set_today: 'è®¾ç½®ä»Šå¤©çš„æ—¥æœŸ',
                    clear: 'æ¸…é™¤',
                    calculate: 'è®¡ç®—',
                    results: 'ç»“æœ',
                    total_days: 'æ€»å¤©æ•°',
                    years_months_days: 'å¹´, æœˆ, æ—¥',
                    weeks_days: 'å‘¨å’Œå¤©',
                    workdays: 'å·¥ä½œæ—¥ï¼ˆçº¦ï¼‰',
                    result_date: 'ç»“æœæ—¥æœŸ',
                    result_weekday: 'æ˜ŸæœŸ: ',
                    date: 'æ—¥æœŸ',
                    weekday: 'æ˜ŸæœŸ',
                    day_of_year: 'ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©',
                    notes: 'è¯´æ˜ï¼š',
                    notes_list: `
                        <li>æ—¥æœŸè®¡ç®—è€ƒè™‘é—°å¹´å’Œä¸åŒæœˆä»½çš„å¤©æ•°å·®å¼‚</li>
                        <li>å·¥ä½œæ—¥è®¡ç®—å‡è®¾ä¸€å‘¨5ä¸ªå·¥ä½œæ—¥ï¼ˆå‘¨ä¸€è‡³å‘¨äº”ï¼‰</li>
                        <li>æœˆåº•çš„æœˆä»½è®¡ç®—å¯èƒ½ä¼šäº§ç”Ÿæ„å¤–ç»“æœï¼ˆä¾‹å¦‚ï¼Œ1æœˆ31æ—¥åŠ 1ä¸ªæœˆ=2æœˆ28/29æ—¥ï¼‰</li>
                    `,
                    err_no_dates: 'è¯·é€‰æ‹©å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸ',
                    err_start_after_end: 'å¼€å§‹æ—¥æœŸå¿…é¡»åœ¨ç»“æŸæ—¥æœŸä¹‹å‰',
                    err_no_base_date: 'è¯·é€‰æ‹©åŸºå‡†æ—¥æœŸ',
                    err_no_target_date: 'è¯·é€‰æ‹©ç›®æ ‡æ—¥æœŸ',
                    err_no_values: 'è¯·è¾“å…¥è‡³å°‘ä¸€ä¸ªè¦æ·»åŠ /å‡å»çš„å€¼'
                },
                'zh-TW': {
                    title: 'ğŸ“… æ—¥æœŸè¨ˆç®—å™¨',
                    calc_type: 'è¨ˆç®—é¡å‹',
                    date_diff: 'æ—¥æœŸå·®ç•°',
                    date_diff_desc: 'è¨ˆç®—å…©å€‹æ—¥æœŸä¹‹é–“çš„å·®ç•°',
                    add_to_date: 'æ—¥æœŸåŠ ',
                    add_to_date_desc: 'åœ¨æ—¥æœŸä¸Šæ·»åŠ å¤©æ•¸ã€æœˆæ•¸æˆ–å¹´æ•¸',
                    subtract_from_date: 'æ—¥æœŸæ¸›',
                    subtract_from_date_desc: 'å¾æ—¥æœŸä¸­æ¸›å»å¤©æ•¸ã€æœˆæ•¸æˆ–å¹´æ•¸',
                    weekday: 'æ˜ŸæœŸæŸ¥è©¢',
                    weekday_desc: 'æŸ¥è©¢æŸå€‹æ—¥æœŸæ˜¯æ˜ŸæœŸå¹¾',
                    start_date: 'é–‹å§‹æ—¥æœŸ',
                    end_date: 'çµæŸæ—¥æœŸ',
                    include_end_date: 'è¨ˆç®—ä¸­åŒ…å«çµæŸæ—¥æœŸ',
                    base_date: 'åŸºæº–æ—¥æœŸ',
                    years: 'å¹´',
                    months: 'æœˆ',
                    days: 'å¤©',
                    target_date: 'ç›®æ¨™æ—¥æœŸ',
                    set_today: 'è¨­ç½®ä»Šå¤©çš„æ—¥æœŸ',
                    clear: 'æ¸…é™¤',
                    calculate: 'è¨ˆç®—',
                    results: 'çµæœ',
                    total_days: 'ç¸½å¤©æ•¸',
                    years_months_days: 'å¹´, æœˆ, æ—¥',
                    weeks_days: 'å‘¨å’Œå¤©',
                    workdays: 'å·¥ä½œæ—¥ï¼ˆç´„ï¼‰',
                    result_date: 'çµæœæ—¥æœŸ',
                    result_weekday: 'æ˜ŸæœŸ: ',
                    date: 'æ—¥æœŸ',
                    weekday: 'æ˜ŸæœŸ',
                    day_of_year: 'ä¸€å¹´ä¸­çš„ç¬¬å¹¾å¤©',
                    notes: 'èªªæ˜ï¼š',
                    notes_list: `
                        <li>æ—¥æœŸè¨ˆç®—è€ƒæ…®é–å¹´å’Œä¸åŒæœˆä»½çš„å¤©æ•¸å·®ç•°</li>
                        <li>å·¥ä½œæ—¥è¨ˆç®—å‡è¨­ä¸€å‘¨5å€‹å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€è‡³å‘¨äº”ï¼‰</li>
                        <li>æœˆåº•çš„æœˆä»½è¨ˆç®—å¯èƒ½æœƒç”¢ç”Ÿæ„å¤–çµæœï¼ˆä¾‹å¦‚ï¼Œ1æœˆ31æ—¥åŠ 1å€‹æœˆ=2æœˆ28/29æ—¥ï¼‰</li>
                    `,
                    err_no_dates: 'è«‹é¸æ“‡é–‹å§‹æ—¥æœŸå’ŒçµæŸæ—¥æœŸ',
                    err_start_after_end: 'é–‹å§‹æ—¥æœŸå¿…é ˆåœ¨çµæŸæ—¥æœŸä¹‹å‰',
                    err_no_base_date: 'è«‹é¸æ“‡åŸºæº–æ—¥æœŸ',
                    err_no_target_date: 'è«‹é¸æ“‡ç›®æ¨™æ—¥æœŸ',
                    err_no_values: 'è«‹è¼¸å…¥è‡³å°‘ä¸€å€‹è¦æ·»åŠ /æ¸›å»çš„å€¼'
                },
                'ja': {
                    title: 'ğŸ“… æ—¥ä»˜è¨ˆç®—ãƒ„ãƒ¼ãƒ«',
                    calc_type: 'è¨ˆç®—ã‚¿ã‚¤ãƒ—',
                    date_diff: 'æ—¥ä»˜ã®å·®åˆ†',
                    date_diff_desc: '2ã¤ã®æ—¥ä»˜é–“ã®å·®åˆ†ã‚’è¨ˆç®—',
                    add_to_date: 'æ—¥ä»˜ã¸ã®åŠ ç®—',
                    add_to_date_desc: 'æ—¥ä»˜ã«æ—¥æ•°ã€æœˆæ•°ã€å¹´æ•°ã‚’åŠ ç®—',
                    subtract_from_date: 'æ—¥ä»˜ã‹ã‚‰ã®æ¸›ç®—',
                    subtract_from_date_desc: 'æ—¥ä»˜ã‹ã‚‰æ—¥æ•°ã€æœˆæ•°ã€å¹´æ•°ã‚’æ¸›ç®—',
                    weekday: 'æ›œæ—¥ç¢ºèª',
                    weekday_desc: 'æŒ‡å®šã—ãŸæ—¥ä»˜ãŒä½•æ›œæ—¥ã‹ã‚’èª¿ã¹ã‚‹',
                    start_date: 'é–‹å§‹æ—¥',
                    end_date: 'çµ‚äº†æ—¥',
                    include_end_date: 'è¨ˆç®—ã«çµ‚äº†æ—¥ã‚’å«ã‚ã‚‹',
                    base_date: 'åŸºæº–æ—¥',
                    years: 'å¹´',
                    months: 'æœˆ',
                    days: 'æ—¥',
                    target_date: 'å¯¾è±¡æ—¥',
                    set_today: 'ä»Šæ—¥ã®æ—¥ä»˜ã‚’è¨­å®š',
                    clear: 'ã‚¯ãƒªã‚¢',
                    calculate: 'è¨ˆç®—',
                    results: 'çµæœ',
                    total_days: 'ç·æ—¥æ•°',
                    years_months_days: 'å¹´ã€æœˆã€æ—¥',
                    weeks_days: 'é€±ã¨æ—¥',
                    workdays: 'å–¶æ¥­æ—¥ï¼ˆæ¦‚ç®—ï¼‰',
                    result_date: 'çµæœã®æ—¥ä»˜',
                    result_weekday: 'æ›œæ—¥: ',
                    date: 'æ—¥ä»˜',
                    weekday: 'æ›œæ—¥',
                    day_of_year: 'å¹´é–“ã®æ—¥æ•°',
                    notes: 'æ³¨æ„äº‹é …ï¼š',
                    notes_list: `
                        <li>æ—¥ä»˜è¨ˆç®—ã§ã¯é–å¹´ã¨æœˆã”ã¨ã®æ—¥æ•°ã®é•ã„ã‚’è€ƒæ…®ã—ã¦ã„ã¾ã™</li>
                        <li>å–¶æ¥­æ—¥ã®è¨ˆç®—ã¯5æ—¥é–“ã®åŠ´åƒé€±ï¼ˆæœˆæ›œæ—¥ã‹ã‚‰é‡‘æ›œæ—¥ï¼‰ã‚’å‰æã¨ã—ã¦ã„ã¾ã™</li>
                        <li>æœˆæœ«ã®æœˆè¨ˆç®—ã§ã¯äºˆæœŸã—ãªã„çµæœãŒç”Ÿã˜ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼ˆä¾‹ï¼š1æœˆ31æ—¥ + 1ã‹æœˆ = 2æœˆ28/29æ—¥ï¼‰</li>
                    `,
                    err_no_dates: 'é–‹å§‹æ—¥ã¨çµ‚äº†æ—¥ã®ä¸¡æ–¹ã‚’é¸æŠã—ã¦ãã ã•ã„',
                    err_start_after_end: 'é–‹å§‹æ—¥ã¯çµ‚äº†æ—¥ã‚ˆã‚Šå‰ã«è¨­å®šã—ã¦ãã ã•ã„',
                    err_no_base_date: 'åŸºæº–æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„',
                    err_no_target_date: 'å¯¾è±¡æ—¥ã‚’é¸æŠã—ã¦ãã ã•ã„',
                    err_no_values: 'å°‘ãªãã¨ã‚‚1ã¤ã®åŠ ç®—/æ¸›ç®—å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
                },
                'ru': {
                    title: 'ğŸ“… ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ´Ğ°Ñ‚',
                    calc_type: 'Ğ¢Ğ¸Ğ¿ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ',
                    date_diff: 'Ğ Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ° Ğ´Ğ°Ñ‚',
                    date_diff_desc: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñƒ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ´Ğ²ÑƒĞ¼Ñ Ğ´Ğ°Ñ‚Ğ°Ğ¼Ğ¸',
                    add_to_date: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğº Ğ´Ğ°Ñ‚Ğµ',
                    add_to_date_desc: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ½Ğ¸, Ğ¼ĞµÑÑÑ†Ñ‹ Ğ¸Ğ»Ğ¸ Ğ³Ğ¾Ğ´Ñ‹ Ğº Ğ´Ğ°Ñ‚Ğµ',
                    subtract_from_date: 'Ğ’Ñ‹Ñ‡ĞµÑÑ‚ÑŒ Ğ¸Ğ· Ğ´Ğ°Ñ‚Ñ‹',
                    subtract_from_date_desc: 'Ğ’Ñ‹Ñ‡ĞµÑÑ‚ÑŒ Ğ´Ğ½Ğ¸, Ğ¼ĞµÑÑÑ†Ñ‹ Ğ¸Ğ»Ğ¸ Ğ³Ğ¾Ğ´Ñ‹ Ğ¸Ğ· Ğ´Ğ°Ñ‚Ñ‹',
                    weekday: 'ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ´Ğ½Ñ Ğ½ĞµĞ´ĞµĞ»Ğ¸',
                    weekday_desc: 'Ğ£Ğ·Ğ½Ğ°Ñ‚ÑŒ, ĞºĞ°ĞºĞ¾Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸ Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ½Ğ° Ğ´Ğ°Ñ‚Ñƒ',
                    start_date: 'ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    end_date: 'ĞšĞ¾Ğ½ĞµÑ‡Ğ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    include_end_date: 'Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ½ĞµÑ‡Ğ½ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ Ğ² Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ',
                    base_date: 'Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    years: 'Ğ›ĞµÑ‚',
                    months: 'ĞœĞµÑÑÑ†ĞµĞ²',
                    days: 'Ğ”Ğ½ĞµĞ¹',
                    target_date: 'Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    set_today: 'Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑĞµĞ³Ğ¾Ğ´Ğ½ÑÑˆĞ½ÑÑ Ğ´Ğ°Ñ‚Ñƒ',
                    clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ',
                    calculate: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ',
                    results: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹',
                    total_days: 'Ğ’ÑĞµĞ³Ğ¾ Ğ´Ğ½ĞµĞ¹',
                    years_months_days: 'Ğ›ĞµÑ‚, Ğ¼ĞµÑÑÑ†ĞµĞ², Ğ´Ğ½ĞµĞ¹',
                    weeks_days: 'ĞĞµĞ´ĞµĞ»ÑŒ Ğ¸ Ğ´Ğ½ĞµĞ¹',
                    workdays: 'Ğ Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ñ… Ğ´Ğ½ĞµĞ¹ (Ğ¿Ñ€Ğ¸Ğ±Ğ»Ğ¸Ğ·Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)',
                    result_date: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ¸Ñ€ÑƒÑÑ‰Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    result_weekday: 'Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸: ',
                    date: 'Ğ”Ğ°Ñ‚Ğ°',
                    weekday: 'Ğ”ĞµĞ½ÑŒ Ğ½ĞµĞ´ĞµĞ»Ğ¸',
                    day_of_year: 'Ğ”ĞµĞ½ÑŒ Ğ² Ğ³Ğ¾Ğ´Ñƒ',
                    notes: 'ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:',
                    notes_list: `
                        <li>Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ Ğ´Ğ°Ñ‚ ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ Ğ²Ğ¸ÑĞ¾ĞºĞ¾ÑĞ½Ñ‹Ğµ Ğ³Ğ¾Ğ´Ñ‹ Ğ¸ Ñ€Ğ°Ğ·Ğ½ÑƒÑ Ğ´Ğ»Ğ¸Ğ½Ñƒ Ğ¼ĞµÑÑÑ†ĞµĞ²</li>
                        <li>Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‡Ğ¸Ñ… Ğ´Ğ½ĞµĞ¹ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ 5-Ğ´Ğ½ĞµĞ²Ğ½ÑƒÑ Ñ€Ğ°Ğ±Ğ¾Ñ‡ÑƒÑ Ğ½ĞµĞ´ĞµĞ»Ñ (Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº-Ğ¿ÑÑ‚Ğ½Ğ¸Ñ†Ğ°)</li>
                        <li>Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ Ğ¼ĞµÑÑÑ†ĞµĞ² Ğ² ĞºĞ¾Ğ½Ñ†Ğµ Ğ¼ĞµÑÑÑ†Ğ° Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ Ğ½ĞµĞ¾Ğ¶Ğ¸Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, 31 ÑĞ½Ğ²Ğ°Ñ€Ñ + 1 Ğ¼ĞµÑÑÑ† = 28/29 Ñ„ĞµĞ²Ñ€Ğ°Ğ»Ñ)</li>
                    `,
                    err_no_dates: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ĞºĞ°Ğº Ğ½Ğ°Ñ‡Ğ°Ğ»ÑŒĞ½ÑƒÑ, Ñ‚Ğ°Ğº Ğ¸ ĞºĞ¾Ğ½ĞµÑ‡Ğ½ÑƒÑ Ğ´Ğ°Ñ‚Ñ‹',
                    err_start_after_end: 'ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ñ€Ğ°Ğ½ÑŒÑˆĞµ ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾Ğ¹',
                    err_no_base_date: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ±Ğ°Ğ·Ğ¾Ğ²ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ',
                    err_no_target_date: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ñ†ĞµĞ»ĞµĞ²ÑƒÑ Ğ´Ğ°Ñ‚Ñƒ',
                    err_no_values: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ¾Ğ´Ğ½Ğ¾ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ/Ğ²Ñ‹Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ñ'
                }
            },
            
            // åˆå§‹åŒ–
            init: function() {
                // è®¾ç½®ä»Šå¤©çš„æ—¥æœŸä¸ºé»˜è®¤å€¼
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('start-date').value = today;
                document.getElementById('end-date').value = today;
                document.getElementById('base-date-add').value = today;
                document.getElementById('base-date-subtract').value = today;
                document.getElementById('weekday-date').value = today;
                
                // åˆå§‹åŒ–è¯­è¨€
                this.changeLang();
            },
            
            // è®¾ç½®è®¡ç®—ç±»å‹
            setCalcType: function(type) {
                this.currentCalcType = type;
                
                // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
                document.querySelectorAll('.calc-option').forEach(elem => {
                    elem.classList.remove('active');
                });
                
                // æ·»åŠ å½“å‰æ´»åŠ¨çŠ¶æ€
                document.getElementById('opt-' + type).classList.add('active');
                
                // éšè—æ‰€æœ‰è®¡ç®—å™¨
                document.getElementById('difference-calculator').classList.add('hidden');
                document.getElementById('add-calculator').classList.add('hidden');
                document.getElementById('subtract-calculator').classList.add('hidden');
                document.getElementById('weekday-calculator').classList.add('hidden');
                
                // éšè—æ‰€æœ‰ç»“æœ
                document.getElementById('difference-results').classList.add('hidden');
                document.getElementById('add-results').classList.add('hidden');
                document.getElementById('subtract-results').classList.add('hidden');
                document.getElementById('weekday-results').classList.add('hidden');
                
                // æ˜¾ç¤ºå½“å‰è®¡ç®—å™¨
                document.getElementById(type + '-calculator').classList.remove('hidden');
            },
            
            // è®¾ç½®ä»Šå¤©çš„æ—¥æœŸ
            setToday: function() {
                const today = new Date().toISOString().split('T')[0];
                
                if (this.currentCalcType === 'difference') {
                    document.getElementById('start-date').value = today;
                    document.getElementById('end-date').value = today;
                } else if (this.currentCalcType === 'add') {
                    document.getElementById('base-date-add').value = today;
                } else if (this.currentCalcType === 'subtract') {
                    document.getElementById('base-date-subtract').value = today;
                } else if (this.currentCalcType === 'weekday') {
                    document.getElementById('weekday-date').value = today;
                }
            },
            
            // æ¸…é™¤è¡¨å•
            clearForm: function() {
                if (this.currentCalcType === 'difference') {
                    document.getElementById('start-date').value = '';
                    document.getElementById('end-date').value = '';
                    document.getElementById('include-end-date').checked = true;
                } else if (this.currentCalcType === 'add') {
                    document.getElementById('base-date-add').value = '';
                    document.getElementById('add-years').value = 0;
                    document.getElementById('add-months').value = 0;
                    document.getElementById('add-days').value = 0;
                } else if (this.currentCalcType === 'subtract') {
                    document.getElementById('base-date-subtract').value = '';
                    document.getElementById('subtract-years').value = 0;
                    document.getElementById('subtract-months').value = 0;
                    document.getElementById('subtract-days').value = 0;
                } else if (this.currentCalcType === 'weekday') {
                    document.getElementById('weekday-date').value = '';
                }
                
                // éšè—ç»“æœå’Œé”™è¯¯
                document.getElementById('date-results').classList.add('hidden');
                document.getElementById('date-error').classList.add('hidden');
            },
            
            // åˆ‡æ¢è¯­è¨€
            changeLang: function() {
                const lang = document.getElementById('date-lang').value;
                const translations = this.i18n[lang] || this.i18n['en'];
                
                // æ›´æ–°æ‰€æœ‰ç¿»è¯‘å…ƒç´ 
                document.querySelectorAll('[data-i18n]').forEach(elem => {
                    const key = elem.getAttribute('data-i18n');
                    if (translations[key]) {
                        elem.innerHTML = translations[key];
                    }
                });
            },
            
            // è®¡ç®—
            calculate: function() {
                // é‡ç½®é”™è¯¯å’Œç»“æœ
                document.getElementById('date-error').classList.add('hidden');
                document.getElementById('date-results').classList.remove('hidden');
                
                try {
                    if (this.currentCalcType === 'difference') {
                        this.calculateDifference();
                    } else if (this.currentCalcType === 'add') {
                        this.calculateAddition();
                    } else if (this.currentCalcType === 'subtract') {
                        this.calculateSubtraction();
                    } else if (this.currentCalcType === 'weekday') {
                        this.calculateWeekday();
                    }
                } catch (error) {
                    this.showError(error.message);
                }
            },
            
            // è®¡ç®—æ—¥æœŸå·®å¼‚
            calculateDifference: function() {
                const startDateStr = document.getElementById('start-date').value;
                const endDateStr = document.getElementById('end-date').value;
                const includeEndDate = document.getElementById('include-end-date').checked;
                
                if (!startDateStr || !endDateStr) {
                    throw new Error(this.getCurrentTranslation('err_no_dates'));
                }
                
                const startDate = new Date(startDateStr);
                const endDate = new Date(endDateStr);
                
                if (startDate > endDate) {
                    throw new Error(this.getCurrentTranslation('err_start_after_end'));
                }
                
                // è®¡ç®—æ€»å¤©æ•°å·®å¼‚
                let timeDiff = endDate - startDate;
                let dayDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                
                // å¦‚æœä¸åŒ…å«ç»“æŸæ—¥æœŸï¼Œå‡å»1å¤©
                if (!includeEndDate) {
                    dayDiff -= 1;
                }
                
                // è®¡ç®—å¹´æœˆæ—¥å·®å¼‚
                const { years, months, days } = this.calculateYMDifference(startDate, endDate);
                
                // è®¡ç®—å‘¨å’Œå¤©
                const weeks = Math.floor(dayDiff / 7);
                const daysRemaining = dayDiff % 7;
                
                // è®¡ç®—å·¥ä½œæ—¥ï¼ˆå¤§çº¦ï¼‰
                const workdays = this.calculateWorkdays(startDate, endDate, includeEndDate);
                
                // æ›´æ–°ç»“æœ
                document.getElementById('result-total-days').textContent = dayDiff;
                document.getElementById('result-ymd').textContent = `${years}y ${months}m ${days}d`;
                document.getElementById('result-wd').textContent = `${weeks} weeks ${daysRemaining} days`;
                document.getElementById('result-workdays').textContent = workdays;
                
                // æ˜¾ç¤ºç›¸åº”ç»“æœ
                document.getElementById('difference-results').classList.remove('hidden');
                document.getElementById('add-results').classList.add('hidden');
                document.getElementById('subtract-results').classList.add('hidden');
                document.getElementById('weekday-results').classList.add('hidden');
            },
            
            // è®¡ç®—æ—¥æœŸåŠ 
            calculateAddition: function() {
                const baseDateStr = document.getElementById('base-date-add').value;
                const years = parseInt(document.getElementById('add-years').value) || 0;
                const months = parseInt(document.getElementById('add-months').value) || 0;
                const days = parseInt(document.getElementById('add-days').value) || 0;
                
                if (!baseDateStr) {
                    throw new Error(this.getCurrentTranslation('err_no_base_date'));
                }
                
                if (years === 0 && months === 0 && days === 0) {
                    throw new Error(this.getCurrentTranslation('err_no_values'));
                }
                
                let resultDate = new Date(baseDateStr);
                
                // æ·»åŠ å¹´
                resultDate.setFullYear(resultDate.getFullYear() + years);
                
                // æ·»åŠ æœˆï¼ˆéœ€è¦ç‰¹åˆ«å¤„ç†ï¼‰
                let newMonth = resultDate.getMonth() + months;
                let newYear = resultDate.getFullYear();
                
                if (newMonth > 11) {
                    newYear += Math.floor(newMonth / 12);
                    newMonth = newMonth % 12;
                }
                
                resultDate.setFullYear(newYear, newMonth);
                
                // æ·»åŠ å¤©
                resultDate.setDate(resultDate.getDate() + days);
                
                // è·å–æ˜ŸæœŸå‡ 
                const weekday = this.getWeekdayName(resultDate);
                
                // æ ¼å¼åŒ–ç»“æœæ—¥æœŸ
                const formattedDate = this.formatDate(resultDate);
                
                // æ›´æ–°ç»“æœ
                document.getElementById('result-add-date').textContent = formattedDate;
                document.getElementById('result-add-weekday').textContent = weekday;
                
                // æ˜¾ç¤ºç›¸åº”ç»“æœ
                document.getElementById('difference-results').classList.add('hidden');
                document.getElementById('add-results').classList.remove('hidden');
                document.getElementById('subtract-results').classList.add('hidden');
                document.getElementById('weekday-results').classList.add('hidden');
            },
            
            // è®¡ç®—æ—¥æœŸå‡
            calculateSubtraction: function() {
                const baseDateStr = document.getElementById('base-date-subtract').value;
                const years = parseInt(document.getElementById('subtract-years').value) || 0;
                const months = parseInt(document.getElementById('subtract-months').value) || 0;
                const days = parseInt(document.getElementById('subtract-days').value) || 0;
                
                if (!baseDateStr) {
                    throw new Error(this.getCurrentTranslation('err_no_base_date'));
                }
                
                if (years === 0 && months === 0 && days === 0) {
                    throw new Error(this.getCurrentTranslation('err_no_values'));
                }
                
                let resultDate = new Date(baseDateStr);
                
                // å‡å»å¤©
                resultDate.setDate(resultDate.getDate() - days);
                
                // å‡å»æœˆï¼ˆéœ€è¦ç‰¹åˆ«å¤„ç†ï¼‰
                let newMonth = resultDate.getMonth() - months;
                let newYear = resultDate.getFullYear();
                
                if (newMonth < 0) {
                    const yearsToSubtract = Math.floor(Math.abs(newMonth) / 12) + (Math.abs(newMonth) % 12 !== 0 ? 1 : 0);
                    newYear -= yearsToSubtract;
                    newMonth = 12 - (Math.abs(newMonth) % 12 || 12);
                }
                
                resultDate.setFullYear(newYear, newMonth);
                
                // å‡å»å¹´
                resultDate.setFullYear(resultDate.getFullYear() - years);
                
                // è·å–æ˜ŸæœŸå‡ 
                const weekday = this.getWeekdayName(resultDate);
                
                // æ ¼å¼åŒ–ç»“æœæ—¥æœŸ
                const formattedDate = this.formatDate(resultDate);
                
                // æ›´æ–°ç»“æœ
                document.getElementById('result-subtract-date').textContent = formattedDate;
                document.getElementById('result-subtract-weekday').textContent = weekday;
                
                // æ˜¾ç¤ºç›¸åº”ç»“æœ
                document.getElementById('difference-results').classList.add('hidden');
                document.getElementById('add-results').classList.add('hidden');
                document.getElementById('subtract-results').classList.remove('hidden');
                document.getElementById('weekday-results').classList.add('hidden');
            },
            
            // è®¡ç®—æ˜ŸæœŸå‡ 
            calculateWeekday: function() {
                const dateStr = document.getElementById('weekday-date').value;
                
                if (!dateStr) {
                    throw new Error(this.getCurrentTranslation('err_no_target_date'));
                }
                
                const date = new Date(dateStr);
                const weekday = this.getWeekdayName(date);
                const dayOfYear = this.getDayOfYear(date);
                const formattedDate = this.formatDate(date);
                
                // æ›´æ–°ç»“æœ
                document.getElementById('result-weekday-date').textContent = formattedDate;
                document.getElementById('result-weekday-name').textContent = weekday;
                document.getElementById('result-day-of-year').textContent = dayOfYear;
                
                // æ˜¾ç¤ºç›¸åº”ç»“æœ
                document.getElementById('difference-results').classList.add('hidden');
                document.getElementById('add-results').classList.add('hidden');
                document.getElementById('subtract-results').classList.add('hidden');
                document.getElementById('weekday-results').classList.remove('hidden');
            },
            
            // è®¡ç®—å¹´æœˆæ—¥å·®å¼‚
            calculateYMDifference: function(startDate, endDate) {
                let years = endDate.getFullYear() - startDate.getFullYear();
                let months = endDate.getMonth() - startDate.getMonth();
                let days = endDate.getDate() - startDate.getDate();
                
                // è°ƒæ•´å¤©æ•°
                if (days < 0) {
                    months--;
                    // è·å–å‰ä¸€ä¸ªæœˆçš„å¤©æ•°
                    const prevMonth = new Date(endDate.getFullYear(), endDate.getMonth(), 0);
                    days += prevMonth.getDate();
                }
                
                // è°ƒæ•´æœˆä»½
                if (months < 0) {
                    years--;
                    months += 12;
                }
                
                return { years, months, days };
            },
            
            // è®¡ç®—å·¥ä½œæ—¥
            calculateWorkdays: function(startDate, endDate, includeEndDate) {
                let workdays = 0;
                let currentDate = new Date(startDate);
                
                // è®¡ç®—ç»“æŸæ—¥æœŸï¼ˆè€ƒè™‘æ˜¯å¦åŒ…å«ç»“æŸæ—¥æœŸï¼‰
                const endDateToUse = includeEndDate 
                    ? new Date(endDate) 
                    : new Date(endDate.getTime() - 24 * 60 * 60 * 1000);
                
                while (currentDate <= endDateToUse) {
                    const dayOfWeek = currentDate.getDay();
                    // å‘¨ä¸€è‡³å‘¨äº”ï¼ˆ1-5ï¼‰
                    if (dayOfWeek !== 0 && dayOfWeek !== 6) {
                        workdays++;
                    }
                    currentDate.setDate(currentDate.getDate() + 1);
                }
                
                return workdays;
            },
            
            // è·å–æ˜ŸæœŸå‡ åç§°
            getWeekdayName: function(date) {
                const lang = document.getElementById('date-lang').value;
                const options = { weekday: 'long' };
                return date.toLocaleDateString(lang, options);
            },
            
            // è·å–ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©
            getDayOfYear: function(date) {
                const startOfYear = new Date(date.getFullYear(), 0, 1);
                const diff = date - startOfYear;
                return Math.floor(diff / (1000 * 60 * 60 * 24)) + 1;
            },
            
            // æ ¼å¼åŒ–æ—¥æœŸ
            formatDate: function(date) {
                const lang = document.getElementById('date-lang').value;
                const options = { year: 'numeric', month: 'long', day: 'numeric' };
                return date.toLocaleDateString(lang, options);
            },
            
            // æ˜¾ç¤ºé”™è¯¯
            showError: function(message) {
                const errorElement = document.getElementById('date-error');
                errorElement.textContent = message;
                errorElement.classList.remove('hidden');
                document.getElementById('date-results').classList.add('hidden');
            },
            
            // è·å–å½“å‰è¯­è¨€çš„ç¿»è¯‘
            getCurrentTranslation: function(key) {
                const lang = document.getElementById('date-lang').value;
                return this.i18n[lang]?.[key] || this.i18n['en'][key];
            }
        };
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            DateCalc.init();
        });
    </script>
</body>
</html>