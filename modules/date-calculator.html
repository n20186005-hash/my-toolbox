<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Date Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="date_calculator">
    <meta name="category" content="Date & Time">
    <meta name="icon" content="ğŸ“†">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="Date Calculator">
    <meta name="description" content="Add or subtract days, months, or years from a date.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="æ—¥æœŸè®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="åœ¨æ—¥æœŸä¸Šå¢åŠ æˆ–å‡å°‘å¤©æ•°ã€æœˆæ•°æˆ–å¹´æ•°ã€‚">
    
    <meta name="lang-title-zh-TW" content="æ—¥æœŸè¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="åœ¨æ—¥æœŸä¸Šå¢åŠ æˆ–æ¸›å°‘å¤©æ•¸ã€æœˆæ•¸æˆ–å¹´æ•¸ã€‚">
    
    <meta name="lang-title-ja" content="æ—¥ä»˜è¨ˆç®—ãƒ„ãƒ¼ãƒ«">
    <meta name="lang-description-ja" content="æ—¥ä»˜ã«æ—¥æ•°ã€æœˆæ•°ã€ã¾ãŸã¯å¹´æ•°ã‚’åŠ ç®—ã¾ãŸã¯æ¸›ç®—ã—ã¾ã™ã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ´Ğ°Ñ‚">
    <meta name="lang-description-ru" content="Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ¹Ñ‚Ğµ Ğ¸Ğ»Ğ¸ Ğ²Ñ‹Ñ‡Ğ¸Ñ‚Ğ°Ğ¹Ñ‚Ğµ Ğ´Ğ½Ğ¸, Ğ¼ĞµÑÑÑ†Ñ‹ Ğ¸Ğ»Ğ¸ Ğ³Ğ¾Ğ´Ñ‹ Ğ¸Ğ· Ğ´Ğ°Ñ‚Ñ‹.">
    
    <meta name="lang-title-es" content="Calculadora de Fechas">
    <meta name="lang-description-es" content="Suma o resta dÃ­as, meses o aÃ±os a una fecha.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="date_calculator" 
         data-category="date_time" 
         data-title="Date Calculator" 
         data-icon="ğŸ“†">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="date-lang" onchange="DateCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="es">EspaÃ±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ“† Date Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div class="p-4 bg-gray-50 rounded border border-gray-200">
                <div class="text-sm font-medium text-gray-700 mb-3" data-i18n="start_date">Start Date</div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Start Month -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="month">Month</label>
                        <select id="start-month" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                        </select>
                    </div>
                    <!-- Start Day -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="day">Day</label>
                        <input type="number" id="start-day" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="1-31" min="1" max="31">
                    </div>
                    <!-- Start Year -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="year">Year</label>
                        <input type="number" id="start-year" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="2025" min="1">
                    </div>
                </div>
            </div>

            <div class="p-4 bg-gray-50 rounded border border-gray-200">
                <div class="text-sm font-medium text-gray-700 mb-3" data-i18n="add_subtract">Add/Subtract</div>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Operation -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="operation">Operation</label>
                        <select id="date-operation" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                            <option value="add" selected data-i18n="add">Add</option>
                            <option value="subtract" data-i18n="subtract">Subtract</option>
                        </select>
                    </div>
                    <!-- Value -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="value">Value</label>
                        <input type="number" id="date-value" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="10" min="1" value="10">
                    </div>
                    <!-- Unit -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="unit">Unit</label>
                        <select id="date-unit" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                            <option value="days" selected data-i18n="days">Days</option>
                            <option value="months" data-i18n="months">Months</option>
                            <option value="years" data-i18n="years">Years</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <button onclick="DateCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">Calculate Date</button>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
            <div class="text-sm text-gray-500 mb-2" data-i18n="result_label">Result Date</div>
            <div id="date-result" class="text-2xl font-bold text-blue-800">--</div>
            <div id="date-result-day" class="text-sm text-gray-600 mt-2"></div>
        </div>
    </div>

    <script>
        const DateCalc = {
            i18n: {
                'en': {
                    title: 'ğŸ“† Date Calculator',
                    start_date: 'Start Date',
                    month: 'Month',
                    day: 'Day',
                    year: 'Year',
                    add_subtract: 'Add/Subtract',
                    operation: 'Operation',
                    add: 'Add',
                    subtract: 'Subtract',
                    value: 'Value',
                    unit: 'Unit',
                    days: 'Days',
                    months: 'Months',
                    years: 'Years',
                    btn_calc: 'Calculate Date',
                    result_label: 'Result Date',
                    err_invalid: 'Invalid Date',
                    days_of_week: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday']
                },
                'zh-CN': {
                    title: 'ğŸ“† æ—¥æœŸè®¡ç®—å™¨',
                    start_date: 'èµ·å§‹æ—¥æœŸ',
                    month: 'æœˆä»½',
                    day: 'æ—¥æœŸ',
                    year: 'å¹´ä»½',
                    add_subtract: 'å¢åŠ /å‡å°‘',
                    operation: 'æ“ä½œ',
                    add: 'å¢åŠ ',
                    subtract: 'å‡å°‘',
                    value: 'æ•°å€¼',
                    unit: 'å•ä½',
                    days: 'å¤©',
                    months: 'æœˆ',
                    years: 'å¹´',
                    btn_calc: 'è®¡ç®—æ—¥æœŸ',
                    result_label: 'ç»“æœæ—¥æœŸ',
                    err_invalid: 'æ— æ•ˆæ—¥æœŸ',
                    days_of_week: ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­']
                },
                'zh-TW': {
                    title: 'ğŸ“† æ—¥æœŸè¨ˆç®—å™¨',
                    start_date: 'èµ·å§‹æ—¥æœŸ',
                    month: 'æœˆä»½',
                    day: 'æ—¥æœŸ',
                    year: 'å¹´ä»½',
                    add_subtract: 'å¢åŠ /æ¸›å°‘',
                    operation: 'æ“ä½œ',
                    add: 'å¢åŠ ',
                    subtract: 'æ¸›å°‘',
                    value: 'æ•¸å€¼',
                    unit: 'å–®ä½',
                    days: 'å¤©',
                    months: 'æœˆ',
                    years: 'å¹´',
                    btn_calc: 'è¨ˆç®—æ—¥æœŸ',
                    result_label: 'çµæœæ—¥æœŸ',
                    err_invalid: 'ç„¡æ•ˆæ—¥æœŸ',
                    days_of_week: ['æ˜ŸæœŸæ—¥', 'æ˜ŸæœŸä¸€', 'æ˜ŸæœŸäºŒ', 'æ˜ŸæœŸä¸‰', 'æ˜ŸæœŸå››', 'æ˜ŸæœŸäº”', 'æ˜ŸæœŸå…­']
                },
                'ja': {
                    title: 'ğŸ“† æ—¥ä»˜è¨ˆç®—ãƒ„ãƒ¼ãƒ«',
                    start_date: 'é–‹å§‹æ—¥',
                    month: 'æœˆ',
                    day: 'æ—¥',
                    year: 'å¹´',
                    add_subtract: 'åŠ ç®—/æ¸›ç®—',
                    operation: 'æ“ä½œ',
                    add: 'åŠ ç®—',
                    subtract: 'æ¸›ç®—',
                    value: 'å€¤',
                    unit: 'å˜ä½',
                    days: 'æ—¥',
                    months: 'æœˆ',
                    years: 'å¹´',
                    btn_calc: 'æ—¥ä»˜ã‚’è¨ˆç®—',
                    result_label: 'çµæœã®æ—¥ä»˜',
                    err_invalid: 'ç„¡åŠ¹ãªæ—¥ä»˜',
                    days_of_week: ['æ—¥æ›œæ—¥', 'æœˆæ›œæ—¥', 'ç«æ›œæ—¥', 'æ°´æ›œæ—¥', 'æœ¨æ›œæ—¥', 'é‡‘æ›œæ—¥', 'åœŸæ›œæ—¥']
                },
                'ru': {
                    title: 'ğŸ“† ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ´Ğ°Ñ‚',
                    start_date: 'ĞĞ°Ñ‡Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    month: 'ĞœĞµÑÑÑ†',
                    day: 'Ğ”ĞµĞ½ÑŒ',
                    year: 'Ğ“Ğ¾Ğ´',
                    add_subtract: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ/Ğ’Ñ‹Ñ‡ĞµÑÑ‚ÑŒ',
                    operation: 'ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ',
                    add: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ',
                    subtract: 'Ğ’Ñ‹Ñ‡ĞµÑÑ‚ÑŒ',
                    value: 'Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ',
                    unit: 'Ğ•Ğ´Ğ¸Ğ½Ğ¸Ñ†Ğ°',
                    days: 'Ğ”Ğ½ĞµĞ¹',
                    months: 'ĞœĞµÑÑÑ†ĞµĞ²',
                    years: 'Ğ›ĞµÑ‚',
                    btn_calc: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ñ‚Ñƒ',
                    result_label: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ¸Ñ€ÑƒÑÑ‰Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    err_invalid: 'ĞĞµĞ²ĞµÑ€Ğ½Ğ°Ñ Ğ´Ğ°Ñ‚Ğ°',
                    days_of_week: ['Ğ’Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒĞµ', 'ĞŸĞ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸Ğº', 'Ğ’Ñ‚Ğ¾Ñ€Ğ½Ğ¸Ğº', 'Ğ¡Ñ€ĞµĞ´Ğ°', 'Ğ§ĞµÑ‚Ğ²ĞµÑ€Ğ³', 'ĞŸÑÑ‚Ğ½Ğ¸Ñ†Ğ°', 'Ğ¡ÑƒĞ±Ğ±Ğ¾Ñ‚Ğ°']
                },
                'es': {
                    title: 'ğŸ“† Calculadora de Fechas',
                    start_date: 'Fecha de inicio',
                    month: 'Mes',
                    day: 'DÃ­a',
                    year: 'AÃ±o',
                    add_subtract: 'Sumar/Restar',
                    operation: 'OperaciÃ³n',
                    add: 'Sumar',
                    subtract: 'Restar',
                    value: 'Valor',
                    unit: 'Unidad',
                    days: 'DÃ­as',
                    months: 'Meses',
                    years: 'AÃ±os',
                    btn_calc: 'Calcular fecha',
                    result_label: 'Fecha resultante',
                    err_invalid: 'Fecha invÃ¡lida',
                    days_of_week: ['Domingo', 'Lunes', 'Martes', 'MiÃ©rcoles', 'Jueves', 'Viernes', 'SÃ¡bado']
                }
            },

            init: () => {
                const today = new Date();
                document.getElementById('start-month').value = today.getMonth() + 1;
                document.getElementById('start-day').value = today.getDate();
                document.getElementById('start-year').value = today.getFullYear();
            },

            changeLang: () => {
                const lang = document.getElementById('date-lang').value;
                const texts = DateCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="date_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // é‡æ–°è®¡ç®—ä»¥æ›´æ–°ç»“æœè¯­è¨€
                const currentResult = document.getElementById('date-result').innerText;
                if (currentResult !== '--') {
                    DateCalc.calc();
                }
            },

            calc: () => {
                // è·å–è¾“å…¥å€¼
                const startYear = parseInt(document.getElementById('start-year').value);
                const startMonth = parseInt(document.getElementById('start-month').value);
                const startDay = parseInt(document.getElementById('start-day').value);
                
                const operation = document.getElementById('date-operation').value;
                const value = parseInt(document.getElementById('date-value').value);
                const unit = document.getElementById('date-unit').value;
                
                const lang = document.getElementById('date-lang').value;
                const texts = DateCalc.i18n[lang];

                // éªŒè¯è¾“å…¥
                if (!startYear || !startMonth || !startDay || !value) {
                    return;
                }

                // åˆ›å»ºæ—¥æœŸå¯¹è±¡å¹¶éªŒè¯
                const startDate = new Date(startYear, startMonth - 1, startDay);
                
                const isValidDate = (startDate.getFullYear() === startYear) && 
                                   (startDate.getMonth() === startMonth - 1) && 
                                   (startDate.getDate() === startDay);

                const resultEl = document.getElementById('date-result');
                const dayEl = document.getElementById('date-result-day');

                if (!isValidDate) {
                    resultEl.innerText = texts.err_invalid;
                    resultEl.className = "text-xl font-bold text-red-600";
                    dayEl.innerText = "";
                    return;
                }

                // è®¡ç®—ç»“æœæ—¥æœŸ
                const resultDate = new Date(startDate);
                
                switch(unit) {
                    case 'days':
                        resultDate.setDate(startDate.getDate() + (operation === 'add' ? value : -value));
                        break;
                    case 'months':
                        resultDate.setMonth(startDate.getMonth() + (operation === 'add' ? value : -value));
                        break;
                    case 'years':
                        resultDate.setFullYear(startDate.getFullYear() + (operation === 'add' ? value : -value));
                        break;
                }

                // æ ¼å¼åŒ–ç»“æœæ—¥æœŸ
                const year = resultDate.getFullYear();
                const month = resultDate.getMonth() + 1;
                const day = resultDate.getDate();
                const dayIndex = resultDate.getDay();
                
                let dateString = '';
                if (lang === 'en' || lang === 'es') {
                    dateString = `${month}/${day}/${year}`;
                } else if (lang === 'zh-CN' || lang === 'zh-TW' || lang === 'ja') {
                    dateString = `${year}/${month}/${day}`;
                } else if (lang === 'ru') {
                    dateString = `${day}.${month}.${year}`;
                }

                // æ˜¾ç¤ºç»“æœ
                resultEl.className = "text-2xl font-bold text-blue-800";
                resultEl.innerText = dateString;
                dayEl.innerText = texts.days_of_week[dayIndex];
            }
        };

        document.addEventListener('DOMContentLoaded', DateCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // è‡ªåŠ¨åŒ¹é…æµè§ˆå™¨è¯­è¨€
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('date-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    DateCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>