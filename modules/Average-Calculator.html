<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Average Calculator</title>
    
    <!-- å·¥å…·å…ƒæ•°æ® (Tool Metadata) -->
    <meta name="tool-id" content="average_calc_v2">
    <meta name="category" content="Math">
    <meta name="icon" content="ğŸ“Š">
    
    <!-- é»˜è®¤SEOä¿¡æ¯ (Default SEO) -->
    <meta name="title" content="Average Calculator">
    <meta name="description" content="Calculate the average (mean), sum, and count of a set of numbers. Support for English, Chinese, Japanese, and Russian.">
    
    <!-- å¤šè¯­è¨€SEOé…ç½® (Multilingual SEO) -->
    <meta name="lang-title-zh-CN" content="å¹³å‡å€¼è®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="åœ¨çº¿å¹³å‡å€¼è®¡ç®—å™¨ï¼Œå¿«é€Ÿè®¡ç®—ä¸€ç»„æ•°å­—çš„å¹³å‡æ•°ã€æ€»å’Œã€æœ€å¤§/æœ€å°å€¼ã€‚æ”¯æŒå¤šè¯­è¨€ã€‚">
    
    <meta name="lang-title-zh-TW" content="å¹³å‡å€¼è¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="åœ¨ç·šå¹³å‡å€¼è¨ˆç®—å™¨ï¼Œå¿«é€Ÿè¨ˆç®—ä¸€çµ„æ•¸å­—çš„å¹³å‡æ•¸ã€ç¸½å’Œã€æœ€å¤§/æœ€å°å€¼ã€‚æ”¯æŒå¤šèªè¨€ã€‚">
    
    <meta name="lang-title-ja" content="å¹³å‡å€¤è¨ˆç®—ãƒ„ãƒ¼ãƒ«">
    <meta name="lang-description-ja" content="æ•°å€¤ã‚»ãƒƒãƒˆã®å¹³å‡å€¤ï¼ˆå¹³å‡ï¼‰ã€åˆè¨ˆã€å€‹æ•°ã‚’è¨ˆç®—ã—ã¾ã™ã€‚å¤šè¨€èªå¯¾å¿œã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ÑÑ€ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ">
    <meta name="lang-description-ru" content="Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚Ğµ ÑÑ€ĞµĞ´Ğ½ĞµĞµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ, ÑÑƒĞ¼Ğ¼Ñƒ Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‡Ğ¸ÑĞµĞ». ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ÑĞ·Ñ‹ĞºĞ¾Ğ².">

    <!-- æ ·å¼åº“ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #f0f9ff; font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
        .tool-container { max-width: 800px; margin: 40px auto; padding: 0 15px; }
        .tool-card { background: white; border-radius: 12px; box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); overflow: hidden; }
        .tool-header { background: linear-gradient(to right, #3b82f6, #2563eb); padding: 20px; color: white; display: flex; justify-content: space-between; align-items: center; }
        .tool-body { padding: 30px; }
        .result-box { background-color: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; padding: 20px; margin-top: 20px; }
        .stat-row { display: flex; justify-content: space-between; border-bottom: 1px solid #eef2ff; padding: 12px 0; }
        .stat-row:last-child { border-bottom: none; }
        .stat-label { color: #64748b; font-weight: 500; }
        .stat-value { color: #1e293b; font-weight: 700; font-family: monospace; font-size: 1.1em; }
        .intro-section { margin-top: 30px; background: white; padding: 25px; border-radius: 10px; color: #475569; line-height: 1.6; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        
        /* åŠ¨æ€è¾“å…¥æ¡†åŠ¨ç”» */
        .input-animate { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="tool-container">
        
        <!-- ä¸»å·¥å…·å¡ç‰‡ -->
        <div class="tool-card">
            
            <!-- å¤´éƒ¨ä¸è¯­è¨€åˆ‡æ¢ -->
            <div class="tool-header">
                <h1 class="text-xl md:text-2xl font-bold flex items-center gap-2">
                    <span>ğŸ“Š</span> <span data-i18n="title">Average Calculator</span>
                </h1>
                
                <div class="relative">
                    <select id="lang-selector" onchange="App.changeLang(this.value)" class="appearance-none bg-blue-700 text-white border border-blue-500 hover:bg-blue-600 px-3 py-1 pr-8 rounded focus:outline-none text-sm font-medium cursor-pointer transition-colors">
                        <option value="en">English</option>
                        <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                        <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                        <option value="ja">æ—¥æœ¬èª</option>
                        <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-white">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                    </div>
                </div>
            </div>

            <!-- å·¥å…·ä¸»ä½“ -->
            <div class="tool-body">
                
                <div class="mb-6">
                    <label class="block text-gray-700 font-medium mb-2" data-i18n="input_label">Enter numbers (comma or space separated)</label>
                    <textarea id="input-numbers" 
                        class="w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition shadow-sm text-gray-700 font-mono" 
                        rows="4" 
                        placeholder="10, 20, 30.5, 40..."></textarea>
                    
                    <!-- æ“ä½œæŒ‰é’® -->
                    <div class="flex flex-wrap gap-2 mt-3">
                        <button onclick="App.addInputField()" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-md text-sm font-medium transition flex items-center gap-1">
                            <span class="text-green-600 font-bold">+</span> <span data-i18n="btn_add">Add Field</span>
                        </button>
                        <button onclick="App.clearAll()" class="bg-gray-100 hover:bg-red-50 text-red-600 px-4 py-2 rounded-md text-sm font-medium transition flex items-center gap-1 ml-auto">
                            <span>ğŸ—‘ï¸</span> <span data-i18n="btn_clear">Clear</span>
                        </button>
                    </div>
                    
                    <!-- åŠ¨æ€è¾“å…¥åŒºåŸŸ -->
                    <div id="dynamic-inputs" class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-3"></div>
                </div>

                <!-- è®¡ç®—æŒ‰é’® -->
                <button onclick="App.calculate()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg hover:shadow-xl transition transform active:scale-95 flex justify-center items-center gap-2">
                    <span>ğŸ§®</span> <span data-i18n="btn_calc">Calculate</span>
                </button>

                <!-- é”™è¯¯æç¤º -->
                <div id="error-msg" class="hidden mt-4 p-3 bg-red-50 text-red-700 border border-red-200 rounded text-center text-sm"></div>

                <!-- ç»“æœå±•ç¤º -->
                <div id="result-section" class="result-box hidden">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 border-b pb-2" data-i18n="result_title">Results</h3>
                    
                    <div class="stat-row">
                        <span class="stat-label" data-i18n="lbl_average">Average (Mean)</span>
                        <span id="res-avg" class="stat-value text-blue-600">--</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label" data-i18n="lbl_sum">Sum</span>
                        <span id="res-sum" class="stat-value">--</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label" data-i18n="lbl_count">Count</span>
                        <span id="res-count" class="stat-value">--</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label" data-i18n="lbl_min">Minimum</span>
                        <span id="res-min" class="stat-value">--</span>
                    </div>
                    <div class="stat-row">
                        <span class="stat-label" data-i18n="lbl_max">Maximum</span>
                        <span id="res-max" class="stat-value">--</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŠŸèƒ½ä»‹ç»åŒºåŸŸ -->
        <div class="intro-section">
            <h2 class="text-lg font-bold text-gray-800 mb-3" data-i18n="intro_title">About this Tool</h2>
            <p data-i18n="intro_text" class="text-sm md:text-base">
                This simple and efficient Average Calculator allows you to quickly determine the mean value of a dataset. 
                Whether you are a student checking grades, a researcher analyzing data, or just need to do some quick math, 
                this tool helps you calculate the Average, Sum, Count, Maximum, and Minimum values instantly. 
                Simply enter your numbers and let the tool do the rest.
            </p>
        </div>

    </div>

    <script>
        const App = {
            // è¯­è¨€åŒ…é…ç½®
            i18n: {
                'en': {
                    title: 'Average Calculator',
                    input_label: 'Enter numbers (comma or space separated)',
                    placeholder: 'e.g. 10, 20, 30.5...',
                    btn_add: 'Add Field',
                    btn_clear: 'Clear All',
                    btn_calc: 'Calculate',
                    result_title: 'Calculation Results',
                    lbl_average: 'Average (Mean)',
                    lbl_sum: 'Sum',
                    lbl_count: 'Count',
                    lbl_min: 'Minimum',
                    lbl_max: 'Maximum',
                    err_empty: 'Please enter at least one number.',
                    err_invalid: 'Some inputs contain invalid characters.',
                    intro_title: 'About this Tool',
                    intro_text: 'This simple and efficient Average Calculator allows you to quickly determine the mean value of a dataset. Whether you are a student checking grades, a researcher analyzing data, or just need to do some quick math, this tool helps you calculate the Average, Sum, Count, Maximum, and Minimum values instantly.'
                },
                'zh-CN': {
                    title: 'å¹³å‡å€¼è®¡ç®—å™¨',
                    input_label: 'è¾“å…¥æ•°å­—ï¼ˆç”¨é€—å·æˆ–ç©ºæ ¼åˆ†éš”ï¼‰',
                    placeholder: 'ä¾‹å¦‚ï¼š10, 20, 30.5...',
                    btn_add: 'æ·»åŠ è¾“å…¥æ¡†',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    btn_calc: 'å¼€å§‹è®¡ç®—',
                    result_title: 'è®¡ç®—ç»“æœ',
                    lbl_average: 'å¹³å‡å€¼ (Mean)',
                    lbl_sum: 'æ€»å’Œ (Sum)',
                    lbl_count: 'ä¸ªæ•° (Count)',
                    lbl_min: 'æœ€å°å€¼ (Min)',
                    lbl_max: 'æœ€å¤§å€¼ (Max)',
                    err_empty: 'è¯·è‡³å°‘è¾“å…¥ä¸€ä¸ªæ•°å­—ã€‚',
                    err_invalid: 'éƒ¨åˆ†è¾“å…¥åŒ…å«æ— æ•ˆå­—ç¬¦ï¼Œè¯·æ£€æŸ¥ã€‚',
                    intro_title: 'å…³äºæœ¬å·¥å…·',
                    intro_text: 'è¿™æ˜¯ä¸€ä¸ªç®€å•é«˜æ•ˆçš„å¹³å‡å€¼è®¡ç®—å™¨ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿè®¡ç®—ä¸€ç»„æ•°æ®çš„å¹³å‡å€¼ã€‚æ— è®ºæ‚¨æ˜¯è®¡ç®—æˆç»©çš„å­¦ç”Ÿã€åˆ†ææ•°æ®çš„ç ”ç©¶äººå‘˜ï¼Œè¿˜æ˜¯æ—¥å¸¸éœ€è¦å¿«é€Ÿè®¡ç®—ï¼Œæœ¬å·¥å…·éƒ½èƒ½å¸®æ‚¨ç¬é—´å¾—å‡ºå¹³å‡å€¼ã€æ€»å’Œã€æ•°é‡ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚'
                },
                'zh-TW': {
                    title: 'å¹³å‡å€¼è¨ˆç®—å™¨',
                    input_label: 'è¼¸å…¥æ•¸å­—ï¼ˆç”¨é€—è™Ÿæˆ–ç©ºæ ¼åˆ†éš”ï¼‰',
                    placeholder: 'ä¾‹å¦‚ï¼š10, 20, 30.5...',
                    btn_add: 'æ·»åŠ è¼¸å…¥æ¡†',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    btn_calc: 'é–‹å§‹è¨ˆç®—',
                    result_title: 'è¨ˆç®—çµæœ',
                    lbl_average: 'å¹³å‡å€¼ (Mean)',
                    lbl_sum: 'ç¸½å’Œ (Sum)',
                    lbl_count: 'å€‹æ•¸ (Count)',
                    lbl_min: 'æœ€å°å€¼ (Min)',
                    lbl_max: 'æœ€å¤§å€¼ (Max)',
                    err_empty: 'è«‹è‡³å°‘è¼¸å…¥ä¸€å€‹æ•¸å­—ã€‚',
                    err_invalid: 'éƒ¨åˆ†è¼¸å…¥åŒ…å«ç„¡æ•ˆå­—ç¬¦ï¼Œè«‹æª¢æŸ¥ã€‚',
                    intro_title: 'é—œæ–¼æœ¬å·¥å…·',
                    intro_text: 'é€™æ˜¯ä¸€å€‹ç°¡å–®é«˜æ•ˆçš„å¹³å‡å€¼è¨ˆç®—å™¨ï¼Œå¯ä»¥å¹«åŠ©æ‚¨å¿«é€Ÿè¨ˆç®—ä¸€çµ„æ•¸æ“šçš„å¹³å‡å€¼ã€‚ç„¡è«–æ‚¨æ˜¯è¨ˆç®—æˆç¸¾çš„å­¸ç”Ÿã€åˆ†ææ•¸æ“šçš„ç ”ç©¶äººå“¡ï¼Œé‚„æ˜¯æ—¥å¸¸éœ€è¦å¿«é€Ÿè¨ˆç®—ï¼Œæœ¬å·¥å…·éƒ½èƒ½å¹«æ‚¨ç¬é–“å¾—å‡ºå¹³å‡å€¼ã€ç¸½å’Œã€æ•¸é‡ã€æœ€å¤§å€¼å’Œæœ€å°å€¼ã€‚'
                },
                'ja': {
                    title: 'å¹³å‡å€¤è¨ˆç®—ãƒ„ãƒ¼ãƒ«',
                    input_label: 'æ•°å€¤ã‚’å…¥åŠ›ï¼ˆã‚«ãƒ³ãƒã¾ãŸã¯ã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šï¼‰',
                    placeholder: 'ä¾‹ï¼š10, 20, 30.5...',
                    btn_add: 'å…¥åŠ›æ¬„ã‚’è¿½åŠ ',
                    btn_clear: 'ã™ã¹ã¦ã‚¯ãƒªã‚¢',
                    btn_calc: 'è¨ˆç®—ã™ã‚‹',
                    result_title: 'è¨ˆç®—çµæœ',
                    lbl_average: 'å¹³å‡å€¤ (Average)',
                    lbl_sum: 'åˆè¨ˆ (Sum)',
                    lbl_count: 'å€‹æ•° (Count)',
                    lbl_min: 'æœ€å°å€¤ (Min)',
                    lbl_max: 'æœ€å¤§å€¤ (Max)',
                    err_empty: 'å°‘ãªãã¨ã‚‚1ã¤ã®æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚',
                    err_invalid: 'ç„¡åŠ¹ãªæ–‡å­—ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚',
                    intro_title: 'ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦',
                    intro_text: 'ã“ã®ã‚·ãƒ³ãƒ—ãƒ«ã§åŠ¹ç‡çš„ãªå¹³å‡å€¤è¨ˆç®—ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®å¹³å‡å€¤ã‚’ã™ã°ã‚„ãæ±‚ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚æˆç¸¾ã‚’ç¢ºèªã™ã‚‹å­¦ç”Ÿã€ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã™ã‚‹ç ”ç©¶è€…ã€ã¾ãŸã¯æ—¥å¸¸ã®è¨ˆç®—ãŒå¿…è¦ãªæ–¹ãªã©ã€èª°ã§ã‚‚ç¬æ™‚ã«å¹³å‡ã€åˆè¨ˆã€å€‹æ•°ã€æœ€å¤§å€¤ã€æœ€å°å€¤ã‚’è¨ˆç®—ã§ãã¾ã™ã€‚'
                },
                'ru': {
                    title: 'ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ÑÑ€ĞµĞ´Ğ½ĞµĞ³Ğ¾',
                    input_label: 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‡Ğ¸ÑĞ»Ğ° (Ñ‡ĞµÑ€ĞµĞ· Ğ·Ğ°Ğ¿ÑÑ‚ÑƒÑ Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»)',
                    placeholder: 'ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: 10, 20, 30.5...',
                    btn_add: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğµ',
                    btn_clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ',
                    btn_calc: 'Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ',
                    result_title: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹',
                    lbl_average: 'Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ (Average)',
                    lbl_sum: 'Ğ¡ÑƒĞ¼Ğ¼Ğ° (Sum)',
                    lbl_count: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾',
                    lbl_min: 'ĞœĞ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼',
                    lbl_max: 'ĞœĞ°ĞºÑĞ¸Ğ¼ÑƒĞ¼',
                    err_empty: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ğ¾Ğ´Ğ½Ğ¾ Ñ‡Ğ¸ÑĞ»Ğ¾.',
                    err_invalid: 'ĞĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ñ‚ Ğ½ĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹.',
                    intro_title: 'ĞĞ± ÑÑ‚Ğ¾Ğ¼ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğµ',
                    intro_text: 'Ğ­Ñ‚Ğ¾Ñ‚ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ¸ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ÑÑ€ĞµĞ´Ğ½ĞµĞ³Ğ¾ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞµÑ‚ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ ÑÑ€ĞµĞ´Ğ½ĞµĞµ Ğ°Ñ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ½Ğ°Ğ±Ğ¾Ñ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…. Ğ‘ÑƒĞ´ÑŒ Ñ‚Ğ¾ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚, Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑÑÑ‰Ğ¸Ğ¹ Ğ¾Ñ†ĞµĞ½ĞºĞ¸, Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ, Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ, Ğ¸Ğ»Ğ¸ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚, ÑÑ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¼Ğ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ğ¾ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ ÑÑ€ĞµĞ´Ğ½ĞµĞµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ, ÑÑƒĞ¼Ğ¼Ñƒ, ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾, Ğ¼Ğ°ĞºÑĞ¸Ğ¼ÑƒĞ¼ Ğ¸ Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼.'
                }
            },

            // å½“å‰è¯­è¨€
            currentLang: 'en',

            // åˆå§‹åŒ–
            init: () => {
                // 1. ä¼˜å…ˆä»URLå‚æ•°è·å–è¯­è¨€
                const urlParams = new URLSearchParams(window.location.search);
                let lang = urlParams.get('lang');

                // 2. å¦‚æœURLæ²¡æœ‰ï¼Œåˆ™æ£€æµ‹æµè§ˆå™¨è¯­è¨€
                if (!lang) {
                    const navLang = navigator.language || navigator.userLanguage;
                    if (navLang.startsWith('zh')) {
                        lang = (navLang.includes('TW') || navLang.includes('HK')) ? 'zh-TW' : 'zh-CN';
                    } else if (navLang.startsWith('ja')) {
                        lang = 'ja';
                    } else if (navLang.startsWith('ru')) {
                        lang = 'ru';
                    } else {
                        lang = 'en';
                    }
                }

                // 3. éªŒè¯è¯­è¨€æ˜¯å¦æ”¯æŒï¼Œä¸æ”¯æŒåˆ™å›é€€åˆ°è‹±æ–‡
                if (!App.i18n[lang]) lang = 'en';

                // 4. åº”ç”¨è¯­è¨€
                document.getElementById('lang-selector').value = lang;
                App.changeLang(lang, false); // åˆå§‹åŒ–æ—¶ä¸å¼ºåˆ¶æ¨å…¥å†å²è®°å½•ï¼Œé¿å…è¦†ç›–åˆå§‹çŠ¶æ€
            },

            // åˆ‡æ¢è¯­è¨€
            changeLang: (lang, updateUrl = true) => {
                App.currentLang = lang;
                const texts = App.i18n[lang];

                // æ›´æ–°æ‰€æœ‰å¸¦æœ‰ data-i18n å±æ€§çš„å…ƒç´ æ–‡æœ¬
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) {
                        el.innerText = texts[key];
                    }
                });

                // æ›´æ–° Placeholder
                document.getElementById('input-numbers').placeholder = texts.placeholder;

                // æ›´æ–°é¡µé¢ Title
                document.title = texts.title;

                // æ›´æ–° URL å‚æ•° (?lang=xx)
                if (updateUrl) {
                    const url = new URL(window.location);
                    url.searchParams.set('lang', lang);
                    window.history.pushState({}, '', url);
                }
                
                // å¦‚æœå·²æœ‰ç»“æœï¼Œé‡æ–°è®¡ç®—ä»¥åˆ·æ–°å¯èƒ½çš„æ ¼å¼ï¼ˆè™½ç„¶æ•°å­—æ ¼å¼é€šç”¨ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼‰
                const resultSection = document.getElementById('result-section');
                if (!resultSection.classList.contains('hidden')) {
                    App.calculate();
                }
            },

            // æ·»åŠ å•ç‹¬çš„è¾“å…¥æ¡†
            addInputField: () => {
                const container = document.getElementById('dynamic-inputs');
                const div = document.createElement('div');
                div.className = 'relative input-animate';
                div.innerHTML = `
                    <input type="number" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none bg-gray-50" placeholder="#">
                    <button onclick="this.parentElement.remove()" class="absolute right-2 top-2 text-gray-400 hover:text-red-500 font-bold">Ã—</button>
                `;
                container.appendChild(div);
            },

            // æ¸…é™¤æ‰€æœ‰å†…å®¹
            clearAll: () => {
                document.getElementById('input-numbers').value = '';
                document.getElementById('dynamic-inputs').innerHTML = '';
                document.getElementById('result-section').classList.add('hidden');
                document.getElementById('error-msg').classList.add('hidden');
            },

            // æ ¸å¿ƒè®¡ç®—é€»è¾‘
            calculate: () => {
                const texts = App.i18n[App.currentLang];
                const errorEl = document.getElementById('error-msg');
                const resultSection = document.getElementById('result-section');
                
                errorEl.classList.add('hidden');
                
                let numbers = [];

                // 1. è§£æå¤§æ–‡æœ¬æ¡†
                const rawText = document.getElementById('input-numbers').value;
                // æ”¯æŒé€—å·ã€ç©ºæ ¼ã€æ¢è¡Œç¬¦åˆ†éš”
                const splitText = rawText.split(/[\s,ï¼Œ\n]+/);
                
                splitText.forEach(str => {
                    if (str.trim() !== '') {
                        const num = parseFloat(str);
                        if (!isNaN(num)) {
                            numbers.push(num);
                        }
                    }
                });

                // 2. è§£æåŠ¨æ€è¾“å…¥æ¡†
                const dynamicInputs = document.querySelectorAll('#dynamic-inputs input');
                dynamicInputs.forEach(input => {
                    if (input.value.trim() !== '') {
                        const num = parseFloat(input.value);
                        if (!isNaN(num)) {
                            numbers.push(num);
                        }
                    }
                });

                // 3. éªŒè¯
                if (numbers.length === 0) {
                    errorEl.textContent = texts.err_empty;
                    errorEl.classList.remove('hidden');
                    resultSection.classList.add('hidden');
                    return;
                }

                // 4. è®¡ç®—
                const sum = numbers.reduce((a, b) => a + b, 0);
                const avg = sum / numbers.length;
                const min = Math.min(...numbers);
                const max = Math.max(...numbers);

                // 5. æ˜¾ç¤ºç»“æœ
                // ä½¿ç”¨ Intl.NumberFormat æ¥å¤„ç†æœ¬åœ°åŒ–çš„æ•°å­—æ˜¾ç¤ºï¼ˆå¯é€‰ï¼Œè¿™é‡Œä¿æŒç®€å•å°æ•°ï¼‰
                document.getElementById('res-avg').innerText = Number.isInteger(avg) ? avg : avg.toFixed(4).replace(/\.?0+$/, "");
                document.getElementById('res-sum').innerText = Number.isInteger(sum) ? sum : sum.toFixed(4).replace(/\.?0+$/, "");
                document.getElementById('res-count').innerText = numbers.length;
                document.getElementById('res-min').innerText = min;
                document.getElementById('res-max').innerText = max;

                resultSection.classList.remove('hidden');
            }
        };

        // å¯åŠ¨åº”ç”¨
        document.addEventListener('DOMContentLoaded', App.init);
    </script>
</body>
</html>
