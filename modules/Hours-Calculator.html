<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hours Calculator Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="hours_calc" 
         data-category="work" 
         data-title="Hours Calculator" 
         data-icon="⏱️">
        
        <div class="absolute top-4 right-4">
            <select id="hc-lang" onchange="HoursCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">簡體中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⏱️ Hours Calculator</h2>
        
        <p class="text-sm text-gray-500 mb-4" data-i18n="desc">Calculate duration between two times.</p>

        <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_start">Start Time</label>
                <input type="time" id="hc-start" class="w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 outline-none" value="09:00">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_end">End Time</label>
                <input type="time" id="hc-end" class="w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 outline-none" value="17:00">
            </div>
        </div>

        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="lbl_break">Break Deduction (minutes)</label>
            <input type="number" id="hc-break" class="w-full p-2 border rounded focus:ring-2 focus:ring-emerald-500 outline-none" placeholder="0" value="0">
        </div>

        <button onclick="HoursCalc.calc()" class="w-full bg-emerald-600 text-white py-2 rounded font-bold hover:bg-emerald-700 transition mb-6" data-i18n="btn_calc">Calculate Hours</button>

        <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-100 flex justify-between items-center">
            <div>
                <span class="text-gray-500 text-sm block" data-i18n="res_total">Total Duration</span>
                <div id="hc-result-dec" class="text-2xl font-bold text-emerald-800">--</div>
            </div>
            <div class="text-right">
                <span class="text-gray-500 text-sm block" data-i18n="res_hhmm">HH:MM</span>
                <div id="hc-result-time" class="text-xl font-semibold text-emerald-600">--:--</div>
            </div>
        </div>
    </div>

    <script>
        const HoursCalc = {
            i18n: {
                'en': {
                    title: '⏱️ Hours Calculator',
                    desc: 'Calculate duration between two times.',
                    lbl_start: 'Start Time',
                    lbl_end: 'End Time',
                    lbl_break: 'Break Deduction (minutes)',
                    btn_calc: 'Calculate Hours',
                    res_total: 'Total Hours',
                    res_hhmm: 'HH:MM',
                    txt_hrs: 'hrs'
                },
                'zh-CN': {
                    title: '⏱️ 工时计算器',
                    desc: '计算两个时间点之间的时长。',
                    lbl_start: '上班时间',
                    lbl_end: '下班时间',
                    lbl_break: '休息时间扣除 (分钟)',
                    btn_calc: '计算工时',
                    res_total: '总工时',
                    res_hhmm: '时:分',
                    txt_hrs: '小时'
                },
                'zh-TW': {
                    title: '⏱️ 工時計算器',
                    desc: '計算兩個時間點之間的時長。',
                    lbl_start: '上班時間',
                    lbl_end: '下班時間',
                    lbl_break: '休息時間扣除 (分鐘)',
                    btn_calc: '計算工時',
                    res_total: '總工時',
                    res_hhmm: '時:分',
                    txt_hrs: '小時'
                },
                'ja': {
                    title: '⏱️ 時間計算 (勤務時間)',
                    desc: '開始時間と終了時間の間隔を計算します。',
                    lbl_start: '開始時間',
                    lbl_end: '終了時間',
                    lbl_break: '休憩時間 (分)',
                    btn_calc: '計算する',
                    res_total: '総時間',
                    res_hhmm: '時間:分',
                    txt_hrs: '時間'
                },
                'ru': {
                    title: '⏱️ Калькулятор часов',
                    desc: 'Расчет продолжительности между двумя точками времени.',
                    lbl_start: 'Начало',
                    lbl_end: 'Конец',
                    lbl_break: 'Перерыв (минуты)',
                    btn_calc: 'Рассчитать',
                    res_total: 'Всего часов',
                    res_hhmm: 'ЧЧ:ММ',
                    txt_hrs: 'ч.'
                },
                'es': {
                    title: '⏱️ Calculadora de Horas',
                    desc: 'Calcula la duración entre dos horas.',
                    lbl_start: 'Hora de Inicio',
                    lbl_end: 'Hora Final',
                    lbl_break: 'Descanso (minutos)',
                    btn_calc: 'Calcular',
                    res_total: 'Total Horas',
                    res_hhmm: 'HH:MM',
                    txt_hrs: 'hrs'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('hc-lang').value;
                const texts = HoursCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="hours_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
                HoursCalc.calc();
            },

            calc: () => {
                const startStr = document.getElementById('hc-start').value;
                const endStr = document.getElementById('hc-end').value;
                const breakMins = parseInt(document.getElementById('hc-break').value) || 0;

                if (!startStr || !endStr) return;

                const d1 = new Date("2000-01-01 " + startStr);
                let d2 = new Date("2000-01-01 " + endStr);

                // Handle overnight shift
                if (d2 < d1) {
                    d2.setDate(d2.getDate() + 1);
                }

                let diffMs = d2 - d1;
                let diffMins = Math.floor(diffMs / 60000); // Total minutes
                
                diffMins -= breakMins;

                if (diffMins < 0) diffMins = 0;

                const hrs = Math.floor(diffMins / 60);
                const mins = diffMins % 60;
                const totalDec = diffMins / 60;

                const lang = document.getElementById('hc-lang').value;
                const unit = HoursCalc.i18n[lang].txt_hrs;

                document.getElementById('hc-result-dec').innerText = totalDec.toFixed(2) + " " + unit;
                
                const pad = (n) => n < 10 ? '0'+n : n;
                document.getElementById('hc-result-time').innerText = `${pad(hrs)}:${pad(mins)}`;
            }
        };
    </script>
</body>
</html>