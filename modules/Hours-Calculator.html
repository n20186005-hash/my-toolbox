<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hours Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="hours_calc">
    <meta name="category" content="Date & Time">
    <meta name="icon" content="⏱️">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Hours Calculator">
    <meta name="description" content="Calculate hours between two times or add/subtract hours from a time.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="小时计算器">
    <meta name="lang-description-zh-CN" content="计算两个时间之间的小时数或在某个时间上加减小时。">
    
    <meta name="lang-title-zh-TW" content="小時計算器">
    <meta name="lang-description-zh-TW" content="計算兩個時間之間的小時數或在某個時間上加減小時。">
    
    <meta name="lang-title-ja" content="時間計算ツール">
    <meta name="lang-description-ja" content="2つの時間の差を計算したり、時間に加減算したりすることができます。">
    
    <meta name="lang-title-ru" content="Калькулятор часов">
    <meta name="lang-description-ru" content="Вычислите разницу между двумя временами или добавьте/вычтите часы из времени.">
    
    <meta name="lang-title-es" content="Calculadora de Horas">
    <meta name="lang-description-es" content="Calcula las horas entre dos horas o suma/resta horas a una hora.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .time-input { display: grid; grid-template-columns: 80px 80px 40px; gap: 8px; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="hours_calc" 
         data-category="time_calculation" 
         data-title="Hours Calculator" 
         data-icon="⏱️">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="h-lang" onchange="HoursCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⏱️ Hours Calculator</h2>
        
        <div class="space-y-6">
            <!-- 时间1 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="time1_label">Start Time</label>
                <div class="time-input">
                    <input type="number" id="h-hour1" class="p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="HH" min="0" max="23">
                    <input type="number" id="h-minute1" class="p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="MM" min="0" max="59">
                    <select id="h-ampm1" class="p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                        <option value="AM">AM</option>
                        <option value="PM">PM</option>
                    </select>
                </div>
            </div>

            <!-- 时间2 -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="time2_label">End Time</label>
                <div class="time-input">
                    <input type="number" id="h-hour2" class="p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="HH" min="0" max="23">
                    <input type="number" id="h-minute2" class="p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="MM" min="0" max="59">
                    <select id="h-ampm2" class="p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
                        <option value="AM">AM</option>
                        <option value="PM">PM</option>
                    </select>
                </div>
            </div>

            <button onclick="HoursCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-2" data-i18n="btn_calc">Calculate Difference</button>

            <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
                <div class="text-sm text-gray-500 mb-2" data-i18n="res_label">Result</div>
                <div id="h-result" class="text-2xl font-bold text-blue-800">--</div>
                <div id="h-details" class="text-sm text-gray-600 mt-2"></div>
            </div>
        </div>
    </div>

    <script>
        const HoursCalc = {
            i18n: {
                'en': {
                    title: '⏱️ Hours Calculator',
                    time1_label: 'Start Time',
                    time2_label: 'End Time',
                    btn_calc: 'Calculate Difference',
                    res_label: 'Time Difference:',
                    err_invalid: 'Invalid Time',
                    hours: 'hours',
                    minutes: 'minutes'
                },
                'zh-CN': {
                    title: '⏱️ 小时计算器',
                    time1_label: '开始时间',
                    time2_label: '结束时间',
                    btn_calc: '计算差值',
                    res_label: '时间差：',
                    err_invalid: '无效时间',
                    hours: '小时',
                    minutes: '分钟'
                },
                'zh-TW': {
                    title: '⏱️ 小時計算器',
                    time1_label: '開始時間',
                    time2_label: '結束時間',
                    btn_calc: '計算差值',
                    res_label: '時間差：',
                    err_invalid: '無效時間',
                    hours: '小時',
                    minutes: '分鐘'
                },
                'ja': {
                    title: '⏱️ 時間計算ツール',
                    time1_label: '開始時間',
                    time2_label: '終了時間',
                    btn_calc: '差分を計算',
                    res_label: '時間の差：',
                    err_invalid: '無効な時間',
                    hours: '時間',
                    minutes: '分'
                },
                'ru': {
                    title: '⏱️ Калькулятор часов',
                    time1_label: 'Начальное время',
                    time2_label: 'Конечное время',
                    btn_calc: 'Вычислить разницу',
                    res_label: 'Разница во времени：',
                    err_invalid: 'Неверное время',
                    hours: 'часов',
                    minutes: 'минут'
                },
                'es': {
                    title: '⏱️ Calculadora de Horas',
                    time1_label: 'Hora de inicio',
                    time2_label: 'Hora de finalización',
                    btn_calc: 'Calcular diferencia',
                    res_label: 'Diferencia de tiempo：',
                    err_invalid: 'Hora inválida',
                    hours: 'horas',
                    minutes: 'minutos'
                }
            },

            init: () => {
                const now = new Date();
                let hour = now.getHours();
                const minute = now.getMinutes();
                const ampm = hour >= 12 ? 'PM' : 'AM';
                
                // 转换为12小时制
                hour = hour % 12;
                hour = hour ? hour : 12;
                
                document.getElementById('h-hour1').value = hour;
                document.getElementById('h-minute1').value = minute;
                document.getElementById('h-ampm1').value = ampm;
                
                // 设置结束时间为1小时后
                let endHour = now.getHours() + 1;
                const endAmpm = endHour >= 12 ? 'PM' : 'AM';
                endHour = endHour % 12;
                endHour = endHour ? endHour : 12;
                
                document.getElementById('h-hour2').value = endHour;
                document.getElementById('h-minute2').value = minute;
                document.getElementById('h-ampm2').value = endAmpm;
            },

            changeLang: () => {
                const lang = document.getElementById('h-lang').value;
                const texts = HoursCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="hours_calc"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                if (document.getElementById('h-result').innerText !== '--') {
                    HoursCalc.calc();
                }
            },

            calc: () => {
                const lang = document.getElementById('h-lang').value;
                const texts = HoursCalc.i18n[lang];
                
                // 获取输入值
                const h1 = parseInt(document.getElementById('h-hour1').value);
                const m1 = parseInt(document.getElementById('h-minute1').value);
                const a1 = document.getElementById('h-ampm1').value;
                
                const h2 = parseInt(document.getElementById('h-hour2').value);
                const m2 = parseInt(document.getElementById('h-minute2').value);
                const a2 = document.getElementById('h-ampm2').value;
                
                // 验证输入
                if (isNaN(h1) || isNaN(m1) || isNaN(h2) || isNaN(m2) || 
                    h1 < 1 || h1 > 12 || m1 < 0 || m1 > 59 ||
                    h2 < 1 || h2 > 12 || m2 < 0 || m2 > 59) {
                    document.getElementById('h-result').innerText = texts.err_invalid;
                    document.getElementById('h-result').className = "text-xl font-bold text-red-600";
                    document.getElementById('h-details').innerText = "";
                    return;
                }
                
                // 转换为24小时制
                const convertTo24h = (hour, ampm) => {
                    if (ampm === 'AM') {
                        return hour === 12 ? 0 : hour;
                    } else {
                        return hour === 12 ? 12 : hour + 12;
                    }
                };
                
                const time1 = convertTo24h(h1, a1) * 60 + m1;
                const time2 = convertTo24h(h2, a2) * 60 + m2;
                
                // 计算差值（可能跨天）
                let diff = time2 - time1;
                if (diff < 0) diff += 24 * 60;
                
                const hours = Math.floor(diff / 60);
                const minutes = diff % 60;
                
                // 显示结果
                const resultEl = document.getElementById('h-result');
                const detailsEl = document.getElementById('h-details');
                
                resultEl.className = "text-2xl font-bold text-blue-800";
                resultEl.innerText = `${hours}:${minutes.toString().padStart(2, '0')}`;
                detailsEl.innerText = `${hours} ${texts.hours} ${minutes} ${texts.minutes}`;
            }
        };

        document.addEventListener('DOMContentLoaded', HoursCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('h-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    HoursCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>