<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="E-commerce Operations">
    <meta name="icon" content="üõçÔ∏è">
    <title>Operation Plan Tool</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 1000px; margin: 0 auto; position: relative; }
        .section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .tab-btn { padding: 10px 20px; cursor: pointer; border-bottom: 2px solid transparent; color: #6b7280; font-weight: 500; }
        .tab-btn.active { border-bottom-color: #10b981; color: #10b981; }
        .tab-content { display: none; padding-top: 20px; }
        .tab-content.active { display: block; }
        input, select { width: 100%; padding: 6px; border: 1px solid #d1d5db; border-radius: 4px; font-size: 0.9rem; }
        .data-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        .data-table th, .data-table td { border: 1px solid #e5e7eb; padding: 8px; text-align: left; }
        .data-table th { background: #f9fafb; }
        .btn-add { background: #10b981; color: white; padding: 6px 12px; border-radius: 4px; font-size: 0.85rem; margin-top: 10px; }
        .btn-del { color: #ef4444; cursor: pointer; font-weight: bold; }
        .summary-box { background: #ecfdf5; padding: 15px; border-radius: 8px; margin-top: 20px; display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; }
        .intro-section { margin-top: 30px; padding: 20px; background-color: #f8fafc; border-radius: 8px; font-size: 0.95rem; color: #475569; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/e-commerce-operations/operation-plan-tool.html" />
</head>
<body>

    <div class="tool-module" id="plan-tool">
        <div class="absolute top-4 right-4">
            <select id="lang-selector" onchange="OpPlan.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2" data-i18n="title">üìÖ Operation Plan Division Tool</h2>

        <!-- Tabs -->
        <div class="flex border-b border-gray-200">
            <div class="tab-btn active" onclick="OpPlan.switchTab('product-plan')" data-i18n="tab_product">Product Plan</div>
            <div class="tab-btn" onclick="OpPlan.switchTab('quarter-plan')" data-i18n="tab_quarter">Quarter Target</div>
            <div class="tab-btn" onclick="OpPlan.switchTab('market-pos')" data-i18n="tab_market">Market Position</div>
        </div>

        <!-- Tab 1: Product Plan -->
        <div id="product-plan" class="tab-content active">
            <div class="overflow-x-auto">
                <table class="data-table" id="table-product">
                    <thead>
                        <tr>
                            <th data-i18n="th_category">Category</th>
                            <th data-i18n="th_product">Product</th>
                            <th data-i18n="th_m1_target">M1 Target (¬•)</th>
                            <th data-i18n="th_m1_ad">M1 Ad Budget (¬•)</th>
                            <th data-i18n="th_m2_target">M2 Target (¬•)</th>
                            <th data-i18n="th_m2_ad">M2 Ad Budget (¬•)</th>
                            <th data-i18n="th_action">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows generated by JS -->
                    </tbody>
                </table>
                <button class="btn-add" onclick="OpPlan.addProductRow()" data-i18n="btn_add_row">+ Add Product</button>
            </div>
            
            <div class="summary-box">
                <div>
                    <span class="block text-gray-500 text-xs" data-i18n="sum_total_target">Total Sales Target</span>
                    <span class="font-bold text-lg text-green-700" id="sum_prod_target">¬•0</span>
                </div>
                <div>
                    <span class="block text-gray-500 text-xs" data-i18n="sum_total_ad">Total Ad Budget</span>
                    <span class="font-bold text-lg text-blue-700" id="sum_prod_ad">¬•0</span>
                </div>
                <div>
                    <span class="block text-gray-500 text-xs" data-i18n="sum_roi">Est. ROI</span>
                    <span class="font-bold text-lg text-gray-700" id="sum_prod_roi">0</span>
                </div>
            </div>
        </div>

        <!-- Tab 2: Quarter Plan -->
        <div id="quarter-plan" class="tab-content">
            <div class="overflow-x-auto">
                <table class="data-table" id="table-quarter">
                    <thead>
                        <tr>
                            <th data-i18n="th_month">Month</th>
                            <th data-i18n="th_sales_target">Sales Target</th>
                            <th data-i18n="th_new_count">New Products</th>
                            <th data-i18n="th_class_a">Class A (>1M)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" value="Month 1" readonly class="bg-gray-50"></td>
                            <td><input type="number" class="q-sales" value="100000" oninput="OpPlan.calcQuarter()"></td>
                            <td><input type="number" class="q-new" value="10" oninput="OpPlan.calcQuarter()"></td>
                            <td><input type="number" class="q-a" value="0" oninput="OpPlan.calcQuarter()"></td>
                        </tr>
                        <tr>
                            <td><input type="text" value="Month 2" readonly class="bg-gray-50"></td>
                            <td><input type="number" class="q-sales" value="200000" oninput="OpPlan.calcQuarter()"></td>
                            <td><input type="number" class="q-new" value="10" oninput="OpPlan.calcQuarter()"></td>
                            <td><input type="number" class="q-a" value="1" oninput="OpPlan.calcQuarter()"></td>
                        </tr>
                        <tr>
                            <td><input type="text" value="Month 3" readonly class="bg-gray-50"></td>
                            <td><input type="number" class="q-sales" value="300000" oninput="OpPlan.calcQuarter()"></td>
                            <td><input type="number" class="q-new" value="5" oninput="OpPlan.calcQuarter()"></td>
                            <td><input type="number" class="q-a" value="2" oninput="OpPlan.calcQuarter()"></td>
                        </tr>
                        <tr class="bg-gray-100 font-bold">
                            <td data-i18n="row_total">Total</td>
                            <td id="q_total_sales">¬•600000</td>
                            <td id="q_total_new">25</td>
                            <td id="q_total_a">3</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Tab 3: Market Position -->
        <div id="market-pos" class="tab-content">
             <div class="overflow-x-auto">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th data-i18n="th_product">Product</th>
                            <th data-i18n="th_margin">Profit Margin (%)</th>
                            <th data-i18n="th_ad_ratio">Ad Cost Ratio (%)</th>
                            <th data-i18n="th_position">Positioning</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" value="Product A"></td>
                            <td><input type="number" value="40"></td>
                            <td><input type="number" value="40"></td>
                            <td>
                                <select>
                                    <option value="A" data-i18n="opt_top_tier">Top Tier (Class A)</option>
                                    <option value="B">Mid Tier (Class B)</option>
                                    <option value="C">Low Tier (Class C)</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="text" value="Product B"></td>
                            <td><input type="number" value="50"></td>
                            <td><input type="number" value="20"></td>
                            <td>
                                <select>
                                    <option value="A">Top Tier (Class A)</option>
                                    <option value="B" selected>Mid Tier (Class B)</option>
                                    <option value="C">Low Tier (Class C)</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <p class="text-sm text-gray-500 mt-2" data-i18n="market_hint">Define profit margins and ad ratios to determine market positioning strategy.</p>
        </div>

        <!-- Intro -->
        <div class="intro-section">
            <h3 class="text-lg font-semibold mb-2 text-gray-800" data-i18n="intro_title">About This Tool</h3>
            <p data-i18n="intro_text">This tool manages multi-category e-commerce operation plans. It includes monthly product planning, quarterly target breakdowns, and market positioning modules, allowing teams to set targets and calculate budgets efficiently.</p>
        </div>
    </div>

    <script>
        const OpPlan = {
            i18n: {
                'en': {
                    title: 'üìÖ Operation Plan Division Tool',
                    tab_product: 'Product Plan',
                    tab_quarter: 'Quarter Target',
                    tab_market: 'Market Position',
                    th_category: 'Category',
                    th_product: 'Product',
                    th_m1_target: 'M1 Target (¬•)',
                    th_m1_ad: 'M1 Ad Budget (¬•)',
                    th_m2_target: 'M2 Target (¬•)',
                    th_m2_ad: 'M2 Ad Budget (¬•)',
                    th_action: 'Action',
                    btn_add_row: '+ Add Product',
                    sum_total_target: 'Total Sales Target',
                    sum_total_ad: 'Total Ad Budget',
                    sum_roi: 'Est. ROI',
                    th_month: 'Month',
                    th_sales_target: 'Sales Target',
                    th_new_count: 'New Products',
                    th_class_a: 'Class A (>1M)',
                    row_total: 'Total',
                    th_margin: 'Profit Margin (%)',
                    th_ad_ratio: 'Ad Cost Ratio (%)',
                    th_position: 'Positioning',
                    opt_top_tier: 'Top Tier (Class A)',
                    market_hint: 'Define profit margins and ad ratios to determine market positioning strategy.',
                    intro_title: 'About This Tool',
                    intro_text: 'This tool manages multi-category e-commerce operation plans. It includes monthly product planning, quarterly target breakdowns, and market positioning modules.'
                },
                'zh-CN': {
                    title: 'üìÖ ËøêËê•ËÆ°ÂàíÂàÜÂ∑•Â∑•ÂÖ∑',
                    tab_product: '‰∫ßÂìÅÊúàÂ∫¶ËßÑÂàí',
                    tab_quarter: 'Â≠£Â∫¶ÁõÆÊ†áÊãÜËß£',
                    tab_market: '‰∫ßÂìÅÂ∏ÇÂú∫ÂÆö‰Ωç',
                    th_category: 'Á±ªÁõÆ',
                    th_product: '‰∫ßÂìÅ',
                    th_m1_target: 'È¶ñÊúà‰∏öÁª©ÁõÆÊ†á (¬•)',
                    th_m1_ad: 'È¶ñÊúàÂπøÂëäÈ¢ÑÁÆó (¬•)',
                    th_m2_target: 'Ê¨°Êúà‰∏öÁª©ÁõÆÊ†á (¬•)',
                    th_m2_ad: 'Ê¨°ÊúàÂπøÂëäÈ¢ÑÁÆó (¬•)',
                    th_action: 'Êìç‰Ωú',
                    btn_add_row: '+ Ê∑ªÂä†‰∫ßÂìÅ',
                    sum_total_target: 'ÊÄª‰∏öÁª©ÁõÆÊ†á',
                    sum_total_ad: 'ÊÄªÂπøÂëäÈ¢ÑÁÆó',
                    sum_roi: 'È¢Ñ‰º∞Êäï‰∫ßÊØî ROI',
                    th_month: 'Êúà‰ªΩ',
                    th_sales_target: 'ÈîÄÂîÆÈ¢ùÁõÆÊ†á',
                    th_new_count: '‰∏äÊñ∞Êï∞Èáè',
                    th_class_a: 'AÁ±ªÈìæÊé•Êï∞ (>100w)',
                    row_total: 'Â≠£Â∫¶Ê±áÊÄª',
                    th_margin: 'Âà©Ê∂¶Áéá (%)',
                    th_ad_ratio: 'ÂπøÂëäË¥πÊØî (%)',
                    th_position: 'ÂÆö‰Ωç',
                    opt_top_tier: 'Â§¥ÈÉ® (AÁ±ªÂ∏ÇÂú∫)',
                    market_hint: 'ÂÆö‰πâÂà©Ê∂¶ÁéáÂíåÂπøÂëäÂç†ÊØî‰ª•Á°ÆÂÆöÂ∏ÇÂú∫ÂÆö‰ΩçÁ≠ñÁï•„ÄÇ',
                    intro_title: 'Â∑•ÂÖ∑‰ªãÁªç',
                    intro_text: 'Êú¨Â∑•ÂÖ∑Áî®‰∫éÁîµÂïÜÂ§öÁ±ªÁõÆ‰∫ßÂìÅÁöÑËøêËê•ËÆ°ÂàíÂàÜÂ∑•ÁÆ°ÁêÜ„ÄÇÂåÖÂê´‰∫ßÂìÅÊúàÂ∫¶ËßÑÂàí„ÄÅÂ≠£Â∫¶ÁõÆÊ†áÊãÜËß£„ÄÅ‰∫ßÂìÅÂ∏ÇÂú∫ÂÆö‰Ωç‰∏âÂ§ßÊ®°ÂùóÔºåÊîØÊåÅÁõÆÊ†áÁöÑÂΩïÂÖ•‰∏éËá™Âä®Ê±áÊÄª„ÄÇ'
                },
                'zh-TW': {
                    title: 'üìÖ ÈÅãÁáüË®àÂäÉÂàÜÂ∑•Â∑•ÂÖ∑',
                    tab_product: 'Áî¢ÂìÅÊúàÂ∫¶Ë¶èÂäÉ',
                    tab_quarter: 'Â≠£Â∫¶ÁõÆÊ®ôÊãÜËß£',
                    tab_market: 'Áî¢ÂìÅÂ∏ÇÂ†¥ÂÆö‰Ωç',
                    th_category: 'È°ûÁõÆ',
                    th_product: 'Áî¢ÂìÅ',
                    th_m1_target: 'È¶ñÊúàÊ•≠Á∏æÁõÆÊ®ô (¬•)',
                    th_m1_ad: 'È¶ñÊúàÂª£ÂëäÈ†êÁÆó (¬•)',
                    th_m2_target: 'Ê¨°ÊúàÊ•≠Á∏æÁõÆÊ®ô (¬•)',
                    th_m2_ad: 'Ê¨°ÊúàÂª£ÂëäÈ†êÁÆó (¬•)',
                    th_action: 'Êìç‰Ωú',
                    btn_add_row: '+ Ê∑ªÂä†Áî¢ÂìÅ',
                    sum_total_target: 'Á∏ΩÊ•≠Á∏æÁõÆÊ®ô',
                    sum_total_ad: 'Á∏ΩÂª£ÂëäÈ†êÁÆó',
                    sum_roi: 'È†ê‰º∞ÊäïÁî¢ÊØî ROI',
                    th_month: 'Êúà‰ªΩ',
                    th_sales_target: 'Èä∑ÂîÆÈ°çÁõÆÊ®ô',
                    th_new_count: '‰∏äÊñ∞Êï∏Èáè',
                    th_class_a: 'AÈ°ûÈèàÊé•Êï∏ (>100w)',
                    row_total: 'Â≠£Â∫¶ÂΩôÁ∏Ω',
                    th_margin: 'Âà©ÊΩ§Áéá (%)',
                    th_ad_ratio: 'Âª£ÂëäË≤ªÊØî (%)',
                    th_position: 'ÂÆö‰Ωç',
                    opt_top_tier: 'È†≠ÈÉ® (AÈ°ûÂ∏ÇÂ†¥)',
                    market_hint: 'ÂÆöÁæ©Âà©ÊΩ§ÁéáÂíåÂª£Âëä‰ΩîÊØî‰ª•Á¢∫ÂÆöÂ∏ÇÂ†¥ÂÆö‰ΩçÁ≠ñÁï•„ÄÇ',
                    intro_title: 'Â∑•ÂÖ∑‰ªãÁ¥π',
                    intro_text: 'Êú¨Â∑•ÂÖ∑Áî®ÊñºÈõªÂïÜÂ§öÈ°ûÁõÆÁî¢ÂìÅÁöÑÈÅãÁáüË®àÂäÉÂàÜÂ∑•ÁÆ°ÁêÜ„ÄÇÂåÖÂê´Áî¢ÂìÅÊúàÂ∫¶Ë¶èÂäÉ„ÄÅÂ≠£Â∫¶ÁõÆÊ®ôÊãÜËß£„ÄÅÁî¢ÂìÅÂ∏ÇÂ†¥ÂÆö‰Ωç‰∏âÂ§ßÊ®°ÁµÑÔºåÊîØÊåÅÁõÆÊ®ôÁöÑÈåÑÂÖ•ËàáËá™ÂãïÂΩôÁ∏Ω„ÄÇ'
                },
                'ja': {
                    title: 'üìÖ ÈÅãÂñ∂Ë®àÁîªÂàÜÊãÖ„ÉÑ„Éº„É´',
                    tab_product: 'Ë£ΩÂìÅÊúàÈñì„Éó„É©„É≥',
                    tab_quarter: 'ÂõõÂçäÊúüÁõÆÊ®ô',
                    tab_market: 'Â∏ÇÂ†¥„Éù„Ç∏„Ç∑„Éß„Éã„É≥„Ç∞',
                    th_category: '„Ç´„ÉÜ„Ç¥„É™',
                    th_product: 'Ë£ΩÂìÅ',
                    th_m1_target: '1„É∂ÊúàÁõÆÁõÆÊ®ô (¬•)',
                    th_m1_ad: '1„É∂ÊúàÁõÆÂ∫ÉÂëä‰∫àÁÆó (¬•)',
                    th_m2_target: '2„É∂ÊúàÁõÆÁõÆÊ®ô (¬•)',
                    th_m2_ad: '2„É∂ÊúàÁõÆÂ∫ÉÂëä‰∫àÁÆó (¬•)',
                    th_action: 'Êìç‰Ωú',
                    btn_add_row: '+ Ë£ΩÂìÅËøΩÂä†',
                    sum_total_target: 'Á∑èÂ£≤‰∏äÁõÆÊ®ô',
                    sum_total_ad: 'Á∑èÂ∫ÉÂëä‰∫àÁÆó',
                    sum_roi: 'Êé®ÂÆöROI',
                    th_month: 'Êúà',
                    th_sales_target: 'Â£≤‰∏äÁõÆÊ®ô',
                    th_new_count: 'Êñ∞Ë£ΩÂìÅÊï∞',
                    th_class_a: 'A„ÇØ„É©„ÇπÊï∞ (>100‰∏á)',
                    row_total: 'ÂêàË®à',
                    th_margin: 'Âà©ÁõäÁéá (%)',
                    th_ad_ratio: 'Â∫ÉÂëäË≤ªÁéá (%)',
                    th_position: '‰ΩçÁΩÆ‰ªò„Åë',
                    opt_top_tier: '„Éà„ÉÉ„Éó (A„ÇØ„É©„Çπ)',
                    market_hint: 'Âà©ÁõäÁéá„Å®Â∫ÉÂëäÊØîÁéá„ÇíÂÆöÁæ©„Åó„Å¶Â∏ÇÂ†¥Êà¶Áï•„ÇíÊ±∫ÂÆö„Åó„Åæ„Åô„ÄÇ',
                    intro_title: '„ÉÑ„Éº„É´Á¥π‰ªã',
                    intro_text: 'Â§ö„Ç´„ÉÜ„Ç¥„É™„ÅÆECÈÅãÂñ∂Ë®àÁîª„ÇíÁÆ°ÁêÜ„Åô„Çã„ÉÑ„Éº„É´„Åß„Åô„ÄÇÊúàÈñìË£ΩÂìÅË®àÁîª„ÄÅÂõõÂçäÊúüÁõÆÊ®ôÂàÜËß£„ÄÅÂ∏ÇÂ†¥„Éù„Ç∏„Ç∑„Éß„Éã„É≥„Ç∞„É¢„Ç∏„É•„Éº„É´„ÇíÂê´„Åø„ÄÅÁõÆÊ®ôË®≠ÂÆö„Å®‰∫àÁÆóË®àÁÆó„ÇíÂäπÁéáÂåñ„Åó„Åæ„Åô„ÄÇ'
                },
                'ru': {
                    title: 'üìÖ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π',
                    tab_product: '–ü–ª–∞–Ω –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º',
                    tab_quarter: '–ö–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏',
                    tab_market: '–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ',
                    th_category: '–ö–∞—Ç–µ–≥–æ—Ä–∏—è',
                    th_product: '–ü—Ä–æ–¥—É–∫—Ç',
                    th_m1_target: '–¶–µ–ª—å –ú–µ—Å 1 (¬•)',
                    th_m1_ad: '–ë—é–¥–∂–µ—Ç –ú–µ—Å 1 (¬•)',
                    th_m2_target: '–¶–µ–ª—å –ú–µ—Å 2 (¬•)',
                    th_m2_ad: '–ë—é–¥–∂–µ—Ç –ú–µ—Å 2 (¬•)',
                    th_action: '–î–µ–π—Å—Ç–≤–∏–µ',
                    btn_add_row: '+ –î–æ–±–∞–≤–∏—Ç—å',
                    sum_total_target: '–û–±—â–∞—è —Ü–µ–ª—å',
                    sum_total_ad: '–û–±—â–∏–π –±—é–¥–∂–µ—Ç',
                    sum_roi: 'ROI',
                    th_month: '–ú–µ—Å—è—Ü',
                    th_sales_target: '–ü–ª–∞–Ω –ø—Ä–æ–¥–∞–∂',
                    th_new_count: '–ù–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã',
                    th_class_a: '–ö–ª–∞—Å—Å A (>1M)',
                    row_total: '–ò—Ç–æ–≥–æ',
                    th_margin: '–ú–∞—Ä–∂–∞ (%)',
                    th_ad_ratio: '–î–æ–ª—è —Ä–µ–∫–ª–∞–º—ã (%)',
                    th_position: '–ü–æ–∑–∏—Ü–∏—è',
                    opt_top_tier: '–¢–æ–ø (–ö–ª–∞—Å—Å A)',
                    market_hint: '–û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–∞—Ä–∂—É –∏ —Ä–µ–∫–ª–∞–º–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏.',
                    intro_title: '–û –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ',
                    intro_text: '–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–Ω–∞–º–∏ E-commerce. –í–∫–ª—é—á–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∫–≤–∞—Ä—Ç–∞–ª—å–Ω—ã–µ —Ü–µ–ª–∏ –∏ —Ä—ã–Ω–æ—á–Ω–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ.'
                }
            },

            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang();
                    return;
                }
                this.addProductRow(); // Add default row
                this.addProductRow(); 
                this.calcQuarter();
            },

            switchTab: function(tabId) {
                document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
                document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
                
                document.getElementById(tabId).classList.add('active');
                event.target.classList.add('active');
            },

            changeLang: function() {
                const lang = document.getElementById('lang-selector').value;
                const newUrl = new URL(window.location);
                newUrl.searchParams.set('lang', lang);
                window.history.pushState({}, '', newUrl);
                const texts = this.i18n[lang];
                if (!texts) return;
                
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
            },

            addProductRow: function() {
                const tbody = document.querySelector('#table-product tbody');
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td><input type="text" value="Cat 1"></td>
                    <td><input type="text" value="Prod ${tbody.children.length + 1}"></td>
                    <td><input type="number" class="p-t1" value="0" oninput="OpPlan.calcProduct()"></td>
                    <td><input type="number" class="p-a1" value="0" oninput="OpPlan.calcProduct()"></td>
                    <td><input type="number" class="p-t2" value="0" oninput="OpPlan.calcProduct()"></td>
                    <td><input type="number" class="p-a2" value="0" oninput="OpPlan.calcProduct()"></td>
                    <td class="text-center"><span class="btn-del" onclick="this.closest('tr').remove(); OpPlan.calcProduct()">‚úï</span></td>
                `;
                tbody.appendChild(tr);
                this.calcProduct();
            },

            calcProduct: function() {
                let totalTarget = 0;
                let totalAd = 0;

                document.querySelectorAll('#table-product tbody tr').forEach(tr => {
                    const t1 = parseFloat(tr.querySelector('.p-t1').value) || 0;
                    const a1 = parseFloat(tr.querySelector('.p-a1').value) || 0;
                    const t2 = parseFloat(tr.querySelector('.p-t2').value) || 0;
                    const a2 = parseFloat(tr.querySelector('.p-a2').value) || 0;
                    
                    totalTarget += (t1 + t2);
                    totalAd += (a1 + a2);
                });

                document.getElementById('sum_prod_target').innerText = '¬•' + totalTarget;
                document.getElementById('sum_prod_ad').innerText = '¬•' + totalAd;
                
                const roi = totalAd > 0 ? (totalTarget / totalAd).toFixed(2) : 0;
                document.getElementById('sum_prod_roi').innerText = roi;
            },

            calcQuarter: function() {
                let totalSales = 0;
                let totalNew = 0;
                let totalA = 0;

                document.querySelectorAll('.q-sales').forEach(el => totalSales += parseFloat(el.value) || 0);
                document.querySelectorAll('.q-new').forEach(el => totalNew += parseFloat(el.value) || 0);
                document.querySelectorAll('.q-a').forEach(el => totalA += parseFloat(el.value) || 0);

                document.getElementById('q_total_sales').innerText = '¬•' + totalSales;
                document.getElementById('q_total_new').innerText = totalNew;
                document.getElementById('q_total_a').innerText = totalA;
            }
        };

        window.onload = function() { OpPlan.init(); };
    </script>

    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
    

    <div id="toolbox-seo-wrapper-unique-id" class="max-w-4xl mx-auto px-4"></div>
    <script src="/scripts/seo-loader.js"></script>

</body>
</html>