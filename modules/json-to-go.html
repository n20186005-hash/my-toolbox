<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="Development Tools">
    <meta name="icon" content="ğŸ”„">
    <title>JSON è½¬ Golang</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 900px; margin: 0 auto; position: relative; }
        .section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.9rem; color: #4b5563; margin-bottom: 4px; }
        textarea, select, input { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 1rem; }
        textarea { min-height: 200px; resize: vertical; font-family: monospace; }
        .result-card { background: #ecfdf5; border: 1px solid #d1fae5; border-radius: 8px; padding: 15px; margin-top: 15px; }
        .result-stats { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #a7f3d0; flex-wrap: wrap; gap: 10px;}
        .stat-label { color: #1e3a8a; font-size: 0.9rem;}
        .stat-value { font-weight: 600; color: #065f46; margin-left: 5px;}
        .intro-section { margin-top: 30px; padding: 20px; background-color: #f8fafc; border-radius: 8px; font-size: 0.95rem; color: #475569; }
        .options-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px; }
        button { background: #22c55e; color: white; border: none; padding: 10px 15px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background 0.3s; }
        button:hover { background: #16a34a; }
        .note { font-size: 0.85rem; color: #64748b; margin-top: 4px; }
        .golang-code { font-family: monospace; white-space: pre; overflow-x: auto; padding: 10px; background: #f8fafc; border-radius: 6px; }
    </style>
</head>
<body>

    <div class="tool-module" id="json-to-go-tool">
        <!-- Language Selector -->
        <div class="absolute top-4 right-4">
            <select id="lang-selector" onchange="JsonToGoTool.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN" selected>ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2" data-i18n="title">ğŸ”„ JSON è½¬ Golang</h2>

        <div class="space-y-6">
            <!-- Input Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="input_json">è¾“å…¥ JSON</h3>
                <div class="form-group">
                    <textarea id="input_json" placeholder='è¯·åœ¨æ­¤ç²˜è´´ JSON æ•°æ®ï¼ˆä¾‹å¦‚ï¼š{"name":"test","age":18}ï¼‰...' class="focus:ring-2 focus:ring-green-500 outline-none"></textarea>
                </div>
            </div>

            <!-- Options Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="options">è½¬æ¢é€‰é¡¹</h3>
                
                <div class="options-grid">
                    <div class="form-group">
                        <label data-i18n="struct_name">ç»“æ„ä½“åç§°</label>
                        <input type="text" id="struct_name" value="MyStruct" class="focus:ring-2 focus:ring-green-500 outline-none">
                    </div>
                    <div class="form-group">
                        <label data-i18n="json_tag">JSON æ ‡ç­¾</label>
                        <select id="json_tag" class="focus:ring-2 focus:ring-green-500 outline-none">
                            <option value="snake" data-i18n="snake_case">è›‡å½¢å‘½å (snake_case)</option>
                            <option value="camel" data-i18n="camel_case">é©¼å³°å‘½å (camelCase)</option>
                            <option value="preserve" data-i18n="preserve">ä¿æŒåŸæ ·</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="JsonToGoTool.convertJson()" class="flex-1 bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700 transition shadow-md" data-i18n="btn_convert">è½¬æ¢ä¸º Go ç»“æ„ä½“</button>
                <button onclick="JsonToGoTool.clearAll()" class="flex-1 bg-gray-200 text-gray-800 py-3 rounded font-bold hover:bg-gray-300 transition shadow-sm" data-i18n="btn_clear">æ¸…ç©ºæ‰€æœ‰</button>
            </div>

            <!-- Results -->
            <div class="summary-section mt-8">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="results">è½¬æ¢ç»“æœ</h3>
                
                <div class="result-stats">
                    <div>
                        <span class="stat-label" data-i18n="field_count">å­—æ®µæ•°é‡ï¼š</span>
                        <span class="stat-value" id="field_count">0</span>
                    </div>
                    <div>
                        <span class="stat-label" data-i18n="convert_time">è½¬æ¢è€—æ—¶ï¼š</span>
                        <span class="stat-value" id="convert_time">0ms</span>
                    </div>
                </div>
                <div class="form-group">
                    <label data-i18n="go_struct">Go ç»“æ„ä½“</label>
                    <div id="go_struct" class="golang-code text-gray-800">
                        <p data-i18n="no_result" class="text-gray-400 italic">è½¬æ¢åçš„ Go ç»“æ„ä½“å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...</p>
                    </div>
                </div>
                <button onclick="JsonToGoTool.copyResult()" class="w-full mt-2 bg-blue-600 text-white py-3 rounded font-medium hover:bg-blue-700 transition shadow-md" data-i18n="btn_copy">å¤åˆ¶ç»“æœ</button>
            </div>

            <!-- Conversion History -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="recent_conversions">æœ€è¿‘è½¬æ¢</h3>
                <div id="conversion_history" class="p-4 bg-gray-50 rounded border border-gray-100 min-h-[60px]">
                    <p data-i18n="no_history" class="text-gray-400 italic text-sm">æš‚æ— è½¬æ¢è®°å½•</p>
                </div>
            </div>

            <!-- Intro -->
            <div class="intro-section">
                <h3 class="text-lg font-semibold mb-2 text-gray-800" data-i18n="intro_title">å…³äºæœ¬å·¥å…·</h3>
                <p data-i18n="intro_text">æœ¬å·¥å…·å¯ä»¥å°† JSON æ•°æ®å¿«é€Ÿè½¬æ¢ä¸º Go ç»“æ„ä½“ï¼Œè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„å­—æ®µå’Œ JSON æ ‡ç­¾ã€‚æ”¯æŒè‡ªå®šä¹‰ç»“æ„ä½“åç§°å’Œå‘½åé£æ ¼ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ Go é¡¹ç›®ä¸­å¿«é€Ÿå¤„ç† JSON æ•°æ®ï¼Œå‡å°‘æ‰‹åŠ¨ç¼–å†™ç»“æ„ä½“çš„å·¥ä½œé‡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        const JsonToGoTool = {
            i18n: {
                'en': {
                    title: 'ğŸ”„ JSON to Golang',
                    input_json: 'Input JSON',
                    options: 'Conversion Options',
                    struct_name: 'Struct Name',
                    json_tag: 'JSON Tag',
                    snake_case: 'snake_case',
                    camel_case: 'camelCase',
                    preserve: 'Preserve Original',
                    btn_convert: 'Convert to Go Struct',
                    btn_clear: 'Clear All',
                    results: 'Conversion Results',
                    field_count: 'Field Count:',
                    convert_time: 'Conversion Time:',
                    go_struct: 'Go Struct',
                    btn_copy: 'Copy Result',
                    intro_title: 'About This Tool',
                    intro_text: 'This tool can quickly convert JSON data to Go structs, automatically generating corresponding fields and JSON tags. It supports custom struct names and naming styles, helping developers quickly handle JSON data in Go projects, reducing the workload of manually writing structs and improving development efficiency.',
                    recent_conversions: 'Recent Conversions',
                    no_history: 'No conversion history yet',
                    please_enter_json: 'Please enter valid JSON data first',
                    invalid_json: 'Invalid JSON format',
                    copied: 'Copied!',
                    no_result: 'Converted Go struct will appear here...'
                },
                'zh-CN': {
                    title: 'ğŸ”„ JSON è½¬ Golang',
                    input_json: 'è¾“å…¥ JSON',
                    options: 'è½¬æ¢é€‰é¡¹',
                    struct_name: 'ç»“æ„ä½“åç§°',
                    json_tag: 'JSON æ ‡ç­¾',
                    snake_case: 'è›‡å½¢å‘½å (snake_case)',
                    camel_case: 'é©¼å³°å‘½å (camelCase)',
                    preserve: 'ä¿æŒåŸæ ·',
                    btn_convert: 'è½¬æ¢ä¸º Go ç»“æ„ä½“',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'è½¬æ¢ç»“æœ',
                    field_count: 'å­—æ®µæ•°é‡ï¼š',
                    convert_time: 'è½¬æ¢è€—æ—¶ï¼š',
                    go_struct: 'Go ç»“æ„ä½“',
                    btn_copy: 'å¤åˆ¶ç»“æœ',
                    intro_title: 'å…³äºæœ¬å·¥å…·',
                    intro_text: 'æœ¬å·¥å…·å¯ä»¥å°† JSON æ•°æ®å¿«é€Ÿè½¬æ¢ä¸º Go ç»“æ„ä½“ï¼Œè‡ªåŠ¨ç”Ÿæˆç›¸åº”çš„å­—æ®µå’Œ JSON æ ‡ç­¾ã€‚æ”¯æŒè‡ªå®šä¹‰ç»“æ„ä½“åç§°å’Œå‘½åé£æ ¼ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ Go é¡¹ç›®ä¸­å¿«é€Ÿå¤„ç† JSON æ•°æ®ï¼Œå‡å°‘æ‰‹åŠ¨ç¼–å†™ç»“æ„ä½“çš„å·¥ä½œé‡ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚',
                    recent_conversions: 'æœ€è¿‘è½¬æ¢',
                    no_history: 'æš‚æ— è½¬æ¢è®°å½•',
                    please_enter_json: 'è¯·å…ˆè¾“å…¥æœ‰æ•ˆçš„ JSON æ•°æ®',
                    invalid_json: 'æ— æ•ˆçš„ JSON æ ¼å¼',
                    copied: 'å·²å¤åˆ¶ï¼',
                    no_result: 'è½¬æ¢åçš„ Go ç»“æ„ä½“å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ...'
                },
                'zh-TW': {
                    title: 'ğŸ”„ JSON è½‰ Golang',
                    input_json: 'è¼¸å…¥ JSON',
                    options: 'è½‰æ›é¸é …',
                    struct_name: 'çµæ§‹é«”åç¨±',
                    json_tag: 'JSON æ¨™ç±¤',
                    snake_case: 'è›‡å½¢å‘½å (snake_case)',
                    camel_case: 'é§å³°å‘½å (camelCase)',
                    preserve: 'ä¿æŒåŸæ¨£',
                    btn_convert: 'è½‰æ›ç‚º Go çµæ§‹é«”',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'è½‰æ›çµæœ',
                    field_count: 'æ¬„ä½æ•¸é‡ï¼š',
                    convert_time: 'è½‰æ›è€—æ™‚ï¼š',
                    go_struct: 'Go çµæ§‹é«”',
                    btn_copy: 'è¤‡è£½çµæœ',
                    intro_title: 'é—œæ–¼æœ¬å·¥å…·',
                    intro_text: 'æœ¬å·¥å…·å¯ä»¥å°‡ JSON æ•¸æ“šå¿«é€Ÿè½‰æ›ç‚º Go çµæ§‹é«”ï¼Œè‡ªå‹•ç”Ÿæˆç›¸æ‡‰çš„æ¬„ä½å’Œ JSON æ¨™ç±¤ã€‚æ”¯æŒè‡ªå®šç¾©çµæ§‹é«”åç¨±å’Œå‘½åé¢¨æ ¼ï¼Œå¹«åŠ©é–‹ç™¼è€…åœ¨ Go é …ç›®ä¸­è€ƒæ…®è™•ç† JSON æ•¸æ“šï¼Œæ¸›å°‘æ‰‹å‹•ç·¨å¯«çµæ§‹é«”çš„å·¥ä½œé‡ï¼Œæé«˜é–‹ç™¼æ•ˆç‡ã€‚',
                    recent_conversions: 'æœ€è¿‘è½‰æ›',
                    no_history: 'æš«ç„¡è½‰æ›è¨˜éŒ„',
                    please_enter_json: 'è«‹å…ˆè¼¸å…¥æœ‰æ•ˆçš„ JSON æ•¸æ“š',
                    invalid_json: 'ç„¡æ•ˆçš„ JSON æ ¼å¼',
                    copied: 'å·²è¤‡è£½ï¼',
                    no_result: 'è½‰æ›å¾Œçš„ Go çµæ§‹é«”å°‡é¡¯ç¤ºåœ¨é€™è£¡...'
                },
                'ja': {
                    title: 'ğŸ”„ JSON ã‹ã‚‰ Golang ã¸',
                    input_json: 'JSONã‚’å…¥åŠ›',
                    options: 'å¤‰æ›ã‚ªãƒ—ã‚·ãƒ§ãƒ³',
                    struct_name: 'æ§‹é€ ä½“å',
                    json_tag: 'JSONã‚¿ã‚°',
                    snake_case: 'ã‚¹ãƒãƒ¼ã‚¯ã‚±ãƒ¼ã‚¹ (snake_case)',
                    camel_case: 'ã‚­ãƒ£ãƒ¡ãƒ«ã‚±ãƒ¼ã‚¹ (camelCase)',
                    preserve: 'å…ƒã®ã¾ã¾',
                    btn_convert: 'Goæ§‹é€ ä½“ã«å¤‰æ›',
                    btn_clear: 'ã™ã¹ã¦ã‚¯ãƒªã‚¢',
                    results: 'å¤‰æ›çµæœ',
                    field_count: 'ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰æ•°ï¼š',
                    convert_time: 'å¤‰æ›æ™‚é–“ï¼š',
                    go_struct: 'Goæ§‹é€ ä½“',
                    btn_copy: 'çµæœã‚’ã‚³ãƒ”ãƒ¼',
                    intro_title: 'ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦',
                    intro_text: 'ã“ã®ãƒ„ãƒ¼ãƒ«ã¯JSONãƒ‡ãƒ¼ã‚¿ã‚’ã™ã°ã‚„ãGoæ§‹é€ ä½“ã«å¤‰æ›ã—ã€å¯¾å¿œã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨JSONã‚¿ã‚°ã‚’è‡ªå‹•ç”Ÿæˆã§ãã¾ã™ã€‚æ§‹é€ ä½“åã¨å‘½åã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã€Goãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§JSONãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹é–‹ç™ºè€…ã®ä½œæ¥­è² è·ã‚’è»½æ¸›ã—ã€é–‹ç™ºåŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚',
                    recent_conversions: 'æœ€è¿‘ã®å¤‰æ›',
                    no_history: 'å¤‰æ›å±¥æ­´ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“',
                    please_enter_json: 'æœ‰åŠ¹ãªJSONãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                    invalid_json: 'ç„¡åŠ¹ãªJSONå½¢å¼',
                    copied: 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼',
                    no_result: 'å¤‰æ›å¾Œã®Goæ§‹é€ ä½“ã¯ã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...'
                },
                'ru': {
                    title: 'ğŸ”„ JSON Ğ² Golang',
                    input_json: 'Ğ’Ñ…Ğ¾Ğ´Ğ½Ğ¾Ğ¹ JSON',
                    options: 'ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    struct_name: 'Ğ˜Ğ¼Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹',
                    json_tag: 'JSON-Ñ‚ĞµĞ³',
                    snake_case: 'Ğ—Ğ¼ĞµĞ¸Ğ½Ğ¾Ğµ Ğ¾Ğ±Ğ¾Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ (snake_case)',
                    camel_case: 'Ğ’ĞµÑ€Ğ±Ğ»ÑĞ¶ÑŒĞµ Ğ¾Ğ±Ğ¾Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ (camelCase)',
                    preserve: 'Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»',
                    btn_convert: 'ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Go',
                    btn_clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ',
                    results: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    field_count: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ¾Ğ»ĞµĞ¹:',
                    convert_time: 'Ğ’Ñ€ĞµĞ¼Ñ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:',
                    go_struct: 'Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Go',
                    btn_copy: 'Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚',
                    intro_title: 'Ğ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğµ',
                    intro_text: 'Ğ­Ñ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ JSON Ğ² ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ Go, Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑ ÑĞ¾Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ¸ JSON-Ñ‚ĞµĞ³Ğ¸. ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğµ Ğ¸Ğ¼ĞµĞ½Ğ° ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€ Ğ¸ ÑÑ‚Ğ¸Ğ»Ğ¸ Ğ¸Ğ¼ĞµĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ, Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ°Ğ¼ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ JSON Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°Ñ… Go, ÑĞ¾ĞºÑ€Ğ°Ñ‰Ğ°Ñ Ğ¾Ğ±ÑŠĞµĞ¼ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¿Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€ Ğ¸ Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞ°Ñ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸.',
                    recent_conversions: 'ĞĞµĞ´Ğ°Ğ²Ğ½Ğ¸Ğµ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    no_history: 'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚',
                    please_enter_json: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ JSON',
                    invalid_json: 'ĞĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ JSON',
                    copied: 'Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!',
                    no_result: 'ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Go Ğ±ÑƒĞ´ĞµÑ‚ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°Ñ‚ÑŒÑÑ Ğ·Ğ´ĞµÑÑŒ...'
                }
            },

            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang(false); // åˆå§‹åŒ–è°ƒç”¨ï¼Œä¸å†æ¬¡æ›´æ–°URL
                } else {
                    // é»˜è®¤ä½¿ç”¨ç®€ä½“ä¸­æ–‡
                    this.changeLang(false); 
                }

                // å°è¯•ä»æœ¬åœ°å­˜å‚¨åŠ è½½è½¬æ¢å†å²
                this.loadConversionHistory();
            },

            changeLang: function(updateUrl = true) {
                const lang = document.getElementById('lang-selector').value;
                const i18nData = this.i18n[lang];
                
                // æ›´æ–°HTMLå…ƒç´ 
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (i18nData[key]) {
                        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                            el.placeholder = i18nData[key];
                        } else {
                            el.textContent = i18nData[key];
                        }
                    }
                });

                // æ›´æ–°URLå‚æ•°
                if (updateUrl) {
                    const url = new URL(window.location);
                    url.searchParams.set('lang', lang);
                    window.history.pushState({}, '', url);
                }
                
                // ç‰¹åˆ«æ›´æ–°é¡µé¢æ ‡é¢˜
                document.title = i18nData['title'];
            },

            getI18nText: function(key) {
                const lang = document.getElementById('lang-selector').value;
                return this.i18n[lang] && this.i18n[lang][key] ? this.i18n[lang][key] : this.i18n['zh-CN'][key];
            },

            // å·¥å…·å‡½æ•°ï¼šé©¼å³°å‘½åè½¬è›‡å½¢å‘½å
            camelToSnake: function(str) {
                return str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);
            },

            // å·¥å…·å‡½æ•°ï¼šè›‡å½¢å‘½åè½¬é©¼å³°å‘½å
            snakeToCamel: function(str) {
                return str.replace(/_([a-z])/g, (match, letter) => letter.toUpperCase());
            },

            // å·¥å…·å‡½æ•°ï¼šè·å–Goç±»å‹
            getGoType: function(value) {
                if (typeof value === 'string') return 'string';
                if (typeof value === 'number') {
                    return Number.isInteger(value) ? 'int' : 'float64';
                }
                if (typeof value === 'boolean') return 'bool';
                if (value === null) return 'interface{}';
                if (Array.isArray(value)) {
                    if (value.length === 0) return '[]interface{}';
                    const elementType = this.getGoType(value[0]);
                    return `[]${elementType}`;
                }
                if (typeof value === 'object') return 'struct';
                return 'interface{}';
            },

            // è½¬æ¢JSONä¸ºGoç»“æ„ä½“
            convertJson: function() {
                const jsonInput = document.getElementById('input_json').value.trim();
                if (!jsonInput) {
                    alert(this.getI18nText('please_enter_json'));
                    return;
                }

                try {
                    // è§£æJSON
                    const jsonData = JSON.parse(jsonInput);
                    const startTime = performance.now();
                    
                    // è·å–è½¬æ¢é€‰é¡¹
                    const structName = document.getElementById('struct_name').value || 'MyStruct';
                    const tagStyle = document.getElementById('json_tag').value;
                    
                    // è½¬æ¢ä¸ºGoç»“æ„ä½“
                    const result = this.generateGoStruct(structName, jsonData, tagStyle);
                    const fieldCount = this.countFields(jsonData);
                    
                    const endTime = performance.now();
                    const duration = Math.round(endTime - startTime);
                    
                    // æ›´æ–°ç»“æœ
                    document.getElementById('go_struct').innerHTML = `<pre>${result}</pre>`;
                    document.getElementById('field_count').textContent = fieldCount;
                    document.getElementById('convert_time').textContent = `${duration}ms`;
                    
                    // ä¿å­˜åˆ°å†å²è®°å½•
                    this.saveToHistory(jsonInput, result, structName);
                    
                } catch (e) {
                    alert(this.getI18nText('invalid_json') + ': ' + e.message);
                    return;
                }
            },

            // ç”ŸæˆGoç»“æ„ä½“ä»£ç 
            generateGoStruct: function(structName, data, tagStyle) {
                if (typeof data !== 'object' || data === null || Array.isArray(data)) {
                    return `type ${structName} ${this.getGoType(data)}`;
                }
                
                let structCode = `type ${structName} struct {\n`;
                
                // å¤„ç†æ¯ä¸ªå­—æ®µ
                for (const [key, value] of Object.entries(data)) {
                    // è½¬æ¢å­—æ®µåï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
                    let fieldName = key.charAt(0).toUpperCase() + key.slice(1);
                    // å¤„ç†ç‰¹æ®Šå­—ç¬¦å’Œå…³é”®å­—
                    if (['type', 'struct', 'interface', 'map', 'slice', 'func'].includes(fieldName.toLowerCase())) {
                        fieldName += '_';
                    }
                    
                    // ç¡®å®šJSONæ ‡ç­¾
                    let jsonTag = key;
                    if (tagStyle === 'snake') {
                        jsonTag = this.camelToSnake(key);
                    } else if (tagStyle === 'camel') {
                        // å¦‚æœæ˜¯è›‡å½¢å‘½åï¼Œè½¬æ¢ä¸ºé©¼å³°
                        if (key.includes('_')) {
                            jsonTag = this.snakeToCamel(key);
                        }
                    }
                    
                    // ç¡®å®šå­—æ®µç±»å‹
                    let fieldType = this.getGoType(value);
                    
                    // å¦‚æœæ˜¯åµŒå¥—å¯¹è±¡ï¼Œé€’å½’ç”Ÿæˆç»“æ„ä½“
                    if (fieldType === 'struct') {
                        // ç”ŸæˆåµŒå¥—ç»“æ„ä½“åç§°
                        const nestedStructName = fieldName;
                        // é€’å½’ç”ŸæˆåµŒå¥—ç»“æ„ä½“
                        const nestedStruct = this.generateGoStruct(nestedStructName, value, tagStyle);
                        // æ·»åŠ åµŒå¥—ç»“æ„ä½“ä»£ç 
                        structCode += `\t${fieldName} ${nestedStructName} \`json:"${jsonTag}"\`\n`;
                        
                        // åœ¨ä¸»ç»“æ„ä½“åé¢æ·»åŠ åµŒå¥—ç»“æ„ä½“å®šä¹‰
                        structCode += `}\n\n${nestedStruct}\n\n`;
                    } else if (fieldType.startsWith('[]') && this.getGoType(value[0]) === 'struct') {
                        // å¤„ç†ç»“æ„ä½“æ•°ç»„
                        const nestedStructName = fieldName.replace(/s$/, '') || fieldName;
                        const nestedStruct = this.generateGoStruct(nestedStructName, value[0], tagStyle);
                        structCode += `\t${fieldName} []${nestedStructName} \`json:"${jsonTag}"\`\n`;
                        structCode += `}\n\n${nestedStruct}\n\n`;
                    } else {
                        // æ™®é€šå­—æ®µ
                        structCode += `\t${fieldName} ${fieldType} \`json:"${jsonTag}"\`\n`;
                    }
                }
                
                // ç¡®ä¿ç»“æ„ä½“æ­£ç¡®é—­åˆ
                if (!structCode.endsWith('}\n')) {
                    structCode += '}';
                }
                
                return structCode;
            },

            // è®¡ç®—å­—æ®µæ•°é‡
            countFields: function(data, count = 0) {
                if (typeof data !== 'object' || data === null) return count;
                
                if (Array.isArray(data)) {
                    if (data.length === 0) return count;
                    return this.countFields(data[0], count);
                }
                
                count += Object.keys(data).length;
                
                // é€’å½’è®¡ç®—åµŒå¥—å¯¹è±¡çš„å­—æ®µ
                for (const value of Object.values(data)) {
                    if (typeof value === 'object' && value !== null && !Array.isArray(value)) {
                        count = this.countFields(value, count);
                    } else if (Array.isArray(value) && value.length > 0 && typeof value[0] === 'object' && value[0] !== null) {
                        count = this.countFields(value[0], count);
                    }
                }
                
                return count;
            },

            clearAll: function() {
                document.getElementById('input_json').value = '';
                document.getElementById('go_struct').innerHTML = `<p data-i18n="no_result" class="text-gray-400 italic">${this.getI18nText('no_result')}</p>`;
                document.getElementById('field_count').textContent = '0';
                document.getElementById('convert_time').textContent = '0ms';
            },

            copyResult: function() {
                const resultElement = document.querySelector('#go_struct pre');
                if (resultElement) {
                    const textArea = document.createElement('textarea');
                    textArea.value = resultElement.textContent;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    alert(this.getI18nText('copied'));
                }
            },

            saveToHistory: function(original, converted, structName) {
                let history = JSON.parse(localStorage.getItem('jsonToGoHistory') || '[]');
                
                // é™åˆ¶å†å²è®°å½•æ•°é‡
                if (history.length >= 10) {
                    history.pop();
                }
                
                // æ·»åŠ æ–°è®°å½•åˆ°å¼€å¤´
                history.unshift({
                    id: Date.now(),
                    structName: structName,
                    preview: original.substring(0, 50) + (original.length > 50 ? '...' : ''),
                    converted: converted,
                    timestamp: new Date().toLocaleString()
                });
                
                localStorage.setItem('jsonToGoHistory', JSON.stringify(history));
                this.loadConversionHistory();
            },

            loadConversionHistory: function() {
                const historyContainer = document.getElementById('conversion_history');
                const history = JSON.parse(localStorage.getItem('jsonToGoHistory') || '[]');
                
                if (history.length === 0) {
                    historyContainer.innerHTML = `<p data-i18n="no_history" class="text-gray-400 italic text-sm">${this.getI18nText('no_history')}</p>`;
                    return;
                }
                
                let html = '';
                history.forEach(item => {
                    html += `
                        <div class="mb-3 p-2 border border-gray-200 rounded bg-white">
                            <div class="text-sm font-medium text-gray-800">${item.structName}</div>
                            <div class="text-xs text-gray-600 mb-1">${item.preview}</div>
                            <div class="text-xs text-gray-500 mb-1">${item.timestamp}</div>
                            <button onclick="JsonToGoTool.loadHistoryItem(${item.id})" class="text-xs text-blue-600">${this.getI18nText('load')}</button>
                        </div>
                    `;
                });
                
                historyContainer.innerHTML = html;
            },

            loadHistoryItem: function(id) {
                const history = JSON.parse(localStorage.getItem('jsonToGoHistory') || '[]');
                const item = history.find(h => h.id === id);
                if (item) {
                    document.getElementById('struct_name').value = item.structName;
                    document.getElementById('input_json').value = item.preview.replace('...', '');
                    document.getElementById('go_struct').innerHTML = `<pre>${item.converted}</pre>`;
                }
            }
        };

        // åˆå§‹åŒ–å·¥å…·
        document.addEventListener('DOMContentLoaded', function() {
            JsonToGoTool.init();
        });
    </script>
</body>
</html>