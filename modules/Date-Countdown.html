<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Date Countdown Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fffbe6; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .count-box { @apply flex flex-col items-center bg-yellow-50 p-2 rounded border border-yellow-100 min-w-[70px]; }
        .count-val { @apply text-2xl font-bold text-yellow-700 font-mono; }
        .count-lbl { @apply text-xs text-gray-500 uppercase tracking-wide; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="countdown_calc" 
         data-category="time" 
         data-title="Date Countdown" 
         data-icon="⏳">
        
        <div class="absolute top-4 right-4">
            <select id="cd-lang" onchange="Countdown.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">簡體中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⏳ Date Countdown</h2>
        
        <div class="mb-6">
            <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="lbl_target">Target Date & Time</label>
            <input type="datetime-local" id="cd-target" class="w-full p-2 border rounded focus:ring-2 focus:ring-yellow-500 outline-none text-gray-700" onchange="Countdown.start()">
        </div>

        <div id="cd-display" class="flex justify-between gap-2 mb-2">
            <div class="count-box">
                <span class="count-val" id="val-d">0</span>
                <span class="count-lbl" data-i18n="lbl_days">Days</span>
            </div>
            <div class="count-box">
                <span class="count-val" id="val-h">00</span>
                <span class="count-lbl" data-i18n="lbl_hours">Hrs</span>
            </div>
            <div class="count-box">
                <span class="count-val" id="val-m">00</span>
                <span class="count-lbl" data-i18n="lbl_mins">Mins</span>
            </div>
            <div class="count-box">
                <span class="count-val" id="val-s">00</span>
                <span class="count-lbl" data-i18n="lbl_secs">Secs</span>
            </div>
        </div>
        
        <div id="cd-msg" class="text-center text-sm font-bold text-red-500 h-6"></div>
    </div>

    <script>
        const Countdown = {
            timer: null,
            i18n: {
                'en': {
                    title: '⏳ Date Countdown',
                    lbl_target: 'Target Date & Time',
                    lbl_days: 'Days', lbl_hours: 'Hrs', lbl_mins: 'Mins', lbl_secs: 'Secs',
                    msg_past: 'The date has passed!'
                },
                'zh-CN': {
                    title: '⏳ 倒计时计算器',
                    lbl_target: '目标日期时间',
                    lbl_days: '天', lbl_hours: '时', lbl_mins: '分', lbl_secs: '秒',
                    msg_past: '日期已过去！'
                },
                'zh-TW': {
                    title: '⏳ 倒數計時器',
                    lbl_target: '目標日期時間',
                    lbl_days: '天', lbl_hours: '時', lbl_mins: '分', lbl_secs: '秒',
                    msg_past: '日期已過去！'
                },
                'ja': {
                    title: '⏳ カウントダウン',
                    lbl_target: '目標日時',
                    lbl_days: '日', lbl_hours: '時', lbl_mins: '分', lbl_secs: '秒',
                    msg_past: '期日が過ぎました！'
                },
                'ru': {
                    title: '⏳ Обратный отсчет',
                    lbl_target: 'Целевая дата',
                    lbl_days: 'Дней', lbl_hours: 'Час', lbl_mins: 'Мин', lbl_secs: 'Сек',
                    msg_past: 'Дата прошла!'
                },
                'es': {
                    title: '⏳ Cuenta Regresiva',
                    lbl_target: 'Fecha Objetivo',
                    lbl_days: 'Días', lbl_hours: 'Hs', lbl_mins: 'Min', lbl_secs: 'Seg',
                    msg_past: '¡La fecha ya pasó!'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('cd-lang').value;
                const texts = Countdown.i18n[lang];
                const elements = document.querySelectorAll('[data-id="countdown_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
                Countdown.update();
            },

            start: () => {
                if (Countdown.timer) clearInterval(Countdown.timer);
                Countdown.update();
                Countdown.timer = setInterval(Countdown.update, 1000);
            },

            update: () => {
                const input = document.getElementById('cd-target').value;
                if (!input) return;

                const target = new Date(input).getTime();
                const now = new Date().getTime();
                const diff = target - now;
                
                const lang = document.getElementById('cd-lang').value;
                const msgEl = document.getElementById('cd-msg');

                if (diff < 0) {
                    msgEl.innerText = Countdown.i18n[lang].msg_past;
                    document.getElementById('val-d').innerText = "0";
                    document.getElementById('val-h').innerText = "00";
                    document.getElementById('val-m').innerText = "00";
                    document.getElementById('val-s').innerText = "00";
                    return;
                }

                msgEl.innerText = "";

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                const pad = (n) => String(n).padStart(2, '0');

                document.getElementById('val-d').innerText = days;
                document.getElementById('val-h').innerText = pad(hours);
                document.getElementById('val-m').innerText = pad(minutes);
                document.getElementById('val-s').innerText = pad(seconds);
            }
        };

        // Set default target to tomorrow
        const tmr = new Date();
        tmr.setDate(tmr.getDate() + 1);
        tmr.setMinutes(tmr.getMinutes() - tmr.getTimezoneOffset()); // local ISO fix
        document.getElementById('cd-target').value = tmr.toISOString().slice(0,16);
        Countdown.start();
    </script>
</body>
</html>