<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weight Converter Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fff1f2; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="weight_conv" 
         data-category="tools" 
         data-title="Weight Converter" 
         data-icon="⚖️">
        
        <div class="absolute top-4 right-4">
            <select id="wc-lang" onchange="WeightConv.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">簡體中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⚖️ Weight Converter</h2>

        <div class="grid grid-cols-2 gap-4 mb-4">
            <!-- Input Side -->
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_from">From</label>
                <input type="number" id="wc-val-from" class="w-full p-2 border rounded mb-2 focus:ring-1 focus:ring-red-500" value="1" oninput="WeightConv.convert('from')">
                <select id="wc-unit-from" class="w-full p-2 border rounded bg-white text-sm" onchange="WeightConv.convert('from')">
                    <!-- Options populated by JS -->
                </select>
            </div>

            <!-- Output Side -->
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_to">To</label>
                <input type="number" id="wc-val-to" class="w-full p-2 border rounded mb-2 focus:ring-1 focus:ring-red-500 bg-gray-50" oninput="WeightConv.convert('to')">
                <select id="wc-unit-to" class="w-full p-2 border rounded bg-white text-sm" onchange="WeightConv.convert('from')">
                    <!-- Options populated by JS -->
                </select>
            </div>
        </div>
        
        <div class="text-xs text-gray-400 text-center" data-i18n="note">Supports Metric, Imperial, and US units.</div>
    </div>

    <script>
        const WeightConv = {
            i18n: {
                'en': {
                    title: '⚖️ Weight Converter',
                    lbl_from: 'From', lbl_to: 'To',
                    note: 'Supports Metric, Imperial, and US units.',
                    u_kg: 'Kilogram (kg)', u_g: 'Gram (g)', u_mg: 'Milligram (mg)', u_t: 'Metric Ton (t)',
                    u_lb: 'Pound (lb)', u_oz: 'Ounce (oz)', u_st: 'Stone (st)',
                    u_lt: 'Long Ton (UK)', u_st_us: 'Short Ton (US)'
                },
                'zh-CN': {
                    title: '⚖️ 重量换算器',
                    lbl_from: '从', lbl_to: '到',
                    note: '支持公制、英制和美制单位。',
                    u_kg: '千克 (kg)', u_g: '克 (g)', u_mg: '毫克 (mg)', u_t: '公吨 (t)',
                    u_lb: '磅 (lb)', u_oz: '盎司 (oz)', u_st: '英石 (st)',
                    u_lt: '长吨 (英制)', u_st_us: '短吨 (美制)'
                },
                'zh-TW': {
                    title: '⚖️ 重量換算器',
                    lbl_from: '從', lbl_to: '到',
                    note: '支持公制、英制和美制單位。',
                    u_kg: '公斤 (kg)', u_g: '公克 (g)', u_mg: '毫克 (mg)', u_t: '公噸 (t)',
                    u_lb: '磅 (lb)', u_oz: '盎司 (oz)', u_st: '英石 (st)',
                    u_lt: '長噸 (英制)', u_st_us: '短噸 (美制)'
                },
                'ja': {
                    title: '⚖️ 重量換算',
                    lbl_from: '変換元', lbl_to: '変換先',
                    note: 'メートル法、ヤード・ポンド法に対応。',
                    u_kg: 'キログラム (kg)', u_g: 'グラム (g)', u_mg: 'ミリグラム (mg)', u_t: 'トン (t)',
                    u_lb: 'ポンド (lb)', u_oz: 'オンス (oz)', u_st: 'ストーン (st)',
                    u_lt: '英トン (Long)', u_st_us: '米トン (Short)'
                },
                'ru': {
                    title: '⚖️ Конвертер веса',
                    lbl_from: 'Из', lbl_to: 'В',
                    note: 'Метрические, имперские и американские единицы.',
                    u_kg: 'Килограмм (кг)', u_g: 'Грамм (г)', u_mg: 'Миллиграмм (мг)', u_t: 'Тонна (т)',
                    u_lb: 'Фунт (lb)', u_oz: 'Унция (oz)', u_st: 'Стоун (st)',
                    u_lt: 'Длинная тонна (UK)', u_st_us: 'Короткая тонна (US)'
                },
                'es': {
                    title: '⚖️ Conversor de Peso',
                    lbl_from: 'De', lbl_to: 'A',
                    note: 'Unidades métricas, imperiales y de EE.UU.',
                    u_kg: 'Kilogramo (kg)', u_g: 'Gramo (g)', u_mg: 'Miligramo (mg)', u_t: 'Tonelada (t)',
                    u_lb: 'Libra (lb)', u_oz: 'Onza (oz)', u_st: 'Piedra (st)',
                    u_lt: 'Tonelada Larga (UK)', u_st_us: 'Tonelada Corta (US)'
                }
            },

            // Factor relative to 1 Kilogram
            units: [
                { k: 'kg', f: 1, i: 'u_kg' },
                { k: 'g', f: 0.001, i: 'u_g' },
                { k: 'mg', f: 0.000001, i: 'u_mg' },
                { k: 't', f: 1000, i: 'u_t' },
                { k: 'lb', f: 0.453592, i: 'u_lb' },
                { k: 'oz', f: 0.0283495, i: 'u_oz' },
                { k: 'st', f: 6.35029, i: 'u_st' },
                { k: 'lt', f: 1016.05, i: 'u_lt' },
                { k: 'st_us', f: 907.185, i: 'u_st_us' }
            ],

            init: () => {
                WeightConv.populate('wc-unit-from');
                WeightConv.populate('wc-unit-to');
                document.getElementById('wc-unit-from').value = 'kg';
                document.getElementById('wc-unit-to').value = 'lb';
            },

            populate: (id) => {
                const sel = document.getElementById(id);
                const current = sel.value;
                const lang = document.getElementById('wc-lang').value;
                const txt = WeightConv.i18n[lang];
                
                sel.innerHTML = '';
                WeightConv.units.forEach(u => {
                    const opt = document.createElement('option');
                    opt.value = u.k;
                    opt.text = txt[u.i];
                    sel.appendChild(opt);
                });
                if(current) sel.value = current;
            },

            changeLang: () => {
                const lang = document.getElementById('wc-lang').value;
                const texts = WeightConv.i18n[lang];
                
                document.querySelector('[data-i18n="title"]').innerText = texts.title;
                document.querySelector('[data-i18n="lbl_from"]').innerText = texts.lbl_from;
                document.querySelector('[data-i18n="lbl_to"]').innerText = texts.lbl_to;
                document.querySelector('[data-i18n="note"]').innerText = texts.note;

                WeightConv.populate('wc-unit-from');
                WeightConv.populate('wc-unit-to');
            },

            convert: (dir) => {
                const fromUnit = document.getElementById('wc-unit-from').value;
                const toUnit = document.getElementById('wc-unit-to').value;
                const u1 = WeightConv.units.find(u => u.k === fromUnit).f;
                const u2 = WeightConv.units.find(u => u.k === toUnit).f;

                const format = (n) => {
                    if (Math.abs(n) < 1e-6 && n !== 0) return n.toExponential(4);
                    return parseFloat(n.toPrecision(7));
                };

                if (dir === 'from') {
                    const val = parseFloat(document.getElementById('wc-val-from').value);
                    if (isNaN(val)) { document.getElementById('wc-val-to').value = ''; return; }
                    const res = (val * u1) / u2;
                    document.getElementById('wc-val-to').value = format(res);
                } else {
                    const val = parseFloat(document.getElementById('wc-val-to').value);
                    if (isNaN(val)) { document.getElementById('wc-val-from').value = ''; return; }
                    const res = (val * u2) / u1;
                    document.getElementById('wc-val-from').value = format(res);
                }
            }
        };
        
        WeightConv.init();
    </script>
</body>
</html>