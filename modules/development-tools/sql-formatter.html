<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="Development Tools">
    <meta name="icon" content="ğŸ”§">
    <title>SQL æ ¼å¼åŒ–å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 900px; margin: 0 auto; position: relative; }
        .section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.9rem; color: #4b5563; margin-bottom: 4px; }
        textarea, select { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 1rem; }
        textarea { min-height: 150px; resize: vertical; font-family: monospace; }
        .result-card { background: #ecfdf5; border: 1px solid #d1fae5; border-radius: 8px; padding: 15px; margin-top: 15px; }
        .result-stats { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #a7f3d0; flex-wrap: wrap; gap: 10px;}
        .stat-label { color: #1e3a8a; font-size: 0.9rem;}
        .stat-value { font-weight: 600; color: #065f46; margin-left: 5px;}
        .intro-section { margin-top: 30px; padding: 20px; background-color: #f8fafc; border-radius: 8px; font-size: 0.95rem; color: #475569; }
        .options-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px; }
        button { background: #22c55e; color: white; border: none; padding: 10px 15px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background 0.3s; }
        button:hover { background: #16a34a; }
        .format-tag { display: inline-block; background-color: #dbeafe; padding: 4px 8px; border-radius: 4px; color: #1e40af; font-weight: bold; font-size: 0.85rem; margin: 2px; border: 1px solid #bfdbfe; }
        .note { font-size: 0.85rem; color: #64748b; margin-top: 4px; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/development-tools/sql-formatter.html" />
</head>
<body>

    <div class="tool-module" id="sql-formatter-tool">
        <!-- Language Selector -->
        <div class="absolute top-4 right-4">
            <select id="lang-selector" onchange="SqlFormatter.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN" selected>ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2" data-i18n="title">ğŸ”§ SQL æ ¼å¼åŒ–å·¥å…·</h2>

        <div class="space-y-6">
            <!-- Input Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="input_sql">è¾“å…¥ SQL ä»£ç </h3>
                <div class="form-group">
                    <textarea id="input_sql" placeholder="è¯·åœ¨æ­¤ç²˜è´´éœ€è¦æ ¼å¼åŒ–çš„ SQL ä»£ç ..." class="focus:ring-2 focus:ring-green-500 outline-none"></textarea>
                </div>
            </div>

            <!-- Options Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="format_options">æ ¼å¼åŒ–é€‰é¡¹</h3>
                
                <div class="options-grid">
                    <div class="form-group">
                        <label data-i18n="indentation">ç¼©è¿›æ–¹å¼</label>
                        <select id="indentation" class="focus:ring-2 focus:ring-green-500 outline-none">
                            <option value="spaces4" data-i18n="spaces4">4ä¸ªç©ºæ ¼</option>
                            <option value="spaces2" data-i18n="spaces2">2ä¸ªç©ºæ ¼</option>
                            <option value="tab" data-i18n="tab">Tabé”®</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="uppercase">å…³é”®å­—å¤§å°å†™</label>
                        <select id="uppercase" class="focus:ring-2 focus:ring-green-500 outline-none">
                            <option value="uppercase" data-i18n="uppercase">å¤§å†™</option>
                            <option value="lowercase" data-i18n="lowercase">å°å†™</option>
                            <option value="preserve" data-i18n="preserve">ä¿æŒåŸæ ·</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="SqlFormatter.formatSql()" class="flex-1 bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700 transition shadow-md" data-i18n="btn_format">æ ¼å¼åŒ– SQL</button>
                <button onclick="SqlFormatter.clearAll()" class="flex-1 bg-gray-200 text-gray-800 py-3 rounded font-bold hover:bg-gray-300 transition shadow-sm" data-i18n="btn_clear">æ¸…ç©ºæ‰€æœ‰</button>
            </div>

            <!-- Results -->
            <div class="summary-section mt-8">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="results">æ ¼å¼åŒ–ç»“æœ</h3>
                
                <div class="result-stats">
                    <div>
                        <span class="stat-label" data-i18n="char_count">å­—ç¬¦æ•°ï¼š</span>
                        <span class="stat-value" id="char_count">0</span>
                    </div>
                    <div>
                        <span class="stat-label" data-i18n="format_time">æ ¼å¼åŒ–è€—æ—¶ï¼š</span>
                        <span class="stat-value" id="format_time">0ms</span>
                    </div>
                </div>
                <div class="form-group">
                    <label data-i18n="formatted_sql">æ ¼å¼åŒ–åçš„ SQL</label>
                    <textarea id="formatted_sql" readonly class="focus:ring-2 focus:ring-green-500 outline-none bg-gray-50 text-gray-700" placeholder="æ ¼å¼åŒ–åçš„ SQL å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
                </div>
                <button onclick="SqlFormatter.copyResult()" class="w-full mt-2 bg-blue-600 text-white py-3 rounded font-medium hover:bg-blue-700 transition shadow-md" data-i18n="btn_copy">å¤åˆ¶ç»“æœ</button>
            </div>

            <!-- Format History -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="recent_formats">æœ€è¿‘æ ¼å¼åŒ–</h3>
                <div id="format_history" class="p-4 bg-gray-50 rounded border border-gray-100 min-h-[60px]">
                    <p data-i18n="no_history" class="text-gray-400 italic text-sm">æš‚æ— æ ¼å¼åŒ–è®°å½•</p>
                </div>
            </div>

            <!-- Intro -->
            <div class="intro-section">
                <h3 class="text-lg font-semibold mb-2 text-gray-800" data-i18n="intro_title">å…³äºæœ¬å·¥å…·</h3>
                <p data-i18n="intro_text">æœ¬å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿæ ¼å¼åŒ– SQL ä»£ç ï¼Œä½¿å…¶ç»“æ„æ¸…æ™°ã€æ˜“äºé˜…è¯»å’Œç»´æŠ¤ã€‚æ”¯æŒè‡ªå®šä¹‰ç¼©è¿›æ–¹å¼å’Œå…³é”®å­—å¤§å°å†™ï¼Œé€‚ç”¨äºå„ç§ SQL æ–¹è¨€ã€‚æ— è®ºæ˜¯å¼€å‘è°ƒè¯•è¿˜æ˜¯æ–‡æ¡£ç¼–å†™ï¼Œéƒ½èƒ½æé«˜æ‚¨çš„å·¥ä½œæ•ˆç‡ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        const SqlFormatter = {
            i18n: {
                'en': {
                    title: 'ğŸ”§ SQL Formatter',
                    input_sql: 'Input SQL Code',
                    format_options: 'Format Options',
                    indentation: 'Indentation',
                    spaces4: '4 Spaces',
                    spaces2: '2 Spaces',
                    tab: 'Tab',
                    uppercase: 'Keyword Case',
                    preserve: 'Preserve',
                    btn_format: 'Format SQL',
                    btn_clear: 'Clear All',
                    results: 'Format Results',
                    char_count: 'Character Count:',
                    format_time: 'Format Time:',
                    formatted_sql: 'Formatted SQL',
                    btn_copy: 'Copy Result',
                    intro_title: 'About This Tool',
                    intro_text: 'This tool helps you quickly format SQL code to make it clear, readable and maintainable. It supports custom indentation and keyword case, working with various SQL dialects. Whether for development debugging or documentation, it can improve your work efficiency.',
                    recent_formats: 'Recent Formats',
                    no_history: 'No formatting history yet',
                    please_enter_sql: 'Please enter some SQL code first',
                    copied: 'Copied!'
                },
                'zh-CN': {
                    title: 'ğŸ”§ SQL æ ¼å¼åŒ–å·¥å…·',
                    input_sql: 'è¾“å…¥ SQL ä»£ç ',
                    format_options: 'æ ¼å¼åŒ–é€‰é¡¹',
                    indentation: 'ç¼©è¿›æ–¹å¼',
                    spaces4: '4ä¸ªç©ºæ ¼',
                    spaces2: '2ä¸ªç©ºæ ¼',
                    tab: 'Tabé”®',
                    uppercase: 'å…³é”®å­—å¤§å°å†™',
                    preserve: 'ä¿æŒåŸæ ·',
                    btn_format: 'æ ¼å¼åŒ– SQL',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'æ ¼å¼åŒ–ç»“æœ',
                    char_count: 'å­—ç¬¦æ•°ï¼š',
                    format_time: 'æ ¼å¼åŒ–è€—æ—¶ï¼š',
                    formatted_sql: 'æ ¼å¼åŒ–åçš„ SQL',
                    btn_copy: 'å¤åˆ¶ç»“æœ',
                    intro_title: 'å…³äºæœ¬å·¥å…·',
                    intro_text: 'æœ¬å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿæ ¼å¼åŒ– SQL ä»£ç ï¼Œä½¿å…¶ç»“æ„æ¸…æ™°ã€æ˜“äºé˜…è¯»å’Œç»´æŠ¤ã€‚æ”¯æŒè‡ªå®šä¹‰ç¼©è¿›æ–¹å¼å’Œå…³é”®å­—å¤§å°å†™ï¼Œé€‚ç”¨äºå„ç§ SQL æ–¹è¨€ã€‚æ— è®ºæ˜¯å¼€å‘è°ƒè¯•è¿˜æ˜¯æ–‡æ¡£ç¼–å†™ï¼Œéƒ½èƒ½æé«˜æ‚¨çš„å·¥ä½œæ•ˆç‡ã€‚',
                    recent_formats: 'æœ€è¿‘æ ¼å¼åŒ–',
                    no_history: 'æš‚æ— æ ¼å¼åŒ–è®°å½•',
                    please_enter_sql: 'è¯·å…ˆè¾“å…¥ä¸€äº› SQL ä»£ç ',
                    copied: 'å·²å¤åˆ¶ï¼'
                },
                'zh-TW': {
                    title: 'ğŸ”§ SQL æ ¼å¼åŒ–å·¥å…·',
                    input_sql: 'è¼¸å…¥ SQL ä»£ç¢¼',
                    format_options: 'æ ¼å¼åŒ–é¸é …',
                    indentation: 'ç¸®é€²æ–¹å¼',
                    spaces4: '4å€‹ç©ºæ ¼',
                    spaces2: '2å€‹ç©ºæ ¼',
                    tab: 'Tabéµ',
                    uppercase: 'é—œéµå­—å¤§å°å¯«',
                    preserve: 'ä¿æŒåŸæ¨£',
                    btn_format: 'æ ¼å¼åŒ– SQL',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'æ ¼å¼åŒ–çµæœ',
                    char_count: 'å­—ç¬¦æ•¸ï¼š',
                    format_time: 'æ ¼å¼åŒ–è€—æ™‚ï¼š',
                    formatted_sql: 'æ ¼å¼åŒ–å¾Œçš„ SQL',
                    btn_copy: 'è¤‡è£½çµæœ',
                    intro_title: 'é—œæ–¼æœ¬å·¥å…·',
                    intro_text: 'æœ¬å·¥å…·å¯ä»¥å¹«åŠ©æ‚¨å¿«é€Ÿæ ¼å¼åŒ– SQL ä»£ç¢¼ï¼Œä½¿å…¶çµæ§‹æ¸…æ™°ã€æ˜“æ–¼é–±è®€å’Œç¶­è­·ã€‚æ”¯æŒè‡ªå®šç¾©ç¸®é€²æ–¹å¼å’Œé—œéµå­—å¤§å°å¯«ï¼Œé©ç”¨æ–¼å„ç¨® SQL æ–¹è¨€ã€‚ç„¡è«–æ˜¯é–‹ç™¼èª¿è©¦é‚„æ˜¯æ–‡æª”ç·¨å¯«ï¼Œéƒ½èƒ½æé«˜æ‚¨çš„å·¥ä½œæ•ˆç‡ã€‚',
                    recent_formats: 'æœ€è¿‘æ ¼å¼åŒ–',
                    no_history: 'æš«ç„¡æ ¼å¼åŒ–è¨˜éŒ„',
                    please_enter_sql: 'è«‹å…ˆè¼¸å…¥ä¸€äº› SQL ä»£ç¢¼',
                    copied: 'å·²è¤‡è£½ï¼'
                },
                'ja': {
                    title: 'ğŸ”§ SQL ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼',
                    input_sql: 'SQLã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›',
                    format_options: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³',
                    indentation: 'ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆæ–¹å¼',
                    spaces4: '4ã‚¹ãƒšãƒ¼ã‚¹',
                    spaces2: '2ã‚¹ãƒšãƒ¼ã‚¹',
                    tab: 'ã‚¿ãƒ–',
                    uppercase: 'ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å¤§æ–‡å­—å°æ–‡å­—',
                    preserve: 'å…ƒã®ã¾ã¾',
                    btn_format: 'SQLã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ',
                    btn_clear: 'ã™ã¹ã¦ã‚¯ãƒªã‚¢',
                    results: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµæœ',
                    char_count: 'æ–‡å­—æ•°ï¼š',
                    format_time: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ™‚é–“ï¼š',
                    formatted_sql: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¾Œã®SQL',
                    btn_copy: 'çµæœã‚’ã‚³ãƒ”ãƒ¼',
                    intro_title: 'ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦',
                    intro_text: 'ã“ã®ãƒ„ãƒ¼ãƒ«ã¯SQLã‚³ãƒ¼ãƒ‰ã‚’ã™ã°ã‚„ããƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã€æ§‹é€ ã‚’æ˜ç¢ºã«ã—ã¦å¯èª­æ€§ã¨ä¿å®ˆæ€§ã‚’é«˜ã‚ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆæ–¹å¼ã¨ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®å¤§æ–‡å­—å°æ–‡å­—ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã€ã•ã¾ã–ã¾ãªSQLæ–¹è¨€ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚é–‹ç™ºãƒ‡ãƒãƒƒã‚°ã‚„ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã«å½¹ç«‹ã¡ã€ä½œæ¥­åŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚',
                    recent_formats: 'æœ€è¿‘ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ',
                    no_history: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå±¥æ­´ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“',
                    please_enter_sql: 'ã¾ãšSQLã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                    copied: 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'
                },
                'ru': {
                    title: 'ğŸ”§ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‚ĞµÑ€ SQL',
                    input_sql: 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ´ SQL',
                    format_options: 'ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    indentation: 'ĞÑ‚ÑÑ‚ÑƒĞ¿Ñ‹',
                    spaces4: '4 Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ğ°',
                    spaces2: '2 Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ğ°',
                    tab: 'Ğ¢Ğ°Ğ±ÑƒĞ»ÑÑ†Ğ¸Ñ',
                    uppercase: 'Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€ ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ²',
                    preserve: 'Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ ĞºĞ°Ğº ĞµÑÑ‚ÑŒ',
                    btn_format: 'Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ SQL',
                    btn_clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ',
                    results: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    char_count: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²:',
                    format_time: 'Ğ’Ñ€ĞµĞ¼Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:',
                    formatted_sql: 'ĞÑ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ SQL',
                    btn_copy: 'Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚',
                    intro_title: 'Ğ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğµ',
                    intro_text: 'Ğ­Ñ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ´ SQL, Ğ´ĞµĞ»Ğ°Ñ ĞµĞ³Ğ¾ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼, Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğ¼ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ğ¼. ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºÑƒ Ğ¾Ñ‚ÑÑ‚ÑƒĞ¿Ğ¾Ğ² Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ° ĞºĞ»ÑÑ‡ĞµĞ²Ñ‹Ñ… ÑĞ»Ğ¾Ğ², Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ñ Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ¸Ğ°Ğ»ĞµĞºÑ‚Ğ°Ğ¼Ğ¸ SQL. Ğ£Ğ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ°Ğº Ğ¿Ñ€Ğ¸ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ¸ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞµ, Ñ‚Ğ°Ğº Ğ¸ Ğ¿Ñ€Ğ¸ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸.',
                    recent_formats: 'ĞĞµĞ´Ğ°Ğ²Ğ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    no_history: 'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚',
                    please_enter_sql: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ´ SQL',
                    copied: 'Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!'
                }
            },

            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang(false); // åˆå§‹åŒ–è°ƒç”¨ï¼Œä¸å†æ¬¡æ›´æ–°URL
                } else {
                    // é»˜è®¤ä½¿ç”¨ç®€ä½“ä¸­æ–‡
                    this.changeLang(false); 
                }

                // å°è¯•ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ ¼å¼åŒ–å†å²
                this.loadFormatHistory();
            },

            changeLang: function(updateUrl = true) {
                const lang = document.getElementById('lang-selector').value;
                const i18nData = this.i18n[lang];
                
                // æ›´æ–°HTMLå…ƒç´ 
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (i18nData[key]) {
                        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                            el.placeholder = i18nData[key];
                        } else {
                            el.textContent = i18nData[key];
                        }
                    }
                });

                // æ›´æ–°URLå‚æ•°
                if (updateUrl) {
                    const url = new URL(window.location);
                    url.searchParams.set('lang', lang);
                    window.history.pushState({}, '', url);
                }
                
                // ç‰¹åˆ«æ›´æ–°é¡µé¢æ ‡é¢˜
                document.title = i18nData['title'];
            },

            getI18nText: function(key) {
                const lang = document.getElementById('lang-selector').value;
                return this.i18n[lang] && this.i18n[lang][key] ? this.i18n[lang][key] : this.i18n['zh-CN'][key];
            },

            formatSql: function() {
                const input = document.getElementById('input_sql').value.trim();
                if (!input) {
                    alert(this.getI18nText('please_enter_sql'));
                    return;
                }

                const startTime = performance.now();
                
                // è·å–æ ¼å¼åŒ–é€‰é¡¹
                const indentType = document.getElementById('indentation').value;
                const caseOption = document.getElementById('uppercase').value;
                
                // ç®€å•çš„SQLæ ¼å¼åŒ–å®ç°ï¼ˆå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦æ›´å¤æ‚çš„é€»è¾‘ï¼‰
                let indent = indentType === 'spaces4' ? '    ' : 
                             indentType === 'spaces2' ? '  ' : '\t';
                
                // å…³é”®å­—åˆ—è¡¨
                const keywords = ['SELECT', 'FROM', 'WHERE', 'AND', 'OR', 'JOIN', 'ON', 'GROUP', 'BY', 'HAVING', 'ORDER', 'LIMIT', 'INSERT', 'INTO', 'VALUES', 'UPDATE', 'SET', 'DELETE', 'CREATE', 'TABLE', 'ALTER', 'DROP', 'AS', 'DISTINCT', 'COUNT', 'SUM', 'AVG', 'MAX', 'MIN', 'IN', 'LIKE', 'BETWEEN', 'IS', 'NOT', 'NULL', 'TRUE', 'FALSE'];
                
                // æ ¼å¼åŒ–å¤„ç†
                let formatted = input;
                
                // å¤„ç†å…³é”®å­—å¤§å°å†™
                if (caseOption === 'uppercase') {
                    keywords.forEach(keyword => {
                        const regex = new RegExp(`\\b${keyword.toLowerCase()}\\b`, 'gi');
                        formatted = formatted.replace(regex, keyword);
                    });
                } else if (caseOption === 'lowercase') {
                    keywords.forEach(keyword => {
                        const regex = new RegExp(`\\b${keyword}\\b`, 'gi');
                        formatted = formatted.replace(regex, keyword.toLowerCase());
                    });
                }
                
                // å¤„ç†ç¼©è¿›å’Œæ¢è¡Œ
                formatted = formatted
                    .replace(/\s+/g, ' ')
                    .replace(/SELECT /i, '\nSELECT ')
                    .replace(/FROM /i, '\nFROM ')
                    .replace(/WHERE /i, '\nWHERE ')
                    .replace(/JOIN /i, '\nJOIN ')
                    .replace(/GROUP BY /i, '\nGROUP BY ')
                    .replace(/HAVING /i, '\nHAVING ')
                    .replace(/ORDER BY /i, '\nORDER BY ')
                    .replace(/AND /gi, '\n' + indent + 'AND ')
                    .replace(/OR /gi, '\n' + indent + 'OR ')
                    .trim();
                
                const endTime = performance.now();
                const duration = Math.round(endTime - startTime);
                
                // æ›´æ–°ç»“æœ
                document.getElementById('formatted_sql').value = formatted;
                document.getElementById('char_count').textContent = formatted.length;
                document.getElementById('format_time').textContent = `${duration}ms`;
                
                // ä¿å­˜åˆ°å†å²è®°å½•
                this.saveToHistory(input, formatted);
            },

            clearAll: function() {
                document.getElementById('input_sql').value = '';
                document.getElementById('formatted_sql').value = '';
                document.getElementById('char_count').textContent = '0';
                document.getElementById('format_time').textContent = '0ms';
            },

            copyResult: function() {
                const result = document.getElementById('formatted_sql');
                if (result.value) {
                    result.select();
                    document.execCommand('copy');
                    alert(this.getI18nText('copied'));
                }
            },

            saveToHistory: function(original, formatted) {
                let history = JSON.parse(localStorage.getItem('sqlFormatHistory') || '[]');
                
                // é™åˆ¶å†å²è®°å½•æ•°é‡
                if (history.length >= 10) {
                    history.pop();
                }
                
                // æ·»åŠ æ–°è®°å½•åˆ°å¼€å¤´
                history.unshift({
                    id: Date.now(),
                    original: original.substring(0, 50) + (original.length > 50 ? '...' : ''),
                    formatted: formatted,
                    timestamp: new Date().toLocaleString()
                });
                
                localStorage.setItem('sqlFormatHistory', JSON.stringify(history));
                this.loadFormatHistory();
            },

            loadFormatHistory: function() {
                const historyContainer = document.getElementById('format_history');
                const history = JSON.parse(localStorage.getItem('sqlFormatHistory') || '[]');
                
                if (history.length === 0) {
                    historyContainer.innerHTML = `<p data-i18n="no_history" class="text-gray-400 italic text-sm">${this.getI18nText('no_history')}</p>`;
                    return;
                }
                
                let html = '';
                history.forEach(item => {
                    html += `
                        <div class="mb-3 p-2 border border-gray-200 rounded bg-white">
                            <div class="text-xs text-gray-500 mb-1">${item.timestamp}</div>
                            <div class="text-sm text-gray-700 truncate">${item.original}</div>
                            <button onclick="SqlFormatter.loadHistoryItem(${item.id})" class="text-xs text-blue-600 mt-1">${this.getI18nText('load')}</button>
                        </div>
                    `;
                });
                
                historyContainer.innerHTML = html;
            },

            loadHistoryItem: function(id) {
                const history = JSON.parse(localStorage.getItem('sqlFormatHistory') || '[]');
                const item = history.find(h => h.id === id);
                if (item) {
                    document.getElementById('formatted_sql').value = item.formatted;
                    document.getElementById('char_count').textContent = item.formatted.length;
                }
            }
        };

        // åˆå§‹åŒ–å·¥å…·
        document.addEventListener('DOMContentLoaded', function() {
            SqlFormatter.init();
        });
    </script>

    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
    

    <div id="toolbox-seo-wrapper-unique-id" class="max-w-4xl mx-auto px-4"></div>
    <script src="/scripts/seo-loader.js"></script>

</body>

</html>
