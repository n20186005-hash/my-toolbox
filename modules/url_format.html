<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="Development Tools">
    <meta name="icon" content="ğŸ”—">
    <title>URLæ ¼å¼åŒ–å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 900px; margin: 0 auto; position: relative; }
        .section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.9rem; color: #4b5563; margin-bottom: 4px; }
        input, textarea, select { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 1rem; }
        textarea { min-height: 150px; resize: vertical; }
        .result-card { background: #ecfdf5; border: 1px solid #d1fae5; border-radius: 8px; padding: 15px; margin-top: 15px; }
        .result-stats { display: flex; justify-content: space-between; margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px dashed #a7f3d0; flex-wrap: wrap; gap: 10px;}
        .stat-label { color: #1e3a8a; font-size: 0.9rem;}
        .stat-value { font-weight: 600; color: #065f46; margin-left: 5px;}
        .intro-section { margin-top: 30px; padding: 20px; background-color: #f8fafc; border-radius: 8px; font-size: 0.95rem; color: #475569; }
        .options-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px; }
        button { background: #22c55e; color: white; border: none; padding: 10px 15px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background 0.3s; }
        button:hover { background: #16a34a; }
        .param-table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        .param-table th, .param-table td { border: 1px solid #e2e8f0; padding: 8px 12px; text-align: left; }
        .param-table th { background-color: #f8fafc; font-weight: 600; }
        .param-table tr:nth-child(even) { background-color: #f8fafc; }
        .language-note { font-size: 0.85rem; color: #64748b; margin-top: 4px; }
    </style>
</head>
<body>

    <div class="tool-module" id="url-formatter-tool">
        <!-- Language Selector -->
        <div class="absolute top-4 right-4">
            <select id="lang-selector" onchange="UrlTool.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN" selected>ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2" data-i18n="title">ğŸ”— URLæ ¼å¼åŒ–å·¥å…·</h2>

        <div class="space-y-6">
            <!-- Input Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="input_url">è¾“å…¥URL</h3>
                <div class="form-group">
                    <input type="text" id="input_url" placeholder="è¯·è¾“å…¥URLï¼ˆå¦‚https://example.com/path?name=value&id=123ï¼‰" class="focus:ring-2 focus:ring-green-500 outline-none">
                    <p class="language-note" data-i18n="url_note">æ”¯æŒåŒ…å«æŸ¥è¯¢å‚æ•°çš„å®Œæ•´URL</p>
                </div>
            </div>

            <!-- Options Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="options">æ ¼å¼åŒ–é€‰é¡¹</h3>
                
                <div class="options-grid">
                    <div class="form-group">
                        <label data-i18n="param_sort">å‚æ•°æ’åº</label>
                        <select id="param_sort" class="focus:ring-2 focus:ring-green-500 outline-none">
                            <option value="none" data-i18n="no_sort">ä¸æ’åº</option>
                            <option value="asc" data-i18n="ascending">æŒ‰å­—æ¯å‡åº</option>
                            <option value="desc" data-i18n="descending">æŒ‰å­—æ¯é™åº</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label data-i18n="encoding">ç¼–ç æ–¹å¼</label>
                        <select id="encoding" class="focus:ring-2 focus:ring-green-500 outline-none">
                            <option value="encode" data-i18n="url_encode">URLç¼–ç </option>
                            <option value="decode" data-i18n="url_decode">URLè§£ç </option>
                            <option value="both" data-i18n="smart" selected>æ™ºèƒ½å¤„ç†</option>
                        </select>
                        <p class="language-note" data-i18n="encoding_note">å¤„ç†URLä¸­çš„ç‰¹æ®Šå­—ç¬¦</p>
                    </div>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="UrlTool.formatUrl()" class="flex-1 bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700 transition shadow-md" data-i18n="btn_format">æ ¼å¼åŒ–URL</button>
                <button onclick="UrlTool.clearAll()" class="flex-1 bg-gray-200 text-gray-800 py-3 rounded font-bold hover:bg-gray-300 transition shadow-sm" data-i18n="btn_clear">æ¸…ç©ºæ‰€æœ‰</button>
            </div>

            <!-- Results -->
            <div class="summary-section mt-8">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="results">æ ¼å¼åŒ–ç»“æœ</h3>
                
                <div class="result-stats">
                    <div>
                        <span class="stat-label" data-i18n="param_count">å‚æ•°æ•°é‡ï¼š</span>
                        <span class="stat-value" id="param_count">0</span>
                    </div>
                    <div>
                        <span class="stat-label" data-i18n="process_time">å¤„ç†è€—æ—¶ï¼š</span>
                        <span class="stat-value" id="process_time">0ms</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label data-i18n="formatted_url">æ ¼å¼åŒ–URL</label>
                    <textarea id="formatted_url" readonly class="focus:ring-2 focus:ring-green-500 outline-none bg-gray-50 text-gray-700" placeholder="æ ¼å¼åŒ–åçš„URLå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ..."></textarea>
                </div>
                
                <h4 class="text-md font-medium mt-6 mb-3 text-gray-700" data-i18n="param_list">å‚æ•°åˆ—è¡¨</h4>
                <div id="param_table_container" class="overflow-x-auto">
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th data-i18n="param_name">å‚æ•°å</th>
                                <th data-i18n="param_value">å‚æ•°å€¼</th>
                            </tr>
                        </thead>
                        <tbody id="param_table_body">
                            <tr>
                                <td colspan="2" class="text-center text-gray-400" data-i18n="no_params">æ— å‚æ•°</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <button onclick="UrlTool.copyResult()" class="w-full mt-4 bg-blue-600 text-white py-3 rounded font-medium hover:bg-blue-700 transition shadow-md" data-i18n="btn_copy">å¤åˆ¶æ ¼å¼åŒ–URL</button>
            </div>

            <!-- History -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="recent_history">æœ€è¿‘å¤„ç†</h3>
                <div id="url_history" class="p-4 bg-gray-50 rounded border border-gray-100 min-h-[60px]">
                    <p data-i18n="no_history" class="text-gray-400 italic text-sm">æš‚æ— å¤„ç†è®°å½•</p>
                </div>
            </div>

            <!-- Intro -->
            <div class="intro-section">
                <h3 class="text-lg font-semibold mb-2 text-gray-800" data-i18n="intro_title">å…³äºæœ¬å·¥å…·</h3>
                <p data-i18n="intro_text">æœ¬å·¥å…·æä¾›URLæ ¼å¼åŒ–å’Œå‚æ•°å¤„ç†åŠŸèƒ½ï¼Œå¯å¯¹URLè¿›è¡Œè§„èŒƒåŒ–ã€å‚æ•°æ’åºå’Œç¼–ç è½¬æ¢ã€‚èƒ½å°†å†—é•¿æ··ä¹±çš„URLè½¬æ¢ä¸ºæ¸…æ™°æ˜“è¯»çš„æ ¼å¼ï¼Œæ”¯æŒURLç¼–ç ä¸è§£ç ï¼Œä»¥åŠæŸ¥è¯¢å‚æ•°çš„æ’åºæ•´ç†ã€‚é€‚ç”¨äºå¼€å‘è€…è°ƒè¯•APIã€SEOä¼˜åŒ–äººå‘˜åˆ†æé“¾æ¥ç»“æ„å’Œéœ€è¦å¤„ç†URLçš„ç”¨æˆ·ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        const UrlTool = {
            i18n: {
                'en': {
                    title: 'ğŸ”— URL Formatter',
                    input_url: 'Input URL',
                    url_note: 'Supports full URLs with query parameters',
                    options: 'Format Options',
                    param_sort: 'Parameter Sorting',
                    no_sort: 'No sorting',
                    ascending: 'Alphabetical ascending',
                    descending: 'Alphabetical descending',
                    encoding: 'Encoding Method',
                    url_encode: 'URL encode',
                    url_decode: 'URL decode',
                    smart: 'Smart processing',
                    encoding_note: 'Handle special characters in URL',
                    btn_format: 'Format URL',
                    btn_clear: 'Clear All',
                    results: 'Formatting Results',
                    param_count: 'Parameter Count:',
                    process_time: 'Processing Time:',
                    formatted_url: 'Formatted URL',
                    param_list: 'Parameter List',
                    param_name: 'Parameter Name',
                    param_value: 'Parameter Value',
                    no_params: 'No parameters',
                    btn_copy: 'Copy Formatted URL',
                    intro_title: 'About This Tool',
                    intro_text: 'This tool provides URL formatting and parameter processing functions, including URL normalization, parameter sorting, and encoding conversion. It can convert long and messy URLs into clear and readable formats, supports URL encoding and decoding, and sorts query parameters. Suitable for developers debugging APIs, SEO optimizers analyzing link structures, and users needing to process URLs.',
                    recent_history: 'Recent Processings',
                    no_history: 'No processing history yet',
                    please_enter_url: 'Please enter a URL first',
                    invalid_url: 'Invalid URL format',
                    copied: 'Copied!'
                },
                'zh-CN': {
                    title: 'ğŸ”— URLæ ¼å¼åŒ–å·¥å…·',
                    input_url: 'è¾“å…¥URL',
                    url_note: 'æ”¯æŒåŒ…å«æŸ¥è¯¢å‚æ•°çš„å®Œæ•´URL',
                    options: 'æ ¼å¼åŒ–é€‰é¡¹',
                    param_sort: 'å‚æ•°æ’åº',
                    no_sort: 'ä¸æ’åº',
                    ascending: 'æŒ‰å­—æ¯å‡åº',
                    descending: 'æŒ‰å­—æ¯é™åº',
                    encoding: 'ç¼–ç æ–¹å¼',
                    url_encode: 'URLç¼–ç ',
                    url_decode: 'URLè§£ç ',
                    smart: 'æ™ºèƒ½å¤„ç†',
                    encoding_note: 'å¤„ç†URLä¸­çš„ç‰¹æ®Šå­—ç¬¦',
                    btn_format: 'æ ¼å¼åŒ–URL',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'æ ¼å¼åŒ–ç»“æœ',
                    param_count: 'å‚æ•°æ•°é‡ï¼š',
                    process_time: 'å¤„ç†è€—æ—¶ï¼š',
                    formatted_url: 'æ ¼å¼åŒ–URL',
                    param_list: 'å‚æ•°åˆ—è¡¨',
                    param_name: 'å‚æ•°å',
                    param_value: 'å‚æ•°å€¼',
                    no_params: 'æ— å‚æ•°',
                    btn_copy: 'å¤åˆ¶æ ¼å¼åŒ–URL',
                    intro_title: 'å…³äºæœ¬å·¥å…·',
                    intro_text: 'æœ¬å·¥å…·æä¾›URLæ ¼å¼åŒ–å’Œå‚æ•°å¤„ç†åŠŸèƒ½ï¼Œå¯å¯¹URLè¿›è¡Œè§„èŒƒåŒ–ã€å‚æ•°æ’åºå’Œç¼–ç è½¬æ¢ã€‚èƒ½å°†å†—é•¿æ··ä¹±çš„URLè½¬æ¢ä¸ºæ¸…æ™°æ˜“è¯»çš„æ ¼å¼ï¼Œæ”¯æŒURLç¼–ç ä¸è§£ç ï¼Œä»¥åŠæŸ¥è¯¢å‚æ•°çš„æ’åºæ•´ç†ã€‚é€‚ç”¨äºå¼€å‘è€…è°ƒè¯•APIã€SEOä¼˜åŒ–äººå‘˜åˆ†æé“¾æ¥ç»“æ„å’Œéœ€è¦å¤„ç†URLçš„ç”¨æˆ·ã€‚',
                    recent_history: 'æœ€è¿‘å¤„ç†',
                    no_history: 'æš‚æ— å¤„ç†è®°å½•',
                    please_enter_url: 'è¯·å…ˆè¾“å…¥URL',
                    invalid_url: 'URLæ ¼å¼æ— æ•ˆ',
                    copied: 'å·²å¤åˆ¶ï¼'
                },
                'zh-TW': {
                    title: 'ğŸ”— URLæ ¼å¼åŒ–å·¥å…·',
                    input_url: 'è¼¸å…¥URL',
                    url_note: 'æ”¯æ´åŒ…å«æŸ¥è©¢åƒæ•¸çš„å®Œæ•´URL',
                    options: 'æ ¼å¼åŒ–é¸é …',
                    param_sort: 'åƒæ•¸æ’åº',
                    no_sort: 'ä¸æ’åº',
                    ascending: 'æŒ‰å­—æ¯å‡åº',
                    descending: 'æŒ‰å­—æ¯é™åº',
                    encoding: 'ç·¨ç¢¼æ–¹å¼',
                    url_encode: 'URLç·¨ç¢¼',
                    url_decode: 'URLè§£ç¢¼',
                    smart: 'æ™ºèƒ½è™•ç†',
                    encoding_note: 'è™•ç†URLä¸­çš„ç‰¹æ®Šå­—å…ƒ',
                    btn_format: 'æ ¼å¼åŒ–URL',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'æ ¼å¼åŒ–çµæœ',
                    param_count: 'åƒæ•¸æ•¸é‡ï¼š',
                    process_time: 'è™•ç†è€—æ™‚ï¼š',
                    formatted_url: 'æ ¼å¼åŒ–URL',
                    param_list: 'åƒæ•¸åˆ—è¡¨',
                    param_name: 'åƒæ•¸å',
                    param_value: 'åƒæ•¸å€¼',
                    no_params: 'ç„¡åƒæ•¸',
                    btn_copy: 'è¤‡è£½æ ¼å¼åŒ–URL',
                    intro_title: 'é—œæ–¼æœ¬å·¥å…·',
                    intro_text: 'æœ¬å·¥å…·æä¾›URLæ ¼å¼åŒ–å’Œåƒæ•¸è™•ç†åŠŸèƒ½ï¼Œå¯å°URLé€²è¡Œè¦ç¯„åŒ–ã€åƒæ•¸æ’åºå’Œç·¨ç¢¼è½‰æ›ã€‚èƒ½å°‡å†—é•·æ··äº‚çš„URLè½‰æ›ç‚ºæ¸…æ™°æ˜“è®€çš„æ ¼å¼ï¼Œæ”¯æ´URLç·¨ç¢¼èˆ‡è§£ç¢¼ï¼Œä»¥åŠæŸ¥è©¢åƒæ•¸çš„æ’åºæ•´ç†ã€‚é©ç”¨æ–¼é–‹ç™¼è€…èª¿è©¦APIã€SEOå„ªåŒ–äººå“¡åˆ†æéˆæ¥çµæ§‹å’Œéœ€è¦è™•ç†URLçš„ç”¨æˆ¶ã€‚',
                    recent_history: 'æœ€è¿‘è™•ç†',
                    no_history: 'æš«ç„¡è™•ç†è¨˜éŒ„',
                    please_enter_url: 'è«‹å…ˆè¼¸å…¥URL',
                    invalid_url: 'URLæ ¼å¼ç„¡æ•ˆ',
                    copied: 'å·²è¤‡è£½ï¼'
                },
                'ja': {
                    title: 'ğŸ”— URLãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼',
                    input_url: 'URLã‚’å…¥åŠ›',
                    url_note: 'ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å«ã‚€å®Œå…¨ãªURLã‚’ã‚µãƒãƒ¼ãƒˆ',
                    options: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚ªãƒ—ã‚·ãƒ§ãƒ³',
                    param_sort: 'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¸¦ã³æ›¿ãˆ',
                    no_sort: 'ä¸¦ã³æ›¿ãˆãªã—',
                    ascending: 'ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ï¼ˆæ˜‡é †ï¼‰',
                    descending: 'ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆé †ï¼ˆé™é †ï¼‰',
                    encoding: 'ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°æ–¹å¼',
                    url_encode: 'URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰',
                    url_decode: 'URLãƒ‡ã‚³ãƒ¼ãƒ‰',
                    smart: 'ã‚¹ãƒãƒ¼ãƒˆå‡¦ç†',
                    encoding_note: 'URLå†…ã®ç‰¹æ®Šæ–‡å­—ã‚’å‡¦ç†',
                    btn_format: 'URLã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ',
                    btn_clear: 'ã™ã¹ã¦ã‚¯ãƒªã‚¢',
                    results: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆçµæœ',
                    param_count: 'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ï¼š',
                    process_time: 'å‡¦ç†æ™‚é–“ï¼š',
                    formatted_url: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿URL',
                    param_list: 'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä¸€è¦§',
                    param_name: 'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å',
                    param_value: 'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å€¤',
                    no_params: 'ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãªã—',
                    btn_copy: 'ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¸ˆã¿URLã‚’ã‚³ãƒ”ãƒ¼',
                    intro_title: 'ã“ã®ãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦',
                    intro_text: 'ã“ã®ãƒ„ãƒ¼ãƒ«ã¯URLã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‡¦ç†æ©Ÿèƒ½ã‚’æä¾›ã—ã€URLã®æ­£è¦åŒ–ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¸¦ã³æ›¿ãˆã€ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å¤‰æ›ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚é•·ãæ··ä¹±ã—ãŸURLã‚’æ˜ç¢ºã§èª­ã¿ã‚„ã™ã„å½¢å¼ã«å¤‰æ›ã—ã€URLã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã¨ãƒ‡ã‚³ãƒ¼ãƒ‰ã€ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®ä¸¦ã³æ›¿ãˆã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚APIã®ãƒ‡ãƒãƒƒã‚°ã‚’è¡Œã†é–‹ç™ºè€…ã€ãƒªãƒ³ã‚¯æ§‹é€ ã‚’åˆ†æã™ã‚‹SEOæœ€é©åŒ–æ‹…å½“è€…ã€URLã‚’å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é©ã—ã¦ã„ã¾ã™ã€‚',
                    recent_history: 'æœ€è¿‘ã®å‡¦ç†',
                    no_history: 'å‡¦ç†å±¥æ­´ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“',
                    please_enter_url: 'ã¾ãšURLã‚’å…¥åŠ›ã—ã¦ãã ã•ã„',
                    invalid_url: 'ç„¡åŠ¹ãªURLå½¢å¼',
                    copied: 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'
                },
                'ru': {
                    title: 'ğŸ”— Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‚ĞµÑ€ URL',
                    input_url: 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ URL',
                    url_note: 'ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ URL Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ğ¼Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°',
                    options: 'ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    param_sort: 'Ğ¡Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²',
                    no_sort: 'Ğ‘ĞµĞ· ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸',
                    ascending: 'ĞŸĞ¾ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ñƒ (Ğ¿Ğ¾ Ğ²Ğ¾Ğ·Ñ€Ğ°ÑÑ‚Ğ°Ğ½Ğ¸Ñ)',
                    descending: 'ĞŸĞ¾ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚Ñƒ (Ğ¿Ğ¾ ÑƒĞ±Ñ‹Ğ²Ğ°Ğ½Ğ¸Ñ)',
                    encoding: 'ĞœĞµÑ‚Ğ¾Ğ´ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸',
                    url_encode: 'URL-ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°',
                    url_decode: 'URL-Ğ´ĞµĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ°',
                    smart: 'Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°',
                    encoding_note: 'ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ğ² URL',
                    btn_format: 'ĞÑ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ URL',
                    btn_clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ',
                    results: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ',
                    param_count: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²:',
                    process_time: 'Ğ’Ñ€ĞµĞ¼Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸:',
                    formatted_url: 'ĞÑ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ URL',
                    param_list: 'Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²',
                    param_name: 'Ğ˜Ğ¼Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°',
                    param_value: 'Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°',
                    no_params: 'ĞĞµÑ‚ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²',
                    btn_copy: 'Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ URL',
                    intro_title: 'Ğ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğµ',
                    intro_text: 'Ğ­Ñ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ¿Ñ€ĞµĞ´Ğ¾ÑÑ‚Ğ°Ğ²Ğ»ÑĞµÑ‚ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ URL Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ², Ğ²ĞºĞ»ÑÑ‡Ğ°Ñ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ URL, ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ¸ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸. ĞĞ½ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğµ Ğ¸ Ğ½ĞµÑƒĞ¿Ğ¾Ñ€ÑĞ´Ğ¾Ñ‡ĞµĞ½Ğ½Ñ‹Ğµ URL Ğ² Ğ¿Ğ¾Ğ½ÑÑ‚Ğ½Ñ‹Ğµ Ğ¸ Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼Ñ‹Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ñ‹, Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ¸ Ğ´ĞµĞºĞ¾Ğ´Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ URL, Ğ° Ñ‚Ğ°ĞºĞ¶Ğµ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°. ĞŸĞ¾Ğ´Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¾Ğ², Ğ¾Ñ‚Ğ»Ğ°Ğ¶Ğ¸Ğ²Ğ°ÑÑ‰Ğ¸Ñ… API, ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸ÑÑ‚Ğ¾Ğ² Ğ¿Ğ¾ SEO, Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ñ… ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ ÑÑÑ‹Ğ»Ğ¾Ğº, Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¼ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ‚ÑŒ URL.',
                    recent_history: 'ĞĞµĞ´Ğ°Ğ²Ğ½Ğ¸Ğµ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸',
                    no_history: 'Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚',
                    please_enter_url: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ URL',
                    invalid_url: 'ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ URL',
                    copied: 'Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!'
                }
            },

            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang(false);
                } else {
                    this.changeLang(false);
                }

                this.loadUrlHistory();
            },

            changeLang: function(updateUrl = true) {
                const lang = document.getElementById('lang-selector').value;
                const i18nData = this.i18n[lang];
                
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (i18nData[key]) {
                        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                            el.placeholder = i18nData[key];
                        } else {
                            el.textContent = i18nData[key];
                        }
                    }
                });

                if (updateUrl) {
                    const url = new URL(window.location);
                    url.searchParams.set('lang', lang);
                    window.history.pushState({}, '', url);
                }
                
                document.title = i18nData['title'];
            },

            getI18nText: function(key) {
                const lang = document.getElementById('lang-selector').value;
                return this.i18n[lang] && this.i18n[lang][key] ? this.i18n[lang][key] : this.i18n['en'][key];
            },

            isValidUrl: function(url) {
                try {
                    new URL(url);
                    return true;
                } catch (e) {
                    return false;
                }
            },

            formatUrl: function() {
                const inputUrl = document.getElementById('input_url').value.trim();
                const sortOption = document.getElementById('param_sort').value;
                const encodingOption = document.getElementById('encoding').value;
                
                if (!inputUrl) {
                    alert(this.getI18nText('please_enter_url'));
                    return;
                }
                
                if (!this.isValidUrl(inputUrl)) {
                    alert(this.getI18nText('invalid_url'));
                    return;
                }

                const startTime = performance.now();
                
                try {
                    const url = new URL(inputUrl);
                    let params = new URLSearchParams(url.search);
                    let paramArray = Array.from(params.entries());
                    
                    // å¤„ç†ç¼–ç 
                    paramArray = paramArray.map(([key, value]) => {
                        if (encodingOption === 'decode' || encodingOption === 'both') {
                            try {
                                key = decodeURIComponent(key);
                                value = decodeURIComponent(value);
                            } catch (e) {
                                // ä¿ç•™åŸå§‹å€¼å¦‚æœè§£ç å¤±è´¥
                            }
                        }
                        
                        if (encodingOption === 'encode') {
                            key = encodeURIComponent(key);
                            value = encodeURIComponent(value);
                        }
                        
                        return [key, value];
                    });
                    
                    // å¤„ç†æ’åº
                    if (sortOption === 'asc') {
                        paramArray.sort((a, b) => a[0].localeCompare(b[0]));
                    } else if (sortOption === 'desc') {
                        paramArray.sort((a, b) => b[0].localeCompare(a[0]));
                    }
                    
                    // æ„å»ºæ–°çš„æŸ¥è¯¢å­—ç¬¦ä¸²
                    const newParams = new URLSearchParams();
                    paramArray.forEach(([key, value]) => {
                        newParams.append(key, value);
                    });
                    
                    // æ„å»ºæ ¼å¼åŒ–çš„URL
                    url.search = newParams.toString();
                    const formattedUrl = url.toString();
                    
                    // æ›´æ–°ç»“æœ
                    document.getElementById('formatted_url').value = formattedUrl;
                    document.getElementById('param_count').textContent = paramArray.length;
                    
                    // æ›´æ–°å‚æ•°è¡¨æ ¼
                    this.updateParamTable(paramArray);
                    
                    // è®°å½•å¤„ç†æ—¶é—´
                    const endTime = performance.now();
                    const processTime = Math.round(endTime - startTime);
                    document.getElementById('process_time').textContent = processTime + 'ms';
                    
                    // ä¿å­˜åˆ°å†å²è®°å½•
                    this.saveToHistory(inputUrl, formattedUrl, paramArray.length);
                } catch (e) {
                    alert(this.getI18nText('invalid_url') + ': ' + e.message);
                    return;
                }
            },

            updateParamTable: function(params) {
                const tableBody = document.getElementById('param_table_body');
                
                if (params.length === 0) {
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="2" class="text-center text-gray-400" data-i18n="no_params">${this.getI18nText('no_params')}</td>
                        </tr>
                    `;
                    return;
                }
                
                let html = '';
                params.forEach(([key, value]) => {
                    html += `
                        <tr>
                            <td>${key}</td>
                            <td>${value}</td>
                        </tr>
                    `;
                });
                
                tableBody.innerHTML = html;
            },

            clearAll: function() {
                document.getElementById('input_url').value = '';
                document.getElementById('formatted_url').value = '';
                document.getElementById('param_count').textContent = '0';
                document.getElementById('process_time').textContent = '0ms';
                this.updateParamTable([]);
            },

            copyResult: function() {
                const resultText = document.getElementById('formatted_url');
                resultText.select();
                document.execCommand('copy');
                
                const originalText = this.getI18nText('btn_copy');
                const copyBtn = document.querySelector('[data-i18n="btn_copy"]');
                copyBtn.textContent = this.getI18nText('copied');
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 2000);
            },

            saveToHistory: function(original, formatted, paramCount) {
                let history = JSON.parse(localStorage.getItem('urlFormatterHistory') || '[]');
                
                const entry = {
                    id: Date.now(),
                    original: original.substring(0, 50) + (original.length > 50 ? '...' : ''),
                    formatted: formatted.substring(0, 50) + (formatted.length > 50 ? '...' : ''),
                    params: paramCount,
                    timestamp: new Date().toLocaleString()
                };
                
                history.unshift(entry);
                if (history.length > 10) history = history.slice(0, 10);
                
                localStorage.setItem('urlFormatterHistory', JSON.stringify(history));
                this.loadUrlHistory();
            },

            loadUrlHistory: function() {
                const historyContainer = document.getElementById('url_history');
                const history = JSON.parse(localStorage.getItem('urlFormatterHistory') || '[]');
                
                if (history.length === 0) {
                    historyContainer.innerHTML = `<p data-i18n="no_history" class="text-gray-400 italic text-sm">${this.getI18nText('no_history')}</p>`;
                    return;
                }
                
                let html = '<div class="space-y-2">';
                history.forEach(entry => {
                    html += `
                        <div class="p-2 bg-white rounded border border-gray-100 text-sm">
                            <div class="text-gray-700 font-medium truncate">${entry.original}</div>
                            <div class="flex justify-between items-center mt-1">
                                <div class="text-gray-600 text-xs truncate">${entry.formatted}</div>
                                <div class="text-gray-400 text-xs">${entry.params} ${this.getI18nText('param_name')} Â· ${entry.timestamp}</div>
                            </div>
                        </div>
                    `;
                });
                html += '</div>';
                
                historyContainer.innerHTML = html;
            }
        };

        // Initialize the tool when the page loads
        window.onload = function() {
            UrlTool.init();
        };
    </script>
</body>

</html>
