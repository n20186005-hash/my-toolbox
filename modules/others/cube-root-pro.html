<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Category Meta Tag -->
    <meta name="category" content="fun">
    <meta name="icon" content="ğŸ²">   
    <meta name="description" content="Online Raffle Tool - Pick a random winner from a list with a digital marquee animation.">
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ°</text></svg>">
    
    <title>åœ¨çº¿æŠ½å¥– | Lucky Draw Pro</title>
    
    <link rel="canonical" href="https://toolboxpro.top/modules/others/cube-root-pro.html" />
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#3b82f6', hover: '#2563eb' },
                        secondary: { DEFAULT: '#8b5cf6', hover: '#7c3aed' },
                        bg: { light: '#f0f9ff', dark: '#0f172a' }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.4s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'bounce-sm': 'bounceSm 2s infinite',
                        'pulse-fast': 'pulse 0.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        bounceSm: {
                            '0%, 100%': { transform: 'translateY(-5%)' },
                            '50%': { transform: 'translateY(0)' }
                        }
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide::-webkit-scrollbar { display: none; }
            .glass {
                @apply bg-white/90 dark:bg-slate-800/90 backdrop-blur-lg border border-slate-200 dark:border-slate-700;
            }
            .input-field {
                @apply w-full px-3 py-2 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-sm;
            }
            .btn-primary {
                @apply bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-bold py-2 px-4 rounded-xl shadow-lg shadow-blue-500/30 transition-all transform active:scale-95 flex items-center justify-center gap-2;
            }
            .btn-secondary {
                @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 font-medium py-1.5 px-3 rounded-lg transition-all text-xs;
            }
            
            /* Marquee Style */
            .marquee-container {
                @apply relative overflow-hidden rounded-3xl bg-slate-900 flex items-center justify-center border-4 border-slate-800 shadow-2xl;
                background-image: radial-gradient(circle at center, #334155 0%, #0f172a 100%);
            }
            .marquee-text {
                @apply text-5xl md:text-7xl font-bold text-white text-center break-all px-4 leading-tight;
                text-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
            }
            .marquee-overlay {
                @apply absolute inset-0 pointer-events-none border-[1px] border-white/10 rounded-3xl;
                background: linear-gradient(to bottom, rgba(255,255,255,0.05) 0%, rgba(0,0,0,0.2) 100%);
            }
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-bg-light dark:bg-bg-dark min-h-screen font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300 overflow-x-hidden">

    <!-- Background -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0 opacity-40 dark:opacity-20">
        <div class="absolute top-[-10%] left-[-10%] w-[600px] h-[600px] bg-blue-200 rounded-full blur-[120px] mix-blend-multiply dark:mix-blend-screen"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-violet-300 rounded-full blur-[100px] mix-blend-multiply dark:mix-blend-screen"></div>
    </div>

    <div class="container mx-auto px-4 py-6 max-w-6xl relative z-10 flex flex-col min-h-screen">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-700 text-white flex items-center justify-center text-2xl shadow-lg shadow-blue-500/20">
                    <i class="fa fa-gift animate-bounce-sm"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold tracking-tight text-slate-900 dark:text-white" data-i18n="title">åœ¨çº¿æŠ½å¥–</h1>
                    <p class="text-xs text-slate-500 font-medium" data-i18n="subtitle">åå•éšæœºæŠ½å–å·¥å…·</p>
                </div>
            </div>

            <div class="flex items-center gap-2 bg-white dark:bg-slate-800 p-1.5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm">
                 <!-- Language Selector -->
                 <select id="lang-selector" class="bg-transparent text-sm font-medium px-2 py-1 rounded focus:outline-none cursor-pointer text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700">
                    <option value="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                </select>
                <div class="w-px h-5 bg-slate-300 dark:bg-slate-600 mx-1"></div>
                <button id="mode-toggle" class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-500 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                    <i class="fa fa-moon-o dark:hidden"></i>
                    <i class="fa fa-sun-o hidden dark:inline"></i>
                </button>
            </div>
        </header>

        <!-- Main Tool Area -->
        <div class="grid lg:grid-cols-12 gap-6 mb-12">
            
            <!-- Left Column: List Management -->
            <main class="lg:col-span-4 flex flex-col gap-6">
                
                <!-- Pending List Card -->
                <div class="glass rounded-3xl shadow-lg overflow-hidden border-t-4 border-t-blue-500 p-5 flex flex-col gap-4">
                    <div class="flex justify-between items-center">
                        <h2 class="text-sm font-bold flex items-center gap-2 text-slate-800 dark:text-white">
                            <i class="fa fa-users text-blue-500"></i> 
                            <span><span data-i18n="lbl_pending">æŠ½å¥–åå•</span> <span class="text-slate-400 font-normal ml-1 text-xs">(<span data-i18n="lbl_count">å¾…æŠ½å¥–</span>ï¼š<span id="count-pending" class="text-blue-600 dark:text-blue-400 font-bold">0</span>)</span></span>
                        </h2>
                    </div>

                    <div class="flex gap-2">
                        <button onclick="App.loadSample()" class="btn-secondary flex-1">
                            <i class="fa fa-magic mr-1"></i> <span data-i18n="btn_sample">æ¥ä¸ªåå•</span>
                        </button>
                        <button onclick="App.clearPending()" class="btn-secondary flex-1 text-red-500 hover:text-red-600">
                            <i class="fa fa-trash-o mr-1"></i> <span data-i18n="btn_clear">æ¸…ç©º</span>
                        </button>
                    </div>

                    <div class="relative flex-grow">
                        <textarea id="input-names" 
                            class="input-field h-48 resize-none font-mono text-xs leading-relaxed scrollbar-hide focus:h-64 transition-all z-10 relative" 
                            placeholder="è¯·è¾“å…¥åå­—ï¼Œä¸€è¡Œä¸€ä¸ª..."
                            oninput="App.syncPendingFromInput()"></textarea>
                    </div>
                </div>

                <!-- Winners List Card -->
                <div class="glass rounded-3xl shadow-lg overflow-hidden border-t-4 border-t-amber-400 p-5 flex flex-col gap-4">
                    <div class="flex justify-between items-center">
                        <h2 class="text-sm font-bold flex items-center gap-2 text-slate-800 dark:text-white">
                            <i class="fa fa-trophy text-amber-500"></i> 
                            <span><span data-i18n="lbl_winners">ä¸­å¥–åå•</span> <span class="text-slate-400 font-normal ml-1 text-xs">(<span data-i18n="lbl_count_win">å·²ä¸­å¥–</span>ï¼š<span id="count-won" class="text-amber-600 dark:text-amber-400 font-bold">0</span>)</span></span>
                        </h2>
                        <button onclick="App.clearWinners()" class="text-[10px] bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded hover:bg-red-50 hover:text-red-500 transition-colors" data-i18n="btn_clear">
                            æ¸…ç©º
                        </button>
                    </div>

                    <div id="winners-container" class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-2 h-32 overflow-y-auto scrollbar-hide border border-slate-100 dark:border-slate-700/50">
                        <div class="text-center text-xs text-slate-400 py-10 italic" id="no-winners-msg" data-i18n="msg_no_winners">
                            è™šä½ä»¥å¾…...
                        </div>
                        <!-- Winners injected here -->
                    </div>
                </div>

            </main>

            <!-- Right Column: Marquee & Results -->
            <main class="lg:col-span-8 flex flex-col gap-6">
                <div class="glass rounded-3xl shadow-xl overflow-hidden min-h-[500px] flex flex-col p-8 relative">
                    
                    <!-- Result Modal Overlay -->
                    <div id="result-overlay" class="absolute inset-0 z-30 bg-white/95 dark:bg-slate-900/95 flex flex-col items-center justify-center hidden opacity-0 transition-opacity duration-300">
                         <div class="text-center animate-fade-in p-6 w-full max-w-lg">
                            <div class="text-6xl mb-6 animate-bounce">ğŸ‰</div>
                            <h2 class="text-sm font-bold text-slate-400 uppercase tracking-widest mb-4" data-i18n="res_congrats">æ­å–œ</h2>
                            <div id="winner-name-display" class="text-5xl md:text-6xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 mb-10 break-words leading-tight px-4">
                                ???
                            </div>
                            <div class="flex gap-4 justify-center">
                                <button onclick="App.closeResult()" class="btn-secondary px-8 py-3 rounded-xl text-base shadow-sm border-2 border-slate-200 dark:border-slate-700 hover:border-primary dark:hover:border-primary" data-i18n="btn_continue">
                                    ç»§ç»­
                                </button>
                            </div>
                         </div>
                    </div>

                    <!-- Marquee Display Area -->
                    <div class="flex-grow flex flex-col items-center justify-center gap-8 w-full">
                        
                        <!-- The Big Screen -->
                        <div class="w-full max-w-2xl aspect-video marquee-container relative group">
                            <!-- Shine effect -->
                            <div class="absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent opacity-50"></div>
                            
                            <!-- The Text -->
                            <div id="marquee-text" class="marquee-text z-10 transition-all duration-100 transform">
                                READY
                            </div>

                            <!-- Decorative Corners -->
                            <div class="absolute top-4 left-4 w-4 h-4 border-t-2 border-l-2 border-white/30"></div>
                            <div class="absolute top-4 right-4 w-4 h-4 border-t-2 border-r-2 border-white/30"></div>
                            <div class="absolute bottom-4 left-4 w-4 h-4 border-b-2 border-l-2 border-white/30"></div>
                            <div class="absolute bottom-4 right-4 w-4 h-4 border-b-2 border-r-2 border-white/30"></div>
                        </div>

                        <!-- Action Area -->
                        <div class="flex flex-col items-center gap-4 w-full max-w-xs">
                            <button id="spin-btn" onclick="App.startRoll()" class="btn-primary w-full text-xl py-4 rounded-2xl shadow-blue-500/40 hover:shadow-blue-500/50 hover:scale-105 active:scale-95 transition-all duration-200">
                                <span class="tracking-wider" data-i18n="btn_start">å¼€å§‹æŠ½å¥–</span>
                            </button>
                            
                            <!-- Simple Settings -->
                            <div class="flex items-center gap-4 text-xs text-slate-400 mt-2">
                                <label class="flex items-center gap-2 cursor-pointer hover:text-slate-600 dark:hover:text-slate-300">
                                    <input type="checkbox" id="check-remove" class="rounded text-blue-500 focus:ring-blue-500" checked>
                                    <span data-i18n="chk_remove">æŠ½ä¸­åç§»å‡ºåå•</span>
                                </label>
                            </div>
                        </div>

                    </div>
                </div>
            </main>
        </div>

        <!-- Guide Section -->
        <section class="mb-12">
            <div class="glass rounded-2xl p-8 shadow-xl">
                <div class="grid md:grid-cols-2 gap-12">
                    <!-- Feature Introduction -->
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                            <i class="fa fa-book text-primary"></i> <span data-i18n="guide_title">åŠŸèƒ½ä½¿ç”¨æŒ‡å—</span>
                        </h2>
                        <div class="space-y-6 text-slate-600 dark:text-slate-300 leading-relaxed">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800 dark:text-slate-100 mb-2" data-i18n="guide_h_input">ğŸ“ åå•å¯¼å…¥</h3>
                                <p data-i18n="guide_p_input">åœ¨å·¦ä¾§æ–‡æœ¬æ¡†ä¸­è¾“å…¥å‚ä¸æŠ½å¥–çš„åå­—ï¼Œ<strong class="text-primary">æ¯è¡Œä¸€ä¸ª</strong>ã€‚æ‚¨å¯ä»¥ç›´æ¥ä» Excel æˆ–æ–‡æœ¬æ–‡æ¡£ä¸­å¤åˆ¶ç²˜è´´ã€‚</p>
                            </div>
                            
                            <div>
                                <h3 class="font-bold text-lg text-slate-800 dark:text-slate-100 mb-2" data-i18n="guide_h_mode">âš™ï¸ æŠ½å¥–æ¨¡å¼</h3>
                                <p data-i18n="guide_p_mode">é»˜è®¤å¼€å¯â€œæŠ½ä¸­åç§»å‡ºåå•â€åŠŸèƒ½ï¼Œç¡®ä¿åŒä¸€ä¸ªäººä¸ä¼šé‡å¤ä¸­å¥–ã€‚å¦‚æœæ‚¨å¸Œæœ›å…è®¸é‡å¤ä¸­å¥–ï¼Œè¯·åœ¨â€œå¼€å§‹æŠ½å¥–â€æŒ‰é’®ä¸‹æ–¹å–æ¶ˆå‹¾é¸ã€‚</p>
                            </div>

                            <div>
                                <h3 class="font-bold text-lg text-slate-800 dark:text-slate-100 mb-2" data-i18n="guide_h_fair">ğŸ”’ å…¬å¹³æ€§</h3>
                                <p data-i18n="guide_p_fair">ç³»ç»Ÿä½¿ç”¨åŠ å¯†çº§éšæœºç®—æ³• (Crypto Random) é€²è¡ŒæŠ½å–ï¼Œç¢ºä¿çµæœå®Œå…¨éš¨æ©Ÿä¸”ä¸å¯é æ¸¬ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <!-- Q&A / Tips -->
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                            <i class="fa fa-question-circle text-primary"></i> <span data-i18n="qa_title">å¸¸è§é—®é¢˜</span>
                        </h2>
                        <div class="space-y-4">
                            <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 border border-indigo-100 dark:border-indigo-800/30">
                                <h4 class="font-bold text-indigo-800 dark:text-indigo-300 mb-2" data-i18n="qa_h_save">å¯ä»¥ä¿å­˜åå•å—ï¼Ÿ</h4>
                                <p class="text-sm text-indigo-700 dark:text-indigo-400" data-i18n="qa_p_save">ç›®å‰æœ¬å·¥å…·æ˜¯çº¯å‰ç«¯è¿è¡Œï¼Œåˆ·æ–°é¡µé¢ååå•ä¼šé‡ç½®ã€‚å»ºè®®æ‚¨åœ¨æœ¬åœ°ä¿å­˜ä¸€ä»½åå•æ–‡æ¡£ï¼Œä½¿ç”¨æ—¶ç²˜è´´è¿›æ¥ã€‚</p>
                            </div>

                            <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-100 dark:border-blue-800/30">
                                <h4 class="font-bold text-blue-800 dark:text-blue-300 mb-2" data-i18n="qa_h_limit">æœ‰äººæ•°ä¸Šé™å—ï¼Ÿ</h4>
                                <p class="text-sm text-blue-700 dark:text-blue-400" data-i18n="qa_p_limit">ç†è®ºä¸Šæ²¡æœ‰é™åˆ¶ã€‚å·¥å…·ç»æµ‹è¯•å¯æµç•…å¤„ç†ä¸Šåƒäººçš„åå•ã€‚å¦‚æœåå•è¿‡å¤šï¼ˆå¦‚è¶…è¿‡ 10,000 äººï¼‰ï¼Œå¯¼å…¥æ—¶å¯èƒ½ä¼šæœ‰è½»å¾®å¡é¡¿ã€‚</p>
                            </div>
                            
                            <div class="bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-4 border border-emerald-100 dark:border-emerald-800/30">
                                <h4 class="font-bold text-emerald-800 dark:text-emerald-300 mb-2" data-i18n="qa_h_screen">é€‚åˆæŠ•å±ä½¿ç”¨å—ï¼Ÿ</h4>
                                <p class="text-sm text-emerald-700 dark:text-emerald-400" data-i18n="qa_p_screen">éå¸¸é€‚åˆï¼å³ä¾§çš„â€œè·‘é©¬ç¯â€æ˜¾ç¤ºåŒºä¸“ä¸ºå¤§å±è®¾è®¡ï¼Œå­—ä½“æ¸…æ™°ä¸”å¸¦æœ‰åŠ¨ç”»æ•ˆæœï¼Œå¹´ä¼šæˆ–è¯¾å ‚æŠ•å±æ•ˆæœæä½³ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <footer class="text-center text-xs text-slate-400 py-6">
            <p>&copy; <span id="year"></span> Online Raffle Tool. Generated for Educational Purposes.</p>
        </footer>
    </div>

    <script>
        // --- Localization Data ---
        const i18nData = {
            'zh-CN': {
                title: "åœ¨çº¿æŠ½å¥–", subtitle: "åå•éšæœºæŠ½å–å·¥å…·",
                lbl_pending: "æŠ½å¥–åå•", lbl_count: "å¾…æŠ½å¥–",
                btn_sample: "æ¥ä¸ªåå•", btn_clear: "æ¸…ç©º",
                lbl_winners: "ä¸­å¥–åå•", lbl_count_win: "å·²ä¸­å¥–",
                msg_no_winners: "è™šä½ä»¥å¾…...",
                res_congrats: "æ­å–œ", btn_continue: "ç»§ç»­",
                btn_start: "å¼€å§‹æŠ½å¥–", chk_remove: "æŠ½ä¸­åç§»å‡ºåå•",
                placeholder_names: "è¯·è¾“å…¥åå­—ï¼Œä¸€è¡Œä¸€ä¸ª...",
                ready_text: "READY",
                guide_title: "åŠŸèƒ½ä½¿ç”¨æŒ‡å—",
                guide_h_input: "ğŸ“ åå•å¯¼å…¥", guide_p_input: "åœ¨å·¦ä¾§æ–‡æœ¬æ¡†ä¸­è¾“å…¥å‚ä¸æŠ½å¥–çš„åå­—ï¼Œæ¯è¡Œä¸€ä¸ªã€‚æ”¯æŒä»Excelç²˜è´´ã€‚",
                guide_h_mode: "âš™ï¸ æŠ½å¥–æ¨¡å¼", guide_p_mode: "é»˜è®¤å¼€å¯â€œæŠ½ä¸­åç§»å‡ºåå•â€ï¼Œé˜²æ­¢é‡å¤ä¸­å¥–ã€‚å¦‚éœ€å…è®¸é‡å¤ï¼Œè¯·å–æ¶ˆå‹¾é€‰ã€‚",
                guide_h_fair: "ğŸ”’ å…¬å¹³æ€§", guide_p_fair: "ä½¿ç”¨åŠ å¯†çº§éšæœºç®—æ³•ï¼Œç»“æœå®Œå…¨éšæœºã€‚",
                qa_title: "å¸¸è§é—®é¢˜",
                qa_h_save: "å¯ä»¥ä¿å­˜åå•å—ï¼Ÿ", qa_p_save: "åˆ·æ–°ä¼šé‡ç½®ï¼Œè¯·è‡ªè¡Œä¿å­˜æœ¬åœ°æ–‡æ¡£ã€‚",
                qa_h_limit: "æœ‰äººæ•°ä¸Šé™å—ï¼Ÿ", qa_p_limit: "æ”¯æŒä¸Šåƒäººåå•æµç•…è¿è¡Œã€‚",
                qa_h_screen: "é€‚åˆæŠ•å±ä½¿ç”¨å—ï¼Ÿ", qa_p_screen: "å³ä¾§å¤§å±è®¾è®¡ï¼Œä¸“ä¸ºå¹´ä¼šã€è¯¾å ‚æŠ•å±ä¼˜åŒ–ã€‚"
            },
            'en': {
                title: "Raffle Tool", subtitle: "Random Name Picker",
                lbl_pending: "Candidates", lbl_count: "Pending",
                btn_sample: "Sample", btn_clear: "Clear",
                lbl_winners: "Winners", lbl_count_win: "Won",
                msg_no_winners: "Waiting for results...",
                res_congrats: "Winner", btn_continue: "Continue",
                btn_start: "Start Roll", chk_remove: "Remove after win",
                placeholder_names: "Enter names, one per line...",
                ready_text: "READY",
                guide_title: "User Guide",
                guide_h_input: "ğŸ“ Input List", guide_p_input: "Paste names into the left text box, one name per line. Excel copy-paste supported.",
                guide_h_mode: "âš™ï¸ Settings", guide_p_mode: "By default, winners are removed from the list. Uncheck the box below Start button to allow repeats.",
                guide_h_fair: "ğŸ”’ Fairness", guide_p_fair: "Uses cryptographic random algorithms for true unpredictability.",
                qa_title: "FAQ",
                qa_h_save: "Can I save the list?", qa_p_save: "Data resets on refresh. Please save your list in a local file.",
                qa_h_limit: "Is there a limit?", qa_p_limit: "Tested smoothly with thousands of names.",
                qa_h_screen: "Good for Big Screens?", qa_p_screen: "Yes! The marquee display is designed for projectors and large monitors."
            }
        };

        const App = {
            candidates: [],
            winners: [],
            isRolling: false,
            rollInterval: null,
            currentLang: 'zh-CN',
            
            init() {
                // 1. Language Setup
                const urlParams = new URLSearchParams(window.location.search);
                this.currentLang = urlParams.get('lang') || 'zh-CN';
                if (!i18nData[this.currentLang]) this.currentLang = 'zh-CN';
                
                const langSelector = document.getElementById('lang-selector');
                if(langSelector) {
                    langSelector.value = this.currentLang;
                    langSelector.addEventListener('change', (e) => {
                        this.currentLang = e.target.value;
                        this.updateUrl(this.currentLang);
                        this.translateUI(this.currentLang);
                    });
                }
                
                // Ensure URL has lang
                if (!urlParams.has('lang')) {
                    this.updateUrl(this.currentLang);
                }

                this.translateUI(this.currentLang);
                this.loadSample();
                this.handleTheme();
                this.updateYear();
            },

            updateUrl(lang) {
                try {
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', lang);
                    window.history.pushState({}, '', newUrl);
                } catch (e) {
                    console.log('URL update failed:', e);
                }
            },

            translateUI(lang) {
                const data = i18nData[lang] || i18nData['en'];
                document.documentElement.lang = lang;
                
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(data[key]) el.innerHTML = data[key];
                });

                document.getElementById('input-names').placeholder = data.placeholder_names;
                if(!this.isRolling && this.winners.length === 0) {
                     document.getElementById('marquee-text').textContent = data.ready_text;
                }
            },

            updateYear() {
                document.getElementById('year').textContent = new Date().getFullYear();
            },

            // --- List Management ---
            loadSample() {
                const isCN = this.currentLang === 'zh-CN';
                const samples = isCN ? 
                    ["å¼ ä¸‰", "æå››", "ç‹äº”", "èµµå…­", "é’±ä¸ƒ", "å­™å…«", "å‘¨ä¹", "å´å", "é™ˆåä¸€", "åˆ˜åäºŒ"] :
                    ["Alex", "Bella", "Charlie", "David", "Eva", "Frank", "Grace", "Henry", "Ivy", "Jack"];
                
                document.getElementById('input-names').value = samples.join('\n');
                this.syncPendingFromInput();
            },

            clearPending() {
                const msg = this.currentLang === 'zh-CN' ? 'ç¡®å®šæ¸…ç©ºæŠ½å¥–åå•å—ï¼Ÿ' : 'Clear all candidates?';
                if(confirm(msg)) {
                    document.getElementById('input-names').value = '';
                    this.syncPendingFromInput();
                }
            },

            syncPendingFromInput() {
                const text = document.getElementById('input-names').value;
                this.candidates = text.split('\n').map(s => s.trim()).filter(s => s.length > 0);
                this.updateCounts();
            },

            refreshInputFromCandidates() {
                document.getElementById('input-names').value = this.candidates.join('\n');
                this.updateCounts();
            },

            clearWinners() {
                if(this.winners.length === 0) return;
                const msg = this.currentLang === 'zh-CN' ? 'ç¡®å®šæ¸…ç©ºä¸­å¥–åå•å—ï¼Ÿ' : 'Clear winners history?';
                if(confirm(msg)) {
                    this.winners = [];
                    this.renderWinners();
                    this.updateCounts();
                }
            },

            addToWinners(name) {
                this.winners.unshift({
                    name: name,
                    time: new Date().toLocaleTimeString(this.currentLang === 'zh-CN'?'zh-CN':'en-US', {hour12:false})
                });
                this.renderWinners();
                this.updateCounts();
            },

            renderWinners() {
                const container = document.getElementById('winners-container');
                const emptyMsg = document.getElementById('no-winners-msg');
                
                if (this.winners.length === 0) {
                    container.innerHTML = '';
                    container.appendChild(emptyMsg);
                    emptyMsg.style.display = 'block';
                    return;
                }
                
                emptyMsg.style.display = 'none';
                
                const html = this.winners.map((w, i) => `
                    <div class="flex items-center justify-between p-2 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800/30 mb-2 animate-slide-up">
                        <div class="flex items-center gap-2">
                            <span class="w-5 h-5 rounded-full bg-amber-500 text-white text-[10px] flex items-center justify-center font-bold">${this.winners.length - i}</span>
                            <span class="font-bold text-slate-700 dark:text-slate-200 text-sm">${w.name}</span>
                        </div>
                        <span class="text-[10px] text-slate-400 font-mono">${w.time}</span>
                    </div>
                `).join('');
                
                container.innerHTML = html;
            },

            updateCounts() {
                document.getElementById('count-pending').textContent = this.candidates.length;
                document.getElementById('count-won').textContent = this.winners.length;
            },

            // --- Marquee Logic ---
            startRoll() {
                if (this.isRolling) return;
                
                const langData = i18nData[this.currentLang] || i18nData['en'];

                if (this.candidates.length === 0) {
                    alert(this.currentLang === 'zh-CN' ? 'åå•ä¸ºç©ºï¼Œè¯·è¾“å…¥æˆ–å¯¼å…¥åå­—ï¼' : 'List is empty!');
                    document.getElementById('input-names').focus();
                    return;
                }

                this.isRolling = true;
                const btn = document.getElementById('spin-btn');
                btn.disabled = true;
                btn.classList.add('opacity-50', 'cursor-not-allowed');
                // btn.textContent = '...'; 
                // Keep the button text or change to rolling state if desired
                
                const textEl = document.getElementById('marquee-text');
                textEl.classList.add('scale-110', 'text-blue-300'); // Add some visual pop

                // 1. Rolling Animation
                let speed = 50; // ms
                const duration = 2000; // ms
                const startTime = Date.now();
                
                this.rollInterval = setInterval(() => {
                    const randIndex = Math.floor(Math.random() * this.candidates.length);
                    textEl.textContent = this.candidates[randIndex];
                }, speed);

                // 2. Stop Logic
                setTimeout(() => {
                    clearInterval(this.rollInterval);
                    
                    // Pick Winner
                    const winnerIndex = Math.floor(Math.random() * this.candidates.length);
                    const winnerName = this.candidates[winnerIndex];
                    
                    textEl.textContent = winnerName;
                    textEl.classList.remove('scale-110', 'text-blue-300');
                    textEl.classList.add('animate-pulse-fast'); // Flash effect
                    
                    // Show Result Modal
                    setTimeout(() => {
                        this.handleWin(winnerName, winnerIndex);
                        textEl.classList.remove('animate-pulse-fast');
                        
                        this.isRolling = false;
                        btn.disabled = false;
                        btn.classList.remove('opacity-50', 'cursor-not-allowed');
                    }, 500);

                }, duration);
            },

            handleWin(name, index) {
                const overlay = document.getElementById('result-overlay');
                const nameEl = document.getElementById('winner-name-display');
                nameEl.textContent = name;
                
                overlay.classList.remove('hidden');
                void overlay.offsetWidth;
                overlay.classList.remove('opacity-0');
                
                // Logic
                const removeChecked = document.getElementById('check-remove').checked;
                if (removeChecked) {
                    this.candidates.splice(index, 1);
                    this.refreshInputFromCandidates();
                }
                
                this.addToWinners(name);
            },

            closeResult() {
                const overlay = document.getElementById('result-overlay');
                overlay.classList.add('opacity-0');
                setTimeout(() => {
                    overlay.classList.add('hidden');
                }, 300);
            },

            handleTheme() {
                const toggle = document.getElementById('mode-toggle');
                const html = document.documentElement;
                
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    html.classList.add('dark');
                }

                toggle.addEventListener('click', () => {
                    html.classList.toggle('dark');
                    localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
     <!--  ç»“å°¾å¿…é¡»åŒ…å«çš„ä»£ç  -->
    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
</body>
</html>