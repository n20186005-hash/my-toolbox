<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Category Meta Tag -->
    <meta name="category" content="finance">
    <meta name="icon" content="ğŸ’°">
    <meta name="description" content="Professional Student Loan Calculator - Compare repayment options, calculate interest savings, and estimate APR based on credit usage.">
    <title>Student Loan Pro | åŠ©å­¦è´·æ¬¾è®¡ç®—å™¨ä¸“ä¸šç‰ˆ</title>
    
    <link rel="canonical" href="https://toolboxpro.top/modules/others/dream-plaza.html" />
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#3b82f6', hover: '#2563eb' }, /* Blue for Loans */
                        secondary: { DEFAULT: '#8b5cf6', hover: '#7c3aed' }, /* Violet */
                        surface: { light: '#ffffff', dark: '#1e293b' },
                        bg: { light: '#f0f9ff', dark: '#0f172a' } // Light Blue BG
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.4s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide::-webkit-scrollbar { display: none; }
            .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
            
            .glass {
                @apply bg-white/90 dark:bg-slate-800/90 backdrop-blur-lg border border-slate-200 dark:border-slate-700;
            }
            
            .input-field {
                @apply w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-sm;
            }
            
            .label-text {
                @apply text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 block uppercase tracking-wide;
            }

            .result-row {
                @apply flex justify-between items-center py-2 border-b border-slate-100 dark:border-slate-700/50 last:border-0;
            }
            
            .tab-btn {
                @apply px-4 py-1.5 rounded-full text-xs font-bold transition-all border;
            }
            .tab-btn.active {
                @apply bg-secondary text-white border-secondary;
            }
            .tab-btn.inactive {
                @apply bg-transparent text-slate-500 border-transparent hover:bg-slate-100 dark:hover:bg-slate-800;
            }
        }

        .currency-input-wrapper { position: relative; }
        .currency-input-wrapper::before {
            content: '$';
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-family: 'JetBrains Mono', monospace;
        }
        .currency-input-wrapper input { padding-left: 28px; }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-bg-light dark:bg-bg-dark min-h-screen font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300 overflow-x-hidden">

    <!-- Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0 opacity-40 dark:opacity-20">
        <div class="absolute top-[-10%] left-[-10%] w-[600px] h-[600px] bg-blue-200 rounded-full blur-[120px] mix-blend-multiply dark:mix-blend-screen"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-violet-300 rounded-full blur-[100px] mix-blend-multiply dark:mix-blend-screen"></div>
    </div>

    <div class="container mx-auto px-4 py-6 max-w-6xl relative z-10 flex flex-col min-h-screen">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-700 text-white flex items-center justify-center text-2xl shadow-lg shadow-blue-500/20">
                    <i class="fa fa-graduation-cap"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold tracking-tight text-slate-900 dark:text-white" data-i18n="title">Student Loan Pro</h1>
                    <p class="text-xs text-slate-500 font-medium" data-i18n="subtitle">åŠ©å­¦è´·æ¬¾åˆ©ç‡ä¸è¿˜æ¬¾ä¼°ç®—</p>
                </div>
            </div>

            <div class="flex items-center gap-2 bg-white dark:bg-slate-800 p-1.5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm">
                <select id="lang-selector" class="bg-transparent text-sm font-medium px-2 py-1 rounded focus:outline-none cursor-pointer text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700">
                    <option value="zh-CN">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</option>
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                </select>
                <div class="w-px h-5 bg-slate-300 dark:bg-slate-600 mx-1"></div>
                <button id="mode-toggle" class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-500 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                    <i class="fa fa-moon-o dark:hidden"></i>
                    <i class="fa fa-sun-o hidden dark:inline"></i>
                </button>
            </div>
        </header>

        <!-- Main Tool Area -->
        <div class="grid lg:grid-cols-12 gap-6 mb-12">
            
            <!-- Left Column: Inputs -->
            <main class="lg:col-span-4 flex flex-col gap-6">
                <div class="glass rounded-3xl shadow-lg overflow-hidden border-t-4 border-t-blue-500 p-6 space-y-5">
                    <h2 class="text-lg font-bold flex items-center gap-2 text-slate-800 dark:text-white">
                        <i class="fa fa-sliders text-blue-500"></i> <span data-i18n="h2_config">è´·æ¬¾é…ç½®</span>
                    </h2>

                    <!-- 1. Loan Details -->
                    <div>
                        <label class="label-text" data-i18n="lbl_amount">è´·æ¬¾é‡‘é¢</label>
                        <div class="currency-input-wrapper mb-3">
                            <input type="number" id="input-amount" class="input-field font-mono" value="20000" placeholder="10000" oninput="Calculator.calculate()">
                        </div>
                        
                        <div class="grid grid-cols-2 gap-3">
                            <div>
                                <label class="label-text" data-i18n="lbl_term">æœŸé™ (å¹´)</label>
                                <select id="input-term" class="input-field" onchange="Calculator.calculate()">
                                    <option value="5">5 Years</option>
                                    <option value="7">7 Years</option>
                                    <option value="10" selected>10 Years</option>
                                    <option value="15">15 Years</option>
                                    <option value="20">20 Years</option>
                                </select>
                            </div>
                            <div>
                                <label class="label-text" data-i18n="lbl_credit">ä¿¡ç”¨è¯„åˆ†</label>
                                <select id="input-credit" class="input-field" onchange="Calculator.calculate()">
                                    <option value="excellent" data-i18n="opt_excellent">æå¥½ (750+)</option>
                                    <option value="good" data-i18n="opt_good" selected>è‰¯å¥½ (700+)</option>
                                    <option value="fair" data-i18n="opt_fair">ä¸€èˆ¬ (650+)</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Repayment Mode -->
                    <div>
                        <label class="label-text" data-i18n="lbl_repayment_mode">åœ¨æ ¡è¿˜æ¬¾æ–¹å¼</label>
                        <select id="input-mode" class="input-field" onchange="Calculator.calculate()">
                            <option value="deferred" data-i18n="mode_deferred">ğŸ“… å»¶è¿Ÿè¿˜æ¬¾ (Deferred)</option>
                            <option value="interest_only" data-i18n="mode_interest">ğŸ“‰ åªè¿˜åˆ©æ¯ (Interest Only)</option>
                            <option value="partial" data-i18n="mode_partial">ğŸ’µ éƒ¨åˆ†è¿˜æ¬¾ ($25/mo)</option>
                            <option value="immediate" data-i18n="mode_immediate">âš¡ ç«‹å³è¿˜æœ¬ä»˜æ¯ (Immediate)</option>
                        </select>
                        <p class="text-[10px] text-slate-500 mt-1" id="mode-desc">...</p>
                    </div>

                    <!-- 3. Discounts -->
                    <div>
                        <label class="label-text" data-i18n="lbl_discounts">ä¼˜æƒ æŠ˜æ‰£</label>
                        <div class="space-y-2">
                            <label class="flex items-center gap-2 cursor-pointer p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition">
                                <input type="checkbox" id="check-autopay" class="w-4 h-4 text-blue-600 rounded border-slate-300 focus:ring-blue-500" onchange="Calculator.calculate()" checked>
                                <span class="text-sm text-slate-700 dark:text-slate-300" data-i18n="chk_autopay">è‡ªåŠ¨æ‰£æ¬¾ä¼˜æƒ  (-0.25%)</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-800 transition">
                                <input type="checkbox" id="check-member" class="w-4 h-4 text-blue-600 rounded border-slate-300 focus:ring-blue-500" onchange="Calculator.calculate()">
                                <span class="text-sm text-slate-700 dark:text-slate-300" data-i18n="chk_loyalty">ä¼šå‘˜/å®¶åº­ä¼˜æƒ  (-0.125%)</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Rate Range Preview -->
                <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-2xl p-4 border border-indigo-100 dark:border-indigo-800/30">
                    <div class="flex justify-between items-center mb-1">
                        <span class="text-xs font-bold text-indigo-600 dark:text-indigo-400 uppercase" data-i18n="lbl_est_apr">é¢„ä¼°å›ºå®šå¹´åŒ–åˆ©ç‡ (APR)</span>
                        <i class="fa fa-line-chart text-indigo-400"></i>
                    </div>
                    <div class="text-2xl font-mono font-bold text-indigo-700 dark:text-indigo-300">
                        <span id="rate-display">0.00%</span> <span class="text-sm font-normal text-indigo-500" data-i18n="lbl_fixed">Fixed</span>
                    </div>
                    <p class="text-[10px] text-indigo-400 mt-1" data-i18n="rate_disclaimer">*Rates depend on credit & term.</p>
                </div>
            </main>

            <!-- Right Column: Results -->
            <main class="lg:col-span-8 flex flex-col gap-6">
                <div class="glass rounded-3xl shadow-xl overflow-hidden min-h-[500px] flex flex-col">
                    
                    <div class="bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700 p-4 flex justify-between items-center">
                        <h2 class="font-bold text-slate-700 dark:text-slate-200" data-i18n="h2_analysis">è¿˜æ¬¾åˆ†æ</h2>
                        <!-- Simplified badge instead of tabs for this use case -->
                        <span class="px-3 py-1 rounded-full bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 text-xs font-bold">
                            <i class="fa fa-calendar-check-o mr-1"></i> <span id="term-badge">10 Years</span>
                        </span>
                    </div>

                    <div class="p-6 md:p-8 flex-grow flex flex-col gap-8 animate-fade-in">
                        
                        <!-- Main Comparison Cards -->
                        <div class="grid md:grid-cols-2 gap-6">
                            
                            <!-- In-School Phase -->
                            <div class="rounded-2xl border border-slate-200 dark:border-slate-700 p-5 space-y-4 bg-slate-50/50 dark:bg-slate-800/30">
                                <h4 class="text-xs font-bold text-slate-400 uppercase tracking-wider text-center" data-i18n="h4_phase1">åœ¨æ ¡æœŸé—´ (In School)</h4>
                                
                                <div class="space-y-2">
                                    <div class="result-row">
                                        <span class="text-sm text-slate-600 dark:text-slate-400" data-i18n="res_monthly">æ¯æœˆæ”¯ä»˜</span>
                                        <span class="font-mono font-bold text-slate-800 dark:text-white" id="res-school-monthly">$0</span>
                                    </div>
                                    <div class="result-row">
                                        <span class="text-sm text-slate-600 dark:text-slate-400" data-i18n="res_accrued">æ¯æœˆäº§ç”Ÿåˆ©æ¯</span>
                                        <span class="font-mono text-red-500" id="res-school-interest">$0</span>
                                    </div>
                                    <div class="pt-2 mt-2 border-t border-slate-100 dark:border-slate-700/50">
                                         <p class="text-[10px] text-slate-400 leading-tight" id="school-phase-desc">
                                            During the 48-month school period...
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <!-- Repayment Phase -->
                            <div class="rounded-2xl border-2 border-blue-500/30 p-5 space-y-4 bg-blue-50/30 dark:bg-blue-900/10 relative overflow-hidden">
                                <div class="absolute top-0 right-0 bg-blue-500 text-white text-[10px] px-3 py-1 rounded-bl-lg font-bold">FULL REPAYMENT</div>
                                <h4 class="text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider text-center" data-i18n="h4_phase2">æ¯•ä¸šå (Post School)</h4>
                                
                                <div class="space-y-2">
                                    <div class="result-row border-blue-100 dark:border-blue-800/30">
                                        <span class="text-sm text-slate-600 dark:text-slate-400" data-i18n="res_balance">èµ·å§‹ä½™é¢</span>
                                        <span class="font-mono text-slate-500" id="res-grad-balance">$0</span>
                                    </div>
                                    <div class="result-row border-blue-100 dark:border-blue-800/30">
                                        <span class="text-sm font-bold text-slate-700 dark:text-slate-300" data-i18n="res_monthly_full">å…¨é¢æœˆä¾›</span>
                                        <span class="text-2xl font-bold font-mono text-blue-700 dark:text-blue-400" id="res-grad-monthly">$0</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Highlights -->
                        <div class="grid grid-cols-3 gap-4">
                             <div class="bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-3 md:p-4 text-center border border-emerald-100 dark:border-emerald-800/30">
                                <div class="text-xs text-emerald-600 dark:text-emerald-400 uppercase tracking-wide mb-1" data-i18n="stat_rate">æœ€ç»ˆåˆ©ç‡</div>
                                <div class="text-xl md:text-2xl font-bold text-emerald-700 dark:text-emerald-400 font-mono" id="stat-final-rate">0%</div>
                            </div>
                            <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-3 md:p-4 text-center border border-indigo-100 dark:border-indigo-800/30">
                                <div class="text-xs text-indigo-600 dark:text-indigo-400 uppercase tracking-wide mb-1" data-i18n="stat_total_interest">æ€»åˆ©æ¯æˆæœ¬</div>
                                <div class="text-xl md:text-2xl font-bold text-indigo-700 dark:text-indigo-400 font-mono" id="stat-total-interest">$0</div>
                            </div>
                            <div class="bg-slate-100 dark:bg-slate-800/50 rounded-xl p-3 md:p-4 text-center border border-slate-200 dark:border-slate-700">
                                <div class="text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wide mb-1" data-i18n="stat_total_paid">è¿˜æ¬¾æ€»é¢</div>
                                <div class="text-xl md:text-2xl font-bold text-slate-700 dark:text-slate-300 font-mono" id="stat-total-paid">$0</div>
                            </div>
                        </div>
                        
                        <!-- Disclaimer -->
                         <p class="text-center text-xs text-slate-400" data-i18n="disclaimer">*Calculations assume a 48-month in-school period before full repayment begins. Interest accrues daily.</p>

                    </div>
                </div>
            </main>
        </div>

        <!-- Guide Section -->
        <section class="mb-12">
            <div class="glass rounded-2xl p-8 shadow-xl">
                <div class="grid md:grid-cols-2 gap-12">
                    <!-- Feature Introduction -->
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                            <i class="fa fa-book text-primary"></i> <span data-i18n="guide_title">è¿˜æ¬¾æ–¹å¼æŒ‡å—</span>
                        </h2>
                        <div class="space-y-6 text-slate-600 dark:text-slate-300 leading-relaxed">
                            <div>
                                <h3 class="font-bold text-lg text-slate-800 dark:text-slate-100 mb-2" data-i18n="guide_h_deferred">å»¶è¿Ÿè¿˜æ¬¾ (Deferred)</h3>
                                <p data-i18n="guide_p_deferred">åœ¨æ ¡æœŸé—´æ— éœ€ä»˜æ¬¾ã€‚ä½†åˆ©æ¯ä¼šæŒç»­äº§ç”Ÿï¼Œå¹¶åœ¨æ¯•ä¸šåç´¯åŠ åˆ°æœ¬é‡‘ä¸­ï¼ˆèµ„æœ¬åŒ–ï¼‰ï¼Œè¿™æ˜¯çŸ­æœŸå‹åŠ›æœ€å°ä½†é•¿æœŸæˆæœ¬æœ€é«˜çš„é€‰æ‹©ã€‚</p>
                            </div>
                            
                            <div>
                                <h3 class="font-bold text-lg text-slate-800 dark:text-slate-100 mb-2" data-i18n="guide_h_interest">åªè¿˜åˆ©æ¯ (Interest Only)</h3>
                                <p data-i18n="guide_p_interest">åœ¨æ ¡æœŸé—´æ¯æœˆæ”¯ä»˜äº§ç”Ÿçš„åˆ©æ¯ã€‚è¿™å¯ä»¥é˜²æ­¢æ¯•ä¸šåè´·æ¬¾ä½™é¢å¢åŠ ï¼Œæœ‰æ•ˆé™ä½æ€»ä½“åˆ©æ¯æˆæœ¬ã€‚</p>
                            </div>

                            <div>
                                <h3 class="font-bold text-lg text-slate-800 dark:text-slate-100 mb-2" data-i18n="guide_h_partial">å›ºå®šè¿˜æ¬¾ (Partial)</h3>
                                <p data-i18n="guide_p_partial">åœ¨æ ¡æœŸé—´æ¯æœˆæ”¯ä»˜å›ºå®šçš„ $25ã€‚è™½ç„¶ä¸èƒ½è¦†ç›–æ‰€æœ‰åˆ©æ¯ï¼Œä½†æ¯”å®Œå…¨ä¸ä»˜è¦å¥½ï¼Œèƒ½ç¨å¾®å‡å°‘æ¯•ä¸šæ—¶çš„å€ºåŠ¡è´Ÿæ‹…ã€‚</p>
                            </div>
                        </div>
                    </div>

                    <!-- Tips -->
                    <div>
                        <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                            <i class="fa fa-lightbulb-o text-primary"></i> <span data-i18n="tips_title">çœé’±æŠ€å·§</span>
                        </h2>
                        <div class="space-y-4">
                            <div class="bg-green-50 dark:bg-green-900/20 rounded-xl p-4 border border-green-100 dark:border-green-800/30">
                                <h4 class="font-bold text-green-800 dark:text-green-300 mb-2" data-i18n="tip_h_autopay">è‡ªåŠ¨æ‰£æ¬¾ (Autopay)</h4>
                                <p class="text-sm text-green-700 dark:text-green-400" data-i18n="tip_p_autopay">å¤§å¤šæ•°ç§äººè´·æ¬¾æœºæ„æä¾› 0.25% çš„åˆ©ç‡æŠ˜æ‰£ï¼Œåªè¦æ‚¨è®¾ç½®è‡ªåŠ¨ä»é“¶è¡Œè´¦æˆ·æ‰£æ¬¾ã€‚</p>
                            </div>

                            <div class="bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 border border-blue-100 dark:border-blue-800/30">
                                <h4 class="font-bold text-blue-800 dark:text-blue-300 mb-2" data-i18n="tip_h_cosigner">å…±åŒç­¾ç½²äºº (Cosigner)</h4>
                                <p class="text-sm text-blue-700 dark:text-blue-400" data-i18n="tip_p_cosigner">å¦‚æœæ‚¨çš„ä¿¡ç”¨å†å²è¾ƒçŸ­ï¼Œæ·»åŠ ä¿¡ç”¨è‰¯å¥½çš„å…±åŒç­¾ç½²äººå¯ä»¥å°†è·æ‰¹æ¦‚ç‡æé«˜ 4 å€ï¼Œå¹¶è·å¾—æ›´ä½çš„åˆ©ç‡ã€‚</p>
                            </div>
                            
                            <div class="bg-indigo-50 dark:bg-indigo-900/20 rounded-xl p-4 border border-indigo-100 dark:border-indigo-800/30">
                                <h4 class="font-bold text-indigo-800 dark:text-indigo-300 mb-2" data-i18n="tip_h_term">é€‰æ‹©æ›´çŸ­æœŸé™</h4>
                                <p class="text-sm text-indigo-700 dark:text-indigo-400" data-i18n="tip_p_term">è™½ç„¶15å¹´æœŸçš„æœˆä¾›æ›´ä½ï¼Œä½†5å¹´æˆ–10å¹´æœŸçš„åˆ©ç‡é€šå¸¸æ›´ä½ï¼Œä¸”æ€»åˆ©æ¯æ”¯å‡ºä¼šå¤§å¹…å‡å°‘ã€‚</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center text-xs text-slate-400 py-6">
            <p>&copy; <span id="year"></span> Student Loan Pro. <span data-i18n="footer_text">Results are estimates for educational purposes.</span></p>
        </footer>

    </div>

    <script>
        // --- Localization Data ---
        const i18nData = {
            'zh-CN': {
                title: "Student Loan Pro", subtitle: "åŠ©å­¦è´·æ¬¾åˆ©ç‡ä¸è¿˜æ¬¾ä¼°ç®—",
                h2_config: "è´·æ¬¾é…ç½®",
                lbl_amount: "è´·æ¬¾é‡‘é¢", lbl_term: "æœŸé™ (å¹´)", lbl_credit: "ä¿¡ç”¨è¯„åˆ†",
                opt_excellent: "æå¥½ (750+)", opt_good: "è‰¯å¥½ (700+)", opt_fair: "ä¸€èˆ¬ (650+)",
                lbl_repayment_mode: "åœ¨æ ¡è¿˜æ¬¾æ–¹å¼",
                mode_deferred: "ğŸ“… å»¶è¿Ÿè¿˜æ¬¾ (Deferred)", mode_interest: "ğŸ“‰ åªè¿˜åˆ©æ¯ (Interest Only)", 
                mode_partial: "ğŸ’µ å›ºå®šè¿˜æ¬¾ ($25/mo)", mode_immediate: "âš¡ ç«‹å³è¿˜æœ¬ä»˜æ¯ (Immediate)",
                lbl_discounts: "ä¼˜æƒ æŠ˜æ‰£",
                chk_autopay: "è‡ªåŠ¨æ‰£æ¬¾ä¼˜æƒ  (-0.25%)", chk_loyalty: "ä¼šå‘˜/å®¶åº­ä¼˜æƒ  (-0.125%)",
                lbl_est_apr: "é¢„ä¼°å›ºå®šå¹´åŒ–åˆ©ç‡ (APR)", lbl_fixed: "å›ºå®š",
                rate_disclaimer: "*åˆ©ç‡ä»…ä¾›å‚è€ƒï¼Œå®é™…å–å†³äºä¿¡ç”¨èµ„è´¨",
                h2_analysis: "è¿˜æ¬¾åˆ†æ",
                h4_phase1: "åœ¨æ ¡æœŸé—´ (In School)", h4_phase2: "æ¯•ä¸šå (Post School)",
                res_monthly: "æ¯æœˆæ”¯ä»˜", res_accrued: "æ¯æœˆäº§ç”Ÿåˆ©æ¯",
                res_balance: "æ¯•ä¸šæ—¶ä½™é¢", res_monthly_full: "æ¯•ä¸šåæœˆä¾›",
                stat_rate: "æœ€ç»ˆåˆ©ç‡", stat_total_interest: "æ€»åˆ©æ¯æˆæœ¬", stat_total_paid: "è¿˜æ¬¾æ€»é¢",
                disclaimer: "*è®¡ç®—å‡è®¾48ä¸ªæœˆçš„åœ¨æ ¡æœŸã€‚åˆ©æ¯æŒ‰æ—¥å¤åˆ©è®¡ç®—ã€‚",
                guide_title: "è¿˜æ¬¾æ–¹å¼æŒ‡å—",
                guide_h_deferred: "å»¶è¿Ÿè¿˜æ¬¾ (Deferred)", guide_p_deferred: "åœ¨æ ¡æœŸé—´æ— éœ€ä»˜æ¬¾ã€‚ä½†åˆ©æ¯ä¼šæŒç»­äº§ç”Ÿï¼Œå¹¶åœ¨æ¯•ä¸šåç´¯åŠ åˆ°æœ¬é‡‘ä¸­ï¼ˆèµ„æœ¬åŒ–ï¼‰ã€‚",
                guide_h_interest: "åªè¿˜åˆ©æ¯ (Interest Only)", guide_p_interest: "åœ¨æ ¡æœŸé—´æ¯æœˆæ”¯ä»˜äº§ç”Ÿçš„åˆ©æ¯ã€‚è¿™å¯ä»¥é˜²æ­¢æ¯•ä¸šåè´·æ¬¾ä½™é¢å¢åŠ ã€‚",
                guide_h_partial: "å›ºå®šè¿˜æ¬¾ (Partial)", guide_p_partial: "åœ¨æ ¡æœŸé—´æ¯æœˆæ”¯ä»˜å›ºå®šçš„ $25ã€‚èƒ½ç¨å¾®å‡å°‘æ¯•ä¸šæ—¶çš„å€ºåŠ¡è´Ÿæ‹…ã€‚",
                tips_title: "çœé’±æŠ€å·§",
                tip_h_autopay: "è‡ªåŠ¨æ‰£æ¬¾ (Autopay)", tip_p_autopay: "è®¾ç½®è‡ªåŠ¨æ‰£æ¬¾é€šå¸¸å¯è·å¾— 0.25% çš„åˆ©ç‡å‡å…ã€‚",
                tip_h_cosigner: "å…±åŒç­¾ç½²äºº (Cosigner)", tip_p_cosigner: "æ·»åŠ ä¿¡ç”¨è‰¯å¥½çš„å…±åŒç­¾ç½²äººå¯ä»¥å°†è·æ‰¹æ¦‚ç‡æé«˜ 4 å€ã€‚",
                tip_h_term: "é€‰æ‹©æ›´çŸ­æœŸé™", tip_p_term: "çŸ­æœŸè´·æ¬¾é€šå¸¸åˆ©ç‡æ›´ä½ï¼Œæ€»åˆ©æ¯æ”¯å‡ºå¤§å¹…å‡å°‘ã€‚",
                desc_deferred: "åœ¨æ ¡æœŸé—´æ”¯ä»˜ $0ã€‚åˆ©æ¯å…¨é¢ç´¯ç§¯ã€‚",
                desc_interest: "æ”¯ä»˜äº§ç”Ÿçš„åˆ©æ¯ã€‚ä½™é¢ä¿æŒä¸å˜ã€‚",
                desc_partial: "æ¯æœˆæ”¯ä»˜ $25ã€‚å‰©ä½™åˆ©æ¯ç´¯ç§¯ã€‚",
                desc_immediate: "ç«‹å³å¼€å§‹å…¨é¢æœ¬æ¯è¿˜æ¬¾ã€‚",
                footer_text: "ç»“æœä»…ä¾›å‚è€ƒã€‚"
            },
            'en': {
                title: "Student Loan Pro", subtitle: "Rate & Repayment Estimator",
                h2_config: "Loan Configuration",
                lbl_amount: "Loan Amount", lbl_term: "Term (Years)", lbl_credit: "Credit Score",
                opt_excellent: "Excellent (750+)", opt_good: "Good (700+)", opt_fair: "Fair (650+)",
                lbl_repayment_mode: "In-School Repayment",
                mode_deferred: "ğŸ“… Deferred", mode_interest: "ğŸ“‰ Interest Only", 
                mode_partial: "ğŸ’µ Partial ($25/mo)", mode_immediate: "âš¡ Immediate",
                lbl_discounts: "Discounts",
                chk_autopay: "Autopay Discount (-0.25%)", chk_loyalty: "Member Discount (-0.125%)",
                lbl_est_apr: "Est. Fixed APR", lbl_fixed: "Fixed",
                rate_disclaimer: "*Rates depend on credit & term.",
                h2_analysis: "Repayment Analysis",
                h4_phase1: "In School (48 Months)", h4_phase2: "Post School (Repayment)",
                res_monthly: "Monthly Payment", res_accrued: "Interest Accrued",
                res_balance: "Balance at Graduation", res_monthly_full: "Full Monthly Pay",
                stat_rate: "Final Rate", stat_total_interest: "Total Interest Cost", stat_total_paid: "Total Amount Paid",
                disclaimer: "*Assumes 48-month in-school period. Interest capitalizes at end of school.",
                guide_title: "Repayment Modes",
                guide_h_deferred: "Deferred", guide_p_deferred: "Pay nothing while in school. Interest accrues and is added to your principal (capitalized) when you graduate.",
                guide_h_interest: "Interest Only", guide_p_interest: "Pay only the interest generated each month. Your balance stays the same until graduation.",
                guide_h_partial: "Partial", guide_p_partial: "Pay a fixed $25/month. Helps offset some interest accrual.",
                tips_title: "Money Saving Tips",
                tip_h_autopay: "Autopay", tip_p_autopay: "Get a 0.25% rate discount just for setting up automatic payments.",
                tip_h_cosigner: "Cosigner", tip_p_cosigner: "Applicants with a cosigner are 4x more likely to get approved and often get better rates.",
                tip_h_term: "Shorter Terms", tip_p_term: "Choosing a 5 or 10-year term usually secures a lower interest rate than a 15-year term.",
                desc_deferred: "Pay $0 while in school. Interest piles up.",
                desc_interest: "Pay interest only. Balance stays flat.",
                desc_partial: "Pay $25 flat. Remaining interest piles up.",
                desc_immediate: "Start full Principal + Interest payments now.",
                footer_text: "Results are estimates."
            }
        };

        // --- Calculation Engine ---
        const Calculator = {
            // Base Rates Matrix (Credit Score vs Term)
            // Just for simulation
            BASE_RATES: {
                'excellent': { 5: 4.50, 7: 4.90, 10: 5.25, 15: 5.95, 20: 6.50 },
                'good':      { 5: 5.50, 7: 5.95, 10: 6.45, 15: 7.20, 20: 7.90 },
                'fair':      { 5: 7.50, 7: 8.20, 10: 8.95, 15: 9.99, 20: 10.99 }
            },

            calculate() {
                // 1. Get Inputs
                const amount = parseFloat(document.getElementById('input-amount').value) || 0;
                const termYears = parseInt(document.getElementById('input-term').value);
                const credit = document.getElementById('input-credit').value;
                const mode = document.getElementById('input-mode').value;
                const hasAutopay = document.getElementById('check-autopay').checked;
                const hasMember = document.getElementById('check-member').checked;

                // 2. Determine Rate
                let baseRate = this.BASE_RATES[credit][termYears] || 6.0;
                
                // Adjust for mode (Immediate usually gets slightly lower rate in some products, but let's keep simple)
                // Apply Discounts
                let discount = 0;
                if(hasAutopay) discount += 0.25;
                if(hasMember) discount += 0.125;

                let finalRate = Math.max(1.0, baseRate - discount); // Floor at 1%
                let monthlyRate = (finalRate / 100) / 12;

                // 3. Simulation Variables
                const schoolMonths = 48; // Standard 4 years
                const repaymentMonths = termYears * 12;
                
                // 4. In-School Phase Calculation
                let inSchoolMonthlyPay = 0;
                let balanceAtGraduation = amount;
                let totalPaidInSchool = 0;
                let monthlyInterest = amount * monthlyRate; // Simple interest estimate for display

                if (mode === 'immediate') {
                    // Full P&I
                    inSchoolMonthlyPay = this.pmt(monthlyRate, repaymentMonths, amount);
                    // Note: If immediate, "repayment" starts now. So school period is just part of the term.
                    // To fit the UI model:
                    balanceAtGraduation = this.balanceAfter(amount, monthlyRate, inSchoolMonthlyPay, schoolMonths);
                    totalPaidInSchool = inSchoolMonthlyPay * schoolMonths;
                } else if (mode === 'interest_only') {
                    inSchoolMonthlyPay = monthlyInterest;
                    balanceAtGraduation = amount; // Principal doesn't change
                    totalPaidInSchool = inSchoolMonthlyPay * schoolMonths;
                } else if (mode === 'partial') {
                    inSchoolMonthlyPay = 25;
                    // Interest accrues: (Interest - 25) adds to balance
                    let accrual = (monthlyInterest - 25);
                    // Simple compounding approximation for school period
                    // New Balance = P * (1+r)^n - (PMT * ...)
                    // Let's iterate for accuracy
                    let tempBal = amount;
                    for(let i=0; i<schoolMonths; i++) {
                        let interest = tempBal * monthlyRate;
                        tempBal = tempBal + interest - 25;
                    }
                    balanceAtGraduation = tempBal;
                    totalPaidInSchool = 25 * schoolMonths;
                } else { // deferred
                    inSchoolMonthlyPay = 0;
                    // Compound interest
                    balanceAtGraduation = amount * Math.pow((1 + monthlyRate), schoolMonths);
                    totalPaidInSchool = 0;
                }

                // 5. Post-School Phase
                let gradMonthlyPay = 0;
                let remainingTerm = repaymentMonths; // If immediate, term reduced by school months? 
                // Usually immediate means term starts now. 
                // Deferred means term starts AFTER school.
                // Let's assume Term applies to Repayment Period for Deferred/Int/Partial.
                // For Immediate, it includes school.

                if (mode === 'immediate') {
                    gradMonthlyPay = inSchoolMonthlyPay; // Same payment
                    remainingTerm = repaymentMonths - schoolMonths;
                    if(remainingTerm < 0) remainingTerm = 0;
                } else {
                    // Recalculate PMT based on new balance and full term
                    gradMonthlyPay = this.pmt(monthlyRate, repaymentMonths, balanceAtGraduation);
                }

                const totalPaidPostSchool = gradMonthlyPay * (mode === 'immediate' ? remainingTerm : repaymentMonths);
                const totalPaid = totalPaidInSchool + totalPaidPostSchool;
                const totalInterest = totalPaid - amount;

                // 6. Update UI
                this.updateText('rate-display', finalRate.toFixed(3) + '%');
                this.updateText('stat-final-rate', finalRate.toFixed(3) + '%');
                
                this.updateCurrency('res-school-monthly', inSchoolMonthlyPay);
                this.updateCurrency('res-school-interest', monthlyInterest); // Initial monthly interest
                
                this.updateCurrency('res-grad-balance', balanceAtGraduation);
                this.updateCurrency('res-grad-monthly', gradMonthlyPay);
                
                this.updateCurrency('stat-total-interest', totalInterest);
                this.updateCurrency('stat-total-paid', totalPaid);

                document.getElementById('term-badge').textContent = termYears + " Years";
                
                // Update dynamic descriptions
                const texts = i18nData[App.currentLang] || i18nData['en'];
                const modeKey = 'desc_' + (mode === 'interest_only' ? 'interest' : mode);
                if(texts[modeKey]) document.getElementById('mode-desc').textContent = texts[modeKey];
                
                const schoolDesc = mode === 'immediate' 
                    ? (App.currentLang === 'zh-CN' ? "ç«‹å³å¼€å§‹è¿˜æ¬¾ï¼ŒæœŸé™åŒ…å«åœ¨æ ¡æ—¶é—´ã€‚" : "Payments start immediately. School time reduces term.") 
                    : (App.currentLang === 'zh-CN' ? "48ä¸ªæœˆåœ¨æ ¡æœŸé—´..." : "During the 48-month school period...");
                document.getElementById('school-phase-desc').textContent = schoolDesc;
            },

            // Payment Formula
            pmt(rate, nper, pv) {
                if (rate === 0) return pv / nper;
                return (pv * rate) / (1 - Math.pow(1 + rate, -nper));
            },
            
            // Remaining Balance Formula
            balanceAfter(pv, rate, pmt, n_paid) {
                if (rate === 0) return pv - (pmt * n_paid);
                return pv * Math.pow(1+rate, n_paid) - pmt * ((Math.pow(1+rate, n_paid) - 1) / rate);
            },

            updateText(id, txt) {
                const el = document.getElementById(id);
                if(el) el.textContent = txt;
            },
            
            updateCurrency(id, val) {
                const el = document.getElementById(id);
                if(el) el.textContent = '$' + val.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0});
            }
        };

        // --- App Logic ---
        const App = {
            currentLang: 'zh-CN',

            init() {
                const urlParams = new URLSearchParams(window.location.search);
                this.currentLang = urlParams.get('lang') || 'zh-CN';
                document.getElementById('lang-selector').value = this.currentLang;

                // å¦‚æœç¶²å€æ²’æœ‰åƒæ•¸ï¼Œè‡ªå‹•è£œä¸Šé è¨­èªè¨€åƒæ•¸
                if (!urlParams.has('lang')) {
                    this.updateUrl(this.currentLang);
                }

                this.handleTheme();
                this.setupLanguage();
                this.updateYear();
                this.translateUI(this.currentLang);
                
                Calculator.calculate();
            },

            updateYear() {
                document.getElementById('year').textContent = new Date().getFullYear();
            },

            // æ–°å¢æ›´æ–° URL çš„åŠŸèƒ½
            updateUrl(lang) {
                try {
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', lang);
                    window.history.pushState({}, '', newUrl);
                } catch (e) {
                    console.log('URL update failed:', e);
                }
            },

            setupLanguage() {
                document.getElementById('lang-selector').addEventListener('change', (e) => {
                    this.currentLang = e.target.value;
                    this.updateUrl(this.currentLang); // åˆ‡æ›æ™‚æ›´æ–°ç¶²å€
                    this.translateUI(this.currentLang);
                    Calculator.calculate();
                });
            },

            translateUI(lang) {
                const data = i18nData[lang] || i18nData['en'];
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(data[key]) el.innerHTML = data[key];
                });
            },

            handleTheme() {
                const toggle = document.getElementById('mode-toggle');
                const html = document.documentElement;
                
                // Default to light or system
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    html.classList.add('dark');
                }

                toggle.addEventListener('click', () => {
                    html.classList.toggle('dark');
                    localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
     <!--  ç»“å°¾å¿…é¡»åŒ…å«çš„ä»£ç  -->
    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
</body>
</html>