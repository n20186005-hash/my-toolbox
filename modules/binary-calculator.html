<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="binary_calculator">
    <meta name="category" content="Math">
    <meta name="icon" content="ğŸ”¢">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="Binary Calculator">
    <meta name="description" content="Perform binary arithmetic operations (addition, subtraction, multiplication, division) and conversions.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="äºŒè¿›åˆ¶è®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="æ‰§è¡ŒäºŒè¿›åˆ¶ç®—æœ¯è¿ç®—ï¼ˆåŠ ã€å‡ã€ä¹˜ã€é™¤ï¼‰å’Œè½¬æ¢ã€‚">
    
    <meta name="lang-title-zh-TW" content="äºŒé€²åˆ¶è¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="åŸ·è¡ŒäºŒé€²åˆ¶ç®—è¡“é‹ç®—ï¼ˆåŠ ã€æ¸›ã€ä¹˜ã€é™¤ï¼‰å’Œè½‰æ›ã€‚">
    
    <meta name="lang-title-ja" content="äºŒé€²æ•°è¨ˆç®—æ©Ÿ">
    <meta name="lang-description-ja" content="äºŒé€²æ•°ã®ç®—è¡“æ¼”ç®—ï¼ˆåŠ ç®—ã€æ¸›ç®—ã€ä¹—ç®—ã€é™¤ç®—ï¼‰ã¨å¤‰æ›ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚">
    
    <meta name="lang-title-ru" content="Ğ‘Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€">
    <meta name="lang-description-ru" content="Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞ¹Ñ‚Ğµ Ğ±Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğµ Ğ°Ñ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (ÑĞ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ²Ñ‹Ñ‡Ğ¸Ñ‚Ğ°Ğ½Ğ¸Ğµ, ÑƒĞ¼Ğ½Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ, Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ) Ğ¸ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .calculator-display { background: #f8fafc; padding: 15px; border-radius: 8px; margin: 15px 0; text-align: right; font-family: monospace; font-size: 1.2rem; min-height: 2rem; }
        .button-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px 0; }
        .calc-btn { padding: 10px; border: none; border-radius: 6px; background: #e2e8f0; cursor: pointer; font-size: 1rem; transition: all 0.2s; }
        .calc-btn:hover { background: #cbd5e1; }
        .operator-btn { background: #94a3b8; color: white; }
        .operator-btn:hover { background: #64748b; }
        .clear-btn { background: #f87171; color: white; }
        .clear-btn:hover { background: #ef4444; }
        .convert-section { margin-top: 20px; padding-top: 20px; border-top: 1px solid #e2e8f0; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="binary_calculator" 
         data-category="number conversion" 
         data-title="Binary Calculator" 
         data-icon="ğŸ”¢">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="binary-lang" onchange="BinaryCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ”¢ Binary Calculator</h2>
        
        <!-- è®¡ç®—å™¨æ˜¾ç¤ºåŒºåŸŸ -->
        <div class="calculator-display" id="binary-display">0</div>
        
        <!-- è®¡ç®—å™¨æŒ‰é’®åŒºåŸŸ -->
        <div class="button-grid">
            <button class="calc-btn clear-btn" onclick="BinaryCalc.clear()" data-i18n="clear">C</button>
            <button class="calc-btn" onclick="BinaryCalc.backspace()" data-i18n="backspace">âŒ«</button>
            <button class="calc-btn operator-btn" onclick="BinaryCalc.setOperator('Ã·')" data-i18n="divide">Ã·</button>
            <button class="calc-btn operator-btn" onclick="BinaryCalc.setOperator('Ã—')" data-i18n="multiply">Ã—</button>
            
            <button class="calc-btn" onclick="BinaryCalc.append('1')">1</button>
            <button class="calc-btn" onclick="BinaryCalc.append('0')">0</button>
            <button class="calc-btn operator-btn" onclick="BinaryCalc.setOperator('-')" data-i18n="subtract">âˆ’</button>
            <button class="calc-btn operator-btn" onclick="BinaryCalc.setOperator('+')" data-i18n="add">+</button>
            
            <button class="calc-btn" onclick="BinaryCalc.append(' ')" data-i18n="space">Space</button>
            <button class="calc-btn" onclick="BinaryCalc.convert('decimal')" data-i18n="to_decimal">â†’ Decimal</button>
            <button class="calc-btn" onclick="BinaryCalc.convert('hex')" data-i18n="to_hex">â†’ Hex</button>
            <button class="calc-btn operator-btn" onclick="BinaryCalc.calculate()" data-i18n="equals">=</button>
        </div>
        
        <!-- è½¬æ¢ç»“æœåŒºåŸŸ -->
        <div class="convert-section">
            <h3 class="text-lg font-semibold mb-3 text-gray-700" data-i18n="conversion_results">Conversion Results</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="decimal_result">Decimal:</label>
                    <div id="decimal-result" class="bg-gray-50 p-2 rounded text-mono">-</div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="hex_result">Hexadecimal:</label>
                    <div id="hex-result" class="bg-gray-50 p-2 rounded text-mono">-</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const BinaryCalc = {
            // å¤šè¯­è¨€æ–‡æœ¬æ˜ å°„
            translations: {
                en: {
                    title: "ğŸ”¢ Binary Calculator",
                    clear: "C",
                    backspace: "âŒ«",
                    divide: "Ã·",
                    multiply: "Ã—",
                    subtract: "âˆ’",
                    add: "+",
                    space: "Space",
                    to_decimal: "â†’ Decimal",
                    to_hex: "â†’ Hex",
                    equals: "=",
                    conversion_results: "Conversion Results",
                    decimal_result: "Decimal:",
                    hex_result: "Hexadecimal:",
                    error: "Error",
                    invalid_binary: "Invalid binary number"
                },
                "zh-CN": {
                    title: "ğŸ”¢ äºŒè¿›åˆ¶è®¡ç®—å™¨",
                    clear: "æ¸…é™¤",
                    backspace: "é€€æ ¼",
                    divide: "Ã·",
                    multiply: "Ã—",
                    subtract: "âˆ’",
                    add: "+",
                    space: "ç©ºæ ¼",
                    to_decimal: "â†’ åè¿›åˆ¶",
                    to_hex: "â†’ åå…­è¿›åˆ¶",
                    equals: "=",
                    conversion_results: "è½¬æ¢ç»“æœ",
                    decimal_result: "åè¿›åˆ¶ï¼š",
                    hex_result: "åå…­è¿›åˆ¶ï¼š",
                    error: "é”™è¯¯",
                    invalid_binary: "æ— æ•ˆçš„äºŒè¿›åˆ¶æ•°"
                },
                "zh-TW": {
                    title: "ğŸ”¢ äºŒé€²åˆ¶è¨ˆç®—å™¨",
                    clear: "æ¸…é™¤",
                    backspace: "é€€æ ¼",
                    divide: "Ã·",
                    multiply: "Ã—",
                    subtract: "âˆ’",
                    add: "+",
                    space: "ç©ºæ ¼",
                    to_decimal: "â†’ åé€²åˆ¶",
                    to_hex: "â†’ åå…­é€²åˆ¶",
                    equals: "=",
                    conversion_results: "è½‰æ›çµæœ",
                    decimal_result: "åé€²åˆ¶ï¼š",
                    hex_result: "åå…­é€²åˆ¶ï¼š",
                    error: "éŒ¯èª¤",
                    invalid_binary: "ç„¡æ•ˆçš„äºŒé€²åˆ¶æ•¸"
                },
                ja: {
                    title: "ğŸ”¢ äºŒé€²æ•°è¨ˆç®—æ©Ÿ",
                    clear: "ã‚¯ãƒªã‚¢",
                    backspace: "æˆ»ã‚‹",
                    divide: "Ã·",
                    multiply: "Ã—",
                    subtract: "âˆ’",
                    add: "+",
                    space: "ã‚¹ãƒšãƒ¼ã‚¹",
                    to_decimal: "â†’ 10é€²æ•°",
                    to_hex: "â†’ 16é€²æ•°",
                    equals: "=",
                    conversion_results: "å¤‰æ›çµæœ",
                    decimal_result: "10é€²æ•°ï¼š",
                    hex_result: "16é€²æ•°ï¼š",
                    error: "ã‚¨ãƒ©ãƒ¼",
                    invalid_binary: "ç„¡åŠ¹ãªäºŒé€²æ•°"
                },
                ru: {
                    title: "ğŸ”¢ Ğ‘Ğ¸Ğ½Ğ°Ñ€Ğ½Ñ‹Ğ¹ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€",
                    clear: "Ğ¡",
                    backspace: "âŒ«",
                    divide: "Ã·",
                    multiply: "Ã—",
                    subtract: "âˆ’",
                    add: "+",
                    space: "ĞŸÑ€Ğ¾Ğ±ĞµĞ»",
                    to_decimal: "â†’ Ğ”ĞµÑÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹",
                    to_hex: "â†’ Ğ¨ĞµÑÑ‚Ğ½Ğ°Ğ´Ñ†Ğ°Ñ‚ĞµÑ€Ğ¸Ñ‡Ğ½Ñ‹Ğ¹",
                    equals: "=",
                    conversion_results: "Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ñ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ",
                    decimal_result: "Ğ”ĞµÑÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹:",
                    hex_result: "Ğ¨ĞµÑÑ‚Ğ½Ğ°Ğ´Ñ†Ğ°Ñ‚ĞµÑ€Ğ¸Ñ‡Ğ½Ñ‹Ğ¹:",
                    error: "ĞÑˆĞ¸Ğ±ĞºĞ°",
                    invalid_binary: "ĞĞµĞ²ĞµÑ€Ğ½Ğ¾Ğµ Ğ´Ğ²Ğ¾Ğ¸Ñ‡Ğ½Ğ¾Ğµ Ñ‡Ğ¸ÑĞ»Ğ¾"
                }
            },

            // è®¡ç®—å™¨çŠ¶æ€
            state: {
                display: "0",
                firstOperand: null,
                operator: null,
                waitingForSecondOperand: false
            },

            // åˆå§‹åŒ–
            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang();
                    return;
                }
                this.updateConversionResults();
            },

            // åˆ‡æ¢è¯­è¨€
            changeLang: function() {
                const lang = document.getElementById('binary-lang').value;
                const elements = document.querySelectorAll('[data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.translations[lang] && this.translations[lang][key]) {
                        el.textContent = this.translations[lang][key];
                    }
                });
            },

            // è¿½åŠ æ•°å­—åˆ°æ˜¾ç¤º
            append: function(digit) {
                const { waitingForSecondOperand } = this.state;

                if (waitingForSecondOperand) {
                    this.state.display = digit;
                    this.state.waitingForSecondOperand = false;
                } else {
                    this.state.display = this.state.display === "0" ? digit : this.state.display + digit;
                }

                this.updateDisplay();
                this.updateConversionResults();
            },

            // è®¾ç½®è¿ç®—ç¬¦
            setOperator: function(nextOperator) {
                const { firstOperand, display, operator } = this.state;
                const inputValue = this.parseBinary(display);

                // å¦‚æœå·²æœ‰è¿ç®—ç¬¦ï¼Œå…ˆè®¡ç®—ç»“æœ
                if (operator && this.state.waitingForSecondOperand) {
                    this.state.operator = nextOperator;
                    return;
                }

                // å­˜å‚¨ç¬¬ä¸€ä¸ªæ“ä½œæ•°
                if (firstOperand === null && !isNaN(inputValue)) {
                    this.state.firstOperand = inputValue;
                } else if (operator) {
                    // è®¡ç®—ç»“æœ
                    const result = this.calculate(firstOperand, inputValue, operator);
                    this.state.display = this.formatBinary(result);
                    this.state.firstOperand = result;
                    this.updateConversionResults();
                }

                this.state.waitingForSecondOperand = true;
                this.state.operator = nextOperator;
                this.updateDisplay();
            },

            // è®¡ç®—ç»“æœ
            calculate: function(first, second, operator) {
                if (isNaN(first) || isNaN(second)) return "0";
                let result;
                switch (operator) {
                    case "+":
                        result = first + second;
                        break;
                    case "âˆ’":
                        result = first - second;
                        break;
                    case "Ã—":
                        result = first * second;
                        break;
                    case "Ã·":
                        if (second === 0) {
                            return this.translations[document.getElementById('binary-lang').value].error;
                        }
                        result = Math.floor(first / second); // äºŒè¿›åˆ¶é™¤æ³•å–æ•´æ•°
                        break;
                    default:
                        return second;
                }
                return result;
            },

            // æ¸…é™¤æ˜¾ç¤º
            clear: function() {
                this.state.display = "0";
                this.state.firstOperand = null;
                this.state.operator = null;
                this.state.waitingForSecondOperand = false;
                this.updateDisplay();
                this.updateConversionResults();
            },

            // é€€æ ¼
            backspace: function() {
                const { display } = this.state;
                this.state.display = display.length > 1 ? display.slice(0, -1) : "0";
                this.updateDisplay();
                this.updateConversionResults();
            },

            // è½¬æ¢ä¸ºå…¶ä»–è¿›åˆ¶
            convert: function(target) {
                const inputValue = this.parseBinary(this.state.display);
                if (isNaN(inputValue)) {
                    alert(this.translations[document.getElementById('binary-lang').value].invalid_binary);
                    return;
                }

                if (target === "decimal") {
                    this.state.display = inputValue.toString();
                } else if (target === "hex") {
                    this.state.display = inputValue.toString(16).toUpperCase();
                }

                this.updateDisplay();
                this.updateConversionResults();
            },

            // è§£æäºŒè¿›åˆ¶æ•°
            parseBinary: function(binaryStr) {
                // ç§»é™¤ç©ºæ ¼
                const str = binaryStr.replace(/\s/g, '');
                // æ£€æŸ¥æ˜¯å¦ä¸ºæœ‰æ•ˆçš„äºŒè¿›åˆ¶æ•°
                if (!/^[01]+$/.test(str) && str !== "0") {
                    return NaN;
                }
                return parseInt(str, 2);
            },

            // æ ¼å¼åŒ–äºŒè¿›åˆ¶æ•°ï¼ˆæ¯4ä½åŠ ç©ºæ ¼ï¼‰
            formatBinary: function(number) {
                if (isNaN(number) || number < 0) return "0";
                const binaryStr = number.toString(2);
                // æ¯4ä½æ·»åŠ ä¸€ä¸ªç©ºæ ¼
                return binaryStr.replace(/(?=(\d{4})+$)/g, ' ').trim();
            },

            // æ›´æ–°æ˜¾ç¤º
            updateDisplay: function() {
                const display = document.getElementById('binary-display');
                display.textContent = this.state.display;
            },

            // æ›´æ–°è½¬æ¢ç»“æœ
            updateConversionResults: function() {
                const inputValue = this.parseBinary(this.state.display);
                const decimalEl = document.getElementById('decimal-result');
                const hexEl = document.getElementById('hex-result');

                if (isNaN(inputValue)) {
                    decimalEl.textContent = this.translations[document.getElementById('binary-lang').value].invalid_binary;
                    hexEl.textContent = this.translations[document.getElementById('binary-lang').value].invalid_binary;
                } else {
                    decimalEl.textContent = inputValue.toString();
                    hexEl.textContent = inputValue.toString(16).toUpperCase();
                }
            }
        };

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            BinaryCalc.init();
        });
    </script>
</body>

</html>
