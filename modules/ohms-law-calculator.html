<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ohm's Law Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="ohms_law_calc">
    <meta name="category" content="electrical">
    <meta name="icon" content="⚡">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Ohm's Law Calculator">
    <meta name="description" content="Calculate voltage, current, resistance or power using Ohm's Law.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="欧姆定律计算器">
    <meta name="lang-description-zh-CN" content="使用欧姆定律计算电压、电流、电阻或功率。">
    
    <meta name="lang-title-zh-TW" content="歐姆定律計算器">
    <meta name="lang-description-zh-TW" content="使用歐姆定律計算電壓、電流、電阻或功率。">
    
    <meta name="lang-title-ja" content="オームの法則計算ツール">
    <meta name="lang-description-ja" content="オームの法則を使用して電圧、電流、抵抗、または電力を計算します。">
    
    <meta name="lang-title-ru" content="Калькулятор закона Ома">
    <meta name="lang-description-ru" content="Вычислите напряжение, ток, сопротивление или мощность с использованием закона Ома.">
    
    <meta name="lang-title-es" content="Calculadora de la Ley de Ohm">
    <meta name="lang-description-es" content="Calcule el voltaje, corriente, resistencia o potencia usando la Ley de Ohm.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="ohms_law_calc" 
         data-category="electrical" 
         data-title="Ohm's Law Calculator" 
         data-icon="⚡">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="ol-lang" onchange="OhmCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⚡ Ohm's Law Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <!-- Voltage (V) -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="voltage_label">Voltage (V)</label>
                <input type="number" id="ol-voltage" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 12" min="0" step="any">
            </div>
            
            <!-- Current (A) -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="current_label">Current (A)</label>
                <input type="number" id="ol-current" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 2" min="0" step="any">
            </div>
            
            <!-- Resistance (Ω) -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="resistance_label">Resistance (Ω)</label>
                <input type="number" id="ol-resistance" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 6" min="0" step="any">
            </div>
            
            <!-- Power (W) -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="power_label">Power (W)</label>
                <input type="number" id="ol-power" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 24" min="0" step="any">
            </div>
        </div>

        <button onclick="OhmCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">Calculate</button>
        <button onclick="OhmCalc.clear()" class="w-full bg-gray-200 text-gray-800 py-2 rounded font-bold hover:bg-gray-300 transition mb-6" data-i18n="btn_clear">Clear All</button>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100">
            <div class="text-sm text-gray-500 mb-2" data-i18n="res_label">Results</div>
            <div id="ol-result" class="text-lg text-blue-800">--</div>
        </div>
    </div>

    <script>
        const OhmCalc = {
            i18n: {
                'en': {
                    title: '⚡ Ohm\'s Law Calculator',
                    voltage_label: 'Voltage (V)',
                    current_label: 'Current (A)',
                    resistance_label: 'Resistance (Ω)',
                    power_label: 'Power (W)',
                    btn_calc: 'Calculate',
                    btn_clear: 'Clear All',
                    res_label: 'Results',
                    err_invalid: 'Please enter at least 2 values',
                    res_voltage: 'Voltage: {value} V',
                    res_current: 'Current: {value} A',
                    res_resistance: 'Resistance: {value} Ω',
                    res_power: 'Power: {value} W'
                },
                'zh-CN': {
                    title: '⚡ 欧姆定律计算器',
                    voltage_label: '电压 (伏特/V)',
                    current_label: '电流 (安培/A)',
                    resistance_label: '电阻 (欧姆/Ω)',
                    power_label: '功率 (瓦特/W)',
                    btn_calc: '计算',
                    btn_clear: '清空所有',
                    res_label: '计算结果',
                    err_invalid: '请至少输入2个值',
                    res_voltage: '电压: {value} V',
                    res_current: '电流: {value} A',
                    res_resistance: '电阻: {value} Ω',
                    res_power: '功率: {value} W'
                },
                'zh-TW': {
                    title: '⚡ 歐姆定律計算器',
                    voltage_label: '電壓 (伏特/V)',
                    current_label: '電流 (安培/A)',
                    resistance_label: '電阻 (歐姆/Ω)',
                    power_label: '功率 (瓦特/W)',
                    btn_calc: '計算',
                    btn_clear: '清空所有',
                    res_label: '計算結果',
                    err_invalid: '請至少輸入2個值',
                    res_voltage: '電壓: {value} V',
                    res_current: '電流: {value} A',
                    res_resistance: '電阻: {value} Ω',
                    res_power: '功率: {value} W'
                },
                'ja': {
                    title: '⚡ オームの法則計算ツール',
                    voltage_label: '電圧 (ボルト/V)',
                    current_label: '電流 (アンペア/A)',
                    resistance_label: '抵抗 (オーム/Ω)',
                    power_label: '電力 (ワット/W)',
                    btn_calc: '計算する',
                    btn_clear: 'すべて消去',
                    res_label: '計算結果',
                    err_invalid: '少なくとも2つの値を入力してください',
                    res_voltage: '電圧: {value} V',
                    res_current: '電流: {value} A',
                    res_resistance: '抵抗: {value} Ω',
                    res_power: '電力: {value} W'
                },
                'ru': {
                    title: '⚡ Калькулятор закона Ома',
                    voltage_label: 'Напряжение (В)',
                    current_label: 'Ток (А)',
                    resistance_label: 'Сопротивление (Ом)',
                    power_label: 'Мощность (Вт)',
                    btn_calc: 'Рассчитать',
                    btn_clear: 'Очистить все',
                    res_label: 'Результаты',
                    err_invalid: 'Введите хотя бы 2 значения',
                    res_voltage: 'Напряжение: {value} В',
                    res_current: 'Ток: {value} А',
                    res_resistance: 'Сопротивление: {value} Ом',
                    res_power: 'Мощность: {value} Вт'
                },
                'es': {
                    title: '⚡ Calculadora de la Ley de Ohm',
                    voltage_label: 'Voltaje (V)',
                    current_label: 'Corriente (A)',
                    resistance_label: 'Resistencia (Ω)',
                    power_label: 'Potencia (W)',
                    btn_calc: 'Calcular',
                    btn_clear: 'Limpiar Todo',
                    res_label: 'Resultados',
                    err_invalid: 'Por favor, ingrese al menos 2 valores',
                    res_voltage: 'Voltaje: {value} V',
                    res_current: 'Corriente: {value} A',
                    res_resistance: 'Resistencia: {value} Ω',
                    res_power: 'Potencia: {value} W'
                }
            },

            init: () => {
                // 初始化默认值示例
                document.getElementById('ol-voltage').value = 12;
                document.getElementById('ol-current').value = 2;
            },

            changeLang: () => {
                const lang = document.getElementById('ol-lang').value;
                const texts = OhmCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="ohms_law_calc"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // 重新计算以更新结果语言
                const currentResult = document.getElementById('ol-result').innerText;
                if (currentResult !== '--') {
                    OhmCalc.calc();
                }
            },

            calc: () => {
                const V = parseFloat(document.getElementById('ol-voltage').value) || null;
                const I = parseFloat(document.getElementById('ol-current').value) || null;
                const R = parseFloat(document.getElementById('ol-resistance').value) || null;
                const P = parseFloat(document.getElementById('ol-power').value) || null;
                const lang = document.getElementById('ol-lang').value;
                const texts = OhmCalc.i18n[lang];

                // 计算输入值数量
                const inputCount = [V, I, R, P].filter(v => v !== null).length;
                const resultEl = document.getElementById('ol-result');

                if (inputCount < 2) {
                    resultEl.innerHTML = `<span class="text-red-600">${texts.err_invalid}</span>`;
                    return;
                }

                // 欧姆定律计算逻辑
                let results = [];
                let v = V, i = I, r = R, p = P;

                // 计算缺失值
                if (v !== null && i !== null) {
                    r = v / i;
                    p = v * i;
                } else if (v !== null && r !== null) {
                    i = v / r;
                    p = (v * v) / r;
                } else if (v !== null && p !== null) {
                    i = p / v;
                    r = v / i;
                } else if (i !== null && r !== null) {
                    v = i * r;
                    p = i * i * r;
                } else if (i !== null && p !== null) {
                    v = p / i;
                    r = v / i;
                } else if (r !== null && p !== null) {
                    i = Math.sqrt(p / r);
                    v = i * r;
                }

                // 格式化结果
                results.push(texts.res_voltage.replace('{value}', v.toFixed(2)));
                results.push(texts.res_current.replace('{value}', i.toFixed(2)));
                results.push(texts.res_resistance.replace('{value}', r.toFixed(2)));
                results.push(texts.res_power.replace('{value}', p.toFixed(2)));

                resultEl.innerHTML = results.join('<br>');
            },

            clear: () => {
                document.getElementById('ol-voltage').value = '';
                document.getElementById('ol-current').value = '';
                document.getElementById('ol-resistance').value = '';
                document.getElementById('ol-power').value = '';
                document.getElementById('ol-result').innerText = '--';
            }
        };

        document.addEventListener('DOMContentLoaded', OhmCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 自动匹配浏览器语言
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('ol-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    OhmCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>