<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="time_calculator">
    <meta name="category" content="date_time">
    <meta name="icon" content="⏰">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Time Calculator">
    <meta name="description" content="Add or subtract hours, minutes, and seconds.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="时间计算器">
    <meta name="lang-description-zh-CN" content="增加或减少小时、分钟和秒。">
    
    <meta name="lang-title-zh-TW" content="時間計算器">
    <meta name="lang-description-zh-TW" content="增加或減少小時、分鐘和秒。">
    
    <meta name="lang-title-ja" content="時間計算ツール">
    <meta name="lang-description-ja" content="時間、分、秒を加算または減算します。">
    
    <meta name="lang-title-ru" content="Калькулятор времени">
    <meta name="lang-description-ru" content="Добавляйте или вычитайте часы, минуты и секунды.">
    
    <meta name="lang-title-es" content="Calculadora de Tiempo">
    <meta name="lang-description-es" content="Suma o resta horas, minutos y segundos.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="time_calculator" 
         data-category="date_time" 
         data-title="Time Calculator" 
         data-icon="⏰">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="time-lang" onchange="TimeCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⏰ Time Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div class="p-4 bg-gray-50 rounded border border-gray-200">
                <div class="text-sm font-medium text-gray-700 mb-3" data-i18n="start_time">Start Time</div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Hours -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="hours">Hours</label>
                        <input type="number" id="start-hours" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0-23" min="0" max="23" value="0">
                    </div>
                    <!-- Minutes -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="minutes">Minutes</label>
                        <input type="number" id="start-minutes" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0-59" min="0" max="59" value="0">
                    </div>
                    <!-- Seconds -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="seconds">Seconds</label>
                        <input type="number" id="start-seconds" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0-59" min="0" max="59" value="0">
                    </div>
                </div>
            </div>

            <div class="p-4 bg-gray-50 rounded border border-gray-200">
                <div class="text-sm font-medium text-gray-700 mb-3" data-i18n="add_subtract">Add/Subtract</div>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                    <!-- Operation -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="operation">Operation</label>
                        <select id="time-operation" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none bg-white">
                            <option value="add" selected data-i18n="add">Add</option>
                            <option value="subtract" data-i18n="subtract">Subtract</option>
                        </select>
                    </div>
                    <!-- Hours -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="hours">Hours</label>
                        <input type="number" id="add-hours" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0" min="0" value="1">
                    </div>
                    <!-- Minutes -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="minutes">Minutes</label>
                        <input type="number" id="add-minutes" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0" min="0" value="0">
                    </div>
                    <!-- Seconds -->
                    <div>
                        <label class="block text-sm text-gray-600 mb-1" data-i18n="seconds">Seconds</label>
                        <input type="number" id="add-seconds" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="0" min="0" value="0">
                    </div>
                </div>
            </div>
        </div>

        <button onclick="TimeCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">Calculate Time</button>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
            <div class="text-sm text-gray-500 mb-2" data-i18n="result_label">Result Time</div>
            <div id="time-result" class="text-2xl font-bold text-blue-800">00:00:00</div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 text-sm">
                <div class="bg-white p-3 rounded border border-blue-100">
                    <div class="text-gray-500" data-i18n="total_days">Total Days</div>
                    <div id="total-days" class="font-bold text-blue-700">0</div>
                </div>
                <div class="bg-white p-3 rounded border border-blue-100">
                    <div class="text-gray-500" data-i18n="total_hours">Total Hours</div>
                    <div id="total-hours" class="font-bold text-blue-700">0</div>
                </div>
                <div class="bg-white p-3 rounded border border-blue-100">
                    <div class="text-gray-500" data-i18n="total_seconds">Total Seconds</div>
                    <div id="total-seconds" class="font-bold text-blue-700">0</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const TimeCalc = {
            i18n: {
                'en': {
                    title: '⏰ Time Calculator',
                    start_time: 'Start Time',
                    hours: 'Hours',
                    minutes: 'Minutes',
                    seconds: 'Seconds',
                    add_subtract: 'Add/Subtract',
                    operation: 'Operation',
                    add: 'Add',
                    subtract: 'Subtract',
                    btn_calc: 'Calculate Time',
                    result_label: 'Result Time',
                    total_days: 'Total Days',
                    total_hours: 'Total Hours',
                    total_seconds: 'Total Seconds'
                },
                'zh-CN': {
                    title: '⏰ 时间计算器',
                    start_time: '起始时间',
                    hours: '小时',
                    minutes: '分钟',
                    seconds: '秒',
                    add_subtract: '增加/减少',
                    operation: '操作',
                    add: '增加',
                    subtract: '减少',
                    btn_calc: '计算时间',
                    result_label: '结果时间',
                    total_days: '总天数',
                    total_hours: '总小时数',
                    total_seconds: '总秒数'
                },
                'zh-TW': {
                    title: '⏰ 時間計算器',
                    start_time: '起始時間',
                    hours: '小時',
                    minutes: '分鐘',
                    seconds: '秒',
                    add_subtract: '增加/減少',
                    operation: '操作',
                    add: '增加',
                    subtract: '減少',
                    btn_calc: '計算時間',
                    result_label: '結果時間',
                    total_days: '總天數',
                    total_hours: '總小時數',
                    total_seconds: '總秒數'
                },
                'ja': {
                    title: '⏰ 時間計算ツール',
                    start_time: '開始時間',
                    hours: '時間',
                    minutes: '分',
                    seconds: '秒',
                    add_subtract: '加算/減算',
                    operation: '操作',
                    add: '加算',
                    subtract: '減算',
                    btn_calc: '時間を計算',
                    result_label: '結果の時間',
                    total_days: '総日数',
                    total_hours: '総時間数',
                    total_seconds: '総秒数'
                },
                'ru': {
                    title: '⏰ Калькулятор времени',
                    start_time: 'Начальное время',
                    hours: 'Часы',
                    minutes: 'Минуты',
                    seconds: 'Секунды',
                    add_subtract: 'Добавить/Вычесть',
                    operation: 'Операция',
                    add: 'Добавить',
                    subtract: 'Вычесть',
                    btn_calc: 'Вычислить время',
                    result_label: 'Результирующее время',
                    total_days: 'Всего дней',
                    total_hours: 'Всего часов',
                    total_seconds: 'Всего секунд'
                },
                'es': {
                    title: '⏰ Calculadora de Tiempo',
                    start_time: 'Hora de inicio',
                    hours: 'Horas',
                    minutes: 'Minutos',
                    seconds: 'Segundos',
                    add_subtract: 'Sumar/Restar',
                    operation: 'Operación',
                    add: 'Sumar',
                    subtract: 'Restar',
                    btn_calc: 'Calcular tiempo',
                    result_label: 'Tiempo resultante',
                    total_days: 'Días totales',
                    total_hours: 'Horas totales',
                    total_seconds: 'Segundos totales'
                }
            },

            init: () => {
                const now = new Date();
                document.getElementById('start-hours').value = now.getHours();
                document.getElementById('start-minutes').value = now.getMinutes();
                document.getElementById('start-seconds').value = now.getSeconds();
            },

            // 格式化数字为两位数
            pad: (num) => {
                return num.toString().padStart(2, '0');
            },

            changeLang: () => {
                const lang = document.getElementById('time-lang').value;
                const texts = TimeCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="time_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // 重新计算以更新结果语言
                const currentResult = document.getElementById('time-result').innerText;
                if (currentResult !== '00:00:00') {
                    TimeCalc.calc();
                }
            },

            calc: () => {
                // 获取输入值
                const startHours = parseInt(document.getElementById('start-hours').value) || 0;
                const startMinutes = parseInt(document.getElementById('start-minutes').value) || 0;
                const startSeconds = parseInt(document.getElementById('start-seconds').value) || 0;
                
                const operation = document.getElementById('time-operation').value;
                const addHours = parseInt(document.getElementById('add-hours').value) || 0;
                const addMinutes = parseInt(document.getElementById('add-minutes').value) || 0;
                const addSeconds = parseInt(document.getElementById('add-seconds').value) || 0;

                // 转换为总秒数
                let totalSeconds = startHours * 3600 + startMinutes * 60 + startSeconds;
                const changeSeconds = addHours * 3600 + addMinutes * 60 + addSeconds;
                
                // 执行加减操作
                if (operation === 'add') {
                    totalSeconds += changeSeconds;
                } else {
                    totalSeconds -= changeSeconds;
                    // 确保不会出现负时间（如果为负，转换为正的等效时间）
                    if (totalSeconds < 0) {
                        totalSeconds = 86400 + (totalSeconds % 86400);
                    }
                }

                // 计算结果时间
                const days = Math.floor(totalSeconds / 86400);
                const hours = Math.floor((totalSeconds % 86400) / 3600);
                const minutes = Math.floor((totalSeconds % 3600) / 60);
                const seconds = totalSeconds % 60;

                // 显示结果
                document.getElementById('time-result').innerText = 
                    `${TimeCalc.pad(hours)}:${TimeCalc.pad(minutes)}:${TimeCalc.pad(seconds)}`;
                
                document.getElementById('total-days').innerText = days;
                document.getElementById('total-hours').innerText = Math.floor(totalSeconds / 3600);
                document.getElementById('total-seconds').innerText = totalSeconds;
            }
        };

        document.addEventListener('DOMContentLoaded', TimeCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 自动匹配浏览器语言
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('time-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    TimeCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>