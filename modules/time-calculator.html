<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="time_calculator">
    <meta name="category" content="calculation">
    <meta name="icon" content="⏰">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Time Calculator">
    <meta name="description" content="Add, subtract and calculate time durations.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="时间计算器">
    <meta name="lang-description-zh-CN" content="添加、减去和计算持续时间。">
    
    <meta name="lang-title-zh-TW" content="時間計算器">
    <meta name="lang-description-zh-TW" content="添加、減去和計算持續時間。">
    
    <meta name="lang-title-ja" content="時間計算機">
    <meta name="lang-description-ja" content="時間の加算、減算、期間の計算を行います。">
    
    <meta name="lang-title-ru" content="Калькулятор времени">
    <meta name="lang-description-ru" content="Добавляйте, вычитайте и вычисляйте продолжительность времени.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .time-input-group { display: flex; gap: 10px; margin-bottom: 15px; align-items: center; }
        .time-input { width: 80px; }
        .operation-btn { padding: 8px 16px; background-color: #3b82f6; color: white; border: none; border-radius: 5px; cursor: pointer; }
        .operation-btn:hover { background-color: #2563eb; }
        .result { background-color: #f8fafc; border: 1px solid #e2e8f0; padding: 15px; border-radius: 5px; margin-top: 15px; }
        .result-item { margin: 8px 0; padding: 8px; background-color: #eff8ff; border-radius: 4px; }
        .result-label { font-weight: bold; color: #1e40af; }
        .add-row-btn { background-color: #10b981; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; margin-top: 10px; }
        .add-row-btn:hover { background-color: #059669; }
        .remove-row-btn { background-color: #ef4444; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; }
        .remove-row-btn:hover { background-color: #dc2626; }
        .info { background-color: #eff8ff; border: 1px solid #3b82f6; color: #1e40af; padding: 10px; border-radius: 5px; margin-top: 10px; font-size: 12px; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="time_calculator" 
         data-category="calculation" 
         data-title="Time Calculator" 
         data-icon="⏰">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="time-calc-lang" onchange="TimeCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⏰ Time Calculator</h2>
        
        <div data-i18n="instructions" class="mb-6 text-gray-600">Add or subtract time values (hours, minutes, seconds) to get the total duration.</div>
        
        <div id="time-inputs-container">
            <div class="time-input-row">
                <div class="time-input-group">
                    <select class="operation-select border rounded p-2 focus:ring-2 focus:ring-blue-500 outline-none">
                        <option value="add" selected data-i18n="add">+</option>
                        <option value="subtract" data-i18n="subtract">-</option>
                    </select>
                    
                    <div>
                        <label class="block text-xs text-gray-500" data-i18n="hours">Hours</label>
                        <input type="number" class="time-input hours p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" min="0" value="0">
                    </div>
                    
                    <div>
                        <label class="block text-xs text-gray-500" data-i18n="minutes">Minutes</label>
                        <input type="number" class="time-input minutes p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" min="0" max="59" value="0">
                    </div>
                    
                    <div>
                        <label class="block text-xs text-gray-500" data-i18n="seconds">Seconds</label>
                        <input type="number" class="time-input seconds p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" min="0" max="59" value="0">
                    </div>
                    
                    <button class="remove-row-btn" onclick="TimeCalc.removeRow(this)" data-i18n="remove">Remove</button>
                </div>
            </div>
        </div>
        
        <button class="add-row-btn" onclick="TimeCalc.addRow()" data-i18n="add_another">Add Another Time Value</button>
        
        <button onclick="TimeCalc.calculate()" class="w-full mt-6 bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-4" data-i18n="calculate_total">Calculate Total</button>
        
        <div id="result-container" class="result hidden">
            <div class="result-item">
                <span class="result-label" data-i18n="total_time">Total Time:</span>
                <span id="total-time" class="ml-2"></span>
            </div>
            <div class="result-item">
                <span class="result-label" data-i18n="total_seconds">Total in Seconds:</span>
                <span id="total-seconds" class="ml-2"></span>
            </div>
            <div class="result-item">
                <span class="result-label" data-i18n="total_minutes">Total in Minutes:</span>
                <span id="total-minutes" class="ml-2"></span>
            </div>
            <div class="result-item">
                <span class="result-label" data-i18n="total_hours">Total in Hours:</span>
                <span id="total-hours" class="ml-2"></span>
            </div>
        </div>
        
        <div class="info mt-4" data-i18n="info_text">Use this calculator to add or subtract multiple time values. Useful for calculating work hours, project durations, etc.</div>

    </div>

    <script>
        const TimeCalc = {
            currentLang: 'en',
            
            i18n: {
                'en': {
                    title: '⏰ Time Calculator',
                    instructions: 'Add or subtract time values (hours, minutes, seconds) to get the total duration.',
                    add: '+',
                    subtract: '-',
                    hours: 'Hours',
                    minutes: 'Minutes',
                    seconds: 'Seconds',
                    remove: 'Remove',
                    add_another: 'Add Another Time Value',
                    calculate_total: 'Calculate Total',
                    total_time: 'Total Time:',
                    total_seconds: 'Total in Seconds:',
                    total_minutes: 'Total in Minutes:',
                    total_hours: 'Total in Hours:',
                    info_text: 'Use this calculator to add or subtract multiple time values. Useful for calculating work hours, project durations, etc.',
                    time_format: '{h}h {m}m {s}s'
                },
                'zh-CN': {
                    title: '⏰ 时间计算器',
                    instructions: '添加或减去时间值（小时、分钟、秒）以获得总持续时间。',
                    add: '+',
                    subtract: '-',
                    hours: '小时',
                    minutes: '分钟',
                    seconds: '秒',
                    remove: '移除',
                    add_another: '添加另一个时间值',
                    calculate_total: '计算总计',
                    total_time: '总时间：',
                    total_seconds: '总秒数：',
                    total_minutes: '总分钟数：',
                    total_hours: '总小时数：',
                    info_text: '使用此计算器添加或减去多个时间值。适用于计算工作时间、项目持续时间等。',
                    time_format: '{h}小时 {m}分钟 {s}秒'
                },
                'zh-TW': {
                    title: '⏰ 時間計算器',
                    instructions: '添加或減去時間值（小時、分鐘、秒）以獲得總持續時間。',
                    add: '+',
                    subtract: '-',
                    hours: '小時',
                    minutes: '分鐘',
                    seconds: '秒',
                    remove: '移除',
                    add_another: '添加另一個時間值',
                    calculate_total: '計算總計',
                    total_time: '總時間：',
                    total_seconds: '總秒數：',
                    total_minutes: '總分鐘數：',
                    total_hours: '總小時數：',
                    info_text: '使用此計算器添加或減去多個時間值。適用於計算工作時間、項目持續時間等。',
                    time_format: '{h}小時 {m}分鐘 {s}秒'
                },
                'ja': {
                    title: '⏰ 時間計算機',
                    instructions: '時間値（時間、分、秒）を加算または減算して、総期間を取得します。',
                    add: '+',
                    subtract: '-',
                    hours: '時間',
                    minutes: '分',
                    seconds: '秒',
                    remove: '削除',
                    add_another: '別の時間値を追加',
                    calculate_total: '合計を計算',
                    total_time: '総時間：',
                    total_seconds: '総秒数：',
                    total_minutes: '総分数：',
                    total_hours: '総時間数：',
                    info_text: 'この計算機を使用して、複数の時間値を加算または減算できます。労働時間、プロジェクト期間などの計算に役立ちます。',
                    time_format: '{h}時間 {m}分 {s}秒'
                },
                'ru': {
                    title: '⏰ Калькулятор времени',
                    instructions: 'Добавляйте или вычитайте значения времени (часы, минуты, секунды), чтобы получить общую длительность.',
                    add: '+',
                    subtract: '-',
                    hours: 'Часы',
                    minutes: 'Минуты',
                    seconds: 'Секунды',
                    remove: 'Удалить',
                    add_another: 'Добавить другое значение времени',
                    calculate_total: 'Вычислить сумму',
                    total_time: 'Общее время:',
                    total_seconds: 'Всего в секундах:',
                    total_minutes: 'Всего в минутах:',
                    total_hours: 'Всего в часах:',
                    info_text: 'Используйте этот калькулятор для добавления или вычитания нескольких значений времени. Полезно для расчета рабочих часов, длительности проектов и т.д.',
                    time_format: '{h}ч {m}м {s}с'
                }
            },
            
            addRow: function() {
                const container = document.getElementById('time-inputs-container');
                const rows = container.getElementsByClassName('time-input-row');
                
                // 确保至少保留一行
                if (rows.length >= 10) return;
                
                const newRow = document.createElement('div');
                newRow.className = 'time-input-row';
                newRow.innerHTML = `
                    <div class="time-input-group">
                        <select class="operation-select border rounded p-2 focus:ring-2 focus:ring-blue-500 outline-none">
                            <option value="add" selected data-i18n="add">+</option>
                            <option value="subtract" data-i18n="subtract">-</option>
                        </select>
                        
                        <div>
                            <label class="block text-xs text-gray-500" data-i18n="hours">Hours</label>
                            <input type="number" class="time-input hours p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" min="0" value="0">
                        </div>
                        
                        <div>
                            <label class="block text-xs text-gray-500" data-i18n="minutes">Minutes</label>
                            <input type="number" class="time-input minutes p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" min="0" max="59" value="0">
                        </div>
                        
                        <div>
                            <label class="block text-xs text-gray-500" data-i18n="seconds">Seconds</label>
                            <input type="number" class="time-input seconds p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" min="0" max="59" value="0">
                        </div>
                        
                        <button class="remove-row-btn" onclick="TimeCalc.removeRow(this)" data-i18n="remove">Remove</button>
                    </div>
                `;
                
                container.appendChild(newRow);
                this.updateLanguage(); // 更新新行的语言
            },
            
            removeRow: function(button) {
                const container = document.getElementById('time-inputs-container');
                const rows = container.getElementsByClassName('time-input-row');
                
                // 确保至少保留一行
                if (rows.length <= 1) return;
                
                const row = button.closest('.time-input-row');
                container.removeChild(row);
            },
            
            calculate: function() {
                const rows = document.getElementsByClassName('time-input-row');
                let totalSeconds = 0;
                
                // 计算所有时间的总秒数
                for (let i = 0; i < rows.length; i++) {
                    const row = rows[i];
                    const operation = row.querySelector('.operation-select').value;
                    const hours = parseInt(row.querySelector('.hours').value) || 0;
                    const minutes = parseInt(row.querySelector('.minutes').value) || 0;
                    const seconds = parseInt(row.querySelector('.seconds').value) || 0;
                    
                    const rowSeconds = hours * 3600 + minutes * 60 + seconds;
                    totalSeconds += operation === 'add' ? rowSeconds : -rowSeconds;
                }
                
                // 转换总秒数为小时、分钟、秒
                const hours = Math.floor(Math.abs(totalSeconds) / 3600);
                const remainingSeconds = Math.abs(totalSeconds) % 3600;
                const minutes = Math.floor(remainingSeconds / 60);
                const seconds = remainingSeconds % 60;
                
                // 确定符号
                const sign = totalSeconds < 0 ? '-' : '';
                
                // 格式化时间显示
                const formatStr = this.i18n[this.currentLang].time_format;
                const formattedTime = sign + formatStr
                    .replace('{h}', hours)
                    .replace('{m}', minutes)
                    .replace('{s}', seconds);
                
                // 更新结果
                document.getElementById('total-time').textContent = formattedTime;
                document.getElementById('total-seconds').textContent = Math.abs(totalSeconds) + ' ' + (this.currentLang === 'en' ? 'seconds' : 
                                                                                                      this.currentLang === 'zh-CN' || this.currentLang === 'zh-TW' ? '秒' : 
                                                                                                      this.currentLang === 'ja' ? '秒' : 'секунд');
                document.getElementById('total-minutes').textContent = (Math.abs(totalSeconds) / 60).toFixed(2) + ' ' + (this.currentLang === 'en' ? 'minutes' : 
                                                                                                                      this.currentLang === 'zh-CN' || this.currentLang === 'zh-TW' ? '分钟' : 
                                                                                                                      this.currentLang === 'ja' ? '分' : 'минут');
                document.getElementById('total-hours').textContent = (Math.abs(totalSeconds) / 3600).toFixed(2) + ' ' + (this.currentLang === 'en' ? 'hours' : 
                                                                                                                      this.currentLang === 'zh-CN' || this.currentLang === 'zh-TW' ? '小时' : 
                                                                                                                      this.currentLang === 'ja' ? '時間' : 'часов');
                
                // 显示结果
                document.getElementById('result-container').classList.remove('hidden');
            },
            
            changeLang: function() {
                const select = document.getElementById('time-calc-lang');
                this.currentLang = select.value;
                this.updateLanguage();
            },
            
            updateLanguage: function() {
                // 更新所有带data-i18n属性的元素
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[this.currentLang][key]) {
                        el.textContent = this.i18n[this.currentLang][key];
                    }
                });
                
                // 如果已有结果，重新计算以更新语言
                if (!document.getElementById('result-container').classList.contains('hidden')) {
                    this.calculate();
                }
            }
        };
    </script>
</body>
</html>