<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="education">
    <title>Final Grade Calculator - What do I need on my final?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-indigo-50 text-gray-800 flex flex-col min-h-screen">

    <nav class="bg-white shadow-sm">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fas fa-graduation-cap text-indigo-600 text-2xl"></i>
                <h1 class="text-xl font-bold text-gray-800" data-i18n="title">Final Grade Calculator</h1>
            </div>
            <div>
                <select id="lang-selector" class="border border-gray-300 rounded-md p-1 text-sm outline-none bg-white">
                    <option value="zh-CN">简体中文</option>
                    <option value="zh-TW">繁體中文</option>
                    <option value="en">English</option>
                    <option value="es">Español</option>
                    <option value="ru">Русский</option>
                    <option value="hi">हिन्दी</option>
                    <option value="pl">Polski</option>
                </select>
            </div>
        </div>
    </nav>

    <main class="flex-grow max-w-xl mx-auto px-4 py-12 w-full">
        
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6 text-center text-indigo-900" data-i18n="calcTitle">Final Grade Calculator</h2>

            <div class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="currentGrade">Current Grade (%)</label>
                    <input type="number" id="current" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-indigo-500 outline-none transition bg-gray-50 hover:bg-white" placeholder="e.g. 85" onkeydown="if(event.key === 'Enter') calculate()">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="targetGrade">Target Grade (%)</label>
                    <input type="number" id="target" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-indigo-500 outline-none transition bg-gray-50 hover:bg-white" placeholder="e.g. 90" onkeydown="if(event.key === 'Enter') calculate()">
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="finalWeight">Final Exam Weight (%)</label>
                    <input type="number" id="weight" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-indigo-500 outline-none transition bg-gray-50 hover:bg-white" placeholder="e.g. 20" onkeydown="if(event.key === 'Enter') calculate()">
                </div>

                <button type="button" onclick="calculate()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow-md transition transform hover:scale-[1.01] active:scale-95" data-i18n="calculate">
                    Calculate
                </button>
            </div>

            <!-- Result -->
            <div id="result-area" class="hidden mt-8 text-center bg-indigo-50 p-6 rounded-xl border border-indigo-100 animate-fade-in">
                <p class="text-gray-600 mb-2" data-i18n="youNeed">You need to score at least</p>
                <div class="text-5xl font-extrabold text-indigo-600 mb-2"><span id="result-val">0</span>%</div>
                <p class="text-sm text-gray-500" data-i18n="onFinal">on your final exam.</p>
                <div id="message" class="text-sm mt-3 font-medium"></div>
            </div>
        </div>

        <article class="prose max-w-none text-gray-600 bg-white p-6 md:p-8 rounded-xl shadow-sm border border-gray-100">
            <h3 class="text-2xl font-bold text-gray-800 mb-6 pb-2 border-b" data-i18n="aboutTitle">About Final Grade Calculator</h3>
            <div id="dynamic-content" class="space-y-4"></div>
        </article>
    </main>

    <footer class="bg-white border-t mt-auto py-8">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <p class="text-gray-500 text-sm mb-4">
                &copy; <span id="current-year"></span> <span data-i18n="footerRights">All Rights Reserved.</span>
            </p>
            <div id="related-tools-container"></div>
        </div>
    </footer>

    <script src="/scripts/related.js"></script>

    <script>
        const i18n = {
            'zh-CN': {
                title: '最终成绩计算器',
                calcTitle: '期末考试需要考多少分？',
                currentGrade: '当前成绩 (%)',
                targetGrade: '目标成绩 (%)',
                finalWeight: '期末考试占比/权重 (%)',
                calculate: '计算',
                youNeed: '你至少需要在期末考试中获得',
                onFinal: '的分数。',
                aboutTitle: '关于最终成绩计算器',
                footerRights: 'toolboxpro.top 版权所有。',
                impossible: '这似乎是不可能的（需要超过100%）。也许可以争取额外加分？',
                easy: '你应该能轻松达到（只需要0%以下）。',
                alertInput: '请填写所有输入框以进行计算。',
                content: `
                    <p>您是否曾想过：“我需要在期末考试中考多少分才能在课堂上获得 A？”或者“如果我期末考砸了，我会不及格吗？”我们的<strong>最终成绩计算器</strong>可以帮您解答这些问题。</p>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">如何使用此计算器？</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>当前成绩：</strong> 输入您目前的总成绩百分比（例如：85）。</li>
                        <li><strong>目标成绩：</strong> 输入您希望在学期结束时达到的总成绩（例如：90）。</li>
                        <li><strong>期末考试权重：</strong> 输入期末考试在总成绩中所占的百分比（例如：20）。通常可以在课程大纲中找到此信息。</li>
                    </ul>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">计算公式</h4>
                    <p>我们使用以下简单的公式来计算您所需的期末成绩：</p>
                    <div class="bg-gray-100 p-3 rounded-md font-mono text-sm mt-2 text-indigo-700">
                        最终成绩 = (目标成绩 - 当前成绩 × (100% - 权重)) / 权重
                    </div>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">常见问题 (FAQ)</h4>
                    <div class="space-y-3">
                        <div>
                            <p class="font-semibold text-gray-700">问：这个计算器是免费的吗？</p>
                            <p>答：是的，此工具完全免费供学生和教师使用。</p>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-700">问：如果结果超过 100% 怎么办？</p>
                            <p>答：如果计算结果显示您需要超过 100%（例如 105%），这通常意味着除非有额外加分（Extra Credit），否则仅凭期末考试很难达到您的目标成绩。您可能需要降低目标成绩。</p>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-700">问：如果结果是负数怎么办？</p>
                            <p>答：如果结果是负数，这通常意味着即使您在期末考试中得 0 分，您也能达到目标成绩。恭喜您！</p>
                        </div>
                    </div>
                `
            },
            'zh-TW': {
                title: '最終成績計算器',
                calcTitle: '期末考試需要考多少分？',
                currentGrade: '當前成績 (%)',
                targetGrade: '目標成績 (%)',
                finalWeight: '期末考試佔比/權重 (%)',
                calculate: '計算',
                youNeed: '你至少需要在期末考試中獲得',
                onFinal: '的分數。',
                aboutTitle: '關於最終成績計算器',
                footerRights: 'toolboxpro.top 版權所有。',
                impossible: '這似乎是不可能的（需要超過100%）。也許可以爭取額外加分？',
                easy: '你應該能輕鬆達到（只需要0%以下）。',
                alertInput: '請填寫所有輸入框以進行計算。',
                content: `
                    <p>您是否曾想過：「我需要在期末考試中考多少分才能在課堂上獲得 A？」或者「如果我期末考砸了，我會不及格嗎？」我們的<strong>最終成績計算器</strong>可以幫您解答這些問題。</p>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">如何使用此計算器？</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>當前成績：</strong> 輸入您目前的總成績百分比（例如：85）。</li>
                        <li><strong>目標成績：</strong> 輸入您希望在學期結束時達到的總成績（例如：90）。</li>
                        <li><strong>期末考試權重：</strong> 輸入期末考試在總成績中所佔的百分比（例如：20）。通常可以在課程大綱中找到此信息。</li>
                    </ul>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">計算公式</h4>
                    <p>我們使用以下簡單的公式來計算您所需的期末成績：</p>
                    <div class="bg-gray-100 p-3 rounded-md font-mono text-sm mt-2 text-indigo-700">
                        最終成績 = (目標成績 - 當前成績 × (100% - 權重)) / 權重
                    </div>

                    <h4 class="text-lg font-bold text-gray-800 mt-6">常見問題 (FAQ)</h4>
                    <div class="space-y-3">
                        <div>
                            <p class="font-semibold text-gray-700">問：如果結果超過 100% 怎麼辦？</p>
                            <p>答：這意味著除非有額外加分，否則很難達到目標。您可能需要降低目標成績。</p>
                        </div>
                    </div>
                `
            },
            'en': {
                title: 'Final Grade Calculator',
                calcTitle: 'Final Grade Calculator',
                currentGrade: 'Current Grade (%)',
                targetGrade: 'Target Grade (%)',
                finalWeight: 'Final Exam Weight (%)',
                calculate: 'Calculate',
                youNeed: 'You need to score at least',
                onFinal: 'on your final exam.',
                aboutTitle: 'About Final Grade Calculator',
                footerRights: 'toolboxpro.top All Rights Reserved.',
                impossible: 'That looks impossible (You need over 100%). Extra credit?',
                easy: 'You should get that easily (You need less than 0%).',
                alertInput: 'Please fill in all fields to calculate.',
                content: `
                    <p>Have you ever wondered, "What do I need on my final to get an A?" or "Can I fail the final and still pass?" Our <strong>Final Grade Calculator</strong> is here to help.</p>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">How to Use?</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>Current Grade:</strong> Enter your current score in the class (e.g., 85).</li>
                        <li><strong>Target Grade:</strong> Enter the grade you want to end up with (e.g., 90).</li>
                        <li><strong>Final Weight:</strong> Enter how much the final exam is worth (e.g., 20%). Check your syllabus if unsure.</li>
                    </ul>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">The Formula</h4>
                    <p>We use a simple formula to determine your required score:</p>
                    <div class="bg-gray-100 p-3 rounded-md font-mono text-sm mt-2 text-indigo-700">
                        Final = (Target - Current * (100% - Weight)) / Weight
                    </div>
                    
                    <h4 class="text-lg font-bold text-gray-800 mt-6">FAQ</h4>
                    <div class="space-y-3">
                        <div>
                            <p class="font-semibold text-gray-700">Q: Is this tool free?</p>
                            <p>A: Yes, this tool is completely free for students and teachers.</p>
                        </div>
                        <div>
                            <p class="font-semibold text-gray-700">Q: What if the result is over 100%?</p>
                            <p>A: If the calculator says you need 105%, it means it's mathematically impossible to reach your target without extra credit. You may need to aim for a lower grade.</p>
                        </div>
                         <div>
                            <p class="font-semibold text-gray-700">Q: What if the result is negative?</p>
                            <p>A: If the result is negative, you can score 0% on the final and still achieve your target grade. Congrats!</p>
                        </div>
                    </div>
                `
            },
            'es': {
                title: 'Calculadora de Nota Final',
                calcTitle: 'Calculadora de Examen Final',
                currentGrade: 'Nota Actual (%)',
                targetGrade: 'Nota Deseada (%)',
                finalWeight: 'Peso del Examen (%)',
                calculate: 'Calcular',
                youNeed: 'Necesitas sacar al menos',
                onFinal: 'en tu examen final.',
                aboutTitle: 'Sobre esta herramienta',
                footerRights: 'toolboxpro.top Todos los derechos reservados.',
                impossible: 'Parece imposible (Más del 100%).',
                easy: '¡Ya lo tienes asegurado! (Menos del 0%).',
                alertInput: 'Por favor completa todos los campos.',
                content: `
                    <p>Usa esta calculadora para determinar qué nota necesitas en tu examen final para aprobar la asignatura o alcanzar tu meta.</p>
                    <h4 class="text-lg font-bold text-gray-800 mt-6">¿Cómo usarla?</h4>
                    <ul class="list-disc pl-5 space-y-1">
                        <li><strong>Nota Actual:</strong> Tu calificación actual en la clase.</li>
                        <li><strong>Nota Deseada:</strong> La calificación que quieres obtener.</li>
                        <li><strong>Peso:</strong> Cuánto vale el examen final (%).</li>
                    </ul>
                `
            },
            'ru': {
                title: 'Калькулятор итоговой оценки',
                calcTitle: 'Калькулятор экзамена',
                currentGrade: 'Текущая оценка (%)',
                targetGrade: 'Целевая оценка (%)',
                finalWeight: 'Вес экзамена (%)',
                calculate: 'Рассчитать',
                youNeed: 'Вам нужно набрать',
                onFinal: 'на экзамене.',
                aboutTitle: 'О калькуляторе',
                footerRights: 'toolboxpro.top Все права защищены.',
                impossible: 'Это невозможно (нужно более 100%).',
                easy: 'Цель уже достигнута.',
                alertInput: 'Пожалуйста, заполните все поля.',
                content: `<p>Рассчитайте необходимый балл на экзамене для получения желаемой итоговой оценки.</p>`
            },
            'hi': {
                title: 'अंतिम ग्रेड कैलकुलेटर',
                calcTitle: 'अंतिम ग्रेड कैलकुलेटर',
                currentGrade: 'वर्तमान ग्रेड (%)',
                targetGrade: 'लक्ष्य ग्रेड (%)',
                finalWeight: 'अंतिम परीक्षा का वजन (%)',
                calculate: 'गणना करें',
                youNeed: 'आपको कम से कम स्कोर करना होगा',
                onFinal: 'अपनी अंतिम परीक्षा में।',
                aboutTitle: 'इस टूल के बारे में',
                footerRights: 'toolboxpro.top सर्वाधिकार सुरक्षित।',
                impossible: 'यह असंभव लगता है।',
                easy: 'आपको यह आसानी से मिल जाना चाहिए।',
                alertInput: 'कृपया सभी फ़ील्ड भरें।',
                content: `<p>यह निर्धारित करने के लिए इस कैलकुलेटर का उपयोग करें कि लक्ष्य ग्रेड तक पहुंचने के लिए आपको अपनी अंतिम परीक्षा में क्या ग्रेड चाहिए।</p>`
            },
            'pl': {
                title: 'Kalkulator Oceny Końcowej',
                calcTitle: 'Kalkulator Egzaminu',
                currentGrade: 'Obecna ocena (%)',
                targetGrade: 'Ocena celowa (%)',
                finalWeight: 'Waga egzaminu (%)',
                calculate: 'Oblicz',
                youNeed: 'Musisz uzyskać co najmniej',
                onFinal: 'na egzaminie.',
                aboutTitle: 'O narzędziu',
                footerRights: 'toolboxpro.top Wszelkie prawa zastrzeżone.',
                impossible: 'To wygląda na niemożliwe.',
                easy: 'Powinieneś to łatwo osiągnąć.',
                alertInput: 'Proszę wypełnić wszystkie pola.',
                content: `<p>Oblicz, jaką ocenę musisz uzyskać na egzaminie końcowym, aby osiągnąć swój cel.</p>`
            }
        };

        let currentLang = 'zh-CN';

        function init() {
            document.getElementById('current-year').textContent = new Date().getFullYear();
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            if (langParam && i18n[langParam]) currentLang = langParam;
            document.getElementById('lang-selector').value = currentLang;
            updateContent();

            document.getElementById('lang-selector').addEventListener('change', (e) => {
                currentLang = e.target.value;
                try {
                    const newUrl = `${window.location.pathname}?lang=${currentLang}`;
                    window.history.pushState({path: newUrl}, '', newUrl);
                } catch (e) {
                    console.warn('URL update skipped due to environment restrictions');
                }
                updateContent();
            });
        }

        function updateContent() {
            const t = i18n[currentLang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.textContent = t[key];
            });
            document.getElementById('dynamic-content').innerHTML = t.content;
            document.documentElement.lang = currentLang;
        }

        function calculate() {
            const currentInput = document.getElementById('current').value;
            const targetInput = document.getElementById('target').value;
            const weightInput = document.getElementById('weight').value;

            // 1. Input Validation
            if (currentInput === '' || targetInput === '' || weightInput === '') {
                alert(i18n[currentLang].alertInput || 'Please fill in all fields.');
                return;
            }

            const current = parseFloat(currentInput);
            const target = parseFloat(targetInput);
            const weight = parseFloat(weightInput);

            if (isNaN(current) || isNaN(target) || isNaN(weight)) {
                alert('Please enter valid numbers.');
                return;
            }

            if (weight === 0) {
                alert('Final weight cannot be 0.');
                return;
            }

            // Formula: Final = (Target - Current * (1 - Weight/100)) / (Weight/100)
            const wDecimal = weight / 100;
            const required = (target - current * (1 - wDecimal)) / wDecimal;
            
            const resultArea = document.getElementById('result-area');
            const valEl = document.getElementById('result-val');
            const messageEl = document.getElementById('message');

            valEl.textContent = required.toFixed(2);
            resultArea.classList.remove('hidden');
            
            messageEl.textContent = "";
            messageEl.className = "text-sm mt-3 font-medium";

            if (required > 100) {
                messageEl.textContent = i18n[currentLang].impossible;
                messageEl.classList.add("text-red-500");
            } else if (required <= 0) {
                messageEl.textContent = i18n[currentLang].easy;
                messageEl.classList.add("text-green-500");
            }

            // Smooth scroll to result on mobile
            if(window.innerWidth < 768) {
                resultArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Initialize immediately
        init();

        // Also run on window load to ensure everything is ready
        window.onload = init;
    </script>
</body>
</html>