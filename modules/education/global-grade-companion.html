<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Grade Companion</title>
    
    <meta name="tool-id" content="global_grade_companion">
    <meta name="category" content="education">
    <meta name="icon" content="üåç">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Use FontAwesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        body { background: #f3f4f6; font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .nav-btn.active { border-bottom: 2px solid #2563eb; color: #2563eb; font-weight: 600; }
        
        /* Custom scrollbar for tables */
        .overflow-x-auto::-webkit-scrollbar { height: 8px; }
        .overflow-x-auto::-webkit-scrollbar-track { background: #f1f1f1; }
        .overflow-x-auto::-webkit-scrollbar-thumb { background: #c1c1c1; border-radius: 4px; }
        .overflow-x-auto::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }
        
        /* Animation for result cards */
        @keyframes popIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        .result-card { animation: popIn 0.3s ease-out; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/education/global-grade-companion.html" />
</head>
<body class="p-4 md:p-8">

    <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden min-h-[600px]">
        
        <!-- Header & Language Switcher -->
        <div class="bg-gray-50 border-b p-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fa-solid fa-graduation-cap text-blue-600 text-xl"></i>
                <h1 class="text-xl font-bold text-gray-800" data-i18n="app_title">Global Grade Companion</h1>
            </div>
            <select id="lang-selector" onchange="App.changeLang()" class="text-sm border border-gray-300 rounded-lg p-1.5 bg-white text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            </select>
        </div>

        <!-- Navigation Tabs -->
        <div class="flex border-b overflow-x-auto bg-white">
            <button class="nav-btn active flex-1 py-4 px-4 text-center text-gray-500 hover:text-blue-500 transition whitespace-nowrap" onclick="App.switchTab('emotional')" data-i18n="tab_emotional">
                <i class="fa-solid fa-face-smile mr-2"></i><span data-i18n="nav_emotional">Freshman Mood</span>
            </button>
            <button class="nav-btn flex-1 py-4 px-4 text-center text-gray-500 hover:text-blue-500 transition whitespace-nowrap" onclick="App.switchTab('gpa')" data-i18n="tab_gpa">
                <i class="fa-solid fa-calculator mr-2"></i><span data-i18n="nav_gpa">Academic GPA</span>
            </button>
            <button class="nav-btn flex-1 py-4 px-4 text-center text-gray-500 hover:text-blue-500 transition whitespace-nowrap" onclick="App.switchTab('language')" data-i18n="tab_language">
                <i class="fa-solid fa-language mr-2"></i><span data-i18n="nav_lang">Language Exams</span>
            </button>
            <button class="nav-btn flex-1 py-4 px-4 text-center text-gray-500 hover:text-blue-500 transition whitespace-nowrap" onclick="App.switchTab('reference')" data-i18n="tab_reference">
                <i class="fa-solid fa-book mr-2"></i><span data-i18n="nav_ref">Global Standards</span>
            </button>
        </div>

        <!-- CONTENT: Emotional Calculator -->
        <div id="tab-emotional" class="tab-content active p-6">
            <div class="max-w-xl mx-auto space-y-6">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-gray-800 mb-2" data-i18n="emo_title">The "Praise/Roast" Calculator</h2>
                    <p class="text-gray-500 text-sm" data-i18n="emo_subtitle">Select your vibe and enter your score.</p>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="emo_max_score">Max Score</label>
                        <input type="number" id="emo-max" value="100" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="100, 150, 160...">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="emo_my_score">My Score</label>
                        <input type="number" id="emo-score" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="e.g. 85">
                    </div>
                </div>

                <div class="flex gap-4">
                    <button onclick="EmotionalCalc.calculate('praise')" class="flex-1 bg-green-100 text-green-700 py-4 rounded-xl font-bold hover:bg-green-200 transition flex items-center justify-center gap-2 border border-green-200">
                        <i class="fa-solid fa-hand-holding-heart"></i> <span data-i18n="btn_praise">Praise Me</span>
                    </button>
                    <button onclick="EmotionalCalc.calculate('roast')" class="flex-1 bg-red-100 text-red-700 py-4 rounded-xl font-bold hover:bg-red-200 transition flex items-center justify-center gap-2 border border-red-200">
                        <i class="fa-solid fa-gavel"></i> <span data-i18n="btn_roast">Roast Me</span>
                    </button>
                </div>

                <div id="emo-result" class="hidden result-card bg-white border-2 border-dashed border-gray-300 rounded-xl p-6 text-center mt-6">
                    <div id="emo-icon" class="text-6xl mb-4">ü§î</div>
                    <div id="emo-percentage" class="text-gray-400 text-sm font-mono mb-2">--%</div>
                    <div id="emo-text" class="text-2xl font-bold text-gray-800 leading-relaxed"></div>
                </div>
            </div>
        </div>

        <!-- CONTENT: GPA Calculator -->
        <div id="tab-gpa" class="tab-content p-6">
            <div class="flex flex-col md:flex-row gap-4 mb-6 items-end md:items-center justify-between border-b pb-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="gpa_system_label">Grading System</label>
                    <select id="gpa-system" onchange="GPACalc.updateSystem()" class="p-2 border rounded-lg bg-gray-50 focus:ring-blue-500 outline-none min-w-[200px]">
                        <option value="us">üá∫üá∏ North America (4.0 Scale)</option>
                        <option value="uk">üá¨üáß UK (Honours Degree)</option>
                        <option value="de">üá©üá™ Germany (1.0-6.0)</option>
                        <option value="cn_hundred">üá®üá≥ Percentage (0-100)</option>
                    </select>
                </div>
                <button onclick="GPACalc.addCourse()" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    <i class="fa-solid fa-plus-circle"></i> <span data-i18n="add_course">Add Course</span>
                </button>
            </div>

            <div id="course-list" class="space-y-3 mb-6 max-h-[400px] overflow-y-auto">
                <!-- Courses injected here -->
            </div>

            <button onclick="GPACalc.calculate()" class="w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition shadow-md mb-6" data-i18n="btn_calc_gpa">
                Calculate Result
            </button>

            <div class="bg-gray-800 text-white rounded-xl p-6 flex justify-between items-center shadow-lg">
                <div>
                    <div class="text-gray-400 text-sm mb-1" data-i18n="gpa_result_label">Calculated GPA / Class</div>
                    <div id="gpa-final-score" class="text-4xl font-bold">--</div>
                </div>
                <div class="text-right">
                    <div class="text-gray-400 text-xs" data-i18n="total_credits">Total Credits</div>
                    <div id="gpa-total-credits" class="text-xl font-mono">0</div>
                </div>
            </div>
        </div>

        <!-- CONTENT: Language Exams -->
        <div id="tab-language" class="tab-content p-6">
            <div class="max-w-2xl mx-auto text-center mb-8">
                <h2 class="text-2xl font-bold text-gray-800" data-i18n="lang_title">Language Score Converter</h2>
                <p class="text-gray-500 mt-2 text-sm" data-i18n="lang_desc">Approximate comparisons between IELTS, TOEFL iBT, and CEFR.</p>
            </div>

            <div class="bg-blue-50 rounded-xl p-8 max-w-xl mx-auto border border-blue-100">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 items-center">
                    
                    <!-- Input Section -->
                    <div class="md:col-span-3">
                        <label class="block text-sm font-bold text-gray-700 mb-2" data-i18n="lang_select_input">I have a score in:</label>
                        <div class="flex gap-2 mb-4">
                            <select id="lang-input-type" class="flex-1 p-2 border rounded shadow-sm focus:ring-blue-500 outline-none" onchange="LangCalc.updateInputPlaceholder()">
                                <option value="ielts">IELTS (0-9)</option>
                                <option value="toefl">TOEFL iBT (0-120)</option>
                                <option value="cefr">CEFR (Goethe)</option>
                            </select>
                            <input type="text" id="lang-input-val" class="w-24 p-2 border rounded shadow-sm focus:ring-blue-500 outline-none text-center font-mono font-bold" placeholder="7.0">
                        </div>
                        <button onclick="LangCalc.convert()" class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition font-medium" data-i18n="btn_convert">Convert</button>
                    </div>

                    <!-- Results Section -->
                    <div class="md:col-span-3 grid grid-cols-3 gap-4 mt-4 pt-6 border-t border-blue-200">
                        <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                            <div class="text-xs text-gray-500 font-bold">IELTS</div>
                            <div id="res-ielts" class="text-xl font-bold text-blue-900 mt-1">--</div>
                        </div>
                        <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                            <div class="text-xs text-gray-500 font-bold">TOEFL iBT</div>
                            <div id="res-toefl" class="text-xl font-bold text-blue-900 mt-1">--</div>
                        </div>
                        <div class="text-center p-3 bg-white rounded-lg shadow-sm">
                            <div class="text-xs text-gray-500 font-bold">CEFR/Goethe</div>
                            <div id="res-cefr" class="text-xl font-bold text-blue-900 mt-1">--</div>
                        </div>
                    </div>
                </div>
                <p class="text-xs text-center text-gray-400 mt-6">* <span data-i18n="lang_disclaimer">Estimates only. Institutions vary.</span></p>
            </div>
        </div>

        <!-- CONTENT: Reference Table -->
        <div id="tab-reference" class="tab-content p-6">
            <h2 class="text-xl font-bold text-gray-800 mb-4" data-i18n="ref_title">Global Grading Standards</h2>
            
            <div class="overflow-x-auto border rounded-lg shadow-sm">
                <table class="w-full text-sm text-left text-gray-600">
                    <thead class="text-xs text-gray-700 uppercase bg-gray-50 border-b">
                        <tr>
                            <th class="px-6 py-3" data-i18n="ref_col_grade">Grade/Level</th>
                            <th class="px-6 py-3" data-i18n="ref_col_us">üá∫üá∏ USA (GPA)</th>
                            <th class="px-6 py-3" data-i18n="ref_col_uk">üá¨üáß UK (Degree)</th>
                            <th class="px-6 py-3" data-i18n="ref_col_de">üá©üá™ Germany</th>
                            <th class="px-6 py-3" data-i18n="ref_col_desc">Meaning</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <!-- Excellent -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-bold text-green-700">Excellent</td>
                            <td class="px-6 py-4">A / A+ (4.0)</td>
                            <td class="px-6 py-4">1st (First Class)</td>
                            <td class="px-6 py-4">1.0 - 1.5 (Sehr Gut)</td>
                            <td class="px-6 py-4 text-xs" data-i18n="desc_exc">Outstanding performance, mastery of subject.</td>
                        </tr>
                        <!-- Good -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-bold text-blue-700">Good</td>
                            <td class="px-6 py-4">B (3.0)</td>
                            <td class="px-6 py-4">2:1 (Upper Second)</td>
                            <td class="px-6 py-4">1.6 - 2.5 (Gut)</td>
                            <td class="px-6 py-4 text-xs" data-i18n="desc_good">Above average, strong understanding.</td>
                        </tr>
                        <!-- Average -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-bold text-yellow-700">Average/Pass</td>
                            <td class="px-6 py-4">C (2.0)</td>
                            <td class="px-6 py-4">2:2 (Lower Second)</td>
                            <td class="px-6 py-4">2.6 - 3.5 (Befriedigend)</td>
                            <td class="px-6 py-4 text-xs" data-i18n="desc_avg">Satisfactory, basic understanding.</td>
                        </tr>
                        <!-- Poor/Pass -->
                        <tr class="hover:bg-gray-50">
                            <td class="px-6 py-4 font-bold text-orange-700">Poor Pass</td>
                            <td class="px-6 py-4">D (1.0)</td>
                            <td class="px-6 py-4">3rd (Third Class)</td>
                            <td class="px-6 py-4">3.6 - 4.0 (Ausreichend)</td>
                            <td class="px-6 py-4 text-xs" data-i18n="desc_poor">Minimum passing standard.</td>
                        </tr>
                        <!-- Fail -->
                        <tr class="bg-red-50 hover:bg-red-100">
                            <td class="px-6 py-4 font-bold text-red-700">Fail</td>
                            <td class="px-6 py-4">F (0.0)</td>
                            <td class="px-6 py-4">Fail (Unclassified)</td>
                            <td class="px-6 py-4">5.0 - 6.0 (Mangelhaft)</td>
                            <td class="px-6 py-4 text-xs" data-i18n="desc_fail">Performance not meeting requirements.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
                 <div class="bg-white p-4 rounded-lg shadow border">
                     <h3 class="font-bold mb-2 flex items-center gap-2">üáØüáµ <span data-i18n="jp_title">Japan</span></h3>
                     <p class="text-sm text-gray-600 mb-2"><strong>Univ:</strong> S (90-100), A (80-89), B (70-79), C (60-69), F (<60)</p>
                     <p class="text-sm text-gray-600"><strong>School:</strong> 5 (Best) to 1 (Worst).</p>
                 </div>
                 <div class="bg-white p-4 rounded-lg shadow border">
                     <h3 class="font-bold mb-2 flex items-center gap-2">üá¶üá∫ <span data-i18n="au_title">Australia</span></h3>
                     <p class="text-sm text-gray-600">HD (85+), D (75-84), C (65-74), P (50-64), F (<50)</p>
                 </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // --- I18N DATA ---
        const I18N = {
            'en': {
                app_title: 'Global Grade Companion',
                nav_emotional: 'Freshman Mood',
                nav_gpa: 'Academic GPA',
                nav_lang: 'Language Exams',
                nav_ref: 'Global Standards',
                emo_title: 'The "Praise/Roast" Calculator',
                emo_subtitle: 'Select your vibe and enter your score.',
                emo_max_score: 'Max Score (e.g., 100, 150)',
                emo_my_score: 'My Score',
                btn_praise: 'Praise Me',
                btn_roast: 'Roast Me',
                gpa_system_label: 'Grading System',
                add_course: 'Add Course',
                btn_calc_gpa: 'Calculate Result',
                gpa_result_label: 'Calculated Result',
                total_credits: 'Total Credits',
                lang_title: 'Language Score Converter',
                lang_desc: 'Approximate comparisons between IELTS, TOEFL iBT, and CEFR.',
                lang_select_input: 'I have a score in:',
                btn_convert: 'Convert',
                lang_disclaimer: 'Estimates only. Institutions vary.',
                ref_title: 'Global Grading Standards',
                ref_col_grade: 'Level',
                ref_col_us: 'üá∫üá∏ USA',
                ref_col_uk: 'üá¨üáß UK',
                ref_col_de: 'üá©üá™ Germany',
                ref_col_desc: 'Meaning',
                desc_exc: 'Outstanding performance, mastery of subject.',
                desc_good: 'Above average, strong understanding.',
                desc_avg: 'Satisfactory, basic understanding.',
                desc_poor: 'Minimum passing standard.',
                desc_fail: 'Performance not meeting requirements.',
                jp_title: 'Japan',
                au_title: 'Australia',
                // Dynamic
                praise_high: ["You're literally a genius! üåü", "Harvard is calling! üìû", "Future Nobel Prize winner! üèÜ", "Is your brain made of pure gold? ‚ú®"],
                praise_mid: ["Solid effort! You're getting there! üöÄ", "Not bad at all! Keep climbing! üßó", "You have great potential! üå±"],
                praise_low: ["Scores don't define you! You are loved! ‚ù§Ô∏è", "Einstein failed math too! (Maybe) üß†", "You're trying, and that's what matters! üåà"],
                roast_high: ["Nerd alert! Do you have a life? ü§ì", "Okay, show off. We get it. üòí", "Did you cheat? Be honest. ü§®"],
                roast_mid: ["Mediocrity at its finest. üòê", "Completely forgettable score. üò∂", "Just another brick in the wall. üß±"],
                roast_low: ["My grandma scores higher blindfolded. üëµ", "Are you allergic to studying? üìâ", "Maybe try a career in sleeping? üò¥", "Burger flipping awaits. üçî"]
            },
            'zh-CN': {
                app_title: 'ÂÖ®ËÉΩÊàêÁª©Âä©Êâã',
                nav_emotional: 'Êñ∞ÁîüÊÉÖÁª™ËÆ°ÁÆóÂô®',
                nav_gpa: 'Â≠¶Èú∏GPAËÆ°ÁÆó',
                nav_lang: 'ÁïôÂ≠¶ËØ≠Ë®ÄÊç¢ÁÆó',
                nav_ref: 'ÂÖ®ÁêÉÂ≠¶Âà∂ÂØπÁÖß',
                emo_title: 'Â§∏Â§∏Êàë vs ÊâÅÊâÅÊàë',
                emo_subtitle: 'ÈÄâÊã©‰Ω†ÁöÑÂøÉÊÄÅÔºåËæìÂÖ•‰Ω†ÁöÑÂàÜÊï∞',
                emo_max_score: 'Êª°ÂàÜ (Â¶Ç 100, 150)',
                emo_my_score: 'ÊàëÁöÑÂæóÂàÜ',
                btn_praise: 'Ê±ÇÂ§∏Â•ñ',
                btn_roast: 'Ê±ÇÈ™ÇÈÜí',
                gpa_system_label: 'ËØÑÂàÜ‰ΩìÁ≥ª',
                add_course: 'Ê∑ªÂä†ËØæÁ®ã',
                btn_calc_gpa: 'ËÆ°ÁÆóÁªìÊûú',
                gpa_result_label: 'ËÆ°ÁÆóÁªìÊûú / Á≠âÁ∫ß',
                total_credits: 'ÊÄªÂ≠¶ÂàÜ',
                lang_title: 'ËØ≠Ë®ÄËÄÉËØïÊç¢ÁÆóÂô®',
                lang_desc: 'ÈõÖÊÄù„ÄÅÊâòÁ¶è iBT ‰∏é Ê≠åÂæ∑/CEFR ÁöÑÂèÇËÄÉÊç¢ÁÆó',
                lang_select_input: 'ËæìÂÖ•ÂàÜÊï∞Á±ªÂûã:',
                btn_convert: 'ÂºÄÂßãÊç¢ÁÆó',
                lang_disclaimer: '‰ªÖ‰æõÂèÇËÄÉÔºå‰∏çÂêåÂ≠¶Ê†°Ê†áÂáÜ‰∏çÂêå„ÄÇ',
                ref_title: 'ÂÖ®ÁêÉÊàêÁª©ÂàÜÁ∫ßÂØπÁÖßË°®',
                ref_col_grade: 'Á≠âÁ∫ßËØÑ‰ª∑',
                ref_col_us: 'üá∫üá∏ ÂåóÁæé (GPA)',
                ref_col_uk: 'üá¨üáß Ëã±ÂõΩ (Â≠¶‰Ωç)',
                ref_col_de: 'üá©üá™ Âæ∑ÂõΩ',
                ref_col_desc: 'Ê†∏ÂøÉÂê´‰πâ',
                desc_exc: '‰ºòÁßÄÔºåÂÆåÂÖ®ÊéåÊè°Áü•ËØÜÁÇπ„ÄÇ',
                desc_good: 'ËâØÂ•ΩÔºåÈ´ò‰∫éÂπ≥ÂùáÊ∞¥Âπ≥„ÄÇ',
                desc_avg: '‰∏≠Á≠âÔºåÂü∫Êú¨ÊéåÊè°„ÄÇ',
                desc_poor: 'ÂèäÊ†ºÔºåÂãâÂº∫ÈÄöËøá„ÄÇ',
                desc_fail: '‰∏çÂèäÊ†ºÔºåÊú™ËææÊ†á„ÄÇ',
                jp_title: 'Êó•Êú¨',
                au_title: 'Êæ≥Â§ßÂà©‰∫ö',
                praise_high: ["Â§™Âº∫‰∫ÜÔºÅ‰Ω†ÊòØË°åËµ∞ÁöÑÊïôÁßë‰π¶ÂêóÔºüüìö", "Ê∏ÖÂçéÂåóÂ§ßÂú®Âêë‰Ω†ÊãõÊâãÔºÅüëã", "ËøôÂ∞±ÊòØ‰º†ËØ¥‰∏≠ÁöÑÂ≠¶Á•ûÂêóÔºüüôá‚Äç‚ôÇÔ∏è"],
                praise_mid: ["ÂæàÁ®≥ÔºÅÁªßÁª≠‰øùÊåÅËøô‰∏™ÂäøÂ§¥ÔºÅüöÄ", "Â∑≤ÁªèË∂ÖËøáÂæàÂ§ö‰∫∫‰∫ÜÔºåÂä†Ê≤πÔºÅüí™", "ÊΩúÂäõÊó†ÈôêÔºåÊú™Êù•ÂèØÊúüÔºÅüåü"],
                praise_low: ["ÂàÜÊï∞Âè™ÊòØÊï∞Â≠óÔºå‰Ω†ÁöÑÂÖâËäíÊó†Ê≥ïË¢´Êé©ÁõñÔºÅ‚ú®", "Áà±Ëø™ÁîüÂ∞èÊó∂ÂÄô‰πü‰∏çÂèäÊ†ºÔºåÂà´ÁÅ∞ÂøÉÔºÅüí°", "Âä™ÂäõÁöÑËøáÁ®ãÊØîÁªìÊûúÊõ¥ÈáçË¶ÅÔºÅüåà"],
                roast_high: ["Âç∑ÁéãÂú®Ê≠§ÔºÅÂ§¥ÂèëËøòÂâ©Â§öÂ∞ëÔºüü¶≤", "Èô§‰∫ÜÂ≠¶‰π†Ôºå‰Ω†Ëøò‰ºö‰ªÄ‰πàÔºüü§ì", "Ê≤°ËÄÉÊª°ÂàÜÔºüÈÇ£ËøòÊòØ‰∏çË°åÂïä„ÄÇüòí"],
                roast_mid: ["ËøôÂàÜÊï∞Ôºå‰πüÂ∞±Âõæ‰∏™‰πêÂëµ„ÄÇüòê", "Âπ≥Âπ≥Êó†Â•áÔºåË∑Ø‰∫∫Áî≤Ê∞¥Âπ≥„ÄÇüò∂", "‰∏ç‰∏ä‰∏ç‰∏ãÔºåÊúÄÈöæÂèóÁöÑÂ∞±ÊòØ‰Ω†„ÄÇü§∑‚Äç‚ôÇÔ∏è"],
                roast_low: ["‰Ω†ÁöÑ‰π¶ÊòØ‰π∞Êù•Âû´Ê°åËßíÁöÑÂêóÔºüüìö", "Ëµ∂Á¥ßÂéªÊê¨Á†ñÂêßÔºåÂ∑•Â§¥Âú®ÂÇ¨‰∫Ü„ÄÇüß±", "Ê¥óÊ¥óÁù°ÂêßÔºåÊ¢¶Èáå‰ªÄ‰πàÈÉΩÊúâ„ÄÇüò¥", "ËøôÊô∫ÂïÜÔºåÂëäÂà´Ëá™Ë°åËΩ¶‰∫Ü„ÄÇüö≤"]
            },
            'zh-TW': {
                app_title: 'ÂÖ®ËÉΩÊàêÁ∏æÂä©Êâã',
                nav_emotional: 'Êñ∞ÁîüÊÉÖÁ∑íË®àÁÆóÂô®',
                nav_gpa: 'Â≠∏Èú∏GPAË®àÁÆó',
                nav_lang: 'ÁïôÂ≠∏Ë™ûË®ÄÊèõÁÆó',
                nav_ref: 'ÂÖ®ÁêÉÂ≠∏Âà∂Â∞çÁÖß',
                emo_title: 'Ë™áË™áÊàë vs ÊâÅÊâÅÊàë',
                emo_subtitle: 'ÈÅ∏Êìá‰Ω†ÁöÑÂøÉÊÖãÔºåËº∏ÂÖ•‰Ω†ÁöÑÂàÜÊï∏',
                emo_max_score: 'ÊªøÂàÜ (Â¶Ç 100, 150)',
                emo_my_score: 'ÊàëÁöÑÂæóÂàÜ',
                btn_praise: 'Ê±ÇË™áÁçé',
                btn_roast: 'Ê±ÇÁΩµÈÜí',
                gpa_system_label: 'Ë©ïÂàÜÈ´îÁ≥ª',
                add_course: 'Ê∑ªÂä†Ë™≤Á®ã',
                btn_calc_gpa: 'Ë®àÁÆóÁµêÊûú',
                gpa_result_label: 'Ë®àÁÆóÁµêÊûú / Á≠âÁ¥ö',
                total_credits: 'Á∏ΩÂ≠∏ÂàÜ',
                lang_title: 'Ë™ûË®ÄËÄÉË©¶ÊèõÁÆóÂô®',
                lang_desc: 'ÈõÖÊÄù„ÄÅÊâòÁ¶è iBT Ëàá Ê≠åÂæ∑/CEFR ÁöÑÂèÉËÄÉÊèõÁÆó',
                lang_select_input: 'Ëº∏ÂÖ•ÂàÜÊï∏È°ûÂûã:',
                btn_convert: 'ÈñãÂßãÊèõÁÆó',
                lang_disclaimer: 'ÂÉÖ‰æõÂèÉËÄÉÔºå‰∏çÂêåÂ≠∏Ê†°Ê®ôÊ∫ñ‰∏çÂêå„ÄÇ',
                ref_title: 'ÂÖ®ÁêÉÊàêÁ∏æÂàÜÁ¥öÂ∞çÁÖßË°®',
                ref_col_grade: 'Á≠âÁ¥öË©ïÂÉπ',
                ref_col_us: 'üá∫üá∏ ÂåóÁæé (GPA)',
                ref_col_uk: 'üá¨üáß Ëã±Âúã (Â≠∏‰Ωç)',
                ref_col_de: 'üá©üá™ Âæ∑Âúã',
                ref_col_desc: 'Ê†∏ÂøÉÂê´Áæ©',
                desc_exc: 'ÂÑ™ÁßÄÔºåÂÆåÂÖ®ÊéåÊè°Áü•Ë≠òÈªû„ÄÇ',
                desc_good: 'ËâØÂ•ΩÔºåÈ´òÊñºÂπ≥ÂùáÊ∞¥Âπ≥„ÄÇ',
                desc_avg: '‰∏≠Á≠âÔºåÂü∫Êú¨ÊéåÊè°„ÄÇ',
                desc_poor: 'ÂèäÊ†ºÔºåÂãâÂº∑ÈÄöÈÅé„ÄÇ',
                desc_fail: '‰∏çÂèäÊ†ºÔºåÊú™ÈÅîÊ®ô„ÄÇ',
                jp_title: 'Êó•Êú¨',
                au_title: 'Êæ≥Â§ßÂà©‰∫û',
                praise_high: ["Â§™Âº∑‰∫ÜÔºÅ‰Ω†ÊòØË°åËµ∞ÁöÑÊïôÁßëÊõ∏ÂóéÔºüüìö", "Âè∞Â§ßÂú®Âêë‰Ω†ÊãõÊâãÔºÅüëã", "ÈÄôÂ∞±ÊòØÂÇ≥Ë™™‰∏≠ÁöÑÂ≠∏Á•ûÂóéÔºüüôá‚Äç‚ôÇÔ∏è"],
                praise_mid: ["ÂæàÁ©©ÔºÅÁπºÁ∫å‰øùÊåÅÈÄôÂÄãÂã¢È†≠ÔºÅüöÄ", "Â∑≤Á∂ìË∂ÖÈÅéÂæàÂ§ö‰∫∫‰∫ÜÔºåÂä†Ê≤πÔºÅüí™", "ÊΩõÂäõÁÑ°ÈôêÔºåÊú™‰æÜÂèØÊúüÔºÅüåü"],
                praise_low: ["ÂàÜÊï∏Âè™ÊòØÊï∏Â≠óÔºå‰Ω†ÁöÑÂÖâËäíÁÑ°Ê≥ïË¢´Êé©ËìãÔºÅ‚ú®", "ÊÑõËø™ÁîüÂ∞èÊôÇÂÄô‰πü‰∏çÂèäÊ†ºÔºåÂà•ÁÅ∞ÂøÉÔºÅüí°", "Âä™ÂäõÁöÑÈÅéÁ®ãÊØîÁµêÊûúÊõ¥ÈáçË¶ÅÔºÅüåà"],
                roast_high: ["Âç∑ÁéãÂú®Ê≠§ÔºÅÈ†≠È´ÆÈÇÑÂâ©Â§öÂ∞ëÔºüü¶≤", "Èô§‰∫ÜÂ≠∏ÁøíÔºå‰Ω†ÈÇÑÊúÉ‰ªÄÈ∫ºÔºüü§ì", "Ê≤íËÄÉÊªøÂàÜÔºüÈÇ£ÈÇÑÊòØ‰∏çË°åÂïä„ÄÇüòí"],
                roast_mid: ["ÈÄôÂàÜÊï∏Ôºå‰πüÂ∞±ÂúñÂÄãÊ®ÇÂëµ„ÄÇüòê", "Âπ≥Âπ≥ÁÑ°Â•áÔºåË∑Ø‰∫∫Áî≤Ê∞¥Âπ≥„ÄÇüò∂", "‰∏ç‰∏ä‰∏ç‰∏ãÔºåÊúÄÈõ£ÂèóÁöÑÂ∞±ÊòØ‰Ω†„ÄÇü§∑‚Äç‚ôÇÔ∏è"],
                roast_low: ["‰Ω†ÁöÑÊõ∏ÊòØË≤∑‰æÜÂ¢äÊ°åËßíÁöÑÂóéÔºüüìö", "Ë∂ïÁ∑äÂéªÊê¨Á£öÂêßÔºåÂ∑•È†≠Âú®ÂÇ¨‰∫Ü„ÄÇüß±", "Ê¥óÊ¥óÁù°ÂêßÔºåÂ§¢Ë£°‰ªÄÈ∫ºÈÉΩÊúâ„ÄÇüò¥", "ÈÄôÊô∫ÂïÜÔºåÂëäÂà•ËÖ≥Ë∏èËªä‰∫Ü„ÄÇüö≤"]
            },
            'ja': {
                app_title: 'ÊàêÁ∏æ„Éû„Çπ„Çø„Éº„ÉÑ„Éº„É´',
                nav_emotional: 'Ë§í„ÇÅ„Å¶/ÁΩµ„Å£„Å¶',
                nav_gpa: 'GPAË®àÁÆó',
                nav_lang: 'Ë™ûÂ≠¶„Çπ„Ç≥„Ç¢ÊèõÁÆó',
                nav_ref: '‰∏ñÁïå„ÅÆÊàêÁ∏æÂü∫Ê∫ñ',
                emo_title: 'Ë§í„ÇÅ„Çâ„Çå„Åü„ÅÑ vs ÁΩµ„Çâ„Çå„Åü„ÅÑ',
                emo_subtitle: 'Ê∞óÂàÜ„Å´Âêà„Çè„Åõ„Å¶„É¢„Éº„Éâ„ÇíÈÅ∏Êäû',
                emo_max_score: 'Ê∫ÄÁÇπ (‰æã: 100, 150)',
                emo_my_score: '„ÅÇ„Å™„Åü„ÅÆÁÇπÊï∞',
                btn_praise: 'Ë§í„ÇÅ„Å¶ÔºÅ',
                btn_roast: 'Âè±„Å£„Å¶ÔºÅ',
                gpa_system_label: 'Ë©ï‰æ°„Ç∑„Çπ„ÉÜ„É†',
                add_course: 'ÁßëÁõÆËøΩÂä†',
                btn_calc_gpa: 'Ë®àÁÆó„Åô„Çã',
                gpa_result_label: 'Ë®àÁÆóÁµêÊûú',
                total_credits: 'Á∑èÂçò‰ΩçÊï∞',
                lang_title: 'Ë™ûÂ≠¶„Çπ„Ç≥„Ç¢ÊèõÁÆó',
                lang_desc: 'IELTS„ÄÅTOEFL„ÄÅCEFR„ÅÆÁõÆÂÆâÊèõÁÆó',
                lang_select_input: 'ÂÖ•Âäõ„Çø„Ç§„Éó:',
                btn_convert: 'ÊèõÁÆóÂÆüË°å',
                lang_disclaimer: '„ÅÇ„Åè„Åæ„ÅßÁõÆÂÆâ„Åß„Åô„ÄÇ',
                ref_title: '‰∏ñÁïå„ÅÆÊàêÁ∏æË©ï‰æ°Âü∫Ê∫ñ',
                ref_col_grade: 'Ë©ï‰æ°',
                ref_col_us: 'üá∫üá∏ Á±≥ÂõΩ',
                ref_col_uk: 'üá¨üáß Ëã±ÂõΩ',
                ref_col_de: 'üá©üá™ „Éâ„Ç§„ÉÑ',
                ref_col_desc: 'ÊÑèÂë≥',
                desc_exc: 'Ê•µ„ÇÅ„Å¶ÂÑ™ÁßÄ„ÄÇ',
                desc_good: 'ËâØÂ•Ω„ÄÅÂπ≥Âùá‰ª•‰∏ä„ÄÇ',
                desc_avg: 'ÂèØ„ÄÅÂπ≥ÂùáÁöÑ„ÄÇ',
                desc_poor: '„ÇÆ„É™„ÇÆ„É™ÂêàÊ†º„ÄÇ',
                desc_fail: '‰∏çÂêàÊ†º„ÄÇ',
                jp_title: 'Êó•Êú¨',
                au_title: '„Ç™„Éº„Çπ„Éà„É©„É™„Ç¢',
                praise_high: ["Â§©Êâç„Åß„Åô„ÅãÔºÅÔºüüéì", "Êù±Â§ß„É¨„Éô„É´„Åã„ÇÇÔºÅÔºüüè´", "Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅÁ•û„Åå„Åã„Å£„Å¶„ÅÑ„Åæ„ÅôÔºÅ‚ú®"],
                praise_mid: ["„ÅÑ„ÅÑÊÑü„ÅòÔºÅ„Åù„ÅÆË™øÂ≠êÔºÅüëç", "Âä™Âäõ„ÅÆÊàêÊûú„ÅåÂá∫„Å¶„ÅÑ„Åæ„ÅôÔºÅüå±", "Âπ≥Âùá‰ª•‰∏äÔºÅËá™‰ø°„ÇíÊåÅ„Å£„Å¶ÔºÅüí™"],
                praise_low: ["ÁÇπÊï∞„ÅåÂÖ®„Å¶„Åò„ÇÉ„Å™„ÅÑ„ÇàÔºÅüíñ", "Ê¨°„ÅØ„Åç„Å£„Å®Â§ß‰∏àÂ§´ÔºÅüåà", "Âêõ„ÅÆËâØ„Åï„ÅØ‰ªñ„Å´„ÅÇ„ÇãÔºÅüçÄ"],
                roast_high: ["ÂãâÂº∑„Éû„Ç∑„Éº„É≥„Åã„Çà...ü§ñ", "ÂèãÈÅî„ÅÑ„ÇãÔºüü§ì", "Ê∫ÄÁÇπ„Åò„ÇÉ„Å™„ÅÑ„ÅÆÔºü„Å†„Åï„ÅÑ„ÄÇüòí"],
                roast_mid: ["ÊôÆÈÄö„ÅÆÊ•µ„Åø„ÄÇüòê", "Âç∞Ë±°„Å´ÊÆã„Çâ„Å™„ÅÑÁÇπÊï∞„Å†„Å≠„ÄÇüò∂", "„ÇÇ„Å£„Å®Êú¨Ê∞óÂá∫„Åõ„Å∞Ôºüü•±"],
                roast_low: ["ÊïôÁßëÊõ∏È£ü„Åπ„ÅüÊñπ„Åå„Éû„Ç∑„Åã„ÇÇ„ÄÇüìö", "ÂØù„Å¶„Åü„ÅÆÔºüüò¥", "ÊâçËÉΩ„ÅÆÁÑ°ÈßÑÈÅ£„ÅÑÔºà„ÅÇ„Çå„Å∞„ÅÆË©±Ôºâ„ÄÇüóëÔ∏è"]
            },
            'ru': {
                app_title: '–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –û—Ü–µ–Ω–æ–∫',
                nav_emotional: '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
                nav_gpa: '–ê–∫–∞–¥–µ–º. GPA',
                nav_lang: '–Ø–∑—ã–∫–æ–≤—ã–µ –¢–µ—Å—Ç—ã',
                nav_ref: '–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã',
                emo_title: '–ü–æ—Ö–≤–∞–ª–∏—Ç—å vs –ü–æ—Ä—É–≥–∞—Ç—å',
                emo_subtitle: '–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –∏ –≤–≤–µ–¥–∏—Ç–µ –±–∞–ª–ª',
                emo_max_score: '–ú–∞–∫—Å. –±–∞–ª–ª (100, 150)',
                emo_my_score: '–í–∞—à –±–∞–ª–ª',
                btn_praise: '–ü–æ—Ö–≤–∞–ª–∏ –º–µ–Ω—è',
                btn_roast: '–û—Ç—Ä—É–≥–∞–π –º–µ–Ω—è',
                gpa_system_label: '–°–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–æ–∫',
                add_course: '–î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å',
                btn_calc_gpa: '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
                gpa_result_label: '–†–µ–∑—É–ª—å—Ç–∞—Ç',
                total_credits: '–í—Å–µ–≥–æ –∫—Ä–µ–¥–∏—Ç–æ–≤',
                lang_title: '–ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä —è–∑—ã–∫–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤',
                lang_desc: '–°—Ä–∞–≤–Ω–µ–Ω–∏–µ IELTS, TOEFL –∏ CEFR',
                lang_select_input: '–¢–∏–ø —Ç–µ—Å—Ç–∞:',
                btn_convert: '–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å',
                lang_disclaimer: '–¢–æ–ª—å–∫–æ –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏.',
                ref_title: '–ú–∏—Ä–æ–≤—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –æ—Ü–µ–Ω–æ–∫',
                ref_col_grade: '–£—Ä–æ–≤–µ–Ω—å',
                ref_col_us: 'üá∫üá∏ –°–®–ê',
                ref_col_uk: 'üá¨üáß –í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è',
                ref_col_de: 'üá©üá™ –ì–µ—Ä–º–∞–Ω–∏—è',
                ref_col_desc: '–ó–Ω–∞—á–µ–Ω–∏–µ',
                desc_exc: '–û—Ç–ª–∏—á–Ω–æ, –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ.',
                desc_good: '–•–æ—Ä–æ—à–æ, –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ.',
                desc_avg: '–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ.',
                desc_poor: '–ï–ª–µ-–µ–ª–µ —Å–¥–∞–ª.',
                desc_fail: '–ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ.',
                jp_title: '–Ø–ø–æ–Ω–∏—è',
                au_title: '–ê–≤—Å—Ç—Ä–∞–ª–∏—è',
                praise_high: ["–¢—ã –ø—Ä–æ—Å—Ç–æ –≥–µ–Ω–∏–π! üß†", "–ë—É–¥—É—â–∏–π –ù–æ–±–µ–ª–µ–≤—Å–∫–∏–π –ª–∞—É—Ä–µ–∞—Ç! üèÜ", "–ü–æ—Ç—Ä—è—Å–∞—é—â–µ! üåü"],
                praise_mid: ["–ù–µ–ø–ª–æ—Ö–æ, —Ç–∞–∫ –¥–µ—Ä–∂–∞—Ç—å! üëç", "–•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞! üí™", "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª –µ—Å—Ç—å! üå±"],
                praise_low: ["–û—Ü–µ–Ω–∫–∏ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç —Ç–µ–±—è! ‚ù§Ô∏è", "–ù–µ —Å–¥–∞–≤–∞–π—Å—è! üåà", "–ì–ª–∞–≤–Ω–æ–µ - —É—á–∞—Å—Ç–∏–µ! (–®—É—Ç–∫–∞) üòâ"],
                roast_high: ["–ë–æ—Ç–∞–Ω –¥–µ—Ç–µ–∫—Ç–µ–¥. ü§ì", "–£ —Ç–µ–±—è –µ—Å—Ç—å –ª–∏—á–Ω–∞—è –∂–∏–∑–Ω—å? üòí", "–ú–æ–≥ –±—ã –∏ –ª—É—á—à–µ. üòê"],
                roast_mid: ["–°–µ—Ä–æ—Å—Ç—å. üò∂", "–ù–∏ —Ç–æ –Ω–∏ —Å—ë. ü§∑‚Äç‚ôÇÔ∏è", "–°–∫—É—á–Ω–æ. ü•±"],
                roast_low: ["–¢—ã –≤–æ–æ–±—â–µ –∫–Ω–∏–≥—É –æ—Ç–∫—Ä—ã–≤–∞–ª? üìö", "–ò–¥–∏ —Ä–∞–±–æ—Ç–∞–π –≤ –ú–∞–∫–¥–æ–Ω–∞–ª—å–¥—Å. üçî", "–°–ø–∏ –¥–∞–ª—å—à–µ. üò¥"]
            }
        };

        // --- APP LOGIC ---
        const App = {
            currentLang: 'en',
            
            init: () => {
                // Auto-detect language
                const userLang = navigator.language || navigator.userLanguage;
                if (userLang.startsWith('zh')) App.currentLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
                else if (userLang.startsWith('ja')) App.currentLang = 'ja';
                else if (userLang.startsWith('ru')) App.currentLang = 'ru';
                
                document.getElementById('lang-selector').value = App.currentLang;
                App.applyLang();
                
                // Initialize modules
                GPACalc.init();
            },

            switchTab: (tabId) => {
                document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
                document.getElementById(`tab-${tabId}`).classList.add('active');
                
                document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
                event.currentTarget.classList.add('active');
            },

            changeLang: () => {
                App.currentLang = document.getElementById('lang-selector').value;
                App.applyLang();
                // Refresh dynamic content if needed
                if(document.getElementById('emo-text').innerText) {
                    // clear old text to avoid confusion or re-trigger logic if complex
                    document.getElementById('emo-text').innerText = ""; 
                    document.getElementById('emo-result').classList.add('hidden');
                }
                GPACalc.updateSystem(); // Update dropdown options translation
            },

            applyLang: () => {
                const texts = I18N[App.currentLang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(texts[key]) el.innerText = texts[key];
                });
            }
        };

        // --- EMOTIONAL CALCULATOR ---
        const EmotionalCalc = {
            calculate: (mode) => {
                const max = parseFloat(document.getElementById('emo-max').value) || 100;
                const score = parseFloat(document.getElementById('emo-score').value);
                const resultCard = document.getElementById('emo-result');
                const textEl = document.getElementById('emo-text');
                const iconEl = document.getElementById('emo-icon');
                const pctEl = document.getElementById('emo-percentage');

                if (isNaN(score)) {
                    alert("Please enter a valid score!");
                    return;
                }

                const percentage = (score / max) * 100;
                let messages = [];
                let icon = "";

                const langData = I18N[App.currentLang];

                if (mode === 'praise') {
                    if (percentage >= 90) { messages = langData.praise_high; icon = "üèÜ"; resultCard.className = "result-card bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center mt-6 text-green-800"; }
                    else if (percentage >= 60) { messages = langData.praise_mid; icon = "üëç"; resultCard.className = "result-card bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center mt-6 text-green-800"; }
                    else { messages = langData.praise_low; icon = "‚ù§Ô∏è"; resultCard.className = "result-card bg-green-50 border-2 border-green-200 rounded-xl p-6 text-center mt-6 text-green-800"; }
                } else {
                    // Roast
                    if (percentage >= 90) { messages = langData.roast_high; icon = "ü§ì"; resultCard.className = "result-card bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center mt-6 text-red-800"; }
                    else if (percentage >= 60) { messages = langData.roast_mid; icon = "üòê"; resultCard.className = "result-card bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center mt-6 text-red-800"; }
                    else { messages = langData.roast_low; icon = "üíÄ"; resultCard.className = "result-card bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center mt-6 text-red-800"; }
                }

                const randomMsg = messages[Math.floor(Math.random() * messages.length)];
                
                resultCard.classList.remove('hidden');
                // Trigger reflow for animation
                void resultCard.offsetWidth; 
                
                iconEl.innerText = icon;
                pctEl.innerText = `${percentage.toFixed(1)}%`;
                textEl.innerText = randomMsg;
            }
        };

        // --- GPA CALCULATOR ---
        const GPACalc = {
            courseCount: 0,
            
            init: () => {
                GPACalc.addCourse();
                GPACalc.addCourse();
                GPACalc.addCourse();
            },

            getGradeOptions: (system) => {
                // Returns HTML string of options based on system
                if (system === 'us') {
                    return `
                        <option value="4.0">A / A+ (90-100)</option>
                        <option value="3.7">A- (85-89)</option>
                        <option value="3.3">B+ (82-84)</option>
                        <option value="3.0">B (80-82)</option>
                        <option value="2.7">B- (77-79)</option>
                        <option value="2.3">C+ (73-76)</option>
                        <option value="2.0">C (70-72)</option>
                        <option value="1.0">D (60-69)</option>
                        <option value="0.0">F (<60)</option>
                    `;
                } else if (system === 'uk') {
                    return `
                        <option value="70">1st (70%+)</option>
                        <option value="60">2:1 (60-69%)</option>
                        <option value="50">2:2 (50-59%)</option>
                        <option value="40">3rd (40-49%)</option>
                        <option value="0">Fail (<40%)</option>
                    `;
                } else if (system === 'de') {
                    return `
                        <option value="1.0">1.0 (Sehr Gut)</option>
                        <option value="1.3">1.3</option>
                        <option value="1.7">1.7 (Gut)</option>
                        <option value="2.0">2.0</option>
                        <option value="2.3">2.3</option>
                        <option value="2.7">2.7 (Befriedigend)</option>
                        <option value="3.0">3.0</option>
                        <option value="3.3">3.3</option>
                        <option value="3.7">3.7 (Ausreichend)</option>
                        <option value="4.0">4.0</option>
                        <option value="5.0">5.0 (Mangelhaft)</option>
                    `;
                } else {
                    return `<option value="0">Enter 0-100</option>`; // Placeholder for custom numeric input
                }
            },

            updateSystem: () => {
                const system = document.getElementById('gpa-system').value;
                const selectors = document.querySelectorAll('.grade-select');
                const isNumeric = system === 'cn_hundred';

                selectors.forEach(sel => {
                    if(isNumeric) {
                         // Switch to input type number if it was select, simplified here by just hiding select and showing input
                         // For simplicity in this demo, we will just reload options and users pick ranges
                         // A proper implementation swaps DOM elements. Let's stick to Dropdown for US/UK/DE
                    }
                    sel.innerHTML = GPACalc.getGradeOptions(system);
                });
            },

            addCourse: () => {
                GPACalc.courseCount++;
                const div = document.createElement('div');
                div.className = "flex gap-2 items-center bg-gray-50 p-3 rounded-lg";
                div.id = `course-${GPACalc.courseCount}`;
                
                const system = document.getElementById('gpa-system').value;
                
                div.innerHTML = `
                    <input type="text" class="flex-1 p-2 border rounded focus:ring-blue-500 outline-none text-sm" placeholder="Course Name">
                    <select class="grade-select w-32 p-2 border rounded focus:ring-blue-500 outline-none text-sm bg-white">
                        ${GPACalc.getGradeOptions(system)}
                    </select>
                    <input type="number" class="credit-input w-20 p-2 border rounded focus:ring-blue-500 outline-none text-sm text-center" placeholder="Credits" value="3" min="0">
                    <button onclick="document.getElementById('course-${GPACalc.courseCount}').remove()" class="text-gray-400 hover:text-red-500 px-2"><i class="fa-solid fa-times"></i></button>
                `;
                document.getElementById('course-list').appendChild(div);
            },

            calculate: () => {
                const system = document.getElementById('gpa-system').value;
                const rows = document.querySelectorAll('#course-list > div');
                let totalPoints = 0;
                let totalCredits = 0;
                
                rows.forEach(row => {
                    const gradeVal = parseFloat(row.querySelector('select').value);
                    const credits = parseFloat(row.querySelector('.credit-input').value);
                    
                    if (!isNaN(gradeVal) && !isNaN(credits)) {
                        totalPoints += gradeVal * credits;
                        totalCredits += credits;
                    }
                });

                const resEl = document.getElementById('gpa-final-score');
                const credEl = document.getElementById('gpa-total-credits');
                credEl.innerText = totalCredits;

                if (totalCredits === 0) {
                    resEl.innerText = "--";
                    return;
                }

                const avg = totalPoints / totalCredits;

                if (system === 'us') {
                    resEl.innerText = avg.toFixed(2);
                } else if (system === 'uk') {
                    // UK average logic
                    let honor = "Fail";
                    if (avg >= 70) honor = "1st Class";
                    else if (avg >= 60) honor = "2:1";
                    else if (avg >= 50) honor = "2:2";
                    else if (avg >= 40) honor = "3rd";
                    resEl.innerText = honor;
                } else if (system === 'de') {
                    resEl.innerText = avg.toFixed(1);
                }
            }
        };

        // --- LANGUAGE CALCULATOR ---
        const LangCalc = {
            updateInputPlaceholder: () => {
                const type = document.getElementById('lang-input-type').value;
                const input = document.getElementById('lang-input-val');
                if (type === 'ielts') input.placeholder = "0-9";
                else if (type === 'toefl') input.placeholder = "0-120";
                else input.placeholder = "A1-C2";
            },

            convert: () => {
                const type = document.getElementById('lang-input-type').value;
                let val = document.getElementById('lang-input-val').value.toUpperCase().trim();
                
                // Normalization
                let ielts = null;
                
                // Convert input to a base IELTS score for calculation
                if (type === 'ielts') {
                    ielts = parseFloat(val);
                } else if (type === 'toefl') {
                    const t = parseInt(val);
                    if (t >= 118) ielts = 9;
                    else if (t >= 110) ielts = 8.5;
                    else if (t >= 102) ielts = 8;
                    else if (t >= 94) ielts = 7.5;
                    else if (t >= 79) ielts = 7; // 79-93 is broad, usually 94 is 7.5, 79 is bottom of 6.5/7 border. Standard: 94->7.5, 79->6.5/7. Let's approx.
                    else if (t >= 60) ielts = 6;
                    else if (t >= 46) ielts = 5.5;
                    else if (t >= 35) ielts = 5;
                    else ielts = 4;
                } else if (type === 'cefr') {
                    if (val === 'C2') ielts = 8.5;
                    else if (val === 'C1') ielts = 7;
                    else if (val === 'B2') ielts = 5.5; // 5.5-6.5
                    else if (val === 'B1') ielts = 4.5;
                    else ielts = 3; // A2/A1
                }

                // Render Results
                if (ielts === null || isNaN(ielts)) {
                    document.getElementById('res-ielts').innerText = "?";
                    document.getElementById('res-toefl').innerText = "?";
                    document.getElementById('res-cefr').innerText = "?";
                    return;
                }

                // IELTS
                document.getElementById('res-ielts').innerText = ielts;

                // To Toefl
                let toeflRange = "";
                if (ielts >= 9) toeflRange = "118-120";
                else if (ielts >= 8.5) toeflRange = "115-117";
                else if (ielts >= 8) toeflRange = "110-114";
                else if (ielts >= 7.5) toeflRange = "102-109";
                else if (ielts >= 7) toeflRange = "94-101";
                else if (ielts >= 6.5) toeflRange = "79-93";
                else if (ielts >= 6) toeflRange = "60-78";
                else if (ielts >= 5.5) toeflRange = "46-59";
                else toeflRange = "< 46";
                document.getElementById('res-toefl').innerText = toeflRange;

                // To CEFR
                let cefr = "";
                if (ielts >= 8.5) cefr = "C2";
                else if (ielts >= 7) cefr = "C1";
                else if (ielts >= 5.5) cefr = "B2";
                else if (ielts >= 4) cefr = "B1";
                else cefr = "A2";
                document.getElementById('res-cefr').innerText = cefr;
            }
        };

        // Start
        document.addEventListener('DOMContentLoaded', App.init);
    </script>

    <div id="related-tools-container"></div>
    <script src="../../scripts/related.js"></script>
    
</body>
</html>