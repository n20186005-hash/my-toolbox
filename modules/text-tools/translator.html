<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="Text Tools">
    <meta name="icon" content="üåê">
    <title>Online Translator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 900px; margin: 0 auto; position: relative; }
        .section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.9rem; color: #4b5563; margin-bottom: 4px; font-weight: 500; }
        textarea, select { width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 1rem; }
        textarea { min-height: 150px; resize: vertical; }
        .result-card { background: #ecfdf5; border: 1px solid #d1fae5; border-radius: 8px; padding: 15px; margin-top: 15px; }
        .intro-section { margin-top: 30px; padding: 20px; background-color: #f8fafc; border-radius: 8px; font-size: 0.95rem; color: #475569; }
        .lang-selectors { display: flex; gap: 10px; margin-bottom: 15px; }
        .lang-selector { flex: 1; }
        .swap-btn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border: 1px solid #d1d5db; border-radius: 50%; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1); z-index: 10; }
        .swap-btn:hover { background-color: #f3f4f6; }
        .translation-area { position: relative; }
        /* Loading spinner */
        .spinner { display: inline-block; width: 12px; height: 12px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s ease-in-out infinite; margin-right: 8px; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/text-tools/translator.html" />
</head>
<body>

    <div class="tool-module" id="translator-tool">
        <!-- Language Selector -->
        <div class="absolute top-4 right-4">
            <select id="interface-lang" onchange="Translator.changeInterfaceLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2" data-i18n="title">üåê Online Translator</h2>

        <div class="space-y-6">
            <!-- Translation Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="translation_settings">Translation Settings</h3>
                
                <div class="lang-selectors">
                    <div class="lang-selector form-group">
                        <label data-i18n="source_lang">Source Language</label>
                        <select id="source-lang" class="focus:ring-2 focus:ring-green-500 outline-none">
                            <option value="auto" data-i18n="auto_detect">Auto Detect (Def: EN)</option>
                            <option value="en" data-i18n="english">English</option>
                            <option value="zh-CN" data-i18n="chinese_simplified">Chinese (Simplified)</option>
                            <option value="zh-TW" data-i18n="chinese_traditional">Chinese (Traditional)</option>
                            <option value="ja" data-i18n="japanese">Japanese</option>
                            <option value="ru" data-i18n="russian">Russian</option>
                            <option value="es" data-i18n="spanish">Spanish</option>
                            <option value="fr" data-i18n="french">French</option>
                            <option value="de" data-i18n="german">German</option>
                            <option value="it" data-i18n="italian">Italian</option>
                            <option value="ko" data-i18n="korean">Korean</option>
                        </select>
                    </div>
                    <div class="lang-selector form-group">
                        <label data-i18n="target_lang">Target Language</label>
                        <select id="target-lang" class="focus:ring-2 focus:ring-green-500 outline-none">
                            <option value="en" data-i18n="english">English</option>
                            <option value="zh-CN" data-i18n="chinese_simplified" selected>Chinese (Simplified)</option>
                            <option value="zh-TW" data-i18n="chinese_traditional">Chinese (Traditional)</option>
                            <option value="ja" data-i18n="japanese">Japanese</option>
                            <option value="ru" data-i18n="russian">Russian</option>
                            <option value="es" data-i18n="spanish">Spanish</option>
                            <option value="fr" data-i18n="french">French</option>
                            <option value="de" data-i18n="german">German</option>
                            <option value="it" data-i18n="italian">Italian</option>
                            <option value="ko" data-i18n="korean">Korean</option>
                        </select>
                    </div>
                </div>
                
                <div class="translation-area">
                    <div class="form-group">
                        <label data-i18n="text_to_translate">Text to Translate</label>
                        <textarea id="source-text" placeholder="Enter text to translate..." class="focus:ring-2 focus:ring-green-500 outline-none transition-colors" oninput="Translator.delayTranslate()"></textarea>
                    </div>
                    
                    <div class="swap-btn" onclick="Translator.swapLanguages()" title="Swap languages">‚ÜîÔ∏è</div>
                    
                    <div class="form-group">
                        <label data-i18n="translation_result">Translation Result</label>
                        <div class="result-card">
                            <textarea id="result-text" readonly placeholder="Translation will appear here..." class="bg-transparent border-none focus:ring-0 resize-none w-full h-full outline-none text-gray-800"></textarea>
                        </div>
                    </div>
                </div>
                
                <button id="translate-btn" onclick="Translator.translate()" class="w-full bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700 transition mb-2 flex justify-center items-center shadow-sm active:transform active:scale-[0.99]">
                    <span data-i18n="translate_btn">Translate</span>
                </button>
                <button onclick="Translator.clearText()" class="w-full bg-gray-200 text-gray-700 py-2 rounded font-medium hover:bg-gray-300 transition" data-i18n="clear_btn">Clear All</button>
            </div>

            <!-- Intro -->
            <div class="intro-section">
                <h3 class="text-lg font-semibold mb-2 text-gray-800" data-i18n="intro_title">About This Tool</h3>
                <p data-i18n="intro_text">This tool uses a free public API for translations. It supports multiple languages including English, Chinese, Japanese, and more. Note: 'Auto Detect' defaults to English in this free version.</p>
            </div>
        </div>
    </div>

    <script>
        // Using window.Translator to ensure global availability in all environments
        window.Translator = {
            i18n: {
                'en': {
                    title: 'üåê Online Translator',
                    translation_settings: 'Translation Settings',
                    source_lang: 'Source Language',
                    target_lang: 'Target Language',
                    auto_detect: 'Auto Detect (Def: EN)',
                    english: 'English',
                    chinese_simplified: 'Chinese (Simplified)',
                    chinese_traditional: 'Chinese (Traditional)',
                    japanese: 'Japanese',
                    russian: 'Russian',
                    spanish: 'Spanish',
                    french: 'French',
                    german: 'German',
                    italian: 'Italian',
                    korean: 'Korean',
                    text_to_translate: 'Text to Translate',
                    translation_result: 'Translation Result',
                    translate_btn: 'Translate',
                    clear_btn: 'Clear All',
                    intro_title: 'About This Tool',
                    intro_text: 'This tool uses a free public API for translations. It supports multiple languages including English, Chinese, Japanese, and more. Note: "Auto Detect" defaults to English in this free version.',
                    translating: 'Translating...'
                },
                'zh-CN': {
                    title: 'üåê Âú®Á∫øÁøªËØë',
                    translation_settings: 'ÁøªËØëËÆæÁΩÆ',
                    source_lang: 'Ê∫êËØ≠Ë®Ä',
                    target_lang: 'ÁõÆÊ†áËØ≠Ë®Ä',
                    auto_detect: 'Ëá™Âä®Ê£ÄÊµã (ÈªòËÆ§: Ëã±ËØ≠)',
                    english: 'Ëã±ËØ≠',
                    chinese_simplified: '‰∏≠ÊñáÔºàÁÆÄ‰ΩìÔºâ',
                    chinese_traditional: '‰∏≠ÊñáÔºàÁπÅ‰ΩìÔºâ',
                    japanese: 'Êó•ËØ≠',
                    russian: '‰øÑËØ≠',
                    spanish: 'Ë•øÁè≠ÁâôËØ≠',
                    french: 'Ê≥ïËØ≠',
                    german: 'Âæ∑ËØ≠',
                    italian: 'ÊÑèÂ§ßÂà©ËØ≠',
                    korean: 'Èü©ËØ≠',
                    text_to_translate: 'ÂæÖÁøªËØëÊñáÊú¨',
                    translation_result: 'ÁøªËØëÁªìÊûú',
                    translate_btn: 'ÁøªËØë',
                    clear_btn: 'Ê∏ÖÁ©∫ÂÖ®ÈÉ®',
                    intro_title: 'ÂÖ≥‰∫éÊú¨Â∑•ÂÖ∑',
                    intro_text: 'Êú¨Â∑•ÂÖ∑‰ΩøÁî®ÂÖçË¥πÁöÑÂÖ¨ÂÖ± API ËøõË°åÁøªËØë„ÄÇÊîØÊåÅËã±ËØ≠„ÄÅ‰∏≠Êñá„ÄÅÊó•ËØ≠Á≠âÂ§öÁßçËØ≠Ë®Ä„ÄÇÊ≥®ÊÑèÔºöÂú®ÂÖçË¥πÁâàÊú¨‰∏≠Ôºå‚ÄúËá™Âä®Ê£ÄÊµã‚ÄùÂ∞áÈªòËÆ§‰∏∫Ëã±ËØ≠„ÄÇ',
                    translating: 'ÁøªËØë‰∏≠...'
                },
                'zh-TW': {
                    title: 'üåê Á∑ö‰∏äÁøªË≠Ø',
                    translation_settings: 'ÁøªË≠ØË®≠ÂÆö',
                    source_lang: '‰æÜÊ∫êË™ûË®Ä',
                    target_lang: 'ÁõÆÊ®ôË™ûË®Ä',
                    auto_detect: 'Ëá™ÂãïÂÅµÊ∏¨ (È†êË®≠: Ëã±Ë™û)',
                    english: 'Ëã±Ë™û',
                    chinese_simplified: '‰∏≠ÊñáÔºàÁ∞°È´îÔºâ',
                    chinese_traditional: '‰∏≠ÊñáÔºàÁπÅÈ´îÔºâ',
                    japanese: 'Êó•Ë™û',
                    russian: '‰øÑË™û',
                    spanish: 'Ë•øÁè≠ÁâôË™û',
                    french: 'Ê≥ïË™û',
                    german: 'Âæ∑Ë™û',
                    italian: 'Áæ©Â§ßÂà©Ë™û',
                    korean: 'ÈüìË™û',
                    text_to_translate: 'ÂæÖÁøªË≠ØÊñáÂ≠ó',
                    translation_result: 'ÁøªË≠ØÁµêÊûú',
                    translate_btn: 'ÁøªË≠Ø',
                    clear_btn: 'Ê∏ÖÁ©∫ÂÖ®ÈÉ®',
                    intro_title: 'ÈóúÊñºÊú¨Â∑•ÂÖ∑',
                    intro_text: 'Êú¨Â∑•ÂÖ∑‰ΩøÁî®ÂÖçË≤ªÁöÑÂÖ¨ÂÖ± API ÈÄ≤Ë°åÁøªË≠Ø„ÄÇÊîØÊè¥Ëã±Ë™û„ÄÅ‰∏≠Êñá„ÄÅÊó•Ë™ûÁ≠âÂ§öÁ®ÆË™ûË®Ä„ÄÇÊ≥®ÊÑèÔºöÂú®ÂÖçË≤ªÁâàÊú¨‰∏≠Ôºå„ÄåËá™ÂãïÂÅµÊ∏¨„ÄçÂ∞áÈ†êË®≠ÁÇ∫Ëã±Ë™û„ÄÇ',
                    translating: 'ÁøªË≠Ø‰∏≠...'
                },
                'ja': {
                    title: 'üåê „Ç™„É≥„É©„Ç§„É≥ÁøªË®≥',
                    translation_settings: 'ÁøªË®≥Ë®≠ÂÆö',
                    source_lang: 'ÂéüË™û',
                    target_lang: 'ÂØæË±°Ë®ÄË™û',
                    auto_detect: 'Ëá™ÂãïÊ§úÂá∫ (Êó¢ÂÆö: Ëã±Ë™û)',
                    english: 'Ëã±Ë™û',
                    chinese_simplified: '‰∏≠ÂõΩË™ûÔºàÁ∞°‰ΩìÔºâ',
                    chinese_traditional: '‰∏≠ÂõΩË™ûÔºàÁπÅ‰ΩìÔºâ',
                    japanese: 'Êó•Êú¨Ë™û',
                    russian: '„É≠„Ç∑„Ç¢Ë™û',
                    spanish: '„Çπ„Éö„Ç§„É≥Ë™û',
                    french: '„Éï„É©„É≥„ÇπË™û',
                    german: '„Éâ„Ç§„ÉÑË™û',
                    italian: '„Ç§„Çø„É™„Ç¢Ë™û',
                    korean: 'ÈüìÂõΩË™û',
                    text_to_translate: 'ÁøªË®≥„Åô„Çã„ÉÜ„Ç≠„Çπ„Éà',
                    translation_result: 'ÁøªË®≥ÁµêÊûú',
                    translate_btn: 'ÁøªË®≥',
                    clear_btn: '„Åô„Åπ„Å¶Ê∂àÂéª',
                    intro_title: '„Åì„ÅÆ„ÉÑ„Éº„É´„Å´„Å§„ÅÑ„Å¶',
                    intro_text: '„Åì„ÅÆ„ÉÑ„Éº„É´„ÅØÁÑ°Êñô„ÅÆÂÖ¨ÈñãAPI„Çí‰ΩøÁî®„Åó„Å¶ÁøªË®≥„Åó„Åæ„Åô„ÄÇËã±Ë™û„ÄÅ‰∏≠ÂõΩË™û„ÄÅÊó•Êú¨Ë™û„Å™„Å©„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇÊ≥®Ôºö„ÄåËá™ÂãïÊ§úÂá∫„Äç„ÅØÁÑ°ÊñôÁâà„Åß„ÅØËã±Ë™û„ÅåÊó¢ÂÆö„Å®„Å™„Çä„Åæ„Åô„ÄÇ',
                    translating: 'ÁøªË®≥‰∏≠...'
                },
                'ru': {
                    title: 'üåê –û–Ω–ª–∞–π–Ω –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫',
                    translation_settings: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞',
                    source_lang: '–ò—Å—Ö–æ–¥–Ω—ã–π —è–∑—ã–∫',
                    target_lang: '–¶–µ–ª–µ–≤–æ–π —è–∑—ã–∫',
                    auto_detect: '–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (Def: EN)',
                    english: '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π',
                    chinese_simplified: '–ö–∏—Ç–∞–π—Å–∫–∏–π (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)',
                    chinese_traditional: '–ö–∏—Ç–∞–π—Å–∫–∏–π (—Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π)',
                    japanese: '–Ø–ø–æ–Ω—Å–∫–∏–π',
                    russian: '–†—É—Å—Å–∫–∏–π',
                    spanish: '–ò—Å–ø–∞–Ω—Å–∫–∏–π',
                    french: '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π',
                    german: '–ù–µ–º–µ—Ü–∫–∏–π',
                    italian: '–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–π',
                    korean: '–ö–æ—Ä–µ–π—Å–∫–∏–π',
                    text_to_translate: '–¢–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞',
                    translation_result: '–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–≤–æ–¥–∞',
                    translate_btn: '–ü–µ—Ä–µ–≤–µ—Å—Ç–∏',
                    clear_btn: '–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ',
                    intro_title: '–û –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–µ',
                    intro_text: '–≠—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—É–±–ª–∏—á–Ω—ã–π API. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —è–∑—ã–∫–æ–≤. –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: ¬´–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ¬ª –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–Ω–≥–ª–∏–π—Å–∫–∏–π.',
                    translating: '–ü–µ—Ä–µ–≤–æ–¥...'
                }
            },

            translateTimeout: null,

            init: function() {
                const params = new URLSearchParams(window.location.search);
                const lang = params.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('interface-lang').value = lang;
                    this.changeInterfaceLang();
                }
            },

            changeInterfaceLang: function() {
                const lang = document.getElementById('interface-lang').value;
                
                // Wrap history update in try-catch to prevent crash in sandboxed/iframe environments
                try {
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', lang);
                    window.history.pushState({}, '', newUrl);
                } catch (e) {
                    console.warn('Cannot update URL history (likely sandbox restriction). UI language will still change.');
                }

                const texts = this.i18n[lang];
                if (!texts) return;
                
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
                
                // Update specific elements if needed
                const translateBtnText = document.querySelector('#translate-btn span');
                if (translateBtnText && texts.translate_btn) {
                    translateBtnText.innerText = texts.translate_btn;
                }
            },

            swapLanguages: function() {
                const sourceLangEl = document.getElementById('source-lang');
                const targetLangEl = document.getElementById('target-lang');
                
                const sourceVal = sourceLangEl.value;
                const targetVal = targetLangEl.value;
                
                // Don't swap if source is auto-detect (as target cannot be auto)
                if (sourceVal === 'auto') {
                    // Just set source to target's current value, and target to english (default)
                    sourceLangEl.value = targetVal;
                    targetLangEl.value = 'en'; 
                } else {
                    sourceLangEl.value = targetVal;
                    targetLangEl.value = sourceVal;
                }
                
                // Swap text if both have content
                const sourceTextEl = document.getElementById('source-text');
                const resultTextEl = document.getElementById('result-text');
                
                const sourceText = sourceTextEl.value;
                const resultText = resultTextEl.value;
                
                if (sourceText && resultText) {
                    sourceTextEl.value = resultText;
                    resultTextEl.value = sourceText;
                    // Trigger translation with swapped languages
                    this.translate();
                } else if (resultText) {
                    sourceTextEl.value = resultText;
                    resultTextEl.value = '';
                }
            },

            delayTranslate: function() {
                if (this.translateTimeout) clearTimeout(this.translateTimeout);
                this.translateTimeout = setTimeout(() => {
                    this.translate();
                }, 800); // Increased delay slightly to reduce API calls
            },

            translate: async function() {
                const sourceText = document.getElementById('source-text').value.trim();
                let sourceLang = document.getElementById('source-lang').value;
                const targetLang = document.getElementById('target-lang').value;
                const resultElement = document.getElementById('result-text');
                const translateBtn = document.getElementById('translate-btn');
                const translateBtnSpan = translateBtn.querySelector('span');
                const currentInterfaceLang = document.getElementById('interface-lang').value;
                const loadingText = this.i18n[currentInterfaceLang].translating || 'Translating...';
                const defaultText = this.i18n[currentInterfaceLang].translate_btn || 'Translate';

                if (!sourceText) {
                    resultElement.value = '';
                    return;
                }

                // If source and target are the same, return original text
                if (sourceLang === targetLang) {
                    resultElement.value = sourceText;
                    return;
                }

                // Handle Auto-detect for free API (Fallback to EN usually safe, or warn)
                // MyMemory API requires a pair. 'Auto' isn't a valid ISO code in the pair string usually.
                if (sourceLang === 'auto') {
                    sourceLang = 'en';
                }

                // UI Loading State
                translateBtn.disabled = true;
                translateBtn.innerHTML = `<span class="spinner"></span> ${loadingText}`;
                resultElement.style.opacity = '0.7';

                try {
                    // Using MyMemory Translation API (Free, allows CORS)
                    // Note: This is a free endpoint and has daily limits.
                    const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(sourceText)}&langpair=${sourceLang}|${targetLang}`;
                    
                    const response = await fetch(url);
                    const data = await response.json();

                    if (data.responseStatus === 200) {
                        resultElement.value = data.responseData.translatedText;
                    } else {
                        // Sometimes returns 403 or quota exceeded
                        console.error("API Error:", data);
                        resultElement.value = data.responseData.translatedText || "Translation service error. Please try again later.";
                    }

                } catch (error) {
                    console.error("Translation error:", error);
                    resultElement.value = "Network error. Please check your connection.";
                } finally {
                    // Reset UI
                    translateBtn.disabled = false;
                    translateBtn.innerHTML = `<span data-i18n="translate_btn">${defaultText}</span>`;
                    resultElement.style.opacity = '1';
                }
            },

            clearText: function() {
                document.getElementById('source-text').value = '';
                document.getElementById('result-text').value = '';
            }
        };

        window.onload = function() { Translator.init(); };
    </script>

    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
    
</body>
</html>