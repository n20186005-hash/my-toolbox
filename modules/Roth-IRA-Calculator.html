<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Roth IRA Calculator Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="roth_calc" 
         data-category="finance" 
         data-title="Roth IRA Calculator" 
         data-icon="üìà">
        
        <div class="absolute top-4 right-4">
            <select id="ri-lang" onchange="RothCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üìà Roth IRA Calculator</h2>

        <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_bal">Starting Balance</label>
                <div class="relative">
                    <span class="absolute left-2 top-2 text-gray-400">$</span>
                    <input type="number" id="ri-start" class="w-full pl-5 p-2 border rounded focus:ring-1 focus:ring-green-500 outline-none" placeholder="5000">
                </div>
            </div>
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_annual">Annual Contribution</label>
                <div class="relative">
                    <span class="absolute left-2 top-2 text-gray-400">$</span>
                    <input type="number" id="ri-contrib" class="w-full pl-5 p-2 border rounded focus:ring-1 focus:ring-green-500 outline-none" placeholder="6500">
                </div>
            </div>
        </div>

        <div class="grid grid-cols-3 gap-3 mb-6">
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_age">Current Age</label>
                <input type="number" id="ri-age" class="w-full p-2 border rounded focus:ring-1 focus:ring-green-500 outline-none" placeholder="30" value="30">
            </div>
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_retire">Retire Age</label>
                <input type="number" id="ri-retire" class="w-full p-2 border rounded focus:ring-1 focus:ring-green-500 outline-none" placeholder="65" value="65">
            </div>
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_return">Return (%)</label>
                <input type="number" id="ri-rate" class="w-full p-2 border rounded focus:ring-1 focus:ring-green-500 outline-none" placeholder="7" value="7">
            </div>
        </div>

        <button onclick="RothCalc.calc()" class="w-full bg-green-600 text-white py-2 rounded font-bold hover:bg-green-700 transition mb-6" data-i18n="btn_calc">Calculate Growth</button>

        <div class="bg-green-50 p-4 rounded-lg border border-green-100">
            <div class="flex justify-between items-center mb-2">
                <span class="text-gray-600 text-sm" data-i18n="res_total">Balance at Retirement</span>
                <div id="ri-res-total" class="text-2xl font-bold text-green-800">$ --</div>
            </div>
            <div class="pt-2 border-t border-green-200 grid grid-cols-2 gap-4 text-xs">
                <div>
                    <span class="text-gray-500 block" data-i18n="res_contrib">Total Contributions</span>
                    <span id="ri-res-contrib" class="font-bold text-gray-700">--</span>
                </div>
                <div class="text-right">
                    <span class="text-gray-500 block" data-i18n="res_growth">Total Growth</span>
                    <span id="ri-res-growth" class="font-bold text-green-600">--</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        const RothCalc = {
            i18n: {
                'en': {
                    title: 'üìà Roth IRA Calculator',
                    lbl_bal: 'Starting Balance',
                    lbl_annual: 'Annual Contribution',
                    lbl_age: 'Current Age',
                    lbl_retire: 'Retirement Age',
                    lbl_return: 'Exp. Return (%)',
                    btn_calc: 'Calculate Growth',
                    res_total: 'Balance at Retirement',
                    res_contrib: 'Total Contributions',
                    res_growth: 'Total Investment Growth'
                },
                'zh-CN': {
                    title: 'üìà Roth IRA ËÆ°ÁÆóÂô®',
                    lbl_bal: 'Ëµ∑ÂßãÈáëÈ¢ù',
                    lbl_annual: 'ÊØèÂπ¥ÊäïÂÖ•',
                    lbl_age: 'ÂΩìÂâçÂπ¥ÈæÑ',
                    lbl_retire: 'ÈÄÄ‰ºëÂπ¥ÈæÑ',
                    lbl_return: 'È¢ÑÊúüÂõûÊä• (%)',
                    btn_calc: 'ËÆ°ÁÆóÂ¢ûÈïø',
                    res_total: 'ÈÄÄ‰ºëÊó∂ÊÄªÈ¢ù',
                    res_contrib: 'Êú¨ÈáëÊäïÂÖ•ÊÄªÈ¢ù',
                    res_growth: 'ÊäïËµÑÊî∂ÁõäÊÄªÈ¢ù'
                },
                'zh-TW': {
                    title: 'üìà Roth IRA Ë®àÁÆóÂô®',
                    lbl_bal: 'Ëµ∑ÂßãÈáëÈ°ç',
                    lbl_annual: 'ÊØèÂπ¥ÊäïÂÖ•',
                    lbl_age: 'Áï∂ÂâçÂπ¥ÈΩ°',
                    lbl_retire: 'ÈÄÄ‰ºëÂπ¥ÈΩ°',
                    lbl_return: 'È†êÊúüÂõûÂ†± (%)',
                    btn_calc: 'Ë®àÁÆóÂ¢ûÈï∑',
                    res_total: 'ÈÄÄ‰ºëÊôÇÁ∏ΩÈ°ç',
                    res_contrib: 'Êú¨ÈáëÊäïÂÖ•Á∏ΩÈ°ç',
                    res_growth: 'ÊäïË≥áÊî∂ÁõäÁ∏ΩÈ°ç'
                },
                'ja': {
                    title: 'üìà ÂÄã‰∫∫Âπ¥Èáë (Roth IRA)',
                    lbl_bal: 'ÂàùÊúüÊÆãÈ´ò',
                    lbl_annual: 'Âπ¥ÈñìÁ©çÁ´ãÈ°ç',
                    lbl_age: 'ÁèæÂú®„ÅÆÂπ¥ÈΩ¢',
                    lbl_retire: 'ÂºïÈÄÄÂπ¥ÈΩ¢',
                    lbl_return: '‰∫àÊÉ≥Âà©Âõû„Çä (%)',
                    btn_calc: 'Ë®àÁÆó„Åô„Çã',
                    res_total: 'ÂºïÈÄÄÊôÇ„ÅÆË≥áÁî£',
                    res_contrib: 'Á©çÁ´ãÁ∑èÈ°ç',
                    res_growth: 'ÈÅãÁî®Áõä'
                },
                'ru': {
                    title: 'üìà –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä Roth IRA',
                    lbl_bal: '–ù–∞—á. –±–∞–ª–∞–Ω—Å',
                    lbl_annual: '–ï–∂–µ–≥–æ–¥–Ω—ã–π –≤–∑–Ω–æ—Å',
                    lbl_age: '–í–æ–∑—Ä–∞—Å—Ç',
                    lbl_retire: '–ü–µ–Ω—Å–∏–æ–Ω–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç',
                    lbl_return: '–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (%)',
                    btn_calc: '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
                    res_total: '–°—É–º–º–∞ –∫ –ø–µ–Ω—Å–∏–∏',
                    res_contrib: '–í—Å–µ–≥–æ –≤–∑–Ω–æ—Å–æ–≤',
                    res_growth: '–ò–Ω–≤–µ—Å—Ç. –¥–æ—Ö–æ–¥'
                },
                'es': {
                    title: 'üìà Calculadora Roth IRA',
                    lbl_bal: 'Saldo Inicial',
                    lbl_annual: 'Aporte Anual',
                    lbl_age: 'Edad Actual',
                    lbl_retire: 'Edad de Retiro',
                    lbl_return: 'Retorno (%)',
                    btn_calc: 'Calcular',
                    res_total: 'Saldo al Retiro',
                    res_contrib: 'Total Aportado',
                    res_growth: 'Crecimiento Total'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('ri-lang').value;
                const texts = RothCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="roth_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(texts[key]) el.innerText = texts[key];
                });
            },

            calc: () => {
                let currentBal = parseFloat(document.getElementById('ri-start').value) || 0;
                const annualContrib = parseFloat(document.getElementById('ri-contrib').value) || 0;
                const age = parseFloat(document.getElementById('ri-age').value);
                const retireAge = parseFloat(document.getElementById('ri-retire').value);
                const rate = parseFloat(document.getElementById('ri-rate').value);

                if (isNaN(age) || isNaN(retireAge) || isNaN(rate)) return;

                const years = retireAge - age;
                if (years <= 0) return;

                const r = rate / 100;
                
                // FV of Lump Sum: P * (1+r)^n
                const fvLump = currentBal * Math.pow(1 + r, years);
                
                // FV of Annuity (Annual, End of Period): PMT * [((1+r)^n - 1) / r]
                let fvContrib = 0;
                if (r === 0) {
                    fvContrib = annualContrib * years;
                } else {
                    fvContrib = annualContrib * ((Math.pow(1 + r, years) - 1) / r);
                }

                const totalFV = fvLump + fvContrib;
                const totalInvested = currentBal + (annualContrib * years);
                const growth = totalFV - totalInvested;

                const fmt = (n) => n.toLocaleString('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });

                document.getElementById('ri-res-total').innerText = fmt(totalFV);
                document.getElementById('ri-res-contrib').innerText = fmt(totalInvested);
                document.getElementById('ri-res-growth').innerText = fmt(growth);
            }
        };
    </script>
</body>
</html>