<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resistor Calculator</title>
    
    <!-- 基础信息 -->
    <meta name="tool-id" content="resistor_calc">
    <meta name="category" content="electronics">
    <meta name="icon" content="⚡">
    
    <!-- 默认英文内容 -->
    <meta name="title" content="Resistor Calculator">
    <meta name="description" content="Calculate resistor value based on color bands.">
    
    <!-- 多语言配置 -->
    <meta name="lang-title-zh-CN" content="电阻计算器">
    <meta name="lang-description-zh-CN" content="根据色环计算电阻值。">
    
    <meta name="lang-title-zh-TW" content="電阻計算器">
    <meta name="lang-description-zh-TW" content="根據色環計算電阻值。">
    
    <meta name="lang-title-ja" content="抵抗計算ツール">
    <meta name="lang-description-ja" content="カラーバンドから抵抗値を計算します。">
    
    <meta name="lang-title-ru" content="Калькулятор резисторов">
    <meta name="lang-description-ru" content="Вычислите значение резистора по цветовым полосам.">
    
    <meta name="lang-title-es" content="Calculadora de Resistencias">
    <meta name="lang-description-es" content="Calcule el valor de la resistencia según las bandas de color.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .color-band { 
            width: 40px; 
            height: 100px; 
            display: inline-block;
            margin: 0 4px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .color-options {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-top: 8px;
        }
        .color-option {
            width: 100%;
            height: 30px;
            cursor: pointer;
            border-radius: 4px;
            transition: transform 0.2s;
        }
        .color-option:hover {
            transform: scale(1.05);
        }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="resistor_calc" 
         data-category="electronics" 
         data-title="Resistor Calculator" 
         data-icon="⚡">
        
        <!-- 语言选择器 -->
        <div class="absolute top-4 right-4">
            <select id="resistor-lang" onchange="ResistorCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">简体中文</option>
                <option value="zh-TW">繁體中文</option>
                <option value="ja">日本語</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">⚡ Resistor Calculator</h2>
        
        <div class="mb-6">
            <p class="text-sm text-gray-600 mb-4" data-i18n="instructions">Select resistor color bands to calculate resistance value:</p>
            
            <div class="text-center mb-6">
                <div class="inline-block">
                    <div class="flex justify-center mb-2">
                        <div id="band1" class="color-band" data-band="1" style="background-color: #cccccc;"></div>
                        <div id="band2" class="color-band" data-band="2" style="background-color: #cccccc;"></div>
                        <div id="band3" class="color-band" data-band="3" style="background-color: #cccccc;"></div>
                        <div id="band4" class="color-band" data-band="4" style="background-color: #cccccc;"></div>
                    </div>
                    <div class="text-xs text-gray-500 flex justify-center gap-8">
                        <span data-i18n="band1_label">1st Band</span>
                        <span data-i18n="band2_label">2nd Band</span>
                        <span data-i18n="band3_label">3rd Band</span>
                        <span data-i18n="band4_label">4th Band</span>
                    </div>
                </div>
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="select_color">Select Color:</label>
                <div class="color-options" id="color-options">
                    <div class="color-option" data-value="0" style="background-color: black;" title="Black"></div>
                    <div class="color-option" data-value="1" style="background-color: brown;" title="Brown"></div>
                    <div class="color-option" data-value="2" style="background-color: red;" title="Red"></div>
                    <div class="color-option" data-value="3" style="background-color: orange;" title="Orange"></div>
                    <div class="color-option" data-value="4" style="background-color: yellow;" title="Yellow"></div>
                    <div class="color-option" data-value="5" style="background-color: green;" title="Green"></div>
                    <div class="color-option" data-value="6" style="background-color: blue;" title="Blue"></div>
                    <div class="color-option" data-value="7" style="background-color: violet;" title="Violet"></div>
                    <div class="color-option" data-value="8" style="background-color: gray;" title="Gray"></div>
                    <div class="color-option" data-value="9" style="background-color: white;" title="White"></div>
                    <div class="color-option" data-value="5" style="background: repeating-linear-gradient(45deg, gold, gold 5px, black 5px, black 10px);" title="Gold"></div>
                    <div class="color-option" data-value="10" style="background: repeating-linear-gradient(45deg, silver, silver 5px, black 5px, black 10px);" title="Silver"></div>
                </div>
            </div>
        </div>

        <button onclick="ResistorCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">Calculate Resistance</button>

        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100 text-center">
            <div class="text-sm text-gray-500 mb-2" data-i18n="res_label">Resistance Value</div>
            <div id="resistor-result" class="text-3xl font-bold text-blue-800">--</div>
            <div id="resistor-tolerance" class="text-sm text-gray-600 mt-2 h-5"></div>
        </div>
    </div>

    <script>
        const ResistorCalc = {
            // 颜色代码映射表
            colorCodes: {
                'black': { value: 0, multiplier: 1, tolerance: null },
                'brown': { value: 1, multiplier: 10, tolerance: 1 },
                'red': { value: 2, multiplier: 100, tolerance: 2 },
                'orange': { value: 3, multiplier: 1000, tolerance: null },
                'yellow': { value: 4, multiplier: 10000, tolerance: null },
                'green': { value: 5, multiplier: 100000, tolerance: 0.5 },
                'blue': { value: 6, multiplier: 1000000, tolerance: 0.25 },
                'violet': { value: 7, multiplier: 10000000, tolerance: 0.1 },
                'gray': { value: 8, multiplier: 100000000, tolerance: 0.05 },
                'white': { value: 9, multiplier: 1000000000, tolerance: null },
                'gold': { value: null, multiplier: 0.1, tolerance: 5 },
                'silver': { value: null, multiplier: 0.01, tolerance: 10 }
            },
            
            // 当前选中的色环
            selectedBands: {
                1: null,
                2: null,
                3: null,
                4: null
            },
            
            // 当前选中的色环位置
            activeBand: 1,

            i18n: {
                'en': {
                    title: '⚡ Resistor Calculator',
                    instructions: 'Select resistor color bands to calculate resistance value:',
                    band1_label: '1st Band',
                    band2_label: '2nd Band',
                    band3_label: '3rd Band',
                    band4_label: '4th Band',
                    select_color: 'Select Color:',
                    btn_calc: 'Calculate Resistance',
                    res_label: 'Resistance Value',
                    tolerance: 'Tolerance: ±%',
                    err_invalid: 'Please select all 4 color bands',
                    units: {
                        1: 'Ω',
                        1000: 'kΩ',
                        1000000: 'MΩ',
                        1000000000: 'GΩ'
                    }
                },
                'zh-CN': {
                    title: '⚡ 电阻计算器',
                    instructions: '选择电阻色环以计算电阻值：',
                    band1_label: '第一条色环',
                    band2_label: '第二条色环',
                    band3_label: '第三条色环',
                    band4_label: '第四条色环',
                    select_color: '选择颜色：',
                    btn_calc: '计算电阻值',
                    res_label: '电阻值',
                    tolerance: '误差：±%',
                    err_invalid: '请选择所有4条色环',
                    units: {
                        1: 'Ω',
                        1000: 'kΩ',
                        1000000: 'MΩ',
                        1000000000: 'GΩ'
                    }
                },
                'zh-TW': {
                    title: '⚡ 電阻計算器',
                    instructions: '選擇電阻色環以計算電阻值：',
                    band1_label: '第一條色環',
                    band2_label: '第二條色環',
                    band3_label: '第三條色環',
                    band4_label: '第四條色環',
                    select_color: '選擇顏色：',
                    btn_calc: '計算電阻值',
                    res_label: '電阻值',
                    tolerance: '誤差：±%',
                    err_invalid: '請選擇所有4條色環',
                    units: {
                        1: 'Ω',
                        1000: 'kΩ',
                        1000000: 'MΩ',
                        1000000000: 'GΩ'
                    }
                },
                'ja': {
                    title: '⚡ 抵抗計算ツール',
                    instructions: 'カラーバンドを選択して抵抗値を計算します：',
                    band1_label: '1番目のバンド',
                    band2_label: '2番目のバンド',
                    band3_label: '3番目のバンド',
                    band4_label: '4番目のバンド',
                    select_color: '色を選択：',
                    btn_calc: '抵抗値を計算',
                    res_label: '抵抗値',
                    tolerance: '許容誤差：±%',
                    err_invalid: '4つのカラーバンドをすべて選択してください',
                    units: {
                        1: 'Ω',
                        1000: 'kΩ',
                        1000000: 'MΩ',
                        1000000000: 'GΩ'
                    }
                },
                'ru': {
                    title: '⚡ Калькулятор резисторов',
                    instructions: 'Выберите цветовые полосы резистора для вычисления его значения：',
                    band1_label: '1-я полоса',
                    band2_label: '2-я полоса',
                    band3_label: '3-я полоса',
                    band4_label: '4-я полоса',
                    select_color: 'Выберите цвет：',
                    btn_calc: 'Вычислить сопротивление',
                    res_label: 'Значение сопротивления',
                    tolerance: 'Допуск：±%',
                    err_invalid: 'Пожалуйста, выберите все 4 цветовые полосы',
                    units: {
                        1: 'Ω',
                        1000: 'кΩ',
                        1000000: 'МΩ',
                        1000000000: 'ГΩ'
                    }
                },
                'es': {
                    title: '⚡ Calculadora de Resistencias',
                    instructions: 'Seleccione las bandas de color del resistor para calcular su valor：',
                    band1_label: '1ª Banda',
                    band2_label: '2ª Banda',
                    band3_label: '3ª Banda',
                    band4_label: '4ª Banda',
                    select_color: 'Seleccionar color：',
                    btn_calc: 'Calcular Resistencia',
                    res_label: 'Valor de Resistencia',
                    tolerance: 'Tolerancia：±%',
                    err_invalid: 'Por favor, seleccione las 4 bandas de color',
                    units: {
                        1: 'Ω',
                        1000: 'kΩ',
                        1000000: 'MΩ',
                        1000000000: 'GΩ'
                    }
                }
            },

            init: () => {
                // 初始化色环点击事件
                document.querySelectorAll('.color-band').forEach(band => {
                    band.addEventListener('click', function() {
                        ResistorCalc.activeBand = parseInt(this.getAttribute('data-band'));
                        // 高亮显示当前选中的色环
                        document.querySelectorAll('.color-band').forEach(b => {
                            b.style.border = b === this ? '2px solid blue' : '1px solid #ccc';
                        });
                    });
                });

                // 初始化颜色选择事件
                document.querySelectorAll('.color-option').forEach(option => {
                    option.addEventListener('click', function() {
                        const color = this.title.toLowerCase();
                        const bandId = `band${ResistorCalc.activeBand}`;
                        const bandElement = document.getElementById(bandId);
                        
                        // 设置色环颜色
                        bandElement.style.backgroundColor = this.style.backgroundColor;
                        ResistorCalc.selectedBands[ResistorCalc.activeBand] = color;
                        
                        // 自动切换到下一个色环
                        if (ResistorCalc.activeBand < 4) {
                            ResistorCalc.activeBand++;
                            document.querySelectorAll('.color-band').forEach(b => {
                                b.style.border = parseInt(b.getAttribute('data-band')) === ResistorCalc.activeBand ? '2px solid blue' : '1px solid #ccc';
                            });
                        }
                    });
                });

                // 默认选中第一个色环
                document.getElementById('band1').click();
            },

            changeLang: () => {
                const lang = document.getElementById('resistor-lang').value;
                const texts = ResistorCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="resistor_calc"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                // 重新计算以更新结果语言
                const currentResult = document.getElementById('resistor-result').innerText;
                if (currentResult !== '--') {
                    ResistorCalc.calc();
                }
            },

            calc: () => {
                const lang = document.getElementById('resistor-lang').value;
                const texts = ResistorCalc.i18n[lang];
                
                // 检查是否所有色环都已选择
                if (!ResistorCalc.selectedBands[1] || !ResistorCalc.selectedBands[2] || 
                    !ResistorCalc.selectedBands[3] || !ResistorCalc.selectedBands[4]) {
                    document.getElementById('resistor-result').innerText = texts.err_invalid;
                    document.getElementById('resistor-result').className = "text-xl font-bold text-red-600";
                    document.getElementById('resistor-tolerance').innerText = "";
                    return;
                }

                // 获取颜色代码值
                const band1 = ResistorCalc.colorCodes[ResistorCalc.selectedBands[1]];
                const band2 = ResistorCalc.colorCodes[ResistorCalc.selectedBands[2]];
                const band3 = ResistorCalc.colorCodes[ResistorCalc.selectedBands[3]];
                const band4 = ResistorCalc.colorCodes[ResistorCalc.selectedBands[4]];

                // 计算电阻值
                const significant = (band1.value * 10) + band2.value;
                const multiplier = band3.multiplier;
                const resistance = significant * multiplier;
                const tolerance = band4.tolerance;

                // 确定单位
                let unit = texts.units[1];
                let displayValue = resistance;
                
                if (resistance >= 1000000000) {
                    displayValue = resistance / 1000000000;
                    unit = texts.units[1000000000];
                } else if (resistance >= 1000000) {
                    displayValue = resistance / 1000000;
                    unit = texts.units[1000000];
                } else if (resistance >= 1000) {
                    displayValue = resistance / 1000;
                    unit = texts.units[1000];
                }

                // 显示结果
                const resultEl = document.getElementById('resistor-result');
                resultEl.className = "text-3xl font-bold text-blue-800";
                resultEl.innerText = `${displayValue.toFixed(2)} ${unit}`;
                
                const toleranceEl = document.getElementById('resistor-tolerance');
                toleranceEl.innerText = tolerance ? texts.tolerance.replace('%', tolerance) : '';
            }
        };

        document.addEventListener('DOMContentLoaded', ResistorCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // 自动匹配浏览器语言
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('resistor-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    ResistorCalc.changeLang();
                }
            }
        });
    </script>

</body>
</html>