<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GPA Calculator Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #fffbe6; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .course-row { transition: background 0.2s; }
        .course-row:hover { background: #fafafa; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="gpa_calc" 
         data-category="education" 
         data-title="GPA Calculator" 
         data-icon="üéì">
        
        <div class="absolute top-4 right-4">
            <select id="gc-lang" onchange="GPACalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üéì GPA Calculator</h2>

        <!-- Header -->
        <div class="grid grid-cols-12 gap-2 mb-2 text-sm font-bold text-gray-600 px-2">
            <div class="col-span-5" data-i18n="col_course">Course (Optional)</div>
            <div class="col-span-3 text-center" data-i18n="col_grade">Grade</div>
            <div class="col-span-3 text-center" data-i18n="col_credit">Credits</div>
            <div class="col-span-1"></div>
        </div>

        <!-- Rows Container -->
        <div id="gc-rows" class="space-y-2 mb-4">
            <!-- Dynamic rows will be here -->
        </div>

        <div class="flex gap-2 mb-6">
            <button onclick="GPACalc.addRow()" class="px-3 py-1 bg-gray-100 text-gray-600 rounded hover:bg-gray-200 text-sm font-medium transition" data-i18n="btn_add">+ Add Course</button>
            <button onclick="GPACalc.calc()" class="flex-1 bg-yellow-600 text-white py-1 rounded font-bold hover:bg-yellow-700 transition" data-i18n="btn_calc">Calculate GPA</button>
        </div>

        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-100 flex justify-between items-center">
            <div>
                <span class="text-gray-500 text-sm block" data-i18n="res_gpa">Cumulative GPA</span>
                <div id="gc-result" class="text-3xl font-bold text-yellow-800">--</div>
            </div>
            <div class="text-right text-xs text-gray-500">
                <div class="mb-1"><span data-i18n="lbl_total_credits">Total Credits:</span> <span id="gc-total-credits" class="font-bold">0</span></div>
                <div class="text-gray-400">Scale: 4.0</div>
            </div>
        </div>
    </div>

    <script>
        const GPACalc = {
            i18n: {
                'en': {
                    title: 'üéì GPA Calculator',
                    col_course: 'Course Name',
                    col_grade: 'Grade',
                    col_credit: 'Credits',
                    btn_add: '+ Add Course',
                    btn_calc: 'Calculate GPA',
                    res_gpa: 'Cumulative GPA',
                    lbl_total_credits: 'Total Credits:'
                },
                'zh-CN': {
                    title: 'üéì GPA ËÆ°ÁÆóÂô®',
                    col_course: 'ËØæÁ®ãÂêçÁß∞',
                    col_grade: 'ÊàêÁª©',
                    col_credit: 'Â≠¶ÂàÜ',
                    btn_add: '+ Ê∑ªÂä†ËØæÁ®ã',
                    btn_calc: 'ËÆ°ÁÆó GPA',
                    res_gpa: 'Âπ≥ÂùáÁª©ÁÇπ (GPA)',
                    lbl_total_credits: 'ÊÄªÂ≠¶ÂàÜ:'
                },
                'zh-TW': {
                    title: 'üéì GPA Ë®àÁÆóÂô®',
                    col_course: 'Ë™≤Á®ãÂêçÁ®±',
                    col_grade: 'ÊàêÁ∏æ',
                    col_credit: 'Â≠∏ÂàÜ',
                    btn_add: '+ Ê∑ªÂä†Ë™≤Á®ã',
                    btn_calc: 'Ë®àÁÆó GPA',
                    res_gpa: 'Âπ≥ÂùáÁ∏æÈªû (GPA)',
                    lbl_total_credits: 'Á∏ΩÂ≠∏ÂàÜ:'
                },
                'ja': {
                    title: 'üéì GPA Ë®àÁÆó',
                    col_course: 'ÁßëÁõÆÂêç',
                    col_grade: 'ÊàêÁ∏æ',
                    col_credit: 'Âçò‰Ωç',
                    btn_add: '+ ÁßëÁõÆ„ÇíËøΩÂä†',
                    btn_calc: 'Ë®àÁÆó„Åô„Çã',
                    res_gpa: 'GPA',
                    lbl_total_credits: 'Á∑èÂçò‰ΩçÊï∞:'
                },
                'ru': {
                    title: 'üéì –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä GPA',
                    col_course: '–ö—É—Ä—Å',
                    col_grade: '–û—Ü–µ–Ω–∫–∞',
                    col_credit: '–ö—Ä–µ–¥–∏—Ç—ã',
                    btn_add: '+ –î–æ–±–∞–≤–∏—Ç—å',
                    btn_calc: '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å',
                    res_gpa: '–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª',
                    lbl_total_credits: '–í—Å–µ–≥–æ –∫—Ä–µ–¥–∏—Ç–æ–≤:'
                },
                'es': {
                    title: 'üéì Calculadora GPA',
                    col_course: 'Materia',
                    col_grade: 'Nota',
                    col_credit: 'Cr√©ditos',
                    btn_add: '+ A√±adir',
                    btn_calc: 'Calcular',
                    res_gpa: 'Promedio GPA',
                    lbl_total_credits: 'Total Cr√©ditos:'
                }
            },

            grades: [
                { l: 'A', v: 4.0 }, { l: 'A-', v: 3.7 },
                { l: 'B+', v: 3.3 }, { l: 'B', v: 3.0 }, { l: 'B-', v: 2.7 },
                { l: 'C+', v: 2.3 }, { l: 'C', v: 2.0 }, { l: 'C-', v: 1.7 },
                { l: 'D+', v: 1.3 }, { l: 'D', v: 1.0 }, { l: 'F', v: 0.0 }
            ],

            init: () => {
                // Add initial 4 rows
                for(let i=0; i<4; i++) GPACalc.addRow();
            },

            changeLang: () => {
                const lang = document.getElementById('gc-lang').value;
                const texts = GPACalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="gpa_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
            },

            addRow: () => {
                const container = document.getElementById('gc-rows');
                const row = document.createElement('div');
                row.className = 'grid grid-cols-12 gap-2 items-center course-row p-1 rounded';
                
                let opts = '';
                GPACalc.grades.forEach(g => {
                    opts += `<option value="${g.v}">${g.l}</option>`;
                });

                row.innerHTML = `
                    <div class="col-span-5">
                        <input type="text" class="w-full p-1 border rounded text-sm focus:ring-1 focus:ring-yellow-500 outline-none" placeholder="Math 101">
                    </div>
                    <div class="col-span-3">
                        <select class="gc-grade w-full p-1 border rounded text-sm bg-white focus:ring-1 focus:ring-yellow-500">
                            <option value="">--</option>
                            ${opts}
                        </select>
                    </div>
                    <div class="col-span-3">
                        <input type="number" class="gc-credit w-full p-1 border rounded text-sm text-center focus:ring-1 focus:ring-yellow-500 outline-none" placeholder="3">
                    </div>
                    <div class="col-span-1 text-center">
                        <button onclick="this.parentElement.parentElement.remove()" class="text-red-400 hover:text-red-600 font-bold px-1">√ó</button>
                    </div>
                `;
                container.appendChild(row);
            },

            calc: () => {
                const gradeEls = document.querySelectorAll('.gc-grade');
                const creditEls = document.querySelectorAll('.gc-credit');
                
                let totalPoints = 0;
                let totalCredits = 0;

                gradeEls.forEach((el, idx) => {
                    const gVal = parseFloat(el.value);
                    const cVal = parseFloat(creditEls[idx].value);

                    if (!isNaN(gVal) && !isNaN(cVal)) {
                        totalPoints += (gVal * cVal);
                        totalCredits += cVal;
                    }
                });

                document.getElementById('gc-total-credits').innerText = totalCredits;
                
                let gpa = 0;
                if (totalCredits > 0) {
                    gpa = totalPoints / totalCredits;
                }
                
                document.getElementById('gc-result').innerText = gpa.toFixed(2);
            }
        };

        GPACalc.init();
    </script>
</body>
</html>