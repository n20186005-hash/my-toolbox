<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cash Back vs Low Rate Module</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #eff6ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .win-badge { @apply bg-green-100 text-green-700 px-2 py-1 rounded text-xs font-bold ml-2; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="cvr_calc" 
         data-category="finance" 
         data-title="Auto Loan: Cash Back vs Low Rate" 
         data-icon="üöó">
        
        <div class="absolute top-4 right-4">
            <select id="cvr-lang" onchange="CVRCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN">Á∞°È´î‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üöó Auto Loan Comparison</h2>
        <p class="text-xs text-gray-500 mb-4" data-i18n="desc">Compare taking a Cash Back Rebate vs. a Low Interest Rate promotion.</p>

        <div class="grid grid-cols-2 gap-4 mb-4">
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_price">Auto Price</label>
                <div class="relative">
                    <span class="absolute left-2 top-2 text-gray-400">$</span>
                    <input type="number" id="cvr-price" class="w-full pl-5 p-2 border rounded focus:ring-1 focus:ring-blue-500 outline-none" placeholder="30000">
                </div>
            </div>
            <div>
                <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_term">Loan Term (Months)</label>
                <input type="number" id="cvr-term" class="w-full p-2 border rounded focus:ring-1 focus:ring-blue-500 outline-none" placeholder="60" value="60">
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-6 border-t border-gray-100 pt-4">
            <!-- Option A -->
            <div class="bg-blue-50 p-2 rounded">
                <div class="font-bold text-sm text-blue-800 mb-2" data-i18n="opt_a">Option A: Cash Back</div>
                <div class="mb-2">
                    <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_rebate">Cash Back ($)</label>
                    <input type="number" id="cvr-rebate" class="w-full p-1 border rounded text-sm" placeholder="2000">
                </div>
                <div>
                    <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_std_rate">Standard Rate (%)</label>
                    <input type="number" id="cvr-std-rate" class="w-full p-1 border rounded text-sm" placeholder="6.0" value="6.0">
                </div>
            </div>

            <!-- Option B -->
            <div class="bg-indigo-50 p-2 rounded">
                <div class="font-bold text-sm text-indigo-800 mb-2" data-i18n="opt_b">Option B: Low Rate</div>
                <div class="mb-2">
                    <label class="block text-xs text-gray-500 mb-1" data-i18n="lbl_promo_rate">Promo Rate (%)</label>
                    <input type="number" id="cvr-promo-rate" class="w-full p-1 border rounded text-sm" placeholder="1.9" value="1.9">
                </div>
                <div class="text-xs text-gray-400 mt-6 pt-2 italic" data-i18n="note_no_cash">No Cash Back</div>
            </div>
        </div>

        <button onclick="CVRCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">Compare Deals</button>

        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 hidden" id="cvr-results">
            <div class="grid grid-cols-2 gap-4 text-center">
                <div>
                    <div class="text-xs text-gray-500" data-i18n="res_total_a">Total Cost (A)</div>
                    <div id="res-cost-a" class="text-lg font-bold text-gray-700">$ --</div>
                </div>
                <div>
                    <div class="text-xs text-gray-500" data-i18n="res_total_b">Total Cost (B)</div>
                    <div id="res-cost-b" class="text-lg font-bold text-gray-700">$ --</div>
                </div>
            </div>
            <div class="mt-4 text-center border-t border-gray-200 pt-3">
                <span class="text-sm font-medium" data-i18n="res_winner">Winner:</span>
                <span id="res-winner-text" class="text-xl font-bold ml-2">--</span>
                <div id="res-savings" class="text-xs text-green-600 font-bold mt-1"></div>
            </div>
        </div>
    </div>

    <script>
        const CVRCalc = {
            i18n: {
                'en': {
                    title: 'üöó Auto Loan Comparison',
                    desc: 'Compare taking a Cash Back Rebate vs. a Low Interest Rate promotion.',
                    lbl_price: 'Auto Price', lbl_term: 'Loan Term (Months)',
                    opt_a: 'Option A: Cash Back', lbl_rebate: 'Cash Rebate ($)', lbl_std_rate: 'Standard Rate (%)',
                    opt_b: 'Option B: Low Rate', lbl_promo_rate: 'Promo Rate (%)', note_no_cash: 'No Cash Back applied',
                    btn_calc: 'Compare Deals',
                    res_total_a: 'Total Cost (Option A)', res_total_b: 'Total Cost (Option B)',
                    res_winner: 'Better Deal:', txt_save: 'You save',
                    opt_name_a: 'Cash Back', opt_name_b: 'Low Rate'
                },
                'zh-CN': {
                    title: 'üöó Ë¥≠ËΩ¶Ë¥∑Ê¨æÊñπÊ°àÂØπÊØî',
                    desc: 'ÂØπÊØî‚ÄúÁé∞ÈáëËøîËøò‚Äù‰∏é‚Äú‰ΩéÊÅØË¥∑Ê¨æ‚ÄùÂì™‰∏™Êõ¥ÂàíÁÆó„ÄÇ',
                    lbl_price: 'ËΩ¶‰ª∑', lbl_term: 'Ë¥∑Ê¨æÊúüÈôê (Êúà)',
                    opt_a: 'ÊñπÊ°à A: Áé∞ÈáëËøîËøò', lbl_rebate: 'ËøîÁé∞ÈáëÈ¢ù ($)', lbl_std_rate: 'Ê†áÂáÜÂà©Áéá (%)',
                    opt_b: 'ÊñπÊ°à B: ‰ΩéÊÅØË¥∑Ê¨æ', lbl_promo_rate: '‰ºòÊÉ†Âà©Áéá (%)', note_no_cash: 'Ê≠§ÊñπÊ°àÊó†ËøîÁé∞',
                    btn_calc: 'ÂØπÊØîÊñπÊ°à',
                    res_total_a: 'ÊÄªÊàêÊú¨ (ÊñπÊ°à A)', res_total_b: 'ÊÄªÊàêÊú¨ (ÊñπÊ°à B)',
                    res_winner: 'Êõ¥‰ºòÊñπÊ°à:', txt_save: 'ËäÇÁúÅÈáëÈ¢ù',
                    opt_name_a: 'Áé∞ÈáëËøîËøò', opt_name_b: '‰ΩéÊÅØË¥∑Ê¨æ'
                },
                'zh-TW': {
                    title: 'üöó Ë≥ºËªäË≤∏Ê¨æÊñπÊ°àÂ∞çÊØî',
                    desc: 'Â∞çÊØî‚ÄúÁèæÈáëËøîÈÇÑ‚ÄùËàá‚Äú‰ΩéÊÅØË≤∏Ê¨æ‚ÄùÂì™ÂÄãÊõ¥ÂàíÁÆó„ÄÇ',
                    lbl_price: 'ËªäÂÉπ', lbl_term: 'Ë≤∏Ê¨æÊúüÈôê (Êúà)',
                    opt_a: 'ÊñπÊ°à A: ÁèæÈáëËøîÈÇÑ', lbl_rebate: 'ËøîÁèæÈáëÈ°ç ($)', lbl_std_rate: 'Ê®ôÊ∫ñÂà©Áéá (%)',
                    opt_b: 'ÊñπÊ°à B: ‰ΩéÊÅØË≤∏Ê¨æ', lbl_promo_rate: 'ÂÑ™ÊÉ†Âà©Áéá (%)', note_no_cash: 'Ê≠§ÊñπÊ°àÁÑ°ËøîÁèæ',
                    btn_calc: 'Â∞çÊØîÊñπÊ°à',
                    res_total_a: 'Á∏ΩÊàêÊú¨ (ÊñπÊ°à A)', res_total_b: 'Á∏ΩÊàêÊú¨ (ÊñπÊ°à B)',
                    res_winner: 'Êõ¥ÂÑ™ÊñπÊ°à:', txt_save: 'ÁØÄÁúÅÈáëÈ°ç',
                    opt_name_a: 'ÁèæÈáëËøîÈÇÑ', opt_name_b: '‰ΩéÊÅØË≤∏Ê¨æ'
                },
                'ja': {
                    title: 'üöó „Éû„Ç§„Ç´„Éº„É≠„Éº„É≥ÊØîËºÉ',
                    desc: '„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„ÉÉ„ÇØ„Å®‰ΩéÈáëÂà©„É≠„Éº„É≥„ÄÅ„Å©„Å°„Çâ„Åå„ÅäÂæó„ÅãÊØîËºÉ„ÄÇ',
                    lbl_price: 'Ëªä‰∏°‰æ°Ê†º', lbl_term: '„É≠„Éº„É≥ÊúüÈñì (Êúà)',
                    opt_a: '„Éó„É©„É≥A: „Ç≠„É£„ÉÉ„Ç∑„É•„Éê„ÉÉ„ÇØ', lbl_rebate: 'ÂÄ§Âºï„ÅçÈ°ç ($)', lbl_std_rate: 'ÈÄöÂ∏∏ÈáëÂà© (%)',
                    opt_b: '„Éó„É©„É≥B: ‰ΩéÈáëÂà©', lbl_promo_rate: 'ÂÑ™ÈÅáÈáëÂà© (%)', note_no_cash: 'ÂÄ§Âºï„Åç„Å™„Åó',
                    btn_calc: 'ÊØîËºÉ„Åô„Çã',
                    res_total_a: 'Á∑èÊîØÊâïÈ°ç (A)', res_total_b: 'Á∑èÊîØÊâïÈ°ç (B)',
                    res_winner: '„Åä„Åô„Åô„ÇÅ:', txt_save: 'ÁØÄÁ¥ÑÈ°ç',
                    opt_name_a: '„Ç≠„É£„ÉÉ„Ç∑„É•„Éê„ÉÉ„ÇØ', opt_name_b: '‰ΩéÈáëÂà©'
                },
                'ru': {
                    title: 'üöó –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–∫—Ä–µ–¥–∏—Ç–æ–≤',
                    desc: '–ß—Ç–æ –≤—ã–≥–æ–¥–Ω–µ–µ: –°–∫–∏–¥–∫–∞ (Cash Back) –∏–ª–∏ –ù–∏–∑–∫–∞—è —Å—Ç–∞–≤–∫–∞?',
                    lbl_price: '–¶–µ–Ω–∞ –∞–≤—Ç–æ', lbl_term: '–°—Ä–æ–∫ (–º–µ—Å)',
                    opt_a: '–í–∞—Ä–∏–∞–Ω—Ç A: –°–∫–∏–¥–∫–∞', lbl_rebate: '–°—É–º–º–∞ —Å–∫–∏–¥–∫–∏', lbl_std_rate: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (%)',
                    opt_b: '–í–∞—Ä–∏–∞–Ω—Ç B: –ù–∏–∑–∫–∏–π %', lbl_promo_rate: '–õ—å–≥–æ—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (%)', note_no_cash: '–ë–µ–∑ —Å–∫–∏–¥–∫–∏',
                    btn_calc: '–°—Ä–∞–≤–Ω–∏—Ç—å',
                    res_total_a: '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (A)', res_total_b: '–û–±—â–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (B)',
                    res_winner: '–í—ã–≥–æ–¥–Ω–µ–µ:', txt_save: '–í—ã–≥–æ–¥–∞',
                    opt_name_a: '–°–∫–∏–¥–∫–∞', opt_name_b: '–ù–∏–∑–∫–∞—è —Å—Ç–∞–≤–∫–∞'
                },
                'es': {
                    title: 'üöó Comparaci√≥n de Pr√©stamos',
                    desc: '¬øReembolso en efectivo o Tasa de inter√©s baja?',
                    lbl_price: 'Precio del Auto', lbl_term: 'Plazo (Meses)',
                    opt_a: 'Opci√≥n A: Reembolso', lbl_rebate: 'Reembolso ($)', lbl_std_rate: 'Tasa Est√°ndar (%)',
                    opt_b: 'Opci√≥n B: Tasa Baja', lbl_promo_rate: 'Tasa Promo (%)', note_no_cash: 'Sin reembolso',
                    btn_calc: 'Comparar',
                    res_total_a: 'Costo Total (A)', res_total_b: 'Costo Total (B)',
                    res_winner: 'Mejor Opci√≥n:', txt_save: 'Ahorras',
                    opt_name_a: 'Reembolso', opt_name_b: 'Tasa Baja'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('cvr-lang').value;
                const texts = CVRCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="cvr_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(texts[key]) el.innerText = texts[key];
                });
                if(document.getElementById('cvr-results').classList.contains('hidden') === false) CVRCalc.calc();
            },

            calcLoan: (amount, rate, months) => {
                if (rate === 0) return amount;
                const r = rate / 100 / 12;
                const monthly = amount * (r * Math.pow(1 + r, months)) / (Math.pow(1 + r, months) - 1);
                return monthly * months;
            },

            calc: () => {
                const price = parseFloat(document.getElementById('cvr-price').value);
                const months = parseFloat(document.getElementById('cvr-term').value);
                const rebate = parseFloat(document.getElementById('cvr-rebate').value) || 0;
                const stdRate = parseFloat(document.getElementById('cvr-std-rate').value) || 0;
                const promoRate = parseFloat(document.getElementById('cvr-promo-rate').value) || 0;

                if (isNaN(price) || isNaN(months)) return;

                // Option A: Price - Rebate, at Std Rate
                const loanA = price - rebate;
                const totalCostA = CVRCalc.calcLoan(loanA, stdRate, months); // This is total payments. Add back any downpayment if needed, but here assuming simple comparison of total outflow for the loan.
                // Wait, "Total Cost" usually means Total Price Paid for the car = Down + Loan Payments.
                // Since Down Payment is same for both (implicitly), we can compare Total Loan Payments.
                // BUT, Option A effectively reduces the Principal.
                // So Total Cost A = Total Loan Payments (on Price-Rebate).
                // Total Cost B = Total Loan Payments (on Price).
                
                // Option B: Price, at Promo Rate
                const loanB = price;
                const totalCostB = CVRCalc.calcLoan(loanB, promoRate, months);

                const fmt = (n) => n.toLocaleString('en-US', { style: 'currency', currency: 'USD', maximumFractionDigits: 0 });

                document.getElementById('res-cost-a').innerText = fmt(totalCostA);
                document.getElementById('res-cost-b').innerText = fmt(totalCostB);

                const lang = document.getElementById('cvr-lang').value;
                const txt = CVRCalc.i18n[lang];
                const resText = document.getElementById('res-winner-text');
                const saveText = document.getElementById('res-savings');

                if (totalCostA < totalCostB) {
                    resText.innerText = txt.opt_name_a;
                    resText.className = "text-xl font-bold ml-2 text-blue-600";
                    saveText.innerText = `${txt.txt_save}: ${fmt(totalCostB - totalCostA)}`;
                } else if (totalCostB < totalCostA) {
                    resText.innerText = txt.opt_name_b;
                    resText.className = "text-xl font-bold ml-2 text-indigo-600";
                    saveText.innerText = `${txt.txt_save}: ${fmt(totalCostA - totalCostB)}`;
                } else {
                    resText.innerText = "Equal";
                    saveText.innerText = "";
                }

                document.getElementById('cvr-results').classList.remove('hidden');
            }
        };
    </script>
</body>
</html>