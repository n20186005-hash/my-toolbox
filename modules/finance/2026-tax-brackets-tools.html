<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Category Meta Tag -->
    <meta name="category" content="finance">
    <meta name="icon" content="ğŸ’°">
    <meta name="description" content="2026 & 2025 Tax Bracket Calculator - Estimate your federal income tax, capital gains, and refunds. Includes new 2026 inflation adjustments. 2026 ç¾åœ‹ç¨…ç‡ç´šè·è¨ˆç®—å™¨ï¼Œæ”¯æŒè³‡æœ¬åˆ©å¾—ç¨…ä¼°ç®—ã€‚">
    <title>Tax Bracket Calculator 2026 | ç¾åœ‹ç¨…ç‡è¨ˆç®—å™¨</title>
    <!-- SEO Canonical Tag -->
    <link rel="canonical" href="https://toolboxpro.top/modules/finance/tax-bracket-calculator.html" />
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#0ea5e9', hover: '#0284c7' }, /* Sky Blue for Tax */
                        secondary: { DEFAULT: '#6366f1', hover: '#4f46e5' },
                        surface: { light: '#ffffff', dark: '#1e293b' },
                        bg: { light: '#f0f9ff', dark: '#0f172a' } /* Light Blue Tint */
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.4s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide::-webkit-scrollbar { display: none; }
            .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
            
            .glass {
                @apply bg-white/90 dark:bg-slate-800/90 backdrop-blur-lg border border-slate-200 dark:border-slate-700;
            }
            
            .input-field {
                @apply w-full px-4 py-2.5 rounded-lg border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary focus:border-transparent outline-none transition-all text-sm;
            }
            
            .label-text {
                @apply text-xs font-semibold text-slate-500 dark:text-slate-400 mb-1.5 block uppercase tracking-wide;
            }

            .result-row {
                @apply flex justify-between items-center py-2 border-b border-slate-100 dark:border-slate-700/50 last:border-0;
            }

            .bracket-bar {
                @apply h-8 rounded-md flex items-center justify-center text-xs font-bold text-white transition-all duration-500 relative overflow-hidden;
            }
        }

        .currency-input-wrapper { position: relative; }
        .currency-input-wrapper::before {
            content: '$';
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #94a3b8;
            font-family: 'JetBrains Mono', monospace;
        }
        .currency-input-wrapper input { padding-left: 28px; }
        
        /* Table Styles */
        .tax-table { @apply w-full text-xs md:text-sm text-left border-collapse; }
        .tax-table th { @apply bg-slate-100 dark:bg-slate-700 p-2 md:p-3 font-bold text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-600; }
        .tax-table td { @apply p-2 md:p-3 border border-slate-200 dark:border-slate-600 text-slate-600 dark:text-slate-300; }
        .tax-table tr:nth-child(even) { @apply bg-slate-50/50 dark:bg-slate-800/30; }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-bg-light dark:bg-bg-dark min-h-screen font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300 overflow-x-hidden">

    <!-- Background Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none z-0 opacity-40 dark:opacity-20">
        <div class="absolute top-[-10%] left-[-10%] w-[600px] h-[600px] bg-sky-200 rounded-full blur-[120px] mix-blend-multiply dark:mix-blend-screen"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[500px] h-[500px] bg-indigo-300 rounded-full blur-[100px] mix-blend-multiply dark:mix-blend-screen"></div>
    </div>

    <div class="container mx-auto px-4 py-6 max-w-6xl relative z-10 flex flex-col min-h-screen">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-sky-500 to-blue-700 text-white flex items-center justify-center text-2xl shadow-lg shadow-sky-500/20">
                    <i class="fa fa-calculator"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold tracking-tight text-slate-900 dark:text-white" data-i18n="title">Tax Bracket Calculator</h1>
                    <p class="text-xs text-slate-500 font-medium" data-i18n="subtitle">2026 & 2025 Federal Income Tax Estimator</p>
                </div>
            </div>

            <div class="flex items-center gap-2 bg-white dark:bg-slate-800 p-1.5 rounded-xl border border-slate-200 dark:border-slate-700 shadow-sm">
                <select id="lang-selector" class="bg-transparent text-sm font-medium px-2 py-1 rounded focus:outline-none cursor-pointer text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700">
                    <option value="en">ğŸ‡ºğŸ‡¸ English</option>
                    <option value="zh-TW">ğŸ‡¹ğŸ‡¼ ç¹é«”ä¸­æ–‡</option>
                </select>
                <div class="w-px h-5 bg-slate-300 dark:bg-slate-600 mx-1"></div>
                <button id="mode-toggle" class="w-8 h-8 rounded-lg flex items-center justify-center text-slate-500 hover:text-primary hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors">
                    <i class="fa fa-moon-o dark:hidden"></i>
                    <i class="fa fa-sun-o hidden dark:inline"></i>
                </button>
            </div>
        </header>

        <!-- Main Tool Area -->
        <div class="grid lg:grid-cols-12 gap-6 mb-12">
            
            <!-- Left Column: Inputs -->
            <main class="lg:col-span-4 flex flex-col gap-6">
                <div class="glass rounded-3xl shadow-lg overflow-hidden border-t-4 border-t-sky-500 p-6 space-y-5">
                    <h2 class="text-lg font-bold flex items-center gap-2 text-slate-800 dark:text-white">
                        <i class="fa fa-sliders text-sky-500"></i> <span data-i18n="h2_config">Configuration</span>
                    </h2>

                    <!-- 1. Tax Year -->
                    <div>
                        <label class="label-text" data-i18n="lbl_year">Tax Year</label>
                        <select id="input-year" class="input-field" onchange="Calculator.calculate()">
                            <option value="2026">2026 (Projected / Filed 2027)</option>
                            <option value="2025">2025 (Filed in 2026)</option>
                            <option value="2024">2024 (Filed in 2025)</option>
                            <option value="2023">2023 (Filed in 2024)</option>
                        </select>
                    </div>

                    <!-- 2. Filing Status -->
                    <div>
                        <label class="label-text" data-i18n="lbl_status">Filing Status</label>
                        <select id="input-status" class="input-field" onchange="Calculator.calculate()">
                            <option value="single" data-i18n="opt_single">Single</option>
                            <option value="mfj" data-i18n="opt_mfj">Married Filing Jointly</option>
                            <option value="mfs" data-i18n="opt_mfs">Married Filing Separately</option>
                            <option value="hoh" data-i18n="opt_hoh">Head of Household</option>
                            <option value="qss" data-i18n="opt_qss">Qualifying Surviving Spouse</option>
                        </select>
                    </div>

                    <!-- 3. Income -->
                    <div>
                        <label class="label-text" data-i18n="lbl_income">Ordinary Taxable Income</label>
                        <div class="currency-input-wrapper">
                            <input type="number" id="input-income" class="input-field font-mono text-lg font-bold text-sky-600" value="65000" placeholder="0" oninput="Calculator.calculate()">
                        </div>
                        <p class="text-[10px] text-slate-400 mt-1" data-i18n="hint_income">Income from wages, interest, etc. (after deductions).</p>
                    </div>

                    <!-- 4. Capital Gains Toggle -->
                    <div>
                        <button type="button" onclick="App.toggleCapGains()" class="text-xs font-semibold text-sky-500 hover:text-sky-600 flex items-center gap-1 focus:outline-none">
                            <i id="cg-icon" class="fa fa-plus-square-o"></i> 
                            <span data-i18n="lbl_add_cg">Add Long Term Capital Gains</span>
                        </button>
                        
                        <div id="cg-container" class="hidden mt-2 animate-slide-up">
                            <label class="label-text text-sky-600 dark:text-sky-400" data-i18n="lbl_cg_income">Long Term Capital Gains</label>
                            <div class="currency-input-wrapper">
                                <input type="number" id="input-ltcg" class="input-field font-mono border-sky-200 focus:ring-sky-500" value="0" placeholder="0" oninput="Calculator.calculate()">
                            </div>
                            <p class="text-[10px] text-slate-400 mt-1" data-i18n="hint_cg">Profits from assets held > 1 year (Stocks, Real Estate).</p>
                        </div>
                    </div>

                    <button onclick="Calculator.calculate()" class="w-full bg-sky-500 hover:bg-sky-600 text-white font-bold py-3 rounded-xl transition-all shadow-lg shadow-sky-500/30">
                        <i class="fa fa-calculator mr-2"></i> <span data-i18n="btn_calculate">Calculate</span>
                    </button>
                </div>

                <!-- Info Box -->
                <div class="bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-4 border border-blue-100 dark:border-blue-800/30 text-sm text-blue-800 dark:text-blue-300 flex gap-3">
                    <i class="fa fa-lightbulb-o text-lg mt-0.5"></i> 
                    <div>
                        <span class="font-bold block mb-1" data-i18n="tip_title">Tax Tip:</span>
                        <span id="std-deduction-hint">Standard Deduction for 2026 Single filers is $16,100.</span>
                    </div>
                </div>
            </main>

            <!-- Right Column: Results -->
            <main class="lg:col-span-8 flex flex-col gap-6">
                <div class="glass rounded-3xl shadow-xl overflow-hidden min-h-[500px] flex flex-col">
                    
                    <div class="bg-slate-50 dark:bg-slate-900/50 border-b border-slate-200 dark:border-slate-700 p-6 flex justify-between items-center">
                        <h2 class="font-bold text-slate-700 dark:text-slate-200 text-lg" data-i18n="h2_results">Estimated Tax Results</h2>
                        <span class="text-xs font-mono bg-sky-100 dark:bg-sky-900 text-sky-700 dark:text-sky-300 px-2 py-1 rounded" id="res-year-badge">2026</span>
                    </div>

                    <div class="p-6 md:p-8 flex-grow flex flex-col gap-8 animate-fade-in">
                        
                        <!-- Main Stats -->
                        <div class="grid md:grid-cols-2 gap-6 items-stretch">
                            <!-- Marginal Rate Card -->
                            <div class="rounded-2xl bg-gradient-to-br from-sky-500 to-blue-600 text-white p-6 shadow-lg shadow-sky-500/20 flex flex-col justify-center items-center text-center">
                                <span class="text-sky-100 text-sm uppercase tracking-wider font-semibold" data-i18n="res_marginal">Marginal Tax Rate</span>
                                <div class="text-6xl font-bold font-mono my-2" id="res-marginal-rate">22%</div>
                                <p class="text-xs text-sky-100 opacity-80" data-i18n="desc_marginal">This is the highest rate applied to the last dollar you earned.</p>
                            </div>

                            <!-- Total Tax Card -->
                            <div class="rounded-2xl border border-slate-200 dark:border-slate-700 p-6 space-y-4 bg-slate-50/50 dark:bg-slate-800/30 flex flex-col justify-center">
                                <div>
                                    <span class="text-sm text-slate-500 dark:text-slate-400 uppercase tracking-wide" data-i18n="res_total_tax">Total Estimated Tax</span>
                                    <div class="text-3xl font-bold text-slate-800 dark:text-white font-mono" id="res-total-tax">$0</div>
                                </div>
                                
                                <!-- Capital Gains Split (Hidden by default) -->
                                <div id="tax-split-container" class="hidden text-xs space-y-1 pt-2 border-t border-slate-200 dark:border-slate-700">
                                    <div class="flex justify-between">
                                        <span class="text-slate-500" data-i18n="lbl_ord_tax">Ordinary Income Tax:</span>
                                        <span class="font-mono" id="res-ord-tax">$0</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span class="text-slate-500" data-i18n="lbl_cg_tax">Capital Gains Tax:</span>
                                        <span class="font-mono" id="res-cg-tax">$0</span>
                                    </div>
                                </div>

                                <div class="w-full h-px bg-slate-200 dark:bg-slate-700"></div>
                                <div>
                                    <span class="text-sm text-slate-500 dark:text-slate-400 uppercase tracking-wide" data-i18n="res_effective">Effective Tax Rate</span>
                                    <div class="text-2xl font-bold text-emerald-500 font-mono" id="res-effective-rate">0.0%</div>
                                </div>
                            </div>
                        </div>

                        <!-- Bracket Breakdown Visualization -->
                        <div>
                            <h3 class="font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center gap-2">
                                <i class="fa fa-list-ol text-slate-400"></i> <span data-i18n="h3_breakdown">Ordinary Income Bracket Breakdown</span>
                            </h3>
                            <div class="rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden" id="bracket-container">
                                <!-- Dynamic Rows Generated via JS -->
                            </div>
                            
                            <!-- LTCG Breakdown -->
                            <div id="ltcg-breakdown-wrapper" class="hidden mt-6">
                                <h3 class="font-bold text-slate-800 dark:text-slate-200 mb-4 flex items-center gap-2">
                                    <i class="fa fa-line-chart text-slate-400"></i> <span data-i18n="h3_cg_breakdown">Capital Gains Bracket Breakdown</span>
                                </h3>
                                <div class="rounded-xl border border-slate-200 dark:border-slate-700 overflow-hidden" id="cg-bracket-container">
                                    <!-- Dynamic Rows -->
                                </div>
                            </div>

                            <p class="text-[10px] text-slate-400 mt-3 text-center" data-i18n="note_progressive">
                                * The US tax system is progressive. Capital Gains are taxed at 0%, 15%, or 20% based on your TOTAL taxable income (stacking on top of ordinary income).
                            </p>
                        </div>

                    </div>
                </div>
            </main>
        </div>

        <!-- FAQ / Knowledge Base Section -->
        <section class="mb-12">
            <div class="glass rounded-2xl p-8 shadow-xl">
                <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                    <i class="fa fa-book text-primary"></i> <span data-i18n="guide_title">2026 Tax Keyword Guide</span>
                </h2>
                
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Column 1: Changes & Comparisons -->
                    <div class="space-y-6">
                        <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-700">
                            <h3 class="font-bold text-sky-700 dark:text-sky-400 mb-2 text-sm uppercase tracking-wide">
                                <i class="fa fa-exchange mr-2"></i> <span data-i18n="kw_h_compare">2026 vs 2025 Tax Brackets</span>
                            </h3>
                            <p class="text-sm text-slate-600 dark:text-slate-300 leading-relaxed" data-i18n="kw_p_compare">
                                The IRS adjusts tax brackets annually for inflation. For 2026, brackets are projected to increase by ~2.5% compared to 2025. This means you can earn more income before jumping into a higher tax percentage.
                            </p>
                            <div class="mt-3 text-xs text-slate-500 italic" data-i18n="kw_tags_compare">Keywords: irs 2026 tax brackets compared to 2025, new tax brackets 2026 vs 2025</div>
                        </div>

                        <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-700">
                            <h3 class="font-bold text-sky-700 dark:text-sky-400 mb-2 text-sm uppercase tracking-wide">
                                <i class="fa fa-users mr-2"></i> <span data-i18n="kw_h_filing">Filing Status Nuances</span>
                            </h3>
                            <ul class="text-sm text-slate-600 dark:text-slate-300 space-y-2">
                                <li><strong data-i18n="kw_s_mfj">Married Filing Jointly (MFJ):</strong> <span data-i18n="kw_p_mfj">Best brackets. The 10%, 12%, and 22% brackets are exactly double the Single limits.</span></li>
                                <li><strong data-i18n="kw_s_single">Single:</strong> <span data-i18n="kw_p_single">Standard filing status for unmarried individuals. Standard deduction is half of MFJ.</span></li>
                                <li><strong data-i18n="kw_s_hoh">Head of Household:</strong> <span data-i18n="kw_p_hoh">For single parents/providers. Wider brackets and higher standard deduction than Single.</span></li>
                            </ul>
                            <div class="mt-3 text-xs text-slate-500 italic" data-i18n="kw_tags_filing">Keywords: 2026 tax brackets married filing jointly, single, head of household</div>
                        </div>
                    </div>

                    <!-- Column 2: Specifics & Tools -->
                    <div class="space-y-6">
                        <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-700">
                            <h3 class="font-bold text-sky-700 dark:text-sky-400 mb-2 text-sm uppercase tracking-wide">
                                <i class="fa fa-shield mr-2"></i> <span data-i18n="kw_h_std_ded">2026 Standard Deduction</span>
                            </h3>
                            <p class="text-sm text-slate-600 dark:text-slate-300 mb-3" data-i18n="kw_p_std_ded">
                                Most taxpayers claim the standard deduction instead of itemizing. For 2026, these amounts significantly reduce your taxable income:
                            </p>
                            <div class="grid grid-cols-2 gap-2 text-sm font-mono">
                                <div class="bg-white dark:bg-slate-800 p-2 rounded border border-slate-200 dark:border-slate-700 flex justify-between">
                                    <span>Single</span> <span class="font-bold text-slate-700 dark:text-white">$16,100</span>
                                </div>
                                <div class="bg-white dark:bg-slate-800 p-2 rounded border border-slate-200 dark:border-slate-700 flex justify-between">
                                    <span>MFJ</span> <span class="font-bold text-slate-700 dark:text-white">$32,200</span>
                                </div>
                            </div>
                            <div class="mt-3 text-xs text-slate-500 italic" data-i18n="kw_tags_std_ded">Keywords: 2026 standard deduction, 2026 tax brackets and standard deduction</div>
                        </div>

                        <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-700">
                            <h3 class="font-bold text-sky-700 dark:text-sky-400 mb-2 text-sm uppercase tracking-wide">
                                <i class="fa fa-line-chart mr-2"></i> <span data-i18n="kw_h_cg">Capital Gains & State Tax</span>
                            </h3>
                            <div class="space-y-3">
                                <div>
                                    <h4 class="text-xs font-bold text-slate-700 dark:text-slate-200" data-i18n="kw_sub_cg">Capital Gains (LTCG)</h4>
                                    <p class="text-sm text-slate-600 dark:text-slate-400" data-i18n="kw_p_cg">Assets held >1 year are taxed at 0%, 15%, or 20%. The 0% rate applies up to ~$49k (Single) or ~$98k (MFJ) taxable income in 2026.</p>
                                </div>
                                <div class="w-full h-px bg-slate-200 dark:bg-slate-700"></div>
                                <div>
                                    <h4 class="text-xs font-bold text-slate-700 dark:text-slate-200" data-i18n="kw_sub_ca">California State Tax</h4>
                                    <p class="text-sm text-slate-600 dark:text-slate-400" data-i18n="kw_p_ca">This tool calculates Federal Tax. California has separate brackets (up to 14.4%) which are also indexed for inflation. Residents should add ~9.3% for median incomes.</p>
                                </div>
                            </div>
                            <div class="mt-3 text-xs text-slate-500 italic" data-i18n="kw_tags_cg">Keywords: 2026 tax brackets capital gains, 2026 tax brackets california</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tax Planning Insights -->
        <section class="mb-12">
            <div class="glass rounded-2xl p-8 shadow-xl">
                <h2 class="text-2xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                    <i class="fa fa-lightbulb-o text-primary"></i> <span data-i18n="edu_title">Tax Planning Insights</span>
                </h2>
                
                <!-- Key Takeaways -->
                <div class="mb-8">
                     <h3 class="font-bold text-lg text-slate-800 dark:text-white mb-3" data-i18n="edu_h_takeaways">Key Takeaways</h3>
                     <ul class="list-disc list-inside space-y-2 text-sm text-slate-600 dark:text-slate-300">
                        <li data-i18n="edu_li_1">The IRS uses 7 brackets to calculate your tax bill. As your income rises, you may move to a higher bracket.</li>
                        <li data-i18n="edu_li_2">Your marginal tax rate is the rate on your highest dollar; your effective rate is the total percentage you pay.</li>
                        <li data-i18n="edu_li_3">Lower your tax bill by maximizing deductions, retirement contributions, delaying income, or tax-loss harvesting.</li>
                     </ul>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Col 1: Concepts -->
                    <div class="space-y-6">
                        <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-700">
                             <h4 class="font-bold text-sky-700 dark:text-sky-400 mb-2 text-sm uppercase" data-i18n="edu_h_how_work">How Brackets Work</h4>
                             <p class="text-sm text-slate-600 dark:text-slate-300" data-i18n="edu_p_how_work">
                                The US has a progressive tax system. You donâ€™t pay the same rate on every dollar. As you earn more, only the additional income is taxed at the higher rate. The IRS adjusts these brackets annually for inflation.
                             </p>
                        </div>
                        <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-700">
                             <h4 class="font-bold text-sky-700 dark:text-sky-400 mb-2 text-sm uppercase" data-i18n="edu_h_rates">Marginal vs Effective</h4>
                             <p class="text-sm text-slate-600 dark:text-slate-300" data-i18n="edu_p_rates">
                                <strong>Marginal Tax Rate:</strong> The rate owed on your very last dollar earned. <br>
                                <strong>Effective Tax Rate:</strong> The total percentage of your income paid to the IRS (Total Tax Ã· Total Income). This is usually lower than your marginal rate.
                             </p>
                        </div>
                    </div>

                    <!-- Col 2: Strategies -->
                    <div class="space-y-6">
                        <div class="bg-slate-50 dark:bg-slate-900/50 rounded-xl p-5 border border-slate-100 dark:border-slate-700">
                             <h4 class="font-bold text-emerald-700 dark:text-emerald-400 mb-2 text-sm uppercase" data-i18n="edu_h_strategies">Strategies to Lower Taxes</h4>
                             <ul class="space-y-3 text-sm text-slate-600 dark:text-slate-300">
                                <li>
                                    <strong data-i18n="edu_s_deductions">Maximize Deductions:</strong> 
                                    <span data-i18n="edu_p_deductions">Consider "bunching" deductions or expanded charitable contributions (non-itemizers can deduct some cash donations starting 2026).</span>
                                </li>
                                <li>
                                    <strong data-i18n="edu_s_retirement">Retirement Savings:</strong> 
                                    <span data-i18n="edu_p_retirement">Contributions to traditional 401(k) or IRA accounts reduce your taxable income dollar-for-dollar.</span>
                                </li>
                                <li>
                                    <strong data-i18n="edu_s_hsa">Health Savings Account (HSA):</strong> 
                                    <span data-i18n="edu_p_hsa">If you have a high-deductible plan, HSA contributions directly lower your taxable income.</span>
                                </li>
                                <li>
                                    <strong data-i18n="edu_s_harvesting">Tax-Loss Harvesting:</strong> 
                                    <span data-i18n="edu_p_harvesting">Sell investments that have lost value to offset realized gains, reducing your current taxable income.</span>
                                </li>
                             </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW: Detailed Tax Guide & Tables -->
        <section class="mb-12">
            <div class="glass rounded-2xl p-8 shadow-xl space-y-8">
                <h2 class="text-2xl font-bold text-slate-900 dark:text-white flex items-center gap-2">
                    <i class="fa fa-university text-primary"></i> <span data-i18n="gd_title">Comprehensive Tax Guide & IRS Tables</span>
                </h2>

                <div class="prose dark:prose-invert max-w-none text-sm text-slate-600 dark:text-slate-300">
                    <p data-i18n="gd_intro">Understanding how your income falls into different tax brackets can help with tax planning. The IRS uses 7 brackets to calculate your tax bill based on your income and filing status. As your income rises, it can push you into a higher tax bracket and may increase how much you owe.</p>
                </div>

                <!-- 2025 Table -->
                <div class="overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-700">
                    <table class="tax-table">
                        <thead>
                            <tr>
                                <th colspan="5" class="bg-sky-50 dark:bg-sky-900/30 text-center text-lg text-sky-800 dark:text-sky-300" data-i18n="gd_tb1_title">2025 Tax Brackets</th>
                            </tr>
                            <tr>
                                <th data-i18n="col_rate">Tax Rate</th>
                                <th data-i18n="opt_single">Single Filers</th>
                                <th data-i18n="opt_mfj">Married Filing Jointly</th>
                                <th data-i18n="opt_mfs">Married Filing Separately</th>
                                <th data-i18n="opt_hoh">Head of Household</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>10%</td><td>$0 - $11,925</td><td>$0 - $23,850</td><td>$0 - $11,925</td><td>$0 - $17,000</td></tr>
                            <tr><td>12%</td><td>$11,926 - $48,475</td><td>$23,851 - $96,950</td><td>$11,926 - $48,475</td><td>$17,001 - $64,850</td></tr>
                            <tr><td>22%</td><td>$48,476 - $103,350</td><td>$96,951 - $206,700</td><td>$48,476 - $103,350</td><td>$64,851 - $103,350</td></tr>
                            <tr><td>24%</td><td>$103,351 - $197,300</td><td>$206,701 - $394,600</td><td>$103,351 - $197,300</td><td>$103,351 - $197,300</td></tr>
                            <tr><td>32%</td><td>$197,301 - $250,525</td><td>$394,601 - $501,050</td><td>$197,301 - $250,525</td><td>$197,301 - $250,500</td></tr>
                            <tr><td>35%</td><td>$250,526 - $626,350</td><td>$501,051 - $751,600</td><td>$250,526 - $375,800</td><td>$250,501 - $626,350</td></tr>
                            <tr><td>37%</td><td>> $626,350</td><td>> $751,600</td><td>> $375,800</td><td>> $626,350</td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- 2026 Table -->
                <div class="overflow-x-auto rounded-xl border border-slate-200 dark:border-slate-700">
                    <table class="tax-table">
                        <thead>
                            <tr>
                                <th colspan="5" class="bg-indigo-50 dark:bg-indigo-900/30 text-center text-lg text-indigo-800 dark:text-indigo-300" data-i18n="gd_tb2_title">2026 Tax Brackets (Projected)</th>
                            </tr>
                            <tr>
                                <th data-i18n="col_rate">Tax Rate</th>
                                <th data-i18n="opt_single">Single Filers</th>
                                <th data-i18n="opt_mfj">Married Filing Jointly</th>
                                <th data-i18n="opt_mfs">Married Filing Separately</th>
                                <th data-i18n="opt_hoh">Head of Household</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>10%</td><td>$0 - $12,400</td><td>$0 - $24,800</td><td>$0 - $12,400</td><td>$0 - $17,700</td></tr>
                            <tr><td>12%</td><td>$12,401 - $50,400</td><td>$24,801 - $100,800</td><td>$12,401 - $50,400</td><td>$17,701 - $67,450</td></tr>
                            <tr><td>22%</td><td>$50,401 - $105,700</td><td>$100,801 - $211,400</td><td>$50,401 - $105,700</td><td>$67,451 - $105,700</td></tr>
                            <tr><td>24%</td><td>$105,701 - $201,775</td><td>$211,401 - $403,550</td><td>$105,701 - $201,775</td><td>$105,701 - $201,750</td></tr>
                            <tr><td>32%</td><td>$201,776 - $256,225</td><td>$403,551 - $512,450</td><td>$201,776 - $256,225</td><td>$201,751 - $256,200</td></tr>
                            <tr><td>35%</td><td>$256,226 - $640,600</td><td>$512,451 - $768,700</td><td>$256,226 - $384,350</td><td>$256,201 - $640,600</td></tr>
                            <tr><td>37%</td><td>> $640,600</td><td>> $768,700</td><td>> $384,350</td><td>> $640,600</td></tr>
                        </tbody>
                    </table>
                </div>

                <!-- Deep Dive Text -->
                <div class="space-y-6 text-sm text-slate-600 dark:text-slate-300">
                    <div>
                        <h3 class="font-bold text-base text-slate-800 dark:text-white mb-2" data-i18n="gd_h_figure">How do you figure out what tax bracket youâ€™re in?</h3>
                        <p data-i18n="gd_p_figure">To figure out your tax bracket, first look at the rates for your filing status. Determine your taxable income by adding up all income (salary, bonuses, etc.) and subtracting deductions (like 401(k), HSA, and the standard deduction). The top tax rate your income falls into is not the actual rate youâ€™ll pay on all incomeâ€”only on the portion in that specific bracket.</p>
                    </div>

                    <div>
                        <h3 class="font-bold text-base text-slate-800 dark:text-white mb-2" data-i18n="gd_h_marginal">What is your federal marginal tax rate?</h3>
                        <p data-i18n="gd_p_marginal">The federal marginal tax rate is the tax rate owed on your highest dollar of income. For example, if your income falls into the 24% tax bracket, your marginal rate is 24%. You owe 24 cents for every additional dollar earned in that bracket.</p>
                    </div>

                    <div>
                        <h3 class="font-bold text-base text-slate-800 dark:text-white mb-2" data-i18n="gd_h_effective">What is your federal effective tax rate?</h3>
                        <p data-i18n="gd_p_effective">Your effective tax rate is the total percentage of income you pay in federal income tax (Total Tax / Total Income). It essentially averages out the different rates you pay across all brackets.</p>
                    </div>

                    <div>
                        <h3 class="font-bold text-base text-slate-800 dark:text-white mb-2" data-i18n="gd_h_lower">Potential ways to get into a lower tax bracket</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li data-i18n="gd_li_deduct"><strong>Maximize Deductions:</strong> Claim all deductions and adjustments you are eligible for.</li>
                            <li data-i18n="gd_li_bunch"><strong>Bunching Deductions:</strong> Concentrate charitable contributions in a single year to exceed the standard deduction.</li>
                            <li data-i18n="gd_li_retire"><strong>Retirement Savings:</strong> Contribute to a 401(k) or Traditional IRA to reduce annual taxable income.</li>
                            <li data-i18n="gd_li_hsa"><strong>Health Savings Account (HSA):</strong> Reduces taxable income if you have a qualifying high-deductible health plan.</li>
                            <li data-i18n="gd_li_loss"><strong>Tax-Loss Harvesting:</strong> Sell investments that have lost value to offset realized investment gains.</li>
                            <li data-i18n="gd_li_delay"><strong>Delaying Income:</strong> If possible, ask for bonuses or freelance payments to be paid in the following year.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center text-xs text-slate-400 py-6">
            <p>&copy; <span id="year"></span> Tax Bracket Calculator. <span data-i18n="footer_text">Figures are estimates for illustration only.</span></p>
        </footer>

    </div>

    <!-- Required Footer Code -->
    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>

    <script>
        // --- Localization Data ---
        const i18nData = {
            'en': {
                title: "Tax Bracket Calculator", subtitle: "2026 & 2025 Federal Income Tax Estimator",
                h2_config: "Configuration",
                lbl_year: "Tax Year", lbl_status: "Filing Status", lbl_income: "Ordinary Taxable Income",
                opt_single: "Single", opt_mfj: "Married Filing Jointly", opt_mfs: "Married Filing Separately", 
                opt_hoh: "Head of Household", opt_qss: "Qualifying Surviving Spouse",
                hint_income: "Income from wages, interest, etc. (after deductions).",
                lbl_add_cg: "Add Long Term Capital Gains",
                lbl_cg_income: "Long Term Capital Gains",
                hint_cg: "Profits from assets held > 1 year (Stocks, Real Estate).",
                btn_calculate: "Calculate",
                tip_title: "Tax Tip:",
                h2_results: "Estimated Tax Results",
                res_marginal: "Marginal Tax Rate", desc_marginal: "The top rate applied to your last dollar earned.",
                res_total_tax: "Total Estimated Tax",
                lbl_ord_tax: "Ordinary Income Tax:", lbl_cg_tax: "Capital Gains Tax:",
                res_effective: "Effective Tax Rate", desc_effective: "Percentage of your taxable income paid in tax.",
                h3_breakdown: "Ordinary Income Bracket Breakdown",
                h3_cg_breakdown: "Capital Gains Bracket Breakdown",
                note_progressive: "* The US tax system is progressive. Capital Gains are taxed at 0%, 15%, or 20% based on your TOTAL taxable income (stacking on top of ordinary income).",
                col_rate: "Rate", col_range: "Income Range", col_tax: "Tax Owed",
                std_ded_hint: "Standard Deduction for {year} {status} is ${amount}.",
                
                // Keyword Guide Section
                guide_title: "2026 Tax Keyword Guide",
                kw_h_compare: "2026 vs 2025 Tax Brackets",
                kw_p_compare: "The IRS adjusts tax brackets annually for inflation. For 2026, brackets are projected to increase by ~2.5% compared to 2025. This means you can earn more income before jumping into a higher tax percentage.",
                kw_tags_compare: "Keywords: irs 2026 tax brackets compared to 2025, new tax brackets 2026 vs 2025",
                kw_h_filing: "Filing Status Nuances",
                kw_s_mfj: "Married Filing Jointly (MFJ):", kw_p_mfj: "Best brackets. The 10%, 12%, and 22% brackets are exactly double the Single limits.",
                kw_s_single: "Single:", kw_p_single: "Standard filing status for unmarried individuals. Standard deduction is half of MFJ.",
                kw_s_hoh: "Head of Household:", kw_p_hoh: "For single parents/providers. Wider brackets and higher standard deduction than Single.",
                kw_tags_filing: "Keywords: 2026 tax brackets married filing jointly, single, head of household",
                kw_h_std_ded: "2026 Standard Deduction",
                kw_p_std_ded: "Most taxpayers claim the standard deduction instead of itemizing. For 2026, these amounts significantly reduce your taxable income:",
                kw_tags_std_ded: "Keywords: 2026 standard deduction, 2026 tax brackets and standard deduction",
                kw_h_cg: "Capital Gains & State Tax",
                kw_sub_cg: "Capital Gains (LTCG)",
                kw_p_cg: "Assets held >1 year are taxed at 0%, 15%, or 20%. The 0% rate applies up to ~$49k (Single) or ~$98k (MFJ) taxable income in 2026.",
                kw_sub_ca: "California State Tax",
                kw_p_ca: "This tool calculates Federal Tax. California has separate brackets (up to 14.4%) which are also indexed for inflation. Residents should add ~9.3% for median incomes.",
                kw_tags_cg: "Keywords: 2026 tax brackets capital gains, 2026 tax brackets california",

                // Tax Planning Insights Section
                edu_title: "Tax Planning Insights",
                edu_h_takeaways: "Key Takeaways",
                edu_li_1: "The IRS uses 7 brackets to calculate your tax bill. As your income rises, you may move to a higher bracket.",
                edu_li_2: "Your marginal tax rate is the rate on your highest dollar; your effective rate is the total percentage you pay.",
                edu_li_3: "Lower your tax bill by maximizing deductions, retirement contributions, delaying income, or tax-loss harvesting.",
                edu_h_how_work: "How Brackets Work",
                edu_p_how_work: "The US has a progressive tax system. You donâ€™t pay the same rate on every dollar. As you earn more, only the additional income is taxed at the higher rate. The IRS adjusts these brackets annually for inflation.",
                edu_h_rates: "Marginal vs Effective",
                edu_p_rates: "<strong>Marginal Tax Rate:</strong> The rate owed on your very last dollar earned. <br> <strong>Effective Tax Rate:</strong> The total percentage of your income paid to the IRS. This is usually lower than your marginal rate.",
                edu_h_strategies: "Strategies to Lower Taxes",
                edu_s_deductions: "Maximize Deductions:",
                edu_p_deductions: "Consider 'bunching' deductions or expanded charitable contributions (non-itemizers can deduct some cash donations starting 2026).",
                edu_s_retirement: "Retirement Savings:",
                edu_p_retirement: "Contributions to traditional 401(k) or IRA accounts reduce your taxable income dollar-for-dollar.",
                edu_s_hsa: "Health Savings Account (HSA):",
                edu_p_hsa: "If you have a high-deductible plan, HSA contributions directly lower your taxable income.",
                edu_s_harvesting: "Tax-Loss Harvesting:",
                edu_p_harvesting: "Sell investments that have lost value to offset realized gains, reducing your current taxable income.",

                // Comprehensive Guide Section
                gd_title: "Comprehensive Tax Guide & IRS Tables",
                gd_intro: "Understanding how your income falls into different tax brackets can help with tax planning. The IRS uses 7 brackets to calculate your tax bill based on your income and filing status. As your income rises, it can push you into a higher tax bracket and may increase how much you owe.",
                gd_tb1_title: "2025 Tax Brackets",
                gd_tb2_title: "2026 Tax Brackets (Projected)",
                gd_h_figure: "How do you figure out what tax bracket youâ€™re in?",
                gd_p_figure: "To figure out your tax bracket, first look at the rates for your filing status. Determine your taxable income by adding up all income (salary, bonuses, etc.) and subtracting deductions (like 401(k), HSA, and the standard deduction). The top tax rate your income falls into is not the actual rate youâ€™ll pay on all incomeâ€”only on the portion in that specific bracket.",
                gd_h_marginal: "What is your federal marginal tax rate?",
                gd_p_marginal: "The federal marginal tax rate is the tax rate owed on your highest dollar of income. For example, if your income falls into the 24% tax bracket, your marginal rate is 24%. You owe 24 cents for every additional dollar earned in that bracket.",
                gd_h_effective: "What is your federal effective tax rate?",
                gd_p_effective: "Your effective tax rate is the total percentage of income you pay in federal income tax (Total Tax / Total Income). It essentially averages out the different rates you pay across all brackets.",
                gd_h_lower: "Potential ways to get into a lower tax bracket",
                gd_li_deduct: "<strong>Maximize Deductions:</strong> Claim all deductions and adjustments you are eligible for.",
                gd_li_bunch: "<strong>Bunching Deductions:</strong> Concentrate charitable contributions in a single year to exceed the standard deduction.",
                gd_li_retire: "<strong>Retirement Savings:</strong> Contribute to a 401(k) or Traditional IRA to reduce annual taxable income.",
                gd_li_hsa: "<strong>Health Savings Account (HSA):</strong> Reduces taxable income if you have a qualifying high-deductible health plan.",
                gd_li_loss: "<strong>Tax-Loss Harvesting:</strong> Sell investments that have lost value to offset realized investment gains.",
                gd_li_delay: "<strong>Delaying Income:</strong> If possible, ask for bonuses or freelance payments to be paid in the following year.",

                footer_text: "Figures are estimates for illustration only. Not financial advice."
            },
            'zh-TW': {
                title: "ç¨…ç‡ç´šè·è¨ˆç®—å™¨", subtitle: "2026 & 2025 ç¾åœ‹è¯é‚¦æ‰€å¾—ç¨…é ä¼°",
                h2_config: "è¨­ç½® (Configuration)",
                lbl_year: "ç¨…å‹™å¹´åº¦", lbl_status: "å ±ç¨…èº«åˆ†", lbl_income: "ä¸€èˆ¬æ‡‰ç¨…æ”¶å…¥ (Ordinary Income)",
                opt_single: "å–®èº« (Single)", opt_mfj: "å·²å©šåˆä½µç”³å ± (Married Jointly)", opt_mfs: "å·²å©šåˆ†é–‹ç”³å ± (Married Separately)", 
                opt_hoh: "æˆ¶ä¸» (Head of Household)", opt_qss: "åˆæ ¼é°¥å¯¡ (Surviving Spouse)",
                hint_income: "è«‹è¼¸å…¥æ‰£é™¤é¡å¾Œçš„å·¥è³‡ã€åˆ©æ¯ç­‰æ”¶å…¥ã€‚",
                lbl_add_cg: "æ·»åŠ é•·æœŸè³‡æœ¬åˆ©å¾— (Capital Gains)",
                lbl_cg_income: "é•·æœŸè³‡æœ¬åˆ©å¾—",
                hint_cg: "æŒæœ‰è¶…é 1 å¹´çš„è³‡ç”¢åˆ©æ½¤ (å¦‚è‚¡ç¥¨ã€æˆ¿ç”¢)ã€‚",
                btn_calculate: "é–‹å§‹è¨ˆç®—",
                tip_title: "ç¨…å‹™æç¤º:",
                h2_results: "é ä¼°ç¨…å‹™çµæœ",
                res_marginal: "é‚Šéš›ç¨…ç‡", desc_marginal: "é©ç”¨æ–¼æ‚¨æ”¶å…¥æœ€å¾Œä¸€ç¾å…ƒçš„æœ€é«˜ç¨…ç‡ã€‚",
                res_total_tax: "é ä¼°ç¨…é¡ç¸½è¨ˆ",
                lbl_ord_tax: "ä¸€èˆ¬æ‰€å¾—ç¨…:", lbl_cg_tax: "è³‡æœ¬åˆ©å¾—ç¨…:",
                res_effective: "æœ‰æ•ˆç¨…ç‡", desc_effective: "å¯¦éš›æ”¯ä»˜ç¨…æ¬¾ä½”ç¸½æ”¶å…¥çš„ç™¾åˆ†æ¯”ã€‚",
                h3_breakdown: "ä¸€èˆ¬æ‰€å¾—ç¨…ç´šè·æ˜ç´°",
                h3_cg_breakdown: "è³‡æœ¬åˆ©å¾—ç¨…ç´šè·æ˜ç´°",
                note_progressive: "* ç¾åœ‹ç¨…åˆ¶æ˜¯ç´¯é€²çš„ã€‚è³‡æœ¬åˆ©å¾—ç¨…ç‡ç‚º 0%ã€15% æˆ– 20%ï¼Œå–æ±ºæ–¼æ‚¨çš„ã€Œç¸½æ‡‰ç¨…æ”¶å…¥ã€(ä¸€èˆ¬æ”¶å…¥æœƒå…ˆå¡«æ»¿ä½ç¨…ç‡å€é–“)ã€‚",
                col_rate: "ç¨…ç‡", col_range: "æ”¶å…¥ç¯„åœ", col_tax: "è©²ç´šè·ç¨…é¡",
                std_ded_hint: "{year} å¹´ {status} çš„æ¨™æº–æ‰£é™¤é¡ç‚º ${amount}ã€‚",
                
                // Keyword Guide Section
                guide_title: "2026 ç¨…å‹™é—œéµè©è©³è§£",
                kw_h_compare: "2026 vs 2025 ç¨…ç‡æ¯”è¼ƒ",
                kw_p_compare: "IRS æ¯å¹´æœƒæ ¹æ“šé€šè²¨è†¨è„¹èª¿æ•´ç¨…ç´šã€‚2026 å¹´çš„ç¨…ç´šé è¨ˆæ¯” 2025 å¹´ä¸Šèª¿ç´„ 2.5%ã€‚é€™æ„å‘³è‘—åœ¨é€²å…¥æ›´é«˜çš„ç¨…ç‡ç™¾åˆ†æ¯”ä¹‹å‰ï¼Œæ‚¨å¯ä»¥è³ºå–æ›´å¤šçš„æ”¶å…¥ã€‚",
                kw_tags_compare: "é—œéµè©: irs 2026 tax brackets compared to 2025, new tax brackets 2026 vs 2025",
                kw_h_filing: "å ±ç¨…èº«ä»½èªªæ˜",
                kw_s_mfj: "å·²å©šåˆä½µç”³å ± (MFJ):", kw_p_mfj: "äº«æœ‰æœ€å„ªæƒ çš„ç¨…ç´šã€‚10%ã€12% å’Œ 22% çš„ç¨…ç´šä¸Šé™å‰›å¥½æ˜¯å–®èº«äººå£«çš„å…©å€ã€‚",
                kw_s_single: "å–®èº« (Single):", kw_p_single: "æœªå©šå€‹äººçš„æ¨™æº–å ±ç¨…èº«ä»½ã€‚æ¨™æº–æ‰£é™¤é¡æ˜¯ MFJ çš„ä¸€åŠã€‚",
                kw_s_hoh: "æˆ¶ä¸» (Head of Household):", kw_p_hoh: "é©ç”¨æ–¼å–®èº«çˆ¶æ¯æˆ–å®¶åº­æ”¯æŸ±ã€‚æ¯”å–®èº«èº«ä»½æ“æœ‰æ›´å¯¬çš„ç¨…ç´šå’Œæ›´é«˜çš„æ¨™æº–æ‰£é™¤é¡ã€‚",
                kw_tags_filing: "é—œéµè©: 2026 tax brackets married filing jointly, single, head of household",
                kw_h_std_ded: "2026 æ¨™æº–æ‰£é™¤é¡",
                kw_p_std_ded: "å¤§å¤šæ•¸ç´ç¨…äººé¸æ“‡æ¨™æº–æ‰£é™¤é¡è€Œéåˆ—èˆ‰æ‰£é™¤ã€‚2026 å¹´ï¼Œé€™äº›é‡‘é¡å°‡é¡¯è‘—é™ä½æ‚¨çš„æ‡‰ç¨…æ”¶å…¥ï¼š",
                kw_tags_std_ded: "é—œéµè©: 2026 standard deduction, 2026 tax brackets and standard deduction",
                kw_h_cg: "è³‡æœ¬åˆ©å¾—èˆ‡å·ç¨…",
                kw_sub_cg: "é•·æœŸè³‡æœ¬åˆ©å¾— (LTCG)",
                kw_p_cg: "æŒæœ‰è¶…é 1 å¹´çš„è³‡ç”¢æŒ‰ 0%ã€15% æˆ– 20% å¾µç¨…ã€‚2026 å¹´ï¼Œå–®èº«æ”¶å…¥ä½æ–¼ç´„ 4.9 è¬ç¾å…ƒ (MFJ ç´„ 9.8 è¬ç¾å…ƒ) æ™‚ï¼Œç¨…ç‡ç‚º 0%ã€‚",
                kw_sub_ca: "åŠ å·å·ç¨… (California)",
                kw_p_ca: "æ­¤å·¥å…·åƒ…è¨ˆç®—è¯é‚¦ç¨…ã€‚åŠ å·æœ‰ç¨ç«‹çš„ç¨…ç´š (æœ€é«˜é” 14.4%)ï¼ŒåŒæ¨£éš¨é€šè„¹èª¿æ•´ã€‚åŠ å·å±…æ°‘æ‡‰é ç•™ç´„ 9.3% (ä¸­ç­‰æ”¶å…¥) çš„å·ç¨…ã€‚",
                kw_tags_cg: "é—œéµè©: 2026 tax brackets capital gains, 2026 tax brackets california",

                // Tax Planning Insights Section
                edu_title: "ç¨…å‹™è¦åŠƒè¦‹è§£",
                edu_h_takeaways: "é‡é»æ‘˜è¦",
                edu_li_1: "IRS ä½¿ç”¨ 7 å€‹ç¨…ç‡ç´šè·ä¾†è¨ˆç®—ç¨…æ¬¾ï¼Œéš¨è‘—æ”¶å…¥å¢åŠ ï¼Œç¨…ç‡ä¹Ÿæœƒæé«˜ã€‚",
                edu_li_2: "é‚Šéš›ç¨…ç‡æ˜¯æ‚¨æœ€é«˜æ”¶å…¥éƒ¨åˆ†çš„ç¨…ç‡ï¼›æœ‰æ•ˆç¨…ç‡æ˜¯æ‚¨æ”¯ä»˜çš„ç¸½æ”¶å…¥ç™¾åˆ†æ¯”ã€‚",
                edu_li_3: "é€šéå¢åŠ é€€ä¼‘å„²è“„ã€æ‰£é™¤é¡ã€æ¨é²æ”¶å…¥æˆ–ç¨…æ”¶æå¤±æ”¶å‰²ï¼Œå¯èƒ½é™ä½ç¨…å–®ã€‚",
                edu_h_how_work: "ç¨…ç‡ç´šè·å¦‚ä½•é‹ä½œï¼Ÿ",
                edu_p_how_work: "ç¾åœ‹æ¡ç”¨ç´¯é€²ç¨…åˆ¶ã€‚ç•¶æ‚¨è³ºå–æ›´å¤šéŒ¢æ™‚ï¼Œé¡å¤–çš„æ”¶å…¥æœƒè·³å…¥æ›´é«˜çš„ç¨…ç‡ç´šè·ã€‚æ‚¨ä¸æœƒå°æ¯ä¸€ç¾å…ƒæ”¯ä»˜ç›¸åŒçš„ç¨…ç‡ã€‚",
                edu_h_rates: "é‚Šéš›ç¨…ç‡ vs æœ‰æ•ˆç¨…ç‡",
                edu_p_rates: "<strong>é‚Šéš›ç¨…ç‡ï¼š</strong> æ‚¨è³ºå–çš„æœ€å¾Œä¸€ç¾å…ƒçš„ç¨…ç‡ã€‚ <br> <strong>æœ‰æ•ˆç¨…ç‡ï¼š</strong> æ‚¨æ”¯ä»˜çš„ç¸½ç¨…æ¬¾é™¤ä»¥ç¸½æ”¶å…¥ï¼Œé€šå¸¸è¼ƒä½ï¼Œå› ç‚ºå®ƒå¹³å‡äº†æ‰€æœ‰ç´šè·ã€‚",
                edu_h_strategies: "é™ä½ç¨…è² çš„ç­–ç•¥",
                edu_s_deductions: "æœ€å¤§åŒ–æ‰£é™¤é¡:",
                edu_p_deductions: "è€ƒæ…®ã€Œæ†ç¶ã€(Bunching) æ‰£é™¤é¡æˆ–åˆ©ç”¨æ…ˆå–„æè´ˆã€‚2026 å¹´èµ·ï¼Œæœªåˆ—èˆ‰æ‰£é™¤è€…ä¹Ÿå¯æ‰£é™¤éƒ¨åˆ†ç¾é‡‘æè´ˆã€‚",
                edu_s_retirement: "é€€ä¼‘å„²è“„:",
                edu_p_retirement: "å­˜å…¥ 401(k) æˆ–å‚³çµ± IRA çš„æ¯ä¸€ç¾å…ƒéƒ½å¯èƒ½æ¸›å°‘ç•¶å¹´çš„æ‡‰ç¨…æ”¶å…¥ã€‚",
                edu_s_hsa: "å¥åº·å„²è“„å¸³æˆ¶ (HSA):",
                edu_p_hsa: "å¦‚æœæ‚¨æœ‰é«˜è‡ªä»˜é¡å¥åº·è¨ˆåŠƒï¼ŒHSA ä¾›æ¬¾å¯ç›´æ¥æ¸›å°‘æ‡‰ç¨…æ”¶å…¥ã€‚",
                edu_s_harvesting: "ç¨…æ”¶æå¤±æ”¶å‰² (Tax-Loss Harvesting):",
                edu_p_harvesting: "å‡ºå”®è™§æçš„æŠ•è³‡ä»¥æŠµæ¶ˆæ”¶ç›Šï¼Œå¾è€Œé™ä½ç•¶å‰æ‡‰ç¨…æ”¶å…¥ã€‚",

                // Comprehensive Guide Section
                gd_title: "å…¨é¢ç¨…å‹™æŒ‡å— & IRS ç¨…ç‡è¡¨",
                gd_intro: "äº†è§£æ‚¨çš„æ”¶å…¥å¦‚ä½•è½å…¥ä¸åŒçš„ç¨…ç´šæœ‰åŠ©æ–¼ç¨…å‹™è¦åŠƒã€‚IRS ä½¿ç”¨ 7 å€‹ç¨…ç´šæ ¹æ“šæ‚¨çš„æ”¶å…¥å’Œå ±ç¨…èº«ä»½è¨ˆç®—ç¨…å–®ã€‚éš¨è‘—æ”¶å…¥å¢åŠ ï¼Œæ‚¨å¯èƒ½æœƒé€²å…¥æ›´é«˜çš„ç¨…ç´šï¼Œå¾è€Œå¢åŠ æ‡‰ç¹³ç¨…æ¬¾ã€‚",
                gd_tb1_title: "2025 ç¨…ç‡ç´šè·è¡¨",
                gd_tb2_title: "2026 ç¨…ç‡ç´šè·è¡¨ (é æ¸¬)",
                gd_h_figure: "å¦‚ä½•ç¢ºå®šæ‚¨æ‰€åœ¨çš„ç¨…ç´šï¼Ÿ",
                gd_p_figure: "é¦–å…ˆæŸ¥çœ‹æ‚¨å ±ç¨…èº«ä»½å°æ‡‰çš„ç¨…ç‡ã€‚é€šéåŠ ç¸½æ‰€æœ‰æ”¶å…¥ï¼ˆå·¥è³‡ã€çé‡‘ç­‰ï¼‰ä¸¦æ¸›å»æ‰£é™¤é¡ï¼ˆå¦‚ 401(k)ã€HSA å’Œæ¨™æº–æ‰£é™¤é¡ï¼‰ä¾†ç¢ºå®šæ‡‰ç¨…æ”¶å…¥ã€‚æ‚¨æ”¶å…¥è½å…¥çš„æœ€é«˜ç¨…ç‡ä¸¦éæ‚¨å°æ‰€æœ‰æ”¶å…¥æ”¯ä»˜çš„å¯¦éš›ç¨…ç‡â€”â€”åƒ…é‡å°è©²ç‰¹å®šç´šè·å…§çš„éƒ¨åˆ†ã€‚",
                gd_h_marginal: "ä»€éº¼æ˜¯æ‚¨çš„è¯é‚¦é‚Šéš›ç¨…ç‡ï¼Ÿ",
                gd_p_marginal: "è¯é‚¦é‚Šéš›ç¨…ç‡æ˜¯æ‚¨æ”¶å…¥ä¸­æœ€é«˜ä¸€ç¾å…ƒæ‰€æ¬ çš„ç¨…ç‡ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„æ”¶å…¥è½å…¥ 24% çš„ç¨…ç´šï¼Œæ‚¨çš„é‚Šéš›ç¨…ç‡å°±æ˜¯ 24%ã€‚æ‚¨åœ¨è©²ç´šè·æ¯å¤šè³ºä¸€ç¾å…ƒï¼Œå°±æ¬  24 ç¾åˆ†çš„ç¨…ã€‚",
                gd_h_effective: "ä»€éº¼æ˜¯æ‚¨çš„è¯é‚¦æœ‰æ•ˆç¨…ç‡ï¼Ÿ",
                gd_p_effective: "æ‚¨çš„æœ‰æ•ˆç¨…ç‡æ˜¯æ‚¨æ”¯ä»˜çš„è¯é‚¦æ‰€å¾—ç¨…ä½”ç¸½æ”¶å…¥çš„ç™¾åˆ†æ¯”ï¼ˆç¸½ç¨…é¡ / ç¸½æ”¶å…¥ï¼‰ã€‚å®ƒæœ¬è³ªä¸Šæ˜¯æ‚¨åœ¨æ‰€æœ‰ç´šè·ä¸­æ”¯ä»˜çš„ä¸åŒç¨…ç‡çš„å¹³å‡å€¼ã€‚",
                gd_h_lower: "é€²å…¥è¼ƒä½ç¨…ç´šçš„æ½›åœ¨æ–¹æ³•",
                gd_li_deduct: "<strong>æœ€å¤§åŒ–æ‰£é™¤é¡ï¼š</strong> ç”³å ±æ‰€æœ‰æ‚¨æœ‰è³‡æ ¼ç²å¾—çš„æ‰£é™¤å’Œèª¿æ•´ã€‚",
                gd_li_bunch: "<strong>æ†ç¶æ‰£é™¤é¡ (Bunching)ï¼š</strong> å°‡æ…ˆå–„ææ¬¾é›†ä¸­åœ¨ä¸€å¹´å…§ï¼Œä»¥è¶…éæ¨™æº–æ‰£é™¤é¡ã€‚",
                gd_li_retire: "<strong>é€€ä¼‘å„²è“„ï¼š</strong> å‘ 401(k) æˆ–å‚³çµ± IRA ä¾›æ¬¾ä»¥æ¸›å°‘å¹´åº¦æ‡‰ç¨…æ”¶å…¥ã€‚",
                gd_li_hsa: "<strong>å¥åº·å„²è“„å¸³æˆ¶ (HSA)ï¼š</strong> å¦‚æœæ‚¨æœ‰ç¬¦åˆè³‡æ ¼çš„é«˜è‡ªä»˜é¡å¥åº·è¨ˆåŠƒï¼Œå¯æ¸›å°‘æ‡‰ç¨…æ”¶å…¥ã€‚",
                gd_li_loss: "<strong>ç¨…æ”¶æå¤±æ”¶å‰²ï¼š</strong> å‡ºå”®è²¶å€¼çš„æŠ•è³‡ä»¥æŠµæ¶ˆå·²å¯¦ç¾çš„æŠ•è³‡æ”¶ç›Šã€‚",
                gd_li_delay: "<strong>æ¨é²æ”¶å…¥ï¼š</strong> å¦‚æœå¯èƒ½ï¼Œè¦æ±‚çé‡‘æˆ–è‡ªç”±è·æ¥­ä»˜æ¬¾æ¨é²åˆ°ä¸‹ä¸€å¹´æ”¯ä»˜ã€‚",

                footer_text: "æ•¸å­—åƒ…ä¾›åƒè€ƒï¼Œä¸æ§‹æˆè²¡å‹™å»ºè­°ã€‚"
            }
        };

        // --- Core Calculator Engine ---
        const Calculator = {
            // Data Structure: Year -> Status -> Brackets [{limit: UpperLimit, rate: 0.xx}]
            DATA: {
                2026: { // Projected based on inflation (~2.5% over 2025)
                     single: [
                        { limit: 12400, rate: 0.10 }, { limit: 50400, rate: 0.12 },
                        { limit: 105700, rate: 0.22 }, { limit: 201775, rate: 0.24 },
                        { limit: 256225, rate: 0.32 }, { limit: 640600, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfj: [
                        { limit: 24800, rate: 0.10 }, { limit: 100800, rate: 0.12 },
                        { limit: 211400, rate: 0.22 }, { limit: 403550, rate: 0.24 },
                        { limit: 512450, rate: 0.32 }, { limit: 768700, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfs: [
                        { limit: 12400, rate: 0.10 }, { limit: 50400, rate: 0.12 },
                        { limit: 105700, rate: 0.22 }, { limit: 201775, rate: 0.24 },
                        { limit: 256225, rate: 0.32 }, { limit: 384350, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    hoh: [
                        { limit: 17700, rate: 0.10 }, { limit: 67450, rate: 0.12 },
                        { limit: 105700, rate: 0.22 }, { limit: 201775, rate: 0.24 },
                        { limit: 256200, rate: 0.32 }, { limit: 640600, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ]
                },
                2025: {
                    single: [
                        { limit: 11925, rate: 0.10 }, { limit: 48475, rate: 0.12 },
                        { limit: 103350, rate: 0.22 }, { limit: 197300, rate: 0.24 },
                        { limit: 250525, rate: 0.32 }, { limit: 626350, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfj: [
                        { limit: 23850, rate: 0.10 }, { limit: 96950, rate: 0.12 },
                        { limit: 206700, rate: 0.22 }, { limit: 394600, rate: 0.24 },
                        { limit: 501050, rate: 0.32 }, { limit: 751600, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfs: [
                        { limit: 11925, rate: 0.10 }, { limit: 48475, rate: 0.12 },
                        { limit: 103350, rate: 0.22 }, { limit: 197300, rate: 0.24 },
                        { limit: 250525, rate: 0.32 }, { limit: 375800, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    hoh: [
                        { limit: 17000, rate: 0.10 }, { limit: 64850, rate: 0.12 },
                        { limit: 103350, rate: 0.22 }, { limit: 197300, rate: 0.24 },
                        { limit: 250500, rate: 0.32 }, { limit: 626350, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ]
                },
                2024: {
                    single: [
                        { limit: 11600, rate: 0.10 }, { limit: 47150, rate: 0.12 },
                        { limit: 100525, rate: 0.22 }, { limit: 191950, rate: 0.24 },
                        { limit: 243725, rate: 0.32 }, { limit: 609350, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfj: [
                        { limit: 23200, rate: 0.10 }, { limit: 94300, rate: 0.12 },
                        { limit: 201050, rate: 0.22 }, { limit: 383900, rate: 0.24 },
                        { limit: 487450, rate: 0.32 }, { limit: 731200, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfs: [
                        { limit: 11600, rate: 0.10 }, { limit: 47150, rate: 0.12 },
                        { limit: 100525, rate: 0.22 }, { limit: 191950, rate: 0.24 },
                        { limit: 243725, rate: 0.32 }, { limit: 365600, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    hoh: [
                        { limit: 16550, rate: 0.10 }, { limit: 63100, rate: 0.12 },
                        { limit: 100500, rate: 0.22 }, { limit: 191950, rate: 0.24 },
                        { limit: 243700, rate: 0.32 }, { limit: 609350, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ]
                },
                2023: {
                    single: [
                        { limit: 11000, rate: 0.10 }, { limit: 44725, rate: 0.12 },
                        { limit: 95375, rate: 0.22 }, { limit: 182100, rate: 0.24 },
                        { limit: 231250, rate: 0.32 }, { limit: 578125, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfj: [
                        { limit: 22000, rate: 0.10 }, { limit: 89450, rate: 0.12 },
                        { limit: 190750, rate: 0.22 }, { limit: 364200, rate: 0.24 },
                        { limit: 462500, rate: 0.32 }, { limit: 693750, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    mfs: [
                        { limit: 11000, rate: 0.10 }, { limit: 44725, rate: 0.12 },
                        { limit: 95375, rate: 0.22 }, { limit: 182100, rate: 0.24 },
                        { limit: 231250, rate: 0.32 }, { limit: 346875, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ],
                    hoh: [
                        { limit: 15700, rate: 0.10 }, { limit: 59850, rate: 0.12 },
                        { limit: 95350, rate: 0.22 }, { limit: 182100, rate: 0.24 },
                        { limit: 231250, rate: 0.32 }, { limit: 578100, rate: 0.35 },
                        { limit: Infinity, rate: 0.37 }
                    ]
                }
            },

            // Capital Gains Brackets (0%, 15%, 20%)
            // The limit is the TOP of the bracket for TOTAL Taxable Income
            CG_DATA: {
                2026: {
                    single: [ { limit: 49450, rate: 0 }, { limit: 545500, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    mfj: [ { limit: 98900, rate: 0 }, { limit: 613700, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    mfs: [ { limit: 49450, rate: 0 }, { limit: 306850, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    hoh: [ { limit: 66200, rate: 0 }, { limit: 579600, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ]
                },
                2025: {
                    single: [ { limit: 48350, rate: 0 }, { limit: 533400, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    mfj: [ { limit: 96700, rate: 0 }, { limit: 600050, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    mfs: [ { limit: 48350, rate: 0 }, { limit: 300000, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    hoh: [ { limit: 64750, rate: 0 }, { limit: 566700, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ]
                },
                2024: { // Using 2024 thresholds
                    single: [ { limit: 47025, rate: 0 }, { limit: 518900, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    mfj: [ { limit: 94050, rate: 0 }, { limit: 583750, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    mfs: [ { limit: 47025, rate: 0 }, { limit: 291850, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                    hoh: [ { limit: 63000, rate: 0 }, { limit: 551350, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ]
                },
                2023: {
                     single: [ { limit: 44625, rate: 0 }, { limit: 492300, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                     mfj: [ { limit: 89250, rate: 0 }, { limit: 553850, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                     // Simplified older data fallback
                     mfs: [ { limit: 44625, rate: 0 }, { limit: 276900, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ],
                     hoh: [ { limit: 59750, rate: 0 }, { limit: 523050, rate: 0.15 }, { limit: Infinity, rate: 0.20 } ]
                }
            },

            STD_DEDUCTION: {
                2026: { single: 16100, mfj: 32200, mfs: 16100, hoh: 24150, qss: 32200 },
                2025: { single: 15750, mfj: 31500, mfs: 15750, hoh: 23625, qss: 31500 },
                2024: { single: 14600, mfj: 29200, mfs: 14600, hoh: 21900, qss: 29200 },
                2023: { single: 13850, mfj: 27700, mfs: 13850, hoh: 20800, qss: 27700 }
            },

            calculate() {
                const year = document.getElementById('input-year').value;
                let status = document.getElementById('input-status').value;
                const ordIncome = parseFloat(document.getElementById('input-income').value) || 0;
                const ltcgIncome = parseFloat(document.getElementById('input-ltcg').value) || 0;

                let bracketStatus = (status === 'qss') ? 'mfj' : status;
                
                // --- 1. Ordinary Income Tax ---
                const ordBrackets = this.DATA[year][bracketStatus];
                let ordTax = 0;
                let marginalRate = 0;
                let previousLimit = 0;
                let ordBreakdownHTML = '';
                
                ordBrackets.forEach((bracket) => {
                    const rangeMin = previousLimit;
                    const rangeMax = bracket.limit;
                    const rate = bracket.rate;
                    const ratePct = Math.round(rate * 100);

                    let amountInBucket = 0;
                    let taxInBucket = 0;
                    let isCurrentBracket = false;

                    if (ordIncome > rangeMin) {
                        amountInBucket = Math.min(ordIncome, rangeMax) - rangeMin;
                        if (rangeMax === Infinity) amountInBucket = ordIncome - rangeMin;

                        if (amountInBucket > 0) {
                            taxInBucket = amountInBucket * rate;
                            ordTax += taxInBucket;
                            marginalRate = ratePct;
                            isCurrentBracket = (ordIncome <= rangeMax);
                            if(rangeMax === Infinity && ordIncome > rangeMin) isCurrentBracket = true;
                        }
                    }
                    
                    ordBreakdownHTML += this.renderRow(ratePct, rangeMin, rangeMax, taxInBucket, isCurrentBracket);
                    previousLimit = rangeMax;
                });

                // --- 2. Capital Gains Tax (Stacks on top of Ordinary) ---
                const cgBrackets = this.CG_DATA[year][bracketStatus];
                let cgTax = 0;
                let cgBreakdownHTML = '';
                let totalIncome = ordIncome + ltcgIncome;
                let currentTotal = ordIncome; // Start stacking from ordinary income
                let cgPreviousLimit = 0; // But we need to track brackets from 0
                
                if (ltcgIncome > 0) {
                    cgBrackets.forEach((bracket) => {
                        const rangeMax = bracket.limit; // This limit applies to TOTAL income
                        const rate = bracket.rate;
                        
                        // Determine how much of the LTCG falls into this bucket
                        // The bucket spans from cgPreviousLimit to rangeMax
                        // We have filled up to 'currentTotal' so far
                        
                        // Available room in this bucket for new money (LTCG)
                        // Room = max(0, rangeMax - max(cgPreviousLimit, currentTotal)) ? 
                        // No, simplified: 
                        // The "Taxable LTCG in this bracket" is the overlap of [currentTotal, currentTotal + ltcgIncome] AND [cgPreviousLimit, rangeMax]
                        
                        const overlapStart = Math.max(currentTotal, cgPreviousLimit);
                        const overlapEnd = (rangeMax === Infinity) ? (ordIncome + ltcgIncome) : Math.min(ordIncome + ltcgIncome, rangeMax);
                        
                        let amountInBucket = Math.max(0, overlapEnd - overlapStart);
                        let taxInBucket = 0;

                        if (amountInBucket > 0) {
                            taxInBucket = amountInBucket * rate;
                            cgTax += taxInBucket;
                        }

                        // Render Logic slightly different for CG to show range
                        // We show the bracket range, but the tax calculated is only for the portion of LTCG in it
                        const isActive = amountInBucket > 0;
                        cgBreakdownHTML += this.renderRow(rate * 100, cgPreviousLimit, rangeMax, taxInBucket, isActive);
                        
                        cgPreviousLimit = rangeMax;
                    });
                }

                // --- 3. UI Updates ---
                const totalTax = ordTax + cgTax;
                const effectiveRate = totalIncome > 0 ? ((totalTax / totalIncome) * 100).toFixed(1) : '0.0';

                // Update Texts
                document.getElementById('res-marginal-rate').textContent = marginalRate + '%';
                document.getElementById('res-total-tax').textContent = '$' + Math.round(totalTax).toLocaleString();
                document.getElementById('res-effective-rate').textContent = effectiveRate + '%';
                document.getElementById('res-year-badge').textContent = year;

                // Split Breakdown
                const splitDiv = document.getElementById('tax-split-container');
                if (ltcgIncome > 0) {
                    splitDiv.classList.remove('hidden');
                    document.getElementById('res-ord-tax').textContent = '$' + Math.round(ordTax).toLocaleString();
                    document.getElementById('res-cg-tax').textContent = '$' + Math.round(cgTax).toLocaleString();
                    document.getElementById('ltcg-breakdown-wrapper').classList.remove('hidden');
                } else {
                    splitDiv.classList.add('hidden');
                    document.getElementById('ltcg-breakdown-wrapper').classList.add('hidden');
                }

                // Std Deduction Hint
                const stdDed = this.STD_DEDUCTION[year][status];
                const lang = App.currentLang;
                const i18n = i18nData[lang] || i18nData['en'];
                const statusLabel = i18n[`opt_${status}`] || status;
                document.getElementById('std-deduction-hint').textContent = i18n.std_ded_hint
                    .replace('{year}', year).replace('{status}', statusLabel).replace('{amount}', stdDed.toLocaleString());

                // Bracket Tables
                const headerHTML = `
                    <div class="flex bg-slate-100 dark:bg-slate-900 p-2 text-[10px] uppercase tracking-wider text-slate-500 font-semibold border-b border-slate-200 dark:border-slate-700">
                        <div class="w-16">${i18n.col_rate}</div>
                        <div class="flex-grow px-4">${i18n.col_range}</div>
                        <div class="w-24 text-right">${i18n.col_tax}</div>
                    </div>`;
                
                document.getElementById('bracket-container').innerHTML = headerHTML + ordBreakdownHTML;
                document.getElementById('cg-bracket-container').innerHTML = headerHTML + cgBreakdownHTML;
            },

            renderRow(ratePct, min, max, tax, isActive) {
                const i18n = i18nData[App.currentLang] || i18nData['en'];
                const rowClass = isActive 
                    ? 'bg-sky-50 dark:bg-sky-900/20 border-sky-200 dark:border-sky-700/50 ring-1 ring-sky-500 z-10' 
                    : 'bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700/50 opacity-80';
                const textClass = isActive ? 'text-sky-700 dark:text-sky-300 font-bold' : 'text-slate-500 dark:text-slate-400';
                const rangeLabel = max === Infinity ? `> $${min.toLocaleString()}` : `$${min.toLocaleString()} - $${max.toLocaleString()}`;
                const taxDisplay = isActive ? `$${Math.round(tax).toLocaleString()}` : '-';

                return `
                <div class="flex items-center justify-between p-3 border-b last:border-0 ${rowClass} transition-all">
                    <div class="w-16 flex-shrink-0">
                        <span class="inline-block px-2 py-1 rounded bg-slate-200 dark:bg-slate-700 text-xs font-mono font-bold text-slate-700 dark:text-slate-300">${ratePct}%</span>
                    </div>
                    <div class="flex-grow px-4 text-xs md:text-sm font-mono ${textClass}">${rangeLabel}</div>
                    <div class="w-24 text-right font-mono text-sm ${textClass}">${taxDisplay}</div>
                </div>`;
            }
        };

        // --- App Logic ---
        const App = {
            currentLang: 'en',

            init() {
                const urlParams = new URLSearchParams(window.location.search);
                const langParam = urlParams.get('lang');
                const savedLang = localStorage.getItem('app_lang_tax');
                
                this.currentLang = (langParam && i18nData[langParam]) ? langParam : (savedLang || 'en');
                if (!langParam) this.updateUrl(this.currentLang);

                document.getElementById('lang-selector').value = this.currentLang;
                this.handleTheme();
                this.setupLanguage();
                this.updateYear();
                this.translateUI(this.currentLang);
                
                Calculator.calculate();
            },
            
            toggleCapGains() {
                const container = document.getElementById('cg-container');
                const icon = document.getElementById('cg-icon');
                if (container.classList.contains('hidden')) {
                    container.classList.remove('hidden');
                    icon.classList.remove('fa-plus-square-o');
                    icon.classList.add('fa-minus-square-o');
                } else {
                    container.classList.add('hidden');
                    icon.classList.remove('fa-minus-square-o');
                    icon.classList.add('fa-plus-square-o');
                    document.getElementById('input-ltcg').value = 0;
                    Calculator.calculate();
                }
            },

            updateYear() { document.getElementById('year').textContent = new Date().getFullYear(); },
            
            updateUrl(lang) {
                try {
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', lang);
                    window.history.pushState({}, '', newUrl);
                } catch (e) {}
            },

            setupLanguage() {
                const selector = document.getElementById('lang-selector');
                selector.addEventListener('change', (e) => {
                    const lang = e.target.value;
                    this.currentLang = lang;
                    localStorage.setItem('app_lang_tax', lang);
                    this.updateUrl(lang);
                    this.translateUI(lang);
                    Calculator.calculate();
                });
            },

            translateUI(lang) {
                const data = i18nData[lang] || i18nData['en'];
                document.documentElement.lang = lang;
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(data[key]) el.innerHTML = data[key];
                });
            },

            handleTheme() {
                const toggle = document.getElementById('mode-toggle');
                const html = document.documentElement;
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    html.classList.add('dark');
                }
                toggle.addEventListener('click', () => {
                    html.classList.toggle('dark');
                    localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
 <!--  ç»“å°¾å¿…é¡»åŒ…å«çš„ä»£ç  -->

    <div id="related-tools-container"></div>

    <script src="/scripts/related.js"></script>

</body>

</html>