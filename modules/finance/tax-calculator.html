<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax Calculator</title>
    
    <!-- Âü∫Á°Ä‰ø°ÊÅØ -->
    <meta name="tool-id" content="tax_calculator">
    <meta name="category" content="finance">
    <meta name="icon" content="üí∏">
    
    <!-- ÈªòËÆ§Ëã±ÊñáÂÜÖÂÆπ -->
    <meta name="title" content="Tax Calculator">
    <meta name="description" content="Calculate income tax based on progressive tax brackets.">
    
    <!-- Â§öËØ≠Ë®ÄÈÖçÁΩÆ -->
    <meta name="lang-title-zh-CN" content="ÊâÄÂæóÁ®éËÆ°ÁÆóÂô®">
    <meta name="lang-description-zh-CN" content="Ê†πÊçÆÁ¥ØËøõÁ®éÁéáËÆ°ÁÆóÊâÄÂæóÁ®é„ÄÇ">
    
    <meta name="lang-title-zh-TW" content="ÊâÄÂæóÁ®ÖË®àÁÆóÂô®">
    <meta name="lang-description-zh-TW" content="Ê†πÊìöÁ¥ØÈÄ≤Á®ÖÁéáË®àÁÆóÊâÄÂæóÁ®Ö„ÄÇ">
    
    <meta name="lang-title-ja" content="ÊâÄÂæóÁ®éË®àÁÆóÊ©ü">
    <meta name="lang-description-ja" content="Á¥ØÈÄ≤Ë™≤Á®éÊñπÂºè„Å´Âü∫„Å•„ÅÑ„Å¶ÊâÄÂæóÁ®é„ÇíË®àÁÆó„Åó„Åæ„Åô„ÄÇ">
    
    <meta name="lang-title-ru" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–∞–ª–æ–≥–æ–≤">
    <meta name="lang-description-ru" content="–í—ã—á–∏—Å–ª–∏—Ç–µ –ø–æ–¥–æ—Ö–æ–¥–Ω—ã–π –Ω–∞–ª–æ–≥ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã—Ö –Ω–∞–ª–æ–≥–æ–≤—ã—Ö —Å—Ç–∞–≤–æ–∫.">
    
    <meta name="lang-title-es" content="Calculadora de impuestos">
    <meta name="lang-description-es" content="Calcule el impuesto sobre la renta seg√∫n tramos impositivos progresivos.">

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .tax-bracket { margin-bottom: 4px; padding: 4px; border-radius: 4px; }
        .tax-bracket:nth-child(odd) { background-color: #f8f9fa; }
    </style>
    <link rel="canonical" href="https://toolboxpro.top/modules/finance/tax-calculator.html" />
</head>
<body>

    <div class="tool-module active" 
         data-id="tax_calculator" 
         data-category="finance" 
         data-title="Tax Calculator" 
         data-icon="üí∏">
        
        <!-- ËØ≠Ë®ÄÈÄâÊã©Âô® -->
        <div class="absolute top-4 right-4">
            <select id="tax-lang" onchange="TaxCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ÁÆÄ‰Ωì‰∏≠Êñá</option>
                <option value="zh-TW">ÁπÅÈ´î‰∏≠Êñá</option>
                <option value="ja">Êó•Êú¨Ë™û</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π</option>
                <option value="es">Espa√±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">üí∏ Tax Calculator</h2>
        
        <div class="grid grid-cols-1 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="income_label">Annual Income</label>
                <input type="number" id="annual-income" class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500 outline-none" placeholder="e.g. 80000" min="0" step="any">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="deductions_label">Total Deductions</label>
                <input type="number" id="deductions" class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500 outline-none" placeholder="e.g. 12000" min="0" step="any">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="filing_status_label">Filing Status</label>
                <select id="filing-status" class="w-full p-2 border rounded focus:ring-2 focus:ring-orange-500 outline-none">
                    <option value="single" data-i18n="status_single">Single</option>
                    <option value="married_joint" data-i18n="status_joint">Married Filing Jointly</option>
                    <option value="married_separate" data-i18n="status_separate">Married Filing Separately</option>
                    <option value="head" data-i18n="status_head">Head of Household</option>
                </select>
            </div>
        </div>

        <button onclick="TaxCalc.calc()" class="w-full bg-orange-600 text-white py-2 rounded font-bold hover:bg-orange-700 transition mb-6" data-i18n="btn_calc">Calculate Tax</button>

        <div class="bg-orange-50 p-6 rounded-lg border border-orange-100">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <div class="text-sm text-gray-500 mb-1" data-i18n="taxable_income_label">Taxable Income</div>
                    <div id="taxable-income" class="text-xl font-bold text-orange-800">--</div>
                </div>
                <div>
                    <div class="text-sm text-gray-500 mb-1" data-i18n="total_tax_label">Total Tax</div>
                    <div id="total-tax" class="text-xl font-bold text-orange-800">--</div>
                </div>
                <div>
                    <div class="text-sm text-gray-500 mb-1" data-i18n="effective_rate_label">Effective Tax Rate</div>
                    <div id="effective-rate" class="text-xl font-bold text-orange-800">--</div>
                </div>
                <div>
                    <div class="text-sm text-gray-500 mb-1" data-i18n="marginal_rate_label">Marginal Tax Rate</div>
                    <div id="marginal-rate" class="text-xl font-bold text-orange-800">--</div>
                </div>
            </div>

            <div>
                <div data-i18n="breakdown_label" class="font-medium mb-2">Tax Breakdown by Bracket</div>
                <div id="tax-breakdown" class="text-sm">
                    <div data-i18n="breakdown_empty">Please calculate to see tax breakdown</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const TaxCalc = {
            // Á®éÁéáË°® (Á§∫‰æã‰ΩøÁî®ÁæéÂõΩËÅîÈÇ¶ÊâÄÂæóÁ®éÁéá)
            taxBrackets: {
                'en': {
                    'single': [
                        { min: 0, max: 10275, rate: 10 },
                        { min: 10276, max: 41775, rate: 12 },
                        { min: 41776, max: 89075, rate: 22 },
                        { min: 89076, max: 170050, rate: 24 },
                        { min: 170051, max: 215950, rate: 32 },
                        { min: 215951, max: 539900, rate: 35 },
                        { min: 539901, max: Infinity, rate: 37 }
                    ],
                    'married_joint': [
                        { min: 0, max: 20550, rate: 10 },
                        { min: 20551, max: 83550, rate: 12 },
                        { min: 83551, max: 178150, rate: 22 },
                        { min: 178151, max: 340100, rate: 24 },
                        { min: 340101, max: 431900, rate: 32 },
                        { min: 431901, max: 647850, rate: 35 },
                        { min: 647851, max: Infinity, rate: 37 }
                    ],
                    'married_separate': [
                        { min: 0, max: 10275, rate: 10 },
                        { min: 10276, max: 41775, rate: 12 },
                        { min: 41776, max: 89075, rate: 22 },
                        { min: 89076, max: 170050, rate: 24 },
                        { min: 170051, max: 215950, rate: 32 },
                        { min: 215951, max: 323925, rate: 35 },
                        { min: 323926, max: Infinity, rate: 37 }
                    ],
                    'head': [
                        { min: 0, max: 14650, rate: 10 },
                        { min: 14651, max: 55900, rate: 12 },
                        { min: 55901, max: 89050, rate: 22 },
                        { min: 89051, max: 170050, rate: 24 },
                        { min: 170051, max: 215950, rate: 32 },
                        { min: 215951, max: 539900, rate: 35 },
                        { min: 539901, max: Infinity, rate: 37 }
                    ]
                },
                // ÂÖ∂‰ªñËØ≠Ë®Ä‰ΩøÁî®Áõ∏ÂêåÁ®éÁéáÁªìÊûÑÔºå‰ªÖÁøªËØëËØ¥ÊòéÊñáÂ≠ó
                'zh-CN': {}, 'zh-TW': {}, 'ja': {}, 'ru': {}, 'es': {}
            },

            i18n: {
                'en': {
                    title: 'üí∏ Tax Calculator',
                    income_label: 'Annual Income',
                    deductions_label: 'Total Deductions',
                    filing_status_label: 'Filing Status',
                    status_single: 'Single',
                    status_joint: 'Married Filing Jointly',
                    status_separate: 'Married Filing Separately',
                    status_head: 'Head of Household',
                    btn_calc: 'Calculate Tax',
                    taxable_income_label: 'Taxable Income',
                    total_tax_label: 'Total Tax',
                    effective_rate_label: 'Effective Tax Rate',
                    marginal_rate_label: 'Marginal Tax Rate',
                    breakdown_label: 'Tax Breakdown by Bracket',
                    breakdown_empty: 'Please calculate to see tax breakdown',
                    bracket_label: 'Income from %s to %s: %s%% ‚Üí %s',
                    bracket_label_top: 'Income over %s: %s%% ‚Üí %s',
                    err_invalid: 'Please enter valid numbers',
                    currency: '$'
                },
                'zh-CN': {
                    title: 'üí∏ ÊâÄÂæóÁ®éËÆ°ÁÆóÂô®',
                    income_label: 'Âπ¥Êî∂ÂÖ•',
                    deductions_label: 'ÊÄªÊâ£Èô§È¢ù',
                    filing_status_label: 'Áî≥Êä•Áä∂ÊÄÅ',
                    status_single: 'ÂçïË∫´',
                    status_joint: 'Â∑≤Â©öËÅîÂêàÁî≥Êä•',
                    status_separate: 'Â∑≤Â©öÂçïÁã¨Áî≥Êä•',
                    status_head: 'Êà∑‰∏ª',
                    btn_calc: 'ËÆ°ÁÆóÁ®éÊ¨æ',
                    taxable_income_label: 'Â∫îÁ®éÊâÄÂæóÈ¢ù',
                    total_tax_label: 'ÊÄªÁ®éÈ¢ù',
                    effective_rate_label: 'ÂÆûÈôÖÁ®éÁéá',
                    marginal_rate_label: 'ËæπÈôÖÁ®éÁéá',
                    breakdown_label: 'Á®éÁéáÁ∫ßË∑ùÊòéÁªÜ',
                    breakdown_empty: 'ËØ∑ËÆ°ÁÆó‰ª•Êü•ÁúãÁ®éÁéáÊòéÁªÜ',
                    bracket_label: '%sËá≥%sÊî∂ÂÖ•ÈÉ®ÂàÜÔºö%s%% ‚Üí %s',
                    bracket_label_top: '%s‰ª•‰∏äÊî∂ÂÖ•ÈÉ®ÂàÜÔºö%s%% ‚Üí %s',
                    err_invalid: 'ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÊï∞Â≠ó',
                    currency: '¬•'
                },
                'zh-TW': {
                    title: 'üí∏ ÊâÄÂæóÁ®ÖË®àÁÆóÂô®',
                    income_label: 'Âπ¥Êî∂ÂÖ•',
                    deductions_label: 'Á∏ΩÊâ£Èô§È°ç',
                    filing_status_label: 'Áî≥Â†±ÁãÄÊÖã',
                    status_single: 'ÂñÆË∫´',
                    status_joint: 'Â∑≤Â©öËÅØÂêàÁî≥Â†±',
                    status_separate: 'Â∑≤Â©öÂñÆÁç®Áî≥Â†±',
                    status_head: 'Êà∂‰∏ª',
                    btn_calc: 'Ë®àÁÆóÁ®ÖÊ¨æ',
                    taxable_income_label: 'ÊáâÁ®ÖÊâÄÂæóÈ°ç',
                    total_tax_label: 'Á∏ΩÁ®ÖÈ°ç',
                    effective_rate_label: 'ÂØ¶ÈöõÁ®ÖÁéá',
                    marginal_rate_label: 'ÈÇäÈöõÁ®ÖÁéá',
                    breakdown_label: 'Á®ÖÁéáÁ¥öË∑ùÊòéÁ¥∞',
                    breakdown_empty: 'Ë´ãË®àÁÆó‰ª•Êü•ÁúãÁ®ÖÁéáÊòéÁ¥∞',
                    bracket_label: '%sËá≥%sÊî∂ÂÖ•ÈÉ®ÂàÜÔºö%s%% ‚Üí %s',
                    bracket_label_top: '%s‰ª•‰∏äÊî∂ÂÖ•ÈÉ®ÂàÜÔºö%s%% ‚Üí %s',
                    err_invalid: 'Ë´ãËº∏ÂÖ•ÊúâÊïàÁöÑÊï∏Â≠ó',
                    currency: 'NT$'
                },
                'ja': {
                    title: 'üí∏ ÊâÄÂæóÁ®éË®àÁÆóÊ©ü',
                    income_label: 'Âπ¥Âèé',
                    deductions_label: 'Á∑èÊéßÈô§È°ç',
                    filing_status_label: 'Áî≥Âëä status',
                    status_single: 'ÂçòË∫´',
                    status_joint: 'Â§´Â©¶ÂÖ±ÂêåÁî≥Âëä',
                    status_separate: 'Â§´Â©¶ÂÄãÂà•Áî≥Âëä',
                    status_head: '‰∏ñÂ∏Ø‰∏ª',
                    btn_calc: 'Á®éÈ°çË®àÁÆó',
                    taxable_income_label: 'Ë™≤Á®éÊâÄÂæóÈ°ç',
                    total_tax_label: 'Á∑èÁ®éÈ°ç',
                    effective_rate_label: 'ÂÆüÂäπÁ®éÁéá',
                    marginal_rate_label: 'ÈôêÁïåÁ®éÁéá',
                    breakdown_label: 'Á®éÁéá„Éñ„É©„Ç±„ÉÉ„ÉàÂÜÖË®≥',
                    breakdown_empty: 'Ë®àÁÆó„ÇíÂÆüË°å„Åó„Å¶Á®éÁéáÂÜÖË®≥„ÇíË°®Á§∫',
                    bracket_label: '%sÔΩû%s„ÅÆÊâÄÂæóÈÉ®ÂàÜÔºö%s%% ‚Üí %s',
                    bracket_label_top: '%sË∂Ö„ÅÆÊâÄÂæóÈÉ®ÂàÜÔºö%s%% ‚Üí %s',
                    err_invalid: 'ÊúâÂäπ„Å™Êï∞Â≠ó„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                    currency: '¬•'
                },
                'ru': {
                    title: 'üí∏ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –Ω–∞–ª–æ–≥–æ–≤',
                    income_label: '–ì–æ–¥–æ–≤–æ–π –¥–æ—Ö–æ–¥',
                    deductions_label: '–í—Å–µ–≥–æ –≤—ã—á–µ—Ç–æ–≤',
                    filing_status_label: '–°—Ç–∞—Ç—É—Å –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏',
                    status_single: '–•–æ–ª–æ—Å—Ç–æ–π/–Ω–µ–∑–∞–º—É–∂–Ω—è—è',
                    status_joint: '–ñ–µ–Ω–∞—Ç—ã–µ/–∑–∞–º—É–∂–Ω–∏–µ, —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è',
                    status_separate: '–ñ–µ–Ω–∞—Ç—ã–µ/–∑–∞–º—É–∂–Ω–∏–µ, –æ—Ç–¥–µ–ª—å–Ω–∞—è –¥–µ–∫–ª–∞—Ä–∞—Ü–∏—è',
                    status_head: '–ì–ª–∞–≤–∞ —Å–µ–º—å–∏',
                    btn_calc: '–í—ã—á–∏—Å–ª–∏—Ç—å –Ω–∞–ª–æ–≥',
                    taxable_income_label: '–ù–∞–ª–æ–≥–æ–ø–ª–∞—Ç–µ–ª—å–Ω–∞—è –±–∞–∑–∞',
                    total_tax_label: '–û–±—â–∏–π –Ω–∞–ª–æ–≥',
                    effective_rate_label: '–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –Ω–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞',
                    marginal_rate_label: '–ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞–ª–æ–≥–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞',
                    breakdown_label: '–†–∞–∑–±–∏–≤–∫–∞ –Ω–∞–ª–æ–≥–∞ –ø–æ —Å—Ç–∞–≤–∫–∞–º',
                    breakdown_empty: '–í—ã—á–∏—Å–ª–∏—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–∞–∑–±–∏–≤–∫—É –Ω–∞–ª–æ–≥–∞',
                    bracket_label: '–î–æ—Ö–æ–¥ –æ—Ç %s –¥–æ %s: %s%% ‚Üí %s',
                    bracket_label_top: '–î–æ—Ö–æ–¥ —Å–≤—ã—à–µ %s: %s%% ‚Üí %s',
                    err_invalid: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞',
                    currency: '‚ÇΩ'
                },
                'es': {
                    title: 'üí∏ Calculadora de impuestos',
                    income_label: 'Ingreso anual',
                    deductions_label: 'Deducciones totales',
                    filing_status_label: 'Estado de declaraci√≥n',
                    status_single: 'Soltero/a',
                    status_joint: 'Casado/a, declaraci√≥n conjunta',
                    status_separate: 'Casado/a, declaraci√≥n separada',
                    status_head: 'Jefe de hogar',
                    btn_calc: 'Calcular impuestos',
                    taxable_income_label: 'Ingreso gravable',
                    total_tax_label: 'Impuesto total',
                    effective_rate_label: 'Tasa impositiva efectiva',
                    marginal_rate_label: 'Tasa impositiva marginal',
                    breakdown_label: 'Desglose del impuesto por tramos',
                    breakdown_empty: 'Por favor, calcule para ver el desglose',
                    bracket_label: 'Ingreso de %s a %s: %s%% ‚Üí %s',
                    bracket_label_top: 'Ingreso superior a %s: %s%% ‚Üí %s',
                    err_invalid: 'Por favor, ingrese n√∫meros v√°lidos',
                    currency: '‚Ç¨'
                }
            },

            // ÂàùÂßãÂåñÁ®éÁéáË°®ÔºàÂ§çÂà∂Ëã±ÊñáÁ®éÁéáÂà∞ÂÖ∂‰ªñËØ≠Ë®ÄÔºâ
            initTaxBrackets: () => {
                const langs = ['zh-CN', 'zh-TW', 'ja', 'ru', 'es'];
                langs.forEach(lang => {
                    TaxCalc.taxBrackets[lang] = JSON.parse(JSON.stringify(TaxCalc.taxBrackets.en));
                });
            },

            init: () => {
                TaxCalc.initTaxBrackets();
                // ÂàùÂßãÂåñÁ§∫‰æãÂÄº
                document.getElementById('annual-income').value = 80000;
                document.getElementById('deductions').value = 12000;
                document.getElementById('filing-status').value = 'single';
                
                // ÂàùÂßãÂåñÁä∂ÊÄÅÈÄâÈ°πÁöÑÁøªËØë
                TaxCalc.updateStatusOptions();
            },

            updateStatusOptions: () => {
                const lang = document.getElementById('tax-lang').value;
                const texts = TaxCalc.i18n[lang];
                const statusSelect = document.getElementById('filing-status');
                
                Array.from(statusSelect.options).forEach(option => {
                    const key = option.getAttribute('data-i18n');
                    if (key && texts[key]) {
                        option.text = texts[key];
                    }
                });
            },

            changeLang: () => {
                const lang = document.getElementById('tax-lang').value;
                const texts = TaxCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="tax_calculator"] [data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });

                TaxCalc.updateStatusOptions();
                // ÈáçÊñ∞ËÆ°ÁÆó‰ª•Êõ¥Êñ∞ÁªìÊûúËØ≠Ë®Ä
                TaxCalc.calc();
            },

            calc: () => {
                const income = parseFloat(document.getElementById('annual-income').value) || 0;
                const deductions = parseFloat(document.getElementById('deductions').value) || 0;
                const status = document.getElementById('filing-status').value;
                const lang = document.getElementById('tax-lang').value;
                const texts = TaxCalc.i18n[lang];

                const taxableEl = document.getElementById('taxable-income');
                const totalTaxEl = document.getElementById('total-tax');
                const effectiveEl = document.getElementById('effective-rate');
                const marginalEl = document.getElementById('marginal-rate');
                const breakdownEl = document.getElementById('tax-breakdown');

                // È™åËØÅËæìÂÖ•
                if (isNaN(income) || isNaN(deductions) || income < 0 || deductions < 0) {
                    taxableEl.innerText = texts.err_invalid;
                    taxableEl.className = "text-xl font-bold text-red-600";
                    totalTaxEl.innerText = "";
                    effectiveEl.innerText = "";
                    marginalEl.innerText = "";
                    breakdownEl.innerHTML = `<div>${texts.err_invalid}</div>`;
                    return;
                }

                // ËÆ°ÁÆóÂ∫îÁ®éÊâÄÂæó
                const taxableIncome = Math.max(0, income - deductions);
                const brackets = TaxCalc.taxBrackets[lang][status];
                
                // ËÆ°ÁÆóÁ®éÊ¨æ
                let totalTax = 0;
                let marginalRate = 0;
                let breakdownHtml = '';
                
                brackets.forEach(bracket => {
                    if (taxableIncome > bracket.min) {
                        const amountInBracket = Math.min(taxableIncome, bracket.max) - bracket.min;
                        if (amountInBracket > 0) {
                            const taxInBracket = amountInBracket * (bracket.rate / 100);
                            totalTax += taxInBracket;
                            
                            // ËÆ∞ÂΩïËæπÈôÖÁ®éÁéá
                            if (taxableIncome > bracket.min) {
                                marginalRate = bracket.rate;
                            }
                            
                            // Ê†ºÂºèÂåñÈáëÈ¢ùÊòæÁ§∫
                            const minFormatted = texts.currency + bracket.min.toLocaleString();
                            let maxFormatted = bracket.max === Infinity ? 
                                texts.currency + '‚àû' : texts.currency + bracket.max.toLocaleString();
                            const taxFormatted = texts.currency + taxInBracket.toFixed(2).toLocaleString();
                            
                            // Ê∑ªÂä†Âà∞ÊòéÁªÜ
                            if (bracket.max === Infinity) {
                                breakdownHtml += `<div class="tax-bracket">${texts.bracket_label_top.replace(/%s/g, (match, i) => 
                                    [minFormatted, bracket.rate, taxFormatted][i])}</div>`;
                            } else {
                                breakdownHtml += `<div class="tax-bracket">${texts.bracket_label.replace(/%s/g, (match, i) => 
                                    [minFormatted, maxFormatted, bracket.rate, taxFormatted][i])}</div>`;
                            }
                        }
                    }
                });
                
                // ËÆ°ÁÆóÂÆûÈôÖÁ®éÁéá
                const effectiveRate = taxableIncome > 0 ? (totalTax / taxableIncome) * 100 : 0;

                // ÊòæÁ§∫ÁªìÊûú
                taxableEl.className = "text-xl font-bold text-orange-800";
                totalTaxEl.className = "text-xl font-bold text-orange-800";
                effectiveEl.className = "text-xl font-bold text-orange-800";
                marginalEl.className = "text-xl font-bold text-orange-800";
                
                taxableEl.innerText = `${texts.currency}${taxableIncome.toLocaleString()}`;
                totalTaxEl.innerText = `${texts.currency}${totalTax.toFixed(2).toLocaleString()}`;
                effectiveEl.innerText = `${effectiveRate.toFixed(1)}%`;
                marginalEl.innerText = `${marginalRate}%`;
                
                breakdownEl.innerHTML = breakdownHtml;
            }
        };

        document.addEventListener('DOMContentLoaded', TaxCalc.init);
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Ëá™Âä®ÂåπÈÖçÊµèËßàÂô®ËØ≠Ë®Ä
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            } else if (userLang.startsWith('es')) {
                targetLang = 'es';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('tax-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    TaxCalc.changeLang();
                }
            }
        });
    </script>


    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
    

    <div id="toolbox-seo-wrapper-unique-id" class="max-w-4xl mx-auto px-4"></div>
    <script src="/scripts/seo-loader.js"></script>

</body>
</html>