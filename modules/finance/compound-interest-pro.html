<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Category Meta Tag -->
    <meta name="category" content="finance">
    <meta name="description" content="Compound Interest Calculator - See how your investments grow over time with compound interest.">
    <title>Compound Interest Pro | 复利计算器</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js for Visuals -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#10b981', hover: '#059669' }, /* Emerald */
                        secondary: { DEFAULT: '#3b82f6', hover: '#2563eb' }, /* Blue */
                        accent: { DEFAULT: '#8b5cf6', hover: '#7c3aed' }, /* Violet */
                        surface: { light: '#ffffff', dark: '#1e293b' },
                        bg: { light: '#f0fdfa', dark: '#020617' } // Teal tint BG
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    },
                    boxShadow: {
                        'soft': '0 4px 20px -2px rgba(0, 0, 0, 0.05)',
                        'glow': '0 0 15px -3px rgba(16, 185, 129, 0.3)',
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .input-group {
                @apply relative bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700 transition-all focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary;
            }
            
            .range-slider {
                @apply w-full h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer accent-primary mt-4;
            }
            
            .currency-input {
                @apply w-full bg-transparent border-none text-2xl font-bold text-slate-800 dark:text-white focus:ring-0 p-0 font-mono outline-none;
            }

            .freq-btn {
                @apply flex-1 py-2 text-xs font-bold uppercase tracking-wide border border-slate-200 dark:border-slate-600 first:rounded-l-lg last:rounded-r-lg hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors text-slate-500 dark:text-slate-400;
            }
            .freq-btn.active {
                @apply bg-primary text-white border-primary z-10;
            }
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-bg-light dark:bg-bg-dark min-h-screen font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300 overflow-x-hidden">

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        
        <!-- Header -->
        <header class="flex flex-col md:flex-row items-center justify-between gap-6 mb-10">
            <div class="flex items-center gap-4">
                <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500 to-teal-700 text-white flex items-center justify-center text-xl shadow-lg shadow-emerald-500/20">
                    <i class="fa fa-line-chart"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-bold tracking-tight text-slate-900 dark:text-white" data-i18n="title">Compound Interest Pro</h1>
                    <p class="text-xs text-slate-500 font-medium tracking-wide" data-i18n="subtitle">复利计算器</p>
                </div>
            </div>

            <div class="flex items-center gap-3 bg-white dark:bg-slate-800 p-1.5 rounded-lg border border-slate-200 dark:border-slate-700 shadow-sm">
                <select id="lang-selector" class="bg-transparent text-xs font-bold px-2 py-1 rounded focus:outline-none cursor-pointer text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700">
                    <option value="zh-CN">CN</option>
                    <option value="en">EN</option>
                </select>
                <div class="w-px h-4 bg-slate-200 dark:bg-slate-600"></div>
                <button id="mode-toggle" class="w-7 h-7 rounded flex items-center justify-center text-slate-400 hover:text-emerald-600 dark:hover:text-yellow-400 transition-all">
                    <i class="fa fa-moon-o dark:hidden"></i>
                    <i class="fa fa-sun-o hidden dark:inline"></i>
                </button>
            </div>
        </header>

        <!-- Intro Text -->
        <div class="mb-8 max-w-3xl">
            <p class="text-sm text-slate-600 dark:text-slate-400 leading-relaxed" data-i18n="intro_text">
                长期投资是为未来储蓄的绝佳方式。使用我们的复利计算器，看看您的投资会如何随时间增长。查看所有道明个人投资产品。
            </p>
        </div>

        <!-- Main Tool Area -->
        <div class="grid lg:grid-cols-12 gap-8 items-start mb-12">
            
            <!-- Left Column: Inputs -->
            <main class="lg:col-span-5 space-y-6">
                
                <!-- 1. Initial Contribution -->
                <div class="input-group">
                    <div class="flex justify-between items-center mb-1">
                        <label class="text-xs font-bold text-slate-500 uppercase" data-i18n="lbl_initial">我目前可以贡献</label>
                        <i class="fa fa-money text-emerald-500"></i>
                    </div>
                    <div class="flex items-baseline gap-1">
                        <span class="text-lg font-mono text-slate-400">$</span>
                        <input type="number" id="inp-initial" class="currency-input" value="10000" min="0" max="100000">
                    </div>
                    <input type="range" id="slider-initial" class="range-slider" min="0" max="100000" step="100" value="10000">
                    <p class="text-[10px] text-slate-400 mt-2" data-i18n="hint_initial">初始投入越多，潜在回报就越高。 (最高 10 万美元)</p>
                </div>

                <!-- 2. Regular Contribution -->
                <div class="bg-white dark:bg-slate-800 rounded-xl p-4 border border-slate-200 dark:border-slate-700">
                    <div class="flex justify-between items-center mb-4">
                        <label class="text-xs font-bold text-slate-500 uppercase" data-i18n="lbl_freq">我可以贡献以下所有方面</label>
                    </div>
                    
                    <!-- Frequency Tabs -->
                    <div class="flex mb-4" id="freq-tabs">
                        <button class="freq-btn active" data-val="year" data-i18n="freq_year">年</button>
                        <button class="freq-btn" data-val="month" data-i18n="freq_month">月</button>
                        <button class="freq-btn" data-val="week" data-i18n="freq_week">星期</button>
                    </div>

                    <div class="relative transition-all focus-within:ring-2 focus-within:ring-primary/20 rounded-lg">
                        <label class="text-xs font-bold text-slate-500 uppercase block mb-1" data-i18n="lbl_regular">我可以定期捐款</label>
                        <div class="flex items-baseline gap-1">
                            <span class="text-lg font-mono text-slate-400">$</span>
                            <input type="number" id="inp-regular" class="currency-input" value="200" min="0" max="4500">
                        </div>
                        <input type="range" id="slider-regular" class="range-slider" min="0" max="4500" step="50" value="200">
                    </div>
                    <p class="text-[10px] text-slate-400 mt-2" data-i18n="hint_regular">定期投入可以增加你获得更高回报的可能性。 (最高 4,500 美元)</p>
                </div>

                <!-- 3. Interest Rate -->
                <div class="input-group">
                    <div class="flex justify-between items-center mb-1">
                        <label class="text-xs font-bold text-slate-500 uppercase" data-i18n="lbl_rate">年收益率</label>
                        <i class="fa fa-percent text-blue-500"></i>
                    </div>
                    <div class="flex items-baseline gap-1">
                        <input type="number" id="inp-rate" class="currency-input" value="5" min="0" max="15" step="0.1">
                        <span class="text-lg font-mono text-slate-400">%</span>
                    </div>
                    <input type="range" id="slider-rate" class="range-slider accent-blue-500" min="0" max="15" step="0.1" value="5">
                    <p class="text-[10px] text-slate-400 mt-2" data-i18n="hint_rate">
                        年化收益率是指您的投资在一年内的增长额占原始投资额的比例。 (最高 15%) <br>
                        <a href="#" class="text-primary hover:underline">查看道明互惠基金的历史投资回报。</a>
                    </p>
                </div>

                <!-- 4. Years -->
                <div class="input-group">
                    <div class="flex justify-between items-center mb-1">
                        <label class="text-xs font-bold text-slate-500 uppercase" data-i18n="lbl_years">我想节省的岁月</label>
                        <i class="fa fa-calendar text-violet-500"></i>
                    </div>
                    <div class="flex items-baseline gap-1">
                        <input type="number" id="inp-years" class="currency-input" value="10" min="1" max="50">
                        <span class="text-lg font-mono text-slate-400" data-i18n="unit_years">年</span>
                    </div>
                    <input type="range" id="slider-years" class="range-slider accent-violet-500" min="1" max="50" step="1" value="10">
                    <p class="text-[10px] text-slate-400 mt-2" data-i18n="hint_years">投资时间越长，通过复利增长的储蓄就越多。 (最长 50 年)</p>
                </div>

            </main>

            <!-- Right Column: Results & Chart -->
            <main class="lg:col-span-7 space-y-6">
                
                <!-- Main Result Card -->
                <div class="bg-gradient-to-br from-slate-900 to-slate-800 text-white rounded-3xl shadow-xl p-8 relative overflow-hidden flex flex-col justify-between min-h-[500px]">
                    <!-- Decoration -->
                    <div class="absolute top-0 right-0 w-64 h-64 bg-emerald-500/20 rounded-full blur-[100px] pointer-events-none translate-x-1/2 -translate-y-1/2"></div>

                    <!-- Text Result -->
                    <div class="relative z-10 text-center mb-8">
                        <p class="text-sm text-slate-400 mb-2" data-i18n="res_pretext">根据您的缴款额和假设利率，您的储蓄大约可以增长到</p>
                        <div class="text-5xl md:text-6xl font-mono font-bold tracking-tighter text-emerald-400 mb-2" id="res-total-value">$0</div>
                        <p class="text-xs font-bold bg-white/10 inline-block px-3 py-1 rounded-full text-slate-300">
                            <span data-i18n="res_in">在您选择的</span> <span id="res-years-badge">10</span> <span data-i18n="res_period">年投资期内</span>
                        </p>
                    </div>

                    <!-- Chart Container -->
                    <div class="relative z-10 w-full h-64 bg-slate-800/50 rounded-xl p-4 border border-white/5 backdrop-blur-sm flex-grow">
                        <canvas id="growthChart"></canvas>
                    </div>

                    <!-- Summary Stats -->
                    <div class="relative z-10 grid grid-cols-2 gap-4 mt-6 pt-6 border-t border-white/10">
                        <div class="text-center">
                            <div class="text-xs text-slate-400 uppercase tracking-wider mb-1" data-i18n="sum_contributions">您的贡献</div>
                            <div class="text-xl font-mono font-bold text-white" id="res-total-contribution">$0</div>
                        </div>
                        <div class="text-center">
                            <div class="text-xs text-slate-400 uppercase tracking-wider mb-1" data-i18n="sum_interest">总利息收益</div>
                            <div class="text-xl font-mono font-bold text-emerald-400" id="res-total-interest">$0</div>
                        </div>
                    </div>
                </div>

                <!-- Call to Action -->
                <div class="text-center">
                    <button class="px-8 py-3 rounded-full bg-emerald-600 hover:bg-emerald-700 text-white font-bold shadow-lg shadow-emerald-500/30 transition-all transform hover:-translate-y-1">
                        <span data-i18n="btn_explore">探索道明个人投资选项</span> <i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>

            </main>
        </div>

        <!-- Disclaimer Footer -->
        <footer class="border-t border-slate-200 dark:border-slate-800 pt-8 pb-12">
             <div class="max-w-4xl mx-auto space-y-4 text-center">
                <p class="text-[10px] text-slate-400 dark:text-slate-600 leading-relaxed max-w-3xl mx-auto" data-i18n="footer_text">
                    此计算基于您输入信息的准确性和完整性以及某些假设。结果仅供参考，不构成财务建议，也不应被视为财务建议。<br><br>
                    合法的
                </p>
             </div>
        </footer>

    </div>

    <script>
        const i18nData = {
            'zh-CN': {
                title: "Compound Interest Pro", subtitle: "复利计算器",
                intro_text: "长期投资是为未来储蓄的绝佳方式。使用我们的复利计算器，看看您的投资会如何随时间增长。查看所有道明个人投资产品。",
                
                lbl_initial: "我目前可以贡献", hint_initial: "初始投入越多，潜在回报就越高。 (最高 10 万美元)",
                lbl_freq: "我可以贡献以下所有方面", freq_year: "年", freq_month: "月", freq_week: "星期",
                lbl_regular: "我可以定期捐款", hint_regular: "定期投入可以增加你获得更高回报的可能性。 (最高 4,500 美元)",
                lbl_rate: "年收益率", hint_rate: "年化收益率是指您的投资在一年内的增长额占原始投资额的比例。 (最高 15%)",
                lbl_years: "我想节省的岁月", unit_years: "年", hint_years: "投资时间越长，通过复利增长的储蓄就越多。 (最长 50 年)",
                
                res_pretext: "根据您的缴款额和假设利率，您的储蓄大约可以增长到",
                res_in: "在您选择的", res_period: "年投资期内",
                sum_contributions: "您的贡献", sum_interest: "总收益",
                btn_explore: "探索道明个人投资选项",
                
                footer_text: "此计算基于您输入信息的准确性和完整性以及某些假设。结果仅供参考，不构成财务建议，也不应被视为财务建议。\n\n合法的"
            },
            'en': {
                title: "Compound Interest Pro", subtitle: "Compound Interest Calculator",
                intro_text: "Long-term investment is a great way to save for the future. Use our compound interest calculator to see how your investments can grow over time. View all TD personal investment products.",
                
                lbl_initial: "I can contribute initially", hint_initial: "The more you start with, the higher potential returns. (Max $100k)",
                lbl_freq: "Contribution Frequency", freq_year: "Year", freq_month: "Month", freq_week: "Week",
                lbl_regular: "I can contribute regularly", hint_regular: "Regular contributions increase your potential returns. (Max $4,500)",
                lbl_rate: "Annual Rate of Return", hint_rate: "The annual rate is the percentage growth of your investment in one year. (Max 15%)",
                lbl_years: "Years to Grow", unit_years: "Years", hint_years: "The longer you invest, the more your savings grow through compounding. (Max 50 years)",
                
                res_pretext: "Based on your contributions and assumed rate, your savings could grow to approximately",
                res_in: "In your selected", res_period: "year investment period",
                sum_contributions: "Your Contributions", sum_interest: "Total Return",
                btn_explore: "Explore TD Investment Options",
                
                footer_text: "This calculation is based on the accuracy and completeness of the information you entered and certain assumptions. The results are for informational purposes only and do not constitute financial advice, nor should they be considered as such.\n\nLegal"
            }
        };

        const Calculator = {
            chart: null,
            
            calculate() {
                // 1. Get Inputs
                const initial = parseFloat(document.getElementById('inp-initial').value) || 0;
                const regular = parseFloat(document.getElementById('inp-regular').value) || 0;
                const rate = parseFloat(document.getElementById('inp-rate').value) || 0;
                const years = parseInt(document.getElementById('inp-years').value) || 10;
                
                // Frequency Multiplier
                const freqBtn = document.querySelector('.freq-btn.active');
                const freqType = freqBtn ? freqBtn.dataset.val : 'month';
                let periodsPerYear = 12; // Default Month
                if(freqType === 'year') periodsPerYear = 1;
                if(freqType === 'week') periodsPerYear = 52;

                // 2. Calculation Loop (Year by Year for Chart)
                let labels = [];
                let dataPrincipal = [];
                let dataInterest = [];
                
                let currentBalance = initial;
                let totalContribution = initial;
                
                // Rate per period
                // Simplification: Assume annual compounding for interest to match most simple calculators, 
                // but contributions happen regularly.
                // Or: Compounding matches contribution frequency?
                // Let's use Monthly Compounding as standard for "Savings", or align with contribution.
                // Standard formula: FV = P(1+r/n)^(nt) + PMT * ...
                
                const r = rate / 100;
                const n = periodsPerYear; // Compounding frequency matches contribution frequency
                
                for (let y = 0; y <= years; y++) {
                    labels.push(y + (App.lang === 'zh-CN' ? ' 年' : ' Yrs'));
                    
                    if (y === 0) {
                        dataPrincipal.push(initial);
                        dataInterest.push(0);
                        continue;
                    }

                    // Formula for Year 'y'
                    // FV of Initial
                    const fv_initial = initial * Math.pow((1 + r/n), (n * y));
                    
                    // FV of Contributions
                    let fv_contrib = 0;
                    if (r !== 0) {
                        fv_contrib = regular * (Math.pow((1 + r/n), (n * y)) - 1) / (r/n);
                    } else {
                        fv_contrib = regular * n * y;
                    }
                    
                    const totalVal = fv_initial + fv_contrib;
                    const totalContributed = initial + (regular * n * y);
                    const totalInt = totalVal - totalContributed;

                    dataPrincipal.push(totalContributed);
                    dataInterest.push(totalInt);
                    
                    // Store final year values
                    if(y === years) {
                        currentBalance = totalVal;
                        totalContribution = totalContributed;
                    }
                }

                // 3. Update UI Text
                this.updateCurrency('res-total-value', currentBalance);
                this.updateCurrency('res-total-contribution', totalContribution);
                this.updateCurrency('res-total-interest', currentBalance - totalContribution);
                document.getElementById('res-years-badge').textContent = years;

                // 4. Update Chart
                this.updateChart(labels, dataPrincipal, dataInterest);
            },

            updateCurrency(id, val) {
                const el = document.getElementById(id);
                // Simple formatter
                const formatted = '$' + Math.round(val).toLocaleString();
                if(el) el.textContent = formatted;
            },

            updateChart(labels, principalData, interestData) {
                const ctx = document.getElementById('growthChart').getContext('2d');
                
                // Gradient for Interest
                let gradient = ctx.createLinearGradient(0, 0, 0, 400);
                gradient.addColorStop(0, 'rgba(16, 185, 129, 0.8)'); // Emerald
                gradient.addColorStop(1, 'rgba(16, 185, 129, 0.1)');

                if (this.chart) {
                    this.chart.data.labels = labels;
                    this.chart.data.datasets[0].data = principalData;
                    this.chart.data.datasets[1].data = interestData;
                    this.chart.update();
                } else {
                    this.chart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: labels,
                            datasets: [
                                {
                                    label: 'Your Contributions',
                                    data: principalData,
                                    borderColor: '#94a3b8', // Slate 400
                                    backgroundColor: 'rgba(148, 163, 184, 0.1)',
                                    fill: true,
                                    pointRadius: 0,
                                    borderWidth: 2,
                                    tension: 0.4
                                },
                                {
                                    label: 'Total Growth (Interest)',
                                    data: interestData, // Note: This logic for stacked area in Chart.js usually needs raw values, but let's do simple overlay or stacked.
                                    // Actually, to show "Total Value" vs "Contributions", stacked is best.
                                    // But dataInterest calculated above is pure interest. 
                                    // So Stacked: Principal + Interest = Total.
                                    borderColor: '#10b981', // Emerald 500
                                    backgroundColor: gradient,
                                    fill: true,
                                    pointRadius: 0,
                                    borderWidth: 2,
                                    tension: 0.4
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { 
                                    display: true, 
                                    labels: { color: '#94a3b8', font: { size: 10 } }
                                },
                                tooltip: {
                                    mode: 'index',
                                    intersect: false,
                                    callbacks: {
                                        label: function(context) {
                                            let label = context.dataset.label || '';
                                            if (label) label += ': ';
                                            label += '$' + Math.round(context.raw).toLocaleString();
                                            return label;
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: {
                                    grid: { display: false, color: 'rgba(255,255,255,0.05)' },
                                    ticks: { color: '#64748b', maxTicksLimit: 6 }
                                },
                                y: {
                                    stacked: true, // Enable stacking
                                    grid: { color: 'rgba(255,255,255,0.05)' },
                                    ticks: { 
                                        color: '#64748b',
                                        callback: function(value) { return '$' + value/1000 + 'k'; }
                                    }
                                }
                            },
                            interaction: {
                                mode: 'nearest',
                                axis: 'x',
                                intersect: false
                            }
                        }
                    });
                }
            },

            syncInputs() {
                // Helper to sync range and number inputs
                const pairs = [
                    ['inp-initial', 'slider-initial'],
                    ['inp-regular', 'slider-regular'],
                    ['inp-rate', 'slider-rate'],
                    ['inp-years', 'slider-years']
                ];

                pairs.forEach(pair => {
                    const num = document.getElementById(pair[0]);
                    const slider = document.getElementById(pair[1]);
                    
                    if(num && slider) {
                        num.addEventListener('input', () => {
                            slider.value = num.value;
                            this.calculate();
                        });
                        slider.addEventListener('input', () => {
                            num.value = slider.value;
                            this.calculate();
                        });
                    }
                });

                // Frequency Buttons
                document.querySelectorAll('.freq-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.freq-btn').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.calculate();
                    });
                });
            }
        };

        const App = {
            lang: 'zh-CN',

            init() {
                const params = new URLSearchParams(window.location.search);
                this.lang = params.get('lang') || 'zh-CN';
                document.getElementById('lang-selector').value = this.lang;

                // Listeners
                document.getElementById('lang-selector').addEventListener('change', e => {
                    this.lang = e.target.value;
                    this.updateUrl();
                    this.translate();
                    Calculator.calculate();
                });

                document.getElementById('mode-toggle').addEventListener('click', () => {
                    document.documentElement.classList.toggle('dark');
                });

                Calculator.syncInputs();
                this.translate();
                Calculator.calculate();
            },

            updateUrl() {
                try {
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('lang', this.lang);
                    window.history.pushState({}, '', newUrl);
                } catch(e) {}
            },

            translate() {
                const t = i18nData[this.lang] || i18nData['en'];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(t[key]) {
                        // Preserve HTML inside strings if any
                        el.innerHTML = t[key]; 
                    }
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
     <!--  结尾必须包含的代码 -->
    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
</body>
</html>