<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æ”¤æè¨ˆç®—å™¨æ¨¡å¡Š</title>
    <meta name="tool-id" content="amort_calc">
    <meta name="category" content="finance">
    <meta name="icon" content="ğŸ“Š">
    <meta name="description" content="åˆ†æè´·æ¬¾çš„åˆ†æœŸæ‘Šæç»“æ„ï¼Œè®¡ç®—æ¯æœˆè¿˜æ¬¾é¢å’Œæ€»åˆ©æ¯å æ¯”ã€‚">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .bar-container { width: 100%; height: 20px; background: #e5e7eb; border-radius: 10px; overflow: hidden; display: flex; }
        .bar-principal { height: 100%; background: #3b82f6; }
        .bar-interest { height: 100%; background: #f97316; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="amort_calc" 
         data-category="finance" 
         data-title="è²¸æ¬¾æ”¤æåˆ†æ" 
         data-icon="ğŸ“Š">
        
        <div class="absolute top-4 right-4">
            <select id="ac-lang" onchange="AmortCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="zh-CN">ç°¡é«”ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="en">English</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                <option value="es">EspaÃ±ol</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ“Š è²¸æ¬¾æ”¤æåˆ†æ</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="amount">è²¸æ¬¾é‡‘é¡</label>
                <input type="number" id="ac-amount" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="100000">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="rate">å¹´åˆ©ç‡ (%)</label>
                <input type="number" id="ac-rate" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="4.5" step="0.1">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="term">æœŸé™ (å¹´)</label>
                <input type="number" id="ac-term" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none" placeholder="30">
            </div>
        </div>

        <button onclick="AmortCalc.calc()" class="w-full bg-blue-600 text-white py-2 rounded font-bold hover:bg-blue-700 transition mb-6" data-i18n="btn_calc">åˆ†æçµæ§‹</button>

        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <div>
                    <div class="text-xs text-gray-500" data-i18n="res_monthly">æœˆä¾›</div>
                    <div id="ac-res-monthly" class="text-lg font-bold text-gray-800">--</div>
                </div>
                <div>
                    <div class="text-xs text-gray-500" data-i18n="res_total_int">ç¸½åˆ©æ¯</div>
                    <div id="ac-res-interest" class="text-lg font-bold text-orange-600">--</div>
                </div>
            </div>

            <div class="mb-2">
                <div class="flex justify-between text-xs text-gray-600 mb-1">
                    <span data-i18n="ratio_principal">æœ¬é‡‘ä½”æ¯”</span>
                    <span data-i18n="ratio_interest">åˆ©æ¯ä½”æ¯”</span>
                </div>
                <div class="bar-container">
                    <div id="bar-p" class="bar-principal" style="width: 50%"></div>
                    <div id="bar-i" class="bar-interest" style="width: 50%"></div>
                </div>
                <div class="flex justify-between text-xs font-bold mt-1">
                    <span id="txt-p" class="text-blue-600">50%</span>
                    <span id="txt-i" class="text-orange-600">50%</span>
                </div>
            </div>
            
            <p class="text-xs text-gray-400 mt-2" data-i18n="note">æ­¤åœ–è¡¨é¡¯ç¤ºåœ¨æ•´å€‹è²¸æ¬¾é€±æœŸä¸­ï¼Œæ‚¨æ”¯ä»˜çš„ç¸½é‡‘é¡é‡Œæœ¬é‡‘èˆ‡åˆ©æ¯çš„æ¯”ä¾‹ã€‚</p>
        </div>
    </div>

    <script>
        const AmortCalc = {
            i18n: {
                'zh-CN': {
                    title: 'ğŸ“Š è´·æ¬¾æ‘Šæåˆ†æ',
                    amount: 'è´·æ¬¾é‡‘é¢',
                    rate: 'å¹´åˆ©ç‡ (%)',
                    term: 'æœŸé™ (å¹´)',
                    btn_calc: 'åˆ†æç»“æ„',
                    res_monthly: 'æ¯æœˆè¿˜æ¬¾ (PI)',
                    res_total_int: 'æ€»æ”¯ä»˜åˆ©æ¯',
                    ratio_principal: 'æœ¬é‡‘å æ¯” (è“)',
                    ratio_interest: 'åˆ©æ¯å æ¯” (æ©™)',
                    note: 'æ­¤å›¾è¡¨æ˜¾ç¤ºåœ¨æ•´ä¸ªè´·æ¬¾å‘¨æœŸä¸­ï¼Œæ‚¨æ”¯ä»˜çš„æ€»é‡‘é¢é‡Œæœ¬é‡‘ä¸åˆ©æ¯çš„æ¯”ä¾‹ã€‚'
                },
                'zh-TW': {
                    title: 'ğŸ“Š è²¸æ¬¾æ”¤æåˆ†æ',
                    amount: 'è²¸æ¬¾é‡‘é¡',
                    rate: 'å¹´åˆ©ç‡ (%)',
                    term: 'æœŸé™ (å¹´)',
                    btn_calc: 'åˆ†æçµæ§‹',
                    res_monthly: 'æ¯æœˆé‚„æ¬¾ (PI)',
                    res_total_int: 'ç¸½æ”¯ä»˜åˆ©æ¯',
                    ratio_principal: 'æœ¬é‡‘ä½”æ¯” (è—)',
                    ratio_interest: 'åˆ©æ¯ä½”æ¯” (æ©™)',
                    note: 'æ­¤åœ–è¡¨é¡¯ç¤ºåœ¨æ•´å€‹è²¸æ¬¾é€±æœŸä¸­ï¼Œæ‚¨æ”¯ä»˜çš„ç¸½é‡‘é¡é‡Œæœ¬é‡‘èˆ‡åˆ©æ¯çš„æ¯”ä¾‹ã€‚'
                },
                'en': {
                    title: 'ğŸ“Š Amortization Analysis',
                    amount: 'Loan Amount',
                    rate: 'Interest Rate (%)',
                    term: 'Term (Years)',
                    btn_calc: 'Analyze',
                    res_monthly: 'Monthly Payment',
                    res_total_int: 'Total Interest',
                    ratio_principal: 'Principal (Blue)',
                    ratio_interest: 'Interest (Orange)',
                    note: 'Shows the ratio of Principal vs Interest over the life of the loan.'
                },
                'ja': {
                    title: 'ğŸ“Š ãƒ­ãƒ¼ãƒ³å†…è¨³åˆ†æ',
                    amount: 'å€Ÿå…¥é‡‘é¡',
                    rate: 'å¹´åˆ© (%)',
                    term: 'æœŸé–“ (å¹´)',
                    btn_calc: 'åˆ†æã™ã‚‹',
                    res_monthly: 'æœˆã€…ã®è¿”æ¸ˆ',
                    res_total_int: 'ç·æ”¯æ‰•åˆ©æ¯',
                    ratio_principal: 'å…ƒé‡‘å‰²åˆ (é’)',
                    ratio_interest: 'åˆ©æ¯å‰²åˆ (æ©™)',
                    note: 'è¿”æ¸ˆç·é¡ã«ãŠã‘ã‚‹å…ƒé‡‘ã¨åˆ©æ¯ã®å‰²åˆã‚’ç¤ºã—ã¾ã™ã€‚'
                },
                'ru': {
                    title: 'ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ°Ğ¼Ğ¾Ñ€Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸',
                    amount: 'Ğ¡ÑƒĞ¼Ğ¼Ğ° ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ°',
                    rate: 'Ğ¡Ñ‚Ğ°Ğ²ĞºĞ° (%)',
                    term: 'Ğ¡Ñ€Ğ¾Ğº (Ğ»ĞµÑ‚)',
                    btn_calc: 'ĞĞ½Ğ°Ğ»Ğ¸Ğ·',
                    res_monthly: 'Ğ•Ğ¶ĞµĞ¼ĞµÑ. Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶',
                    res_total_int: 'ĞĞ±Ñ‰Ğ°Ñ Ğ¿ĞµÑ€ĞµĞ¿Ğ»Ğ°Ñ‚Ğ°',
                    ratio_principal: 'Ğ”Ğ¾Ğ»Ğ³ (Ğ¡Ğ¸Ğ½Ğ¸Ğ¹)',
                    ratio_interest: 'ĞŸÑ€Ğ¾Ñ†ĞµĞ½Ñ‚Ñ‹ (ĞÑ€Ğ°Ğ½Ğ¶)',
                    note: 'ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ¾Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ´Ğ¾Ğ»Ğ³Ğ° Ğ¸ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ¾Ğ² Ğ·Ğ° Ğ²ĞµÑÑŒ ÑÑ€Ğ¾Ğº.'
                },
                'es': {
                    title: 'ğŸ“Š AnÃ¡lisis de AmortizaciÃ³n',
                    amount: 'Monto del PrÃ©stamo',
                    rate: 'Tasa Anual (%)',
                    term: 'Plazo (AÃ±os)',
                    btn_calc: 'Analizar',
                    res_monthly: 'Pago Mensual',
                    res_total_int: 'InterÃ©s Total',
                    ratio_principal: 'Capital (Azul)',
                    ratio_interest: 'InterÃ©s (Naranja)',
                    note: 'Muestra la proporciÃ³n de Capital vs InterÃ©s durante la vida del prÃ©stamo.'
                }
            },

            changeLang: () => {
                const lang = document.getElementById('ac-lang').value;
                const texts = AmortCalc.i18n[lang];
                const elements = document.querySelectorAll('[data-id="amort_calc"] [data-i18n]');
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) el.innerText = texts[key];
                });
                AmortCalc.calc(true);
            },

            calc: (isLangUpdate = false) => {
                const p = parseFloat(document.getElementById('ac-amount').value);
                const r_annual = parseFloat(document.getElementById('ac-rate').value);
                const years = parseFloat(document.getElementById('ac-term').value);

                const lang = document.getElementById('ac-lang').value;
                const fmt = (num) => num.toLocaleString(lang === 'en' ? 'en-US' : 'zh-CN', { style: 'currency', currency: lang === 'en' ? 'USD' : (lang === 'ja' ? 'JPY' : 'CNY'), maximumFractionDigits: 0 });

                if (!p || !r_annual || !years) return;

                const r = r_annual / 100 / 12;
                const n = years * 12;

                const x = Math.pow(1 + r, n);
                const monthly = (p * r * x) / (x - 1);
                
                const totalPay = monthly * n;
                const totalInt = totalPay - p;

                document.getElementById('ac-res-monthly').innerText = fmt(monthly);
                document.getElementById('ac-res-interest').innerText = fmt(totalInt);

                // Bar chart
                const pPercent = (p / totalPay) * 100;
                const iPercent = (totalInt / totalPay) * 100;

                document.getElementById('bar-p').style.width = pPercent + "%";
                document.getElementById('bar-i').style.width = iPercent + "%";
                
                document.getElementById('txt-p').innerText = pPercent.toFixed(1) + "%";
                document.getElementById('txt-i').innerText = iPercent.toFixed(1) + "%";
            }
        };
    </script>
</body>
</html>