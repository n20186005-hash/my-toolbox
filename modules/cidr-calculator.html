<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="category" content="Network Tools">
    <meta name="icon" content="ğŸ”—">
    <title>CIDRè®¡ç®—å™¨</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0fdf4; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 900px; margin: 0 auto; position: relative; }
        .section { margin-bottom: 25px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.9rem; color: #4b5563; margin-bottom: 4px; }
        textarea, select, input { width: 100%; padding: 8px 12px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 1rem; }
        .result-card { background: #ecfdf5; border: 1px solid #d1fae5; border-radius: 8px; padding: 15px; margin-top: 15px; }
        .result-row { display: flex; flex-wrap: wrap; padding: 8px 0; border-bottom: 1px dashed #a7f3d0; }
        .result-row:last-child { border-bottom: none; }
        .result-label { flex: 0 0 180px; font-weight: 500; color: #1e3a8a; }
        .result-value { flex: 1; color: #065f46; word-break: break-all; }
        .intro-section { margin-top: 30px; padding: 20px; background-color: #f8fafc; border-radius: 8px; font-size: 0.95rem; color: #475569; }
        .options-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; margin-bottom: 15px; }
        button { padding: 10px 15px; border-radius: 6px; font-weight: 600; cursor: pointer; transition: background 0.3s; }
        .btn-primary { background: #22c55e; color: white; border: none; }
        .btn-primary:hover { background: #16a34a; }
        .btn-secondary { background: #f3f4f6; color: #374151; border: 1px solid #d1d5db; }
        .btn-secondary:hover { background: #e5e7eb; }
        .ip-address { font-family: monospace; }
        .language-note { font-size: 0.85rem; color: #64748b; margin-top: 4px; }
    </style>
</head>
<body>

    <div class="tool-module" id="cidr-tool">
        <!-- Language Selector -->
        <div class="absolute top-4 right-4">
            <select id="lang-selector" onchange="CIDRTool.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en">English</option>
                <option value="zh-CN" selected>ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-6 text-gray-800 border-b pb-2" data-i18n="title">ğŸ”— CIDRè®¡ç®—å™¨</h2>

        <div class="space-y-6">
            <!-- Input Section -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="input_cidr">è¾“å…¥CIDRåœ°å€</h3>
                <div class="form-group">
                    <input type="text" id="cidr_input" placeholder="ä¾‹å¦‚: 192.168.1.0/24" class="focus:ring-2 focus:ring-green-500 outline-none" value="192.168.1.0/24">
                    <p class="language-note" data-i18n="cidr_note">CIDRæ ¼å¼: IPåœ°å€/å‰ç¼€é•¿åº¦ (å¦‚ 10.0.0.0/8)</p>
                </div>
            </div>

            <div class="flex gap-4">
                <button onclick="CIDRTool.calculateCIDR()" class="flex-1 btn-primary py-3 rounded font-bold hover:bg-green-700 transition shadow-md" data-i18n="btn_calculate">è®¡ç®—CIDR</button>
                <button onclick="CIDRTool.clearAll()" class="flex-1 btn-secondary py-3 rounded font-bold hover:bg-gray-300 transition shadow-sm" data-i18n="btn_clear">æ¸…ç©ºæ‰€æœ‰</button>
            </div>

            <!-- Results -->
            <div class="summary-section mt-8">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="results">è®¡ç®—ç»“æœ</h3>
                
                <div id="cidr_results" class="p-4 bg-gray-50 rounded border border-gray-100 min-h-[200px]">
                    <p data-i18n="no_results" class="text-gray-400 italic text-sm">è¯·ç‚¹å‡»"è®¡ç®—CIDR"æŸ¥çœ‹ç»“æœ</p>
                </div>
            </div>

            <!-- Examples -->
            <div class="section">
                <h3 class="text-lg font-semibold mb-4 text-gray-700" data-i18n="common_examples">å¸¸ç”¨ç¤ºä¾‹</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <div class="p-3 bg-gray-50 rounded border border-gray-100 cursor-pointer hover:bg-gray-100" onclick="CIDRTool.loadExample('192.168.1.0/24')">
                        <div class="font-medium ip-address">192.168.1.0/24</div>
                        <div class="text-xs text-gray-500" data-i18n="example_lan">å…¸å‹å±€åŸŸç½‘ç½‘æ®µ</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded border border-gray-100 cursor-pointer hover:bg-gray-100" onclick="CIDRTool.loadExample('10.0.0.0/8')">
                        <div class="font-medium ip-address">10.0.0.0/8</div>
                        <div class="text-xs text-gray-500" data-i18n="example_private">Aç±»ç§æœ‰åœ°å€</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded border border-gray-100 cursor-pointer hover:bg-gray-100" onclick="CIDRTool.loadExample('172.16.0.0/12')">
                        <div class="font-medium ip-address">172.16.0.0/12</div>
                        <div class="text-xs text-gray-500" data-i18n="example_b_class">Bç±»ç§æœ‰åœ°å€æ®µ</div>
                    </div>
                    <div class="p-3 bg-gray-50 rounded border border-gray-100 cursor-pointer hover:bg-gray-100" onclick="CIDRTool.loadExample('203.0.113.0/24')">
                        <div class="font-medium ip-address">203.0.113.0/24</div>
                        <div class="text-xs text-gray-500" data-i18n="example_test">TEST-NET-3 æµ‹è¯•ç½‘æ®µ</div>
                    </div>
                </div>
            </div>

            <!-- Intro -->
            <div class="intro-section">
                <h3 class="text-lg font-semibold mb-2 text-gray-800" data-i18n="intro_title">å…³äºCIDR</h3>
                <p data-i18n="intro_text">CIDRï¼ˆæ— ç±»åˆ«åŸŸé—´è·¯ç”±ï¼‰æ˜¯ä¸€ç§IPåœ°å€åˆ†é…å’Œè·¯ç”±èšåˆçš„æ–¹æ³•ï¼Œç”¨äºé«˜æ•ˆç®¡ç†IPåœ°å€ç©ºé—´ã€‚CIDRè¡¨ç¤ºæ³•ä¸º"IPåœ°å€/å‰ç¼€é•¿åº¦"ï¼Œå‰ç¼€é•¿åº¦å†³å®šäº†ç½‘ç»œåœ°å€çš„ä½æ•°ã€‚æœ¬å·¥å…·å¯ä»¥è®¡ç®—ç»™å®šCIDRçš„ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€ã€å­ç½‘æ©ç ã€å¯ç”¨IPèŒƒå›´å’Œä¸»æœºæ•°é‡ç­‰ä¿¡æ¯ã€‚</p>
                <div class="mt-3">
                    <h4 class="font-medium mb-1" data-i18n="cidr_format">CIDRæ ¼å¼è¯´æ˜ï¼š</h4>
                    <pre class="bg-gray-100 p-2 rounded text-sm">192.168.1.0/24
   â””â”€â”€â”€â”€â”€â”€â”˜ â””â”˜
    IPåœ°å€  å‰ç¼€é•¿åº¦</pre>
                    <p class="mt-2 text-sm" data-i18n="prefix_note">å‰ç¼€é•¿åº¦èŒƒå›´ï¼š0-32ï¼ˆIPv4ï¼‰ï¼Œ0-128ï¼ˆIPv6ï¼‰</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const CIDRTool = {
            i18n: {
                'en': {
                    title: 'ğŸ”— CIDR Calculator',
                    input_cidr: 'Enter CIDR Address',
                    cidr_note: 'CIDR format: IP address/prefix length (e.g. 10.0.0.0/8)',
                    btn_calculate: 'Calculate CIDR',
                    btn_clear: 'Clear All',
                    results: 'Calculation Results',
                    no_results: 'Click "Calculate CIDR" to view results',
                    common_examples: 'Common Examples',
                    example_lan: 'Typical LAN segment',
                    example_private: 'Class A private address',
                    example_b_class: 'Class B private address range',
                    example_test: 'TEST-NET-3 test segment',
                    intro_title: 'About CIDR',
                    intro_text: 'CIDR (Classless Inter-Domain Routing) is a method for allocating IP addresses and routing aggregates, used to efficiently manage IP address space. CIDR notation is "IP address/prefix length", where the prefix length determines the number of bits in the network address. This tool can calculate network address, broadcast address, subnet mask, available IP range and number of hosts for a given CIDR.',
                    cidr_format: 'CIDR Format Explanation:',
                    prefix_note: 'Prefix length range: 0-32 (IPv4), 0-128 (IPv6)',
                    network_address: 'Network Address:',
                    broadcast_address: 'Broadcast Address:',
                    subnet_mask: 'Subnet Mask:',
                    wildcard_mask: 'Wildcard Mask:',
                    prefix_length: 'Prefix Length:',
                    total_hosts: 'Total Hosts:',
                    usable_hosts: 'Usable Hosts:',
                    first_host: 'First Usable Host:',
                    last_host: 'Last Usable Host:',
                    invalid_cidr: 'Invalid CIDR format',
                    please_enter_cidr: 'Please enter a CIDR address'
                },
                'zh-CN': {
                    title: 'ğŸ”— CIDRè®¡ç®—å™¨',
                    input_cidr: 'è¾“å…¥CIDRåœ°å€',
                    cidr_note: 'CIDRæ ¼å¼: IPåœ°å€/å‰ç¼€é•¿åº¦ (å¦‚ 10.0.0.0/8)',
                    btn_calculate: 'è®¡ç®—CIDR',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'è®¡ç®—ç»“æœ',
                    no_results: 'è¯·ç‚¹å‡»"è®¡ç®—CIDR"æŸ¥çœ‹ç»“æœ',
                    common_examples: 'å¸¸ç”¨ç¤ºä¾‹',
                    example_lan: 'å…¸å‹å±€åŸŸç½‘ç½‘æ®µ',
                    example_private: 'Aç±»ç§æœ‰åœ°å€',
                    example_b_class: 'Bç±»ç§æœ‰åœ°å€æ®µ',
                    example_test: 'TEST-NET-3 æµ‹è¯•ç½‘æ®µ',
                    intro_title: 'å…³äºCIDR',
                    intro_text: 'CIDRï¼ˆæ— ç±»åˆ«åŸŸé—´è·¯ç”±ï¼‰æ˜¯ä¸€ç§IPåœ°å€åˆ†é…å’Œè·¯ç”±èšåˆçš„æ–¹æ³•ï¼Œç”¨äºé«˜æ•ˆç®¡ç†IPåœ°å€ç©ºé—´ã€‚CIDRè¡¨ç¤ºæ³•ä¸º"IPåœ°å€/å‰ç¼€é•¿åº¦"ï¼Œå‰ç¼€é•¿åº¦å†³å®šäº†ç½‘ç»œåœ°å€çš„ä½æ•°ã€‚æœ¬å·¥å…·å¯ä»¥è®¡ç®—ç»™å®šCIDRçš„ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€ã€å­ç½‘æ©ç ã€å¯ç”¨IPèŒƒå›´å’Œä¸»æœºæ•°é‡ç­‰ä¿¡æ¯ã€‚',
                    cidr_format: 'CIDRæ ¼å¼è¯´æ˜ï¼š',
                    prefix_note: 'å‰ç¼€é•¿åº¦èŒƒå›´ï¼š0-32ï¼ˆIPv4ï¼‰ï¼Œ0-128ï¼ˆIPv6ï¼‰',
                    network_address: 'ç½‘ç»œåœ°å€ï¼š',
                    broadcast_address: 'å¹¿æ’­åœ°å€ï¼š',
                    subnet_mask: 'å­ç½‘æ©ç ï¼š',
                    wildcard_mask: 'é€šé…ç¬¦æ©ç ï¼š',
                    prefix_length: 'å‰ç¼€é•¿åº¦ï¼š',
                    total_hosts: 'æ€»ä¸»æœºæ•°ï¼š',
                    usable_hosts: 'å¯ç”¨ä¸»æœºæ•°ï¼š',
                    first_host: 'ç¬¬ä¸€ä¸ªå¯ç”¨ä¸»æœºï¼š',
                    last_host: 'æœ€åä¸€ä¸ªå¯ç”¨ä¸»æœºï¼š',
                    invalid_cidr: 'æ— æ•ˆçš„CIDRæ ¼å¼',
                    please_enter_cidr: 'è¯·è¾“å…¥CIDRåœ°å€'
                },
                'zh-TW': {
                    title: 'ğŸ”— CIDRè¨ˆç®—å™¨',
                    input_cidr: 'è¼¸å…¥CIDRåœ°å€',
                    cidr_note: 'CIDRæ ¼å¼: IPåœ°å€/å‰ç¶´é•·åº¦ (å¦‚ 10.0.0.0/8)',
                    btn_calculate: 'è¨ˆç®—CIDR',
                    btn_clear: 'æ¸…ç©ºæ‰€æœ‰',
                    results: 'è¨ˆç®—çµæœ',
                    no_results: 'è«‹é»æ“Š"è¨ˆç®—CIDR"æŸ¥çœ‹çµæœ',
                    common_examples: 'å¸¸ç”¨ç¤ºä¾‹',
                    example_lan: 'å…¸å‹å±€åŸŸç¶²ç¶²æ®µ',
                    example_private: 'Aé¡ç§æœ‰åœ°å€',
                    example_b_class: 'Bé¡ç§æœ‰åœ°å€æ®µ',
                    example_test: 'TEST-NET-3 æ¸¬è©¦ç¶²æ®µ',
                    intro_title: 'é—œæ–¼CIDR',
                    intro_text: 'CIDRï¼ˆç„¡é¡åˆ¥åŸŸé–“è·¯ç”±ï¼‰æ˜¯ä¸€ç¨®IPåœ°å€åˆ†é…å’Œè·¯ç”±èšåˆçš„æ–¹æ³•ï¼Œç”¨æ–¼é«˜æ•ˆç®¡ç†IPåœ°å€ç©ºé–“ã€‚CIDRè¡¨ç¤ºæ³•ç‚º"IPåœ°å€/å‰ç¶´é•·åº¦"ï¼Œå‰ç¶´é•·åº¦æ±ºå®šäº†ç¶²çµ¡åœ°å€çš„ä½æ•¸ã€‚æœ¬å·¥å…·å¯ä»¥è¨ˆç®—çµ¦å®šCIDRçš„ç¶²çµ¡åœ°å€ã€å»£æ’­åœ°å€ã€å­ç¶²æ©ç¢¼ã€å¯ç”¨IPç¯„åœå’Œä¸»æ©Ÿæ•¸é‡ç­‰ä¿¡æ¯ã€‚',
                    cidr_format: 'CIDRæ ¼å¼èªªæ˜ï¼š',
                    prefix_note: 'å‰ç¶´é•·åº¦ç¯„åœï¼š0-32ï¼ˆIPv4ï¼‰ï¼Œ0-128ï¼ˆIPv6ï¼‰',
                    network_address: 'ç¶²çµ¡åœ°å€ï¼š',
                    broadcast_address: 'å»£æ’­åœ°å€ï¼š',
                    subnet_mask: 'å­ç¶²æ©ç¢¼ï¼š',
                    wildcard_mask: 'é€šé…ç¬¦æ©ç¢¼ï¼š',
                    prefix_length: 'å‰ç¶´é•·åº¦ï¼š',
                    total_hosts: 'ç¸½ä¸»æ©Ÿæ•¸ï¼š',
                    usable_hosts: 'å¯ç”¨ä¸»æ©Ÿæ•¸ï¼š',
                    first_host: 'ç¬¬ä¸€å€‹å¯ç”¨ä¸»æ©Ÿï¼š',
                    last_host: 'æœ€å¾Œä¸€å€‹å¯ç”¨ä¸»æ©Ÿï¼š',
                    invalid_cidr: 'ç„¡æ•ˆçš„CIDRæ ¼å¼',
                    please_enter_cidr: 'è«‹è¼¸å…¥CIDRåœ°å€'
                },
                'ja': {
                    title: 'ğŸ”— CIDRè¨ˆç®—ãƒ„ãƒ¼ãƒ«',
                    input_cidr: 'CIDRã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›',
                    cidr_note: 'CIDRå½¢å¼: IPã‚¢ãƒ‰ãƒ¬ã‚¹/ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹é•· (ä¾‹: 10.0.0.0/8)',
                    btn_calculate: 'CIDRã‚’è¨ˆç®—',
                    btn_clear: 'ã™ã¹ã¦ã‚¯ãƒªã‚¢',
                    results: 'è¨ˆç®—çµæœ',
                    no_results: '"CIDRã‚’è¨ˆç®—"ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦çµæœã‚’è¡¨ç¤º',
                    common_examples: 'ä¸€èˆ¬çš„ãªä¾‹',
                    example_lan: 'å…¸å‹çš„ãªLANã‚»ã‚°ãƒ¡ãƒ³ãƒˆ',
                    example_private: 'Aã‚¯ãƒ©ã‚¹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹',
                    example_b_class: 'Bã‚¯ãƒ©ã‚¹ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ç¯„å›²',
                    example_test: 'TEST-NET-3ãƒ†ã‚¹ãƒˆã‚»ã‚°ãƒ¡ãƒ³ãƒˆ',
                    intro_title: 'CIDRã«ã¤ã„ã¦',
                    intro_text: 'CIDRï¼ˆã‚¯ãƒ©ã‚¹ãƒ¬ã‚¹ãƒ»ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ»ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼‰ã¯ã€IPã‚¢ãƒ‰ãƒ¬ã‚¹ç©ºé–“ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹å‰²ã‚Šå½“ã¦ã¨ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é›†ç´„ã®æ–¹æ³•ã§ã™ã€‚CIDRè¡¨è¨˜ã¯ã€ŒIPã‚¢ãƒ‰ãƒ¬ã‚¹/ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹é•·ã€ã§ã€ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹é•·ã¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒ“ãƒƒãƒˆæ•°ã‚’æ±ºå®šã—ã¾ã™ã€‚ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ã€æŒ‡å®šã•ã‚ŒãŸCIDRã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ã€ä½¿ç”¨å¯èƒ½ãªIPç¯„å›²ã€ãƒ›ã‚¹ãƒˆæ•°ãªã©ã‚’è¨ˆç®—ã§ãã¾ã™ã€‚',
                    cidr_format: 'CIDRå½¢å¼ã®èª¬æ˜ï¼š',
                    prefix_note: 'ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹é•·ã®ç¯„å›²ï¼š0-32ï¼ˆIPv4ï¼‰ã€0-128ï¼ˆIPv6ï¼‰',
                    network_address: 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š',
                    broadcast_address: 'ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹ï¼š',
                    subnet_mask: 'ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ï¼š',
                    wildcard_mask: 'ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãƒã‚¹ã‚¯ï¼š',
                    prefix_length: 'ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹é•·ï¼š',
                    total_hosts: 'ç·ãƒ›ã‚¹ãƒˆæ•°ï¼š',
                    usable_hosts: 'ä½¿ç”¨å¯èƒ½ãªãƒ›ã‚¹ãƒˆæ•°ï¼š',
                    first_host: 'æœ€åˆã®ä½¿ç”¨å¯èƒ½ãªãƒ›ã‚¹ãƒˆï¼š',
                    last_host: 'æœ€å¾Œã®ä½¿ç”¨å¯èƒ½ãªãƒ›ã‚¹ãƒˆï¼š',
                    invalid_cidr: 'ç„¡åŠ¹ãªCIDRå½¢å¼',
                    please_enter_cidr: 'CIDRã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'
                },
                'ru': {
                    title: 'ğŸ”— ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ CIDR',
                    input_cidr: 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ CIDR',
                    cidr_note: 'Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ CIDR: IP-Ğ°Ğ´Ñ€ĞµÑ/Ğ´Ğ»Ğ¸Ğ½Ğ° Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ° (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ 10.0.0.0/8)',
                    btn_calculate: 'Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ CIDR',
                    btn_clear: 'ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ',
                    results: 'Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ñ',
                    no_results: 'ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ "Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ CIDR" Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€Ğ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²',
                    common_examples: 'ĞĞ±Ñ‰Ğ¸Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹',
                    example_lan: 'Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğ¹ ÑĞµÑ‚Ğ¸',
                    example_private: 'Ğ§Ğ°ÑÑ‚Ğ½Ñ‹Ğ¹ Ğ°Ğ´Ñ€ĞµÑ ĞºĞ»Ğ°ÑÑĞ° A',
                    example_b_class: 'Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ñ‡Ğ°ÑÑ‚Ğ½Ñ‹Ñ… Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ² ĞºĞ»Ğ°ÑÑĞ° B',
                    example_test: 'Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ ÑĞµĞ³Ğ¼ĞµĞ½Ñ‚ TEST-NET-3',
                    intro_title: 'Ğ CIDR',
                    intro_text: 'CIDR (ĞšĞ»Ğ°ÑÑĞ¾Ğ²Ñ‹Ğ¹ Ğ¼ĞµĞ¶Ğ´Ğ¾Ğ¼ĞµĞ½Ğ½Ğ¾Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ) â€” ÑÑ‚Ğ¾ Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ²Ñ‹Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ IP-Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ² Ğ¸ Ğ°Ğ³Ñ€ĞµĞ³Ğ°Ñ†Ğ¸Ğ¸ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¾Ğ², Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ğ¹ Ğ´Ğ»Ñ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ¾Ğ¼ IP-Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ². Ğ—Ğ°Ğ¿Ğ¸ÑÑŒ CIDR Ğ¸Ğ¼ĞµĞµÑ‚ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ "IP-Ğ°Ğ´Ñ€ĞµÑ/Ğ´Ğ»Ğ¸Ğ½Ğ° Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ°", Ğ³Ğ´Ğµ Ğ´Ğ»Ğ¸Ğ½Ğ° Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ° Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ±Ğ¸Ñ‚Ğ¾Ğ² Ğ² ÑĞµÑ‚ĞµĞ²Ğ¾Ğ¼ Ğ°Ğ´Ñ€ĞµÑĞµ. Ğ­Ñ‚Ğ¾Ñ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸Ñ‚ÑŒ ÑĞµÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ°Ğ´Ñ€ĞµÑ, ÑˆĞ¸Ñ€Ğ¾ĞºĞ¾Ğ²ĞµÑ‰Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ´Ñ€ĞµÑ, Ğ¼Ğ°ÑĞºÑƒ Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸, Ğ´Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… IP-Ğ°Ğ´Ñ€ĞµÑĞ¾Ğ² Ğ¸ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ…Ğ¾ÑÑ‚Ğ¾Ğ² Ğ´Ğ»Ñ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ CIDR.',
                    cidr_format: 'ĞĞ±ÑŠÑÑĞ½ĞµĞ½Ğ¸Ğµ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ° CIDRï¼š',
                    prefix_note: 'Ğ”Ğ¸Ğ°Ğ¿Ğ°Ğ·Ğ¾Ğ½ Ğ´Ğ»Ğ¸Ğ½Ñ‹ Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ°ï¼š0-32 (IPv4), 0-128 (IPv6)',
                    network_address: 'Ğ¡ĞµÑ‚ĞµĞ²Ğ¾Ğ¹ Ğ°Ğ´Ñ€ĞµÑï¼š',
                    broadcast_address: 'Ğ¨Ğ¸Ñ€Ğ¾ĞºĞ¾Ğ²ĞµÑ‰Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ°Ğ´Ñ€ĞµÑï¼š',
                    subnet_mask: 'ĞœĞ°ÑĞºĞ° Ğ¿Ğ¾Ğ´ÑĞµÑ‚Ğ¸ï¼š',
                    wildcard_mask: 'ĞœĞ°ÑĞºĞ° ì™€Ğ°Ğ¹Ğ»Ğ´ĞºĞ°Ñ€Ğ´Ğ°ï¼š',
                    prefix_length: 'Ğ”Ğ»Ğ¸Ğ½Ğ° Ğ¿Ñ€ĞµÑ„Ğ¸ĞºÑĞ°ï¼š',
                    total_hosts: 'ĞĞ±Ñ‰ĞµĞµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ…Ğ¾ÑÑ‚Ğ¾Ğ²ï¼š',
                    usable_hosts: 'Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ñ…Ğ¾ÑÑ‚Ñ‹ï¼š',
                    first_host: 'ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¹ Ñ…Ğ¾ÑÑ‚ï¼š',
                    last_host: 'ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğ¹ Ñ…Ğ¾ÑÑ‚ï¼š',
                    invalid_cidr: 'ĞĞµĞ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ CIDR',
                    please_enter_cidr: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ°Ğ´Ñ€ĞµÑ CIDR'
                }
            },

            init: function() {
                // ä»URLè·å–è¯­è¨€å‚æ•°
                const urlParams = new URLSearchParams(window.location.search);
                const lang = urlParams.get('lang');
                if (lang && this.i18n[lang]) {
                    document.getElementById('lang-selector').value = lang;
                    this.changeLang(false); // ä¸æ›´æ–°URL
                }
            },

            changeLang: function(updateUrl = true) {
                const lang = document.getElementById('lang-selector').value;
                const elements = document.querySelectorAll('[data-i18n]');
                
                elements.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[lang] && this.i18n[lang][key]) {
                        el.textContent = this.i18n[lang][key];
                        // æ›´æ–°å ä½ç¬¦
                        if (el.tagName === 'INPUT' && el.getAttribute('placeholder')) {
                            el.placeholder = this.i18n[lang][key + '_placeholder'] || this.i18n[lang][key];
                        }
                    }
                });
                
                // æ›´æ–°é¡µé¢æ ‡é¢˜
                document.title = this.i18n[lang].title || 'CIDRè®¡ç®—å™¨';
                
                // æ›´æ–°URLå‚æ•°
                if (updateUrl) {
                    const urlParams = new URLSearchParams(window.location.search);
                    urlParams.set('lang', lang);
                    window.history.replaceState(null, '', `${window.location.pathname}?${urlParams.toString()}`);
                }
            },

            loadExample: function(cidr) {
                document.getElementById('cidr_input').value = cidr;
            },

            calculateCIDR: function() {
                const cidr = document.getElementById('cidr_input').value.trim();
                const resultsContainer = document.getElementById('cidr_results');
                const lang = document.getElementById('lang-selector').value;
                
                if (!cidr) {
                    alert(this.i18n[lang].please_enter_cidr || 'è¯·è¾“å…¥CIDRåœ°å€');
                    return;
                }
                
                // è§£æCIDR
                const parsed = this.parseCIDR(cidr);
                if (!parsed) {
                    alert(this.i18n[lang].invalid_cidr || 'æ— æ•ˆçš„CIDRæ ¼å¼');
                    return;
                }
                
                const { ip, prefix, networkAddr, broadcastAddr, subnetMask, wildcardMask, 
                        totalHosts, usableHosts, firstHost, lastHost } = parsed;
                
                // æ˜¾ç¤ºç»“æœ
                resultsContainer.innerHTML = `
                    <div class="result-row">
                        <div class="result-label" data-i18n="network_address">ç½‘ç»œåœ°å€ï¼š</div>
                        <div class="result-value ip-address">${networkAddr}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="broadcast_address">å¹¿æ’­åœ°å€ï¼š</div>
                        <div class="result-value ip-address">${broadcastAddr}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="subnet_mask">å­ç½‘æ©ç ï¼š</div>
                        <div class="result-value ip-address">${subnetMask}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="wildcard_mask">é€šé…ç¬¦æ©ç ï¼š</div>
                        <div class="result-value ip-address">${wildcardMask}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="prefix_length">å‰ç¼€é•¿åº¦ï¼š</div>
                        <div class="result-value">${prefix}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="total_hosts">æ€»ä¸»æœºæ•°ï¼š</div>
                        <div class="result-value">${totalHosts}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="usable_hosts">å¯ç”¨ä¸»æœºæ•°ï¼š</div>
                        <div class="result-value">${usableHosts}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="first_host">ç¬¬ä¸€ä¸ªå¯ç”¨ä¸»æœºï¼š</div>
                        <div class="result-value ip-address">${firstHost}</div>
                    </div>
                    <div class="result-row">
                        <div class="result-label" data-i18n="last_host">æœ€åä¸€ä¸ªå¯ç”¨ä¸»æœºï¼š</div>
                        <div class="result-value ip-address">${lastHost}</div>
                    </div>
                `;
                
                // å›½é™…åŒ–ç»“æœæ ‡ç­¾
                this.updateResultLabels(lang);
            },

            updateResultLabels: function(lang) {
                const labels = document.querySelectorAll('#cidr_results [data-i18n]');
                labels.forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (this.i18n[lang] && this.i18n[lang][key]) {
                        el.textContent = this.i18n[lang][key];
                    }
                });
            },

            // è§£æCIDRå¹¶è®¡ç®—ç›¸å…³å€¼
            parseCIDR: function(cidr) {
                // åŒ¹é…CIDRæ ¼å¼
                const match = cidr.match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})\/(\d{1,2})$/);
                if (!match) return null;
                
                // æå–IPå’Œå‰ç¼€
                const ipParts = match.slice(1, 5).map(Number);
                const prefix = parseInt(match[5], 10);
                
                // éªŒè¯IPå’Œå‰ç¼€æœ‰æ•ˆæ€§
                if (ipParts.some(part => part < 0 || part > 255) || prefix < 0 || prefix > 32) {
                    return null;
                }
                
                // è½¬æ¢ä¸º32ä½æ•´æ•°
                const ipInt = (ipParts[0] << 24) | (ipParts[1] << 16) | (ipParts[2] << 8) | ipParts[3];
                
                // è®¡ç®—å­ç½‘æ©ç 
                const maskInt = prefix === 0 ? 0 : 0xFFFFFFFF << (32 - prefix);
                const wildcardInt = 0xFFFFFFFF ^ maskInt;
                
                // ç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€
                const networkInt = ipInt & maskInt;
                const broadcastInt = networkInt | wildcardInt;
                
                // å¯ç”¨ä¸»æœºèŒƒå›´
                const firstHostInt = networkInt + 1;
                const lastHostInt = broadcastInt - 1;
                const totalHosts = broadcastInt - networkInt + 1;
                const usableHosts = totalHosts >= 2 ? totalHosts - 2 : 0;
                
                return {
                    ip: match[0].split('/')[0],
                    prefix: prefix,
                    networkAddr: this.intToIp(networkInt),
                    broadcastAddr: this.intToIp(broadcastInt),
                    subnetMask: this.intToIp(maskInt),
                    wildcardMask: this.intToIp(wildcardInt),
                    totalHosts: totalHosts,
                    usableHosts: usableHosts,
                    firstHost: totalHosts > 1 ? this.intToIp(firstHostInt) : '-',
                    lastHost: totalHosts > 1 ? this.intToIp(lastHostInt) : '-'
                };
            },

            // å°†32ä½æ•´æ•°è½¬æ¢ä¸ºIPåœ°å€
            intToIp: function(int) {
                return [
                    (int >>> 24) & 0xFF,
                    (int >>> 16) & 0xFF,
                    (int >>> 8) & 0xFF,
                    int & 0xFF
                ].join('.');
            },

            clearAll: function() {
                document.getElementById('cidr_input').value = '';
                document.getElementById('cidr_results').innerHTML = 
                    '<p data-i18n="no_results" class="text-gray-400 italic text-sm">è¯·ç‚¹å‡»"è®¡ç®—CIDR"æŸ¥çœ‹ç»“æœ</p>';
            }
        };

        // åˆå§‹åŒ–å·¥å…·
        document.addEventListener('DOMContentLoaded', () => {
            CIDRTool.init();
        });
    </script>
</body>
</html>