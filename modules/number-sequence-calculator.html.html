<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Sequence Calculator</title>
    
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <meta name="tool-id" content="number_sequence_calc">
    <meta name="category" content="Math">
    <meta name="icon" content="ğŸ”¢">
    
    <!-- é»˜è®¤è‹±æ–‡å†…å®¹ -->
    <meta name="title" content="Number Sequence Calculator">
    <meta name="description" content="Generate arithmetic and geometric sequences with custom start, step/ratio, and length.">
    
    <!-- å¤šè¯­è¨€é…ç½® -->
    <meta name="lang-title-zh-CN" content="æ•°å­—åºåˆ—è®¡ç®—å™¨">
    <meta name="lang-description-zh-CN" content="ç”Ÿæˆç®—æœ¯å’Œå‡ ä½•åºåˆ—ï¼Œå¯è‡ªå®šä¹‰èµ·å§‹å€¼ã€æ­¥é•¿/æ¯”ç‡å’Œé•¿åº¦ã€‚">
    
    <meta name="lang-title-zh-TW" content="æ•¸å­—åºåˆ—è¨ˆç®—å™¨">
    <meta name="lang-description-zh-TW" content="ç”Ÿæˆç®—è¡“å’Œå¹¾ä½•åºåˆ—ï¼Œå¯è‡ªå®šç¾©èµ·å§‹å€¼ã€æ­¥é•·/æ¯”ç‡å’Œé•·åº¦ã€‚">
    
    <meta name="lang-title-ja" content="æ•°åˆ—è¨ˆç®—ãƒ„ãƒ¼ãƒ«">
    <meta name="lang-description-ja" content="ç­‰å·®æ•°åˆ—ã¨ç­‰æ¯”æ•°åˆ—ã‚’ç”Ÿæˆã—ã¾ã™ã€‚é–‹å§‹å€¤ã€ã‚¹ãƒ†ãƒƒãƒ—/æ¯”ç‡ã€é•·ã•ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ã§ã™ã€‚">
    
    <meta name="lang-title-ru" content="ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹">
    <meta name="lang-description-ru" content="Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ°Ñ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¸ Ğ³ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹ Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒÑĞºĞ¸Ğ¼ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ¾Ğ¼, ÑˆĞ°Ğ³Ğ¾Ğ¼/Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸ĞµĞ¼ Ğ¸ Ğ´Ğ»Ğ¸Ğ½Ğ¾Ğ¹.">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { padding: 20px; background: #f0f9ff; font-family: sans-serif; }
        .tool-module { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); max-width: 600px; margin: 0 auto; position: relative; }
        .result-container { word-break: break-all; }
        .formula-box { background: #f8fafc; padding: 10px; border-radius: 6px; font-family: monospace; margin: 10px 0; }
        .sequence-list { background: #e8f4f8; padding: 15px; border-radius: 8px; margin: 15px 0; line-height: 1.6; }
        .stats-box { background: #f0fdf4; padding: 15px; border-radius: 8px; margin: 15px 0; }
        .stat-item { display: flex; justify-content: space-between; padding: 4px 0; border-bottom: 1px solid #dcfce7; }
        .stat-item:last-child { border-bottom: none; }
    </style>
</head>
<body>

    <div class="tool-module active" 
         data-id="number_sequence_calc" 
         data-category="math" 
         data-title="Number Sequence Calculator" 
         data-icon="ğŸ”¢">
        
        <!-- è¯­è¨€é€‰æ‹©å™¨ -->
        <div class="absolute top-4 right-4">
            <select id="sequence-lang" onchange="NumberSequenceCalc.changeLang()" class="text-xs border border-gray-300 rounded p-1 bg-gray-50 text-gray-600 focus:outline-none">
                <option value="en" selected>English</option>
                <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
                <option value="zh-TW">ç¹é«”ä¸­æ–‡</option>
                <option value="ja">æ—¥æœ¬èª</option>
                <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
            </select>
        </div>

        <h2 class="text-xl font-bold mb-4 text-gray-800 border-b pb-2" data-i18n="title">ğŸ”¢ Number Sequence Calculator</h2>
        
        <div class="space-y-4 mb-6">
            <!-- åºåˆ—ç±»å‹é€‰æ‹© -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="sequence_type">Sequence Type</label>
                <div class="radio-group" style="display: flex; flex-wrap: wrap; gap: 10px; margin: 10px 0;">
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <input type="radio" name="sequence-type" id="arithmetic" value="arithmetic" checked>
                        <label for="arithmetic" data-i18n="arithmetic">Arithmetic (Constant Difference)</label>
                    </div>
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <input type="radio" name="sequence-type" id="geometric" value="geometric">
                        <label for="geometric" data-i18n="geometric">Geometric (Constant Ratio)</label>
                    </div>
                </div>
            </div>
            
            <!-- èµ·å§‹å€¼è¾“å…¥ -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="first_term">First Term (aâ‚)</label>
                <input type="number" id="sequence-first" step="any" value="2" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- æ­¥é•¿/æ¯”ç‡è¾“å…¥ -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" id="step-ratio-label" data-i18n="common_difference">Common Difference (d)</label>
                <input type="number" id="sequence-step-ratio" step="any" value="3" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- é¡¹æ•°è¾“å…¥ -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="number_of_terms">Number of Terms (n)</label>
                <input type="number" id="sequence-length" min="1" max="100" value="5" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- å°æ•°ä½æ•° -->
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="decimal_places">Decimal Places</label>
                <input type="number" id="sequence-decimals" min="0" max="10" value="0" class="w-full p-2 border rounded focus:ring-2 focus:ring-blue-500 outline-none">
            </div>
            
            <!-- æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ -->
            <div>
                <label class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-1">
                    <input type="checkbox" id="show-stats" checked class="rounded">
                    <span data-i18n="show_stats">Show Sequence Statistics</span>
                </label>
            </div>
            
            <!-- è®¡ç®—æŒ‰é’® -->
            <button onclick="NumberSequenceCalc.calculate()" class="w-full bg-green-600 text-white py-3 rounded font-bold hover:bg-green-700 transition" data-i18n="calculate">Generate Sequence</button>
        </div>

        <!-- é”™è¯¯æç¤º -->
        <div id="sequence-error" class="text-sm text-red-600 mt-2 hidden mb-4"></div>
        
        <!-- ç»“æœå±•ç¤º -->
        <div class="bg-blue-50 p-6 rounded-lg border border-blue-100">
            <div class="text-sm text-gray-500 mb-2" data-i18n="sequence">Sequence</div>
            <div id="sequence-result" class="text-lg text-blue-800 min-h-[60px] sequence-list">--</div>
            
            <!-- å…¬å¼å±•ç¤º -->
            <div id="sequence-formula" class="formula-box mt-4"></div>
            
            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div id="stats-container" class="stats-box">
                <div class="text-sm text-gray-500 mb-2" data-i18n="statistics">Sequence Statistics:</div>
                <div class="grid grid-cols-2 gap-2">
                    <div class="stat-item">
                        <span data-i18n="sum" class="text-gray-600">Sum:</span>
                        <span id="sequence-sum" class="font-medium">--</span>
                    </div>
                    <div class="stat-item">
                        <span data-i18n="last_term" class="text-gray-600">Last Term:</span>
                        <span id="sequence-last" class="font-medium">--</span>
                    </div>
                    <div class="stat-item">
                        <span data-i18n="average" class="text-gray-600">Average:</span>
                        <span id="sequence-average" class="font-medium">--</span>
                    </div>
                    <div class="stat-item">
                        <span id="special-stat-label" data-i18n="common_difference" class="text-gray-600">Common Difference:</span>
                        <span id="special-stat-value" class="font-medium">--</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¿«é€Ÿç¤ºä¾‹ -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="examples">Quick Examples:</p>
            <div class="grid grid-cols-2 gap-2 mt-2">
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="NumberSequenceCalc.loadExample('arithmetic', 2, 3, 5, 0)">Arithmetic: 2,5,8,11,14</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="NumberSequenceCalc.loadExample('geometric', 2, 3, 5, 0)">Geometric: 2,6,18,54,162</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="NumberSequenceCalc.loadExample('arithmetic', 10, -2, 6, 0)">Arithmetic: 10,8,6,4,2,0</div>
                <div class="p-2 bg-white rounded text-center cursor-pointer hover:bg-gray-100" onclick="NumberSequenceCalc.loadExample('geometric', 1, 0.5, 5, 2)">Geometric: 1,0.5,0.25,0.12,0.06</div>
            </div>
        </div>

        <!-- è¯´æ˜ä¿¡æ¯ -->
        <div class="mt-6 p-4 bg-gray-50 rounded-lg text-sm text-gray-600">
            <p data-i18n="notes">Notes:</p>
            <ul class="list-disc list-inside mt-2 space-y-1" data-i18n="notes_list">
                <li>Arithmetic sequence: each term increases by a constant difference (aâ‚™ = aâ‚ + (n-1)d)</li>
                <li>Geometric sequence: each term is multiplied by a constant ratio (aâ‚™ = aâ‚ Ã— r^(n-1))</li>
                <li>Maximum number of terms is 100</li>
                <li>For geometric sequences, a ratio of 0 will result in all subsequent terms being 0</li>
            </ul>
        </div>
    </div>

    <script>
        const NumberSequenceCalc = {
            i18n: {
                'en': {
                    title: 'ğŸ”¢ Number Sequence Calculator',
                    sequence_type: 'Sequence Type',
                    arithmetic: 'Arithmetic (Constant Difference)',
                    geometric: 'Geometric (Constant Ratio)',
                    first_term: 'First Term (aâ‚)',
                    common_difference: 'Common Difference (d)',
                    common_ratio: 'Common Ratio (r)',
                    number_of_terms: 'Number of Terms (n)',
                    decimal_places: 'Decimal Places',
                    show_stats: 'Show Sequence Statistics',
                    calculate: 'Generate Sequence',
                    sequence: 'Sequence',
                    statistics: 'Sequence Statistics:',
                    sum: 'Sum',
                    last_term: 'Last Term',
                    average: 'Average',
                    examples: 'Quick Examples:',
                    notes: 'Notes:',
                    notes_list: `
                        <li>Arithmetic sequence: each term increases by a constant difference (aâ‚™ = aâ‚ + (n-1)d)</li>
                        <li>Geometric sequence: each term is multiplied by a constant ratio (aâ‚™ = aâ‚ Ã— r^(n-1))</li>
                        <li>Maximum number of terms is 100</li>
                        <li>For geometric sequences, a ratio of 0 will result in all subsequent terms being 0</li>
                    `,
                    err_invalid_terms: 'Please enter a valid number of terms (1-100)',
                    err_invalid_decimals: 'Please enter valid decimal places (0-10)',
                    formula_arithmetic: 'Arithmetic: aâ‚™ = aâ‚ + (n-1)d = {first} + (n-1)Ã—{step} â†’ {terms}',
                    formula_geometric: 'Geometric: aâ‚™ = aâ‚ Ã— r^(n-1) = {first} Ã— {step}^(n-1) â†’ {terms}'
                },
                'zh-CN': {
                    title: 'ğŸ”¢ æ•°å­—åºåˆ—è®¡ç®—å™¨',
                    sequence_type: 'åºåˆ—ç±»å‹',
                    arithmetic: 'ç®—æœ¯åºåˆ—ï¼ˆå¸¸æ•°å·®ï¼‰',
                    geometric: 'å‡ ä½•åºåˆ—ï¼ˆå¸¸æ•°æ¯”ï¼‰',
                    first_term: 'é¦–é¡¹ (aâ‚)',
                    common_difference: 'å…¬å·® (d)',
                    common_ratio: 'å…¬æ¯” (r)',
                    number_of_terms: 'é¡¹æ•° (n)',
                    decimal_places: 'å°æ•°ä½æ•°',
                    show_stats: 'æ˜¾ç¤ºåºåˆ—ç»Ÿè®¡ä¿¡æ¯',
                    calculate: 'ç”Ÿæˆåºåˆ—',
                    sequence: 'åºåˆ—',
                    statistics: 'åºåˆ—ç»Ÿè®¡ä¿¡æ¯ï¼š',
                    sum: 'æ€»å’Œ',
                    last_term: 'æœ«é¡¹',
                    average: 'å¹³å‡å€¼',
                    examples: 'å¿«é€Ÿç¤ºä¾‹ï¼š',
                    notes: 'æ³¨æ„ï¼š',
                    notes_list: `
                        <li>ç®—æœ¯åºåˆ—ï¼šæ¯ä¸€é¡¹å¢åŠ ä¸€ä¸ªå¸¸æ•°å·®ï¼ˆaâ‚™ = aâ‚ + (n-1)dï¼‰</li>
                        <li>å‡ ä½•åºåˆ—ï¼šæ¯ä¸€é¡¹ä¹˜ä»¥ä¸€ä¸ªå¸¸æ•°æ¯”ï¼ˆaâ‚™ = aâ‚ Ã— r^(n-1)ï¼‰</li>
                        <li>æœ€å¤§é¡¹æ•°ä¸º100</li>
                        <li>å¯¹äºå‡ ä½•åºåˆ—ï¼Œæ¯”ç‡ä¸º0å°†å¯¼è‡´æ‰€æœ‰åç»­é¡¹éƒ½ä¸º0</li>
                    `,
                    err_invalid_terms: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é¡¹æ•°ï¼ˆ1-100ï¼‰',
                    err_invalid_decimals: 'è¯·è¾“å…¥æœ‰æ•ˆçš„å°æ•°ä½æ•°ï¼ˆ0-10ï¼‰',
                    formula_arithmetic: 'ç®—æœ¯ï¼šaâ‚™ = aâ‚ + (n-1)d = {first} + (n-1)Ã—{step} â†’ {terms}',
                    formula_geometric: 'å‡ ä½•ï¼šaâ‚™ = aâ‚ Ã— r^(n-1) = {first} Ã— {step}^(n-1) â†’ {terms}'
                },
                'zh-TW': {
                    title: 'ğŸ”¢ æ•¸å­—åºåˆ—è¨ˆç®—å™¨',
                    sequence_type: 'åºåˆ—é¡å‹',
                    arithmetic: 'ç®—è¡“åºåˆ—ï¼ˆå¸¸æ•¸å·®ï¼‰',
                    geometric: 'å¹¾ä½•åºåˆ—ï¼ˆå¸¸æ•¸æ¯”ï¼‰',
                    first_term: 'é¦–é … (aâ‚)',
                    common_difference: 'å…¬å·® (d)',
                    common_ratio: 'å…¬æ¯” (r)',
                    number_of_terms: 'é …æ•¸ (n)',
                    decimal_places: 'å°æ•¸ä½æ•¸',
                    show_stats: 'é¡¯ç¤ºåºåˆ—çµ±è¨ˆä¿¡æ¯',
                    calculate: 'ç”Ÿæˆåºåˆ—',
                    sequence: 'åºåˆ—',
                    statistics: 'åºåˆ—çµ±è¨ˆä¿¡æ¯ï¼š',
                    sum: 'ç¸½å’Œ',
                    last_term: 'æœ«é …',
                    average: 'å¹³å‡å€¼',
                    examples: 'å¿«é€Ÿç¤ºä¾‹ï¼š',
                    notes: 'æ³¨æ„ï¼š',
                    notes_list: `
                        <li>ç®—è¡“åºåˆ—ï¼šæ¯ä¸€é …å¢åŠ ä¸€å€‹å¸¸æ•¸å·®ï¼ˆaâ‚™ = aâ‚ + (n-1)dï¼‰</li>
                        <li>å¹¾ä½•åºåˆ—ï¼šæ¯ä¸€é …ä¹˜ä»¥ä¸€å€‹å¸¸æ•¸æ¯”ï¼ˆaâ‚™ = aâ‚ Ã— r^(n-1)ï¼‰</li>
                        <li>æœ€å¤§é …æ•¸ç‚º100</li>
                        <li>å°æ–¼å¹¾ä½•åºåˆ—ï¼Œæ¯”ç‡ç‚º0å°‡å°è‡´æ‰€æœ‰å¾ŒçºŒé …éƒ½ç‚º0</li>
                    `,
                    err_invalid_terms: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„é …æ•¸ï¼ˆ1-100ï¼‰',
                    err_invalid_decimals: 'è«‹è¼¸å…¥æœ‰æ•ˆçš„å°æ•¸ä½æ•¸ï¼ˆ0-10ï¼‰',
                    formula_arithmetic: 'ç®—è¡“ï¼šaâ‚™ = aâ‚ + (n-1)d = {first} + (n-1)Ã—{step} â†’ {terms}',
                    formula_geometric: 'å¹¾ä½•ï¼šaâ‚™ = aâ‚ Ã— r^(n-1) = {first} Ã— {step}^(n-1) â†’ {terms}'
                },
                'ja': {
                    title: 'ğŸ”¢ æ•°åˆ—è¨ˆç®—ãƒ„ãƒ¼ãƒ«',
                    sequence_type: 'æ•°åˆ—ã®ç¨®é¡',
                    arithmetic: 'ç­‰å·®æ•°åˆ—ï¼ˆå®šå·®ï¼‰',
                    geometric: 'ç­‰æ¯”æ•°åˆ—ï¼ˆå®šæ¯”ï¼‰',
                    first_term: 'åˆé … (aâ‚)',
                    common_difference: 'å…¬å·® (d)',
                    common_ratio: 'å…¬æ¯” (r)',
                    number_of_terms: 'é …æ•° (n)',
                    decimal_places: 'å°æ•°æ¡æ•°',
                    show_stats: 'æ•°åˆ—çµ±è¨ˆã‚’è¡¨ç¤º',
                    calculate: 'æ•°åˆ—ã‚’ç”Ÿæˆ',
                    sequence: 'æ•°åˆ—',
                    statistics: 'æ•°åˆ—çµ±è¨ˆï¼š',
                    sum: 'åˆè¨ˆ',
                    last_term: 'æœ€çµ‚é …',
                    average: 'å¹³å‡å€¤',
                    examples: 'ã‚¯ã‚¤ãƒƒã‚¯ã‚µãƒ³ãƒ—ãƒ«ï¼š',
                    notes: 'æ³¨æ„ï¼š',
                    notes_list: `
                        <li>ç­‰å·®æ•°åˆ—ï¼šå„é …ã¯å®šå·®ã§å¢—åŠ ã—ã¾ã™ï¼ˆaâ‚™ = aâ‚ + (n-1)dï¼‰</li>
                        <li>ç­‰æ¯”æ•°åˆ—ï¼šå„é …ã¯å®šæ¯”ã§ä¹—ç®—ã•ã‚Œã¾ã™ï¼ˆaâ‚™ = aâ‚ Ã— r^(n-1)ï¼‰</li>
                        <li>æœ€å¤§é …æ•°ã¯100ã§ã™</li>
                        <li>ç­‰æ¯”æ•°åˆ—ã®å ´åˆã€æ¯”ãŒ0ã®ã¨ãã¯ãã‚Œä»¥é™ã®é …ã¯ã™ã¹ã¦0ã«ãªã‚Šã¾ã™</li>
                    `,
                    err_invalid_terms: 'æœ‰åŠ¹ãªé …æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ1-100ï¼‰',
                    err_invalid_decimals: 'æœ‰åŠ¹ãªå°æ•°æ¡æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆ0-10ï¼‰',
                    formula_arithmetic: 'ç­‰å·®æ•°åˆ—ï¼šaâ‚™ = aâ‚ + (n-1)d = {first} + (n-1)Ã—{step} â†’ {terms}',
                    formula_geometric: 'ç­‰æ¯”æ•°åˆ—ï¼šaâ‚™ = aâ‚ Ã— r^(n-1) = {first} Ã— {step}^(n-1) â†’ {terms}'
                },
                'ru': {
                    title: 'ğŸ”¢ ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ñ‹Ñ… Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹',
                    sequence_type: 'Ğ¢Ğ¸Ğ¿ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸',
                    arithmetic: 'ĞÑ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ (Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ°Ñ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°)',
                    geometric: 'Ğ“ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ°Ñ (Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğµ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ)',
                    first_term: 'ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ñ‡Ğ»ĞµĞ½ (aâ‚)',
                    common_difference: 'ĞĞ±Ñ‰Ğ°Ñ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ° (d)',
                    common_ratio: 'ĞĞ±Ñ‰ĞµĞµ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ (r)',
                    number_of_terms: 'ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‡Ğ»ĞµĞ½Ğ¾Ğ² (n)',
                    decimal_places: 'Ğ”ĞµÑÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ·Ğ½Ğ°ĞºĞ¸',
                    show_stats: 'ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸',
                    calculate: 'Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ',
                    sequence: 'ĞŸĞ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ',
                    statistics: 'Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸:',
                    sum: 'Ğ¡ÑƒĞ¼Ğ¼Ğ°',
                    last_term: 'ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ñ‡Ğ»ĞµĞ½',
                    average: 'Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ',
                    examples: 'Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ñ‹:',
                    notes: 'ĞŸÑ€Ğ¸Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ:',
                    notes_list: `
                        <li>ĞÑ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‡Ğ»ĞµĞ½ ÑƒĞ²ĞµĞ»Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½ÑƒÑ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñƒ (aâ‚™ = aâ‚ + (n-1)d)</li>
                        <li>Ğ“ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ: ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‡Ğ»ĞµĞ½ ÑƒĞ¼Ğ½Ğ¾Ğ¶Ğ°ĞµÑ‚ÑÑ Ğ½Ğ° Ğ¿Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ½Ğ¾Ğµ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ (aâ‚™ = aâ‚ Ã— r^(n-1))</li>
                        <li>ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‡Ğ»ĞµĞ½Ğ¾Ğ² - 100</li>
                        <li>Ğ”Ğ»Ñ Ğ³ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ĞµĞ¹ Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ 0 Ğ¿Ñ€Ğ¸Ğ²ĞµĞ´ĞµÑ‚ Ğº Ñ‚Ğ¾Ğ¼Ñƒ, Ñ‡Ñ‚Ğ¾ Ğ²ÑĞµ Ğ¿Ğ¾ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ Ñ‡Ğ»ĞµĞ½Ñ‹ Ğ±ÑƒĞ´ÑƒÑ‚ Ñ€Ğ°Ğ²Ğ½Ñ‹ 0</li>
                    `,
                    err_invalid_terms: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ‡Ğ»ĞµĞ½Ğ¾Ğ² (1-100)',
                    err_invalid_decimals: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ğ¼Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ´ĞµÑÑÑ‚Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ·Ğ½Ğ°ĞºĞ¾Ğ² (0-10)',
                    formula_arithmetic: 'ĞÑ€Ğ¸Ñ„Ğ¼ĞµÑ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ: aâ‚™ = aâ‚ + (n-1)d = {first} + (n-1)Ã—{step} â†’ {terms}',
                    formula_geometric: 'Ğ“ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ‡ĞµÑĞºĞ°Ñ: aâ‚™ = aâ‚ Ã— r^(n-1) = {first} Ã— {step}^(n-1) â†’ {terms}'
                }
            },

            init: () => {
                // è®¾ç½®é»˜è®¤å€¼
                document.getElementById('sequence-first').value = '2';
                document.getElementById('sequence-step-ratio').value = '3';
                document.getElementById('sequence-length').value = '5';
                document.getElementById('sequence-decimals').value = '0';
                
                // ç›‘å¬åºåˆ—ç±»å‹åˆ‡æ¢
                document.querySelectorAll('input[name="sequence-type"]').forEach(radio => {
                    radio.addEventListener('change', NumberSequenceCalc.toggleSequenceType);
                });
                
                // ç›‘å¬ç»Ÿè®¡ä¿¡æ¯æ˜¾ç¤ºåˆ‡æ¢
                document.getElementById('show-stats').addEventListener('change', () => {
                    const statsContainer = document.getElementById('stats-container');
                    statsContainer.style.display = document.getElementById('show-stats').checked ? 'block' : 'none';
                });
                
                // åˆå§‹è®¾ç½®
                NumberSequenceCalc.toggleSequenceType();
            },

            toggleSequenceType: () => {
                const isArithmetic = document.getElementById('arithmetic').checked;
                const label = document.getElementById('step-ratio-label');
                const specialStatLabel = document.getElementById('special-stat-label');
                
                // æ›´æ–°æ ‡ç­¾æ–‡æœ¬
                if (isArithmetic) {
                    label.setAttribute('data-i18n', 'common_difference');
                    specialStatLabel.setAttribute('data-i18n', 'common_difference');
                } else {
                    label.setAttribute('data-i18n', 'common_ratio');
                    specialStatLabel.setAttribute('data-i18n', 'common_ratio');
                }
                
                // æ›´æ–°å½“å‰è¯­è¨€çš„æ–‡æœ¬
                const currentLang = document.getElementById('sequence-lang').value;
                NumberSequenceCalc.updateLabels(currentLang);
                
                // æ¸…ç©ºé”™è¯¯æç¤º
                NumberSequenceCalc.clearError();
            },

            updateLabels: (lang) => {
                const texts = NumberSequenceCalc.i18n[lang];
                const label = document.getElementById('step-ratio-label');
                const specialStatLabel = document.getElementById('special-stat-label');
                
                label.innerText = texts[label.getAttribute('data-i18n')];
                specialStatLabel.innerText = texts[specialStatLabel.getAttribute('data-i18n')];
            },

            loadExample: (type, first, stepRatio, length, decimals) => {
                document.getElementById('sequence-first').value = first;
                document.getElementById('sequence-step-ratio').value = stepRatio;
                document.getElementById('sequence-length').value = length;
                document.getElementById('sequence-decimals').value = decimals;
                
                if (type === 'arithmetic') {
                    document.getElementById('arithmetic').checked = true;
                } else {
                    document.getElementById('geometric').checked = true;
                }
                
                NumberSequenceCalc.toggleSequenceType();
                NumberSequenceCalc.calculate();
            },

            changeLang: () => {
                const lang = document.getElementById('sequence-lang').value;
                const texts = NumberSequenceCalc.i18n[lang];
                
                // æ›´æ–°æ™®é€šæ–‡æœ¬
                document.querySelectorAll('[data-id="number_sequence_calc"] [data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if (texts[key]) {
                        if (key === 'notes_list') {
                            el.innerHTML = texts[key];
                        } else {
                            el.innerText = texts[key];
                        }
                    }
                });
                
                // æ›´æ–°å•é€‰æ¡†æ ‡ç­¾
                document.querySelectorAll('label[for="arithmetic"], label[for="geometric"]').forEach(label => {
                    const key = label.getAttribute('data-i18n');
                    if (texts[key]) label.innerText = texts[key];
                });
                
                // æ›´æ–°ç‰¹æ®Šæ ‡ç­¾
                NumberSequenceCalc.updateLabels(lang);
            },

            showError: (message) => {
                const errorEl = document.getElementById('sequence-error');
                errorEl.innerText = message;
                errorEl.classList.remove('hidden');
            },

            clearError: () => {
                const errorEl = document.getElementById('sequence-error');
                errorEl.classList.add('hidden');
                errorEl.innerText = '';
            },

            calculate: () => {
                const lang = document.getElementById('sequence-lang').value;
                const texts = NumberSequenceCalc.i18n[lang];
                
                NumberSequenceCalc.clearError();
                
                try {
                    // è·å–è¾“å…¥å€¼
                    const firstTerm = parseFloat(document.getElementById('sequence-first').value);
                    const stepRatio = parseFloat(document.getElementById('sequence-step-ratio').value);
                    const length = parseInt(document.getElementById('sequence-length').value);
                    const decimals = parseInt(document.getElementById('sequence-decimals').value);
                    const isArithmetic = document.getElementById('arithmetic').checked;
                    
                    // éªŒè¯è¾“å…¥
                    if (isNaN(length) || length < 1 || length > 100) {
                        throw new Error(texts.err_invalid_terms);
                    }
                    
                    if (isNaN(decimals) || decimals < 0 || decimals > 10) {
                        throw new Error(texts.err_invalid_decimals);
                    }
                    
                    // ç”Ÿæˆåºåˆ—
                    const sequence = [];
                    let current = firstTerm;
                    
                    for (let i = 0; i < length; i++) {
                        // å››èˆäº”å…¥åˆ°æŒ‡å®šå°æ•°ä½æ•°
                        const rounded = parseFloat(current.toFixed(decimals));
                        sequence.push(rounded);
                        
                        // è®¡ç®—ä¸‹ä¸€é¡¹
                        if (isArithmetic) {
                            current += stepRatio;
                        } else {
                            current *= stepRatio;
                        }
                    }
                    
                    // è®¡ç®—ç»Ÿè®¡ä¿¡æ¯
                    const sum = sequence.reduce((acc, val) => acc + val, 0);
                    const lastTerm = sequence[sequence.length - 1];
                    const average = sum / sequence.length;
                    
                    // æ˜¾ç¤ºåºåˆ—
                    const resultsEl = document.getElementById('sequence-result');
                    resultsEl.innerText = sequence.join(', ');
                    
                    // æ˜¾ç¤ºå…¬å¼
                    const formulaEl = document.getElementById('sequence-formula');
                    const termsPreview = sequence.slice(0, 3).join(', ') + (sequence.length > 3 ? ', ...' : '');
                    
                    let formula;
                    if (isArithmetic) {
                        formula = texts.formula_arithmetic
                            .replace('{first}', firstTerm)
                            .replace('{step}', stepRatio)
                            .replace('{terms}', termsPreview);
                    } else {
                        formula = texts.formula_geometric
                            .replace('{first}', firstTerm)
                            .replace('{step}', stepRatio)
                            .replace('{terms}', termsPreview);
                    }
                    formulaEl.innerText = formula;
                    
                    // æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯
                    document.getElementById('sequence-sum').innerText = sum.toFixed(decimals);
                    document.getElementById('sequence-last').innerText = lastTerm.toFixed(decimals);
                    document.getElementById('sequence-average').innerText = average.toFixed(decimals);
                    document.getElementById('special-stat-value').innerText = stepRatio.toFixed(decimals);
                    
                } catch (e) {
                    NumberSequenceCalc.showError(e.message);
                    document.getElementById('sequence-result').innerText = '--';
                    document.getElementById('sequence-formula').innerText = '';
                    document.getElementById('sequence-sum').innerText = '--';
                    document.getElementById('sequence-last').innerText = '--';
                    document.getElementById('sequence-average').innerText = '--';
                    document.getElementById('special-stat-value').innerText = '--';
                }
            }
        };

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', NumberSequenceCalc.init);
        
        // è‡ªåŠ¨åŒ¹é…æµè§ˆå™¨è¯­è¨€
        document.addEventListener('DOMContentLoaded', () => {
            const userLang = navigator.language || navigator.userLanguage;
            let targetLang = 'en'; 
            if (userLang.startsWith('zh')) {
                targetLang = userLang.includes('TW') || userLang.includes('HK') ? 'zh-TW' : 'zh-CN';
            } else if (userLang.startsWith('ja')) {
                targetLang = 'ja';
            } else if (userLang.startsWith('ru')) {
                targetLang = 'ru';
            }
            
            if (targetLang !== 'en') {
                const langSelect = document.getElementById('sequence-lang');
                if(langSelect) {
                    langSelect.value = targetLang;
                    NumberSequenceCalc.changeLang();
                }
            }
        });
    </script>

</body>

</html>
