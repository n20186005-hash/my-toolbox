<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Category Meta Tag -->
    <meta name="category" content="engineering">
    <meta name="icon" content="⚡">
    <meta name="description" content="Electrical Power Calculator - Calculate Power, Voltage, Current, and Resistance using Ohm's Law.">
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><path d=%22M50,10 L60,40 L90,40 L50,90 L40,60 L10,60 Z%22 fill=%22none%22 stroke=%22%23f59e0b%22 stroke-width=%225%22/></svg>">
    
    <title>电功率计算器 | Power Calc Pro</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: { DEFAULT: '#f59e0b', hover: '#d97706' }, /* Amber */
                        secondary: { DEFAULT: '#3b82f6', hover: '#2563eb' }, /* Blue */
                        bg: { light: '#fffbeb', dark: '#0f172a' }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .scrollbar-hide::-webkit-scrollbar { display: none; }
            .glass {
                @apply bg-white/90 dark:bg-slate-800/90 backdrop-blur-lg border border-amber-200 dark:border-slate-700;
            }
            .input-group {
                @apply relative flex items-center transition-all;
            }
            .input-field {
                @apply w-full pl-10 pr-12 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 text-slate-800 dark:text-white focus:ring-4 focus:ring-primary/20 focus:border-primary outline-none transition-all text-lg font-mono placeholder:text-slate-400;
            }
            .input-field:read-only {
                @apply bg-slate-50 dark:bg-slate-800 text-slate-500 border-dashed cursor-not-allowed;
            }
            .result-highlight {
                @apply bg-amber-50 dark:bg-amber-900/20 border-amber-400 dark:border-amber-500 text-amber-700 dark:text-amber-300 font-bold !important;
            }
            .input-icon {
                @apply absolute left-3 text-slate-400 text-lg pointer-events-none transition-colors;
            }
            .unit-label {
                @apply absolute right-4 text-slate-400 text-sm font-bold pointer-events-none;
            }
            .btn-primary {
                @apply bg-gradient-to-r from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-amber-500/20 transition-all active:scale-95 flex items-center justify-center gap-2 text-base;
            }
            .btn-secondary {
                @apply bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 font-medium py-3 px-6 rounded-xl transition-all text-base;
            }
        }
    </style>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9279583389810634"
     crossorigin="anonymous"></script>

</head>
<body class="bg-bg-light dark:bg-bg-dark min-h-screen font-sans text-slate-800 dark:text-slate-200 transition-colors duration-300 overflow-x-hidden">

    <!-- Header -->
    <header class="bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-500 to-orange-600 text-white flex items-center justify-center font-bold text-xs shadow-md">
                    <i class="fa fa-bolt"></i>
                </div>
                <div>
                    <h1 class="text-lg font-bold text-slate-900 dark:text-white leading-tight" data-i18n="title">电功率计算器</h1>
                    <p class="text-[10px] text-slate-500 font-medium" data-i18n="subtitle">纯直流电阻电路欧姆定律计算</p>
                </div>
            </div>
            
            <div class="flex items-center gap-2">
                <select id="lang-selector" class="bg-slate-100 dark:bg-slate-700 text-xs font-bold px-2 py-1.5 rounded-lg border-none focus:ring-0 cursor-pointer text-slate-600 dark:text-slate-300">
                    <option value="zh-CN">中文</option>
                    <option value="en">EN</option>
                </select>
                <button id="mode-toggle" class="w-8 h-8 rounded-lg bg-slate-100 dark:bg-slate-700 flex items-center justify-center text-slate-500 hover:text-primary transition-colors">
                    <i class="fa fa-moon-o dark:hidden"></i>
                    <i class="fa fa-sun-o hidden dark:inline"></i>
                </button>
            </div>
        </div>
    </header>

    <div class="container mx-auto px-4 py-6 max-w-6xl grid lg:grid-cols-12 gap-6">
        
        <!-- Input Panel -->
        <div class="lg:col-span-5 space-y-4">
            <div class="glass rounded-2xl p-6 shadow-sm space-y-5 border-t-4 border-t-amber-500">
                
                <div>
                    <h3 class="text-sm font-bold text-slate-500 uppercase mb-1 flex items-center gap-2">
                        <i class="fa fa-keyboard-o"></i> <span data-i18n="h_inputs">参数输入</span>
                    </h3>
                    <p class="text-xs text-slate-400 mb-4" data-i18n="p_hint">请输入任意两个值，另外两个将自动计算。</p>
                </div>

                <div class="space-y-4">
                    <!-- Power P -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">功率 (P)</label>
                        <div class="input-group">
                            <i class="fa fa-lightbulb-o input-icon text-amber-500"></i>
                            <input type="number" id="inp-p" class="input-field" placeholder="-" oninput="App.checkInput('p')">
                            <span class="unit-label">W (瓦特)</span>
                        </div>
                    </div>
                    
                    <!-- Voltage V -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">电压 (V)</label>
                        <div class="input-group">
                            <i class="fa fa-bolt input-icon text-blue-500"></i>
                            <input type="number" id="inp-v" class="input-field" placeholder="-" oninput="App.checkInput('v')">
                            <span class="unit-label">V (伏特)</span>
                        </div>
                    </div>

                    <!-- Current I -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">电流 (I)</label>
                        <div class="input-group">
                            <i class="fa fa-exchange input-icon text-emerald-500"></i>
                            <input type="number" id="inp-i" class="input-field" placeholder="-" oninput="App.checkInput('i')">
                            <span class="unit-label">A (安培)</span>
                        </div>
                    </div>

                    <!-- Resistance R -->
                    <div>
                        <label class="block text-xs font-bold text-slate-500 mb-1">电阻 (R)</label>
                        <div class="input-group">
                            <i class="fa fa-microchip input-icon text-rose-500"></i>
                            <input type="number" id="inp-r" class="input-field" placeholder="-" oninput="App.checkInput('r')">
                            <span class="unit-label">Ω (欧姆)</span>
                        </div>
                    </div>
                </div>

                <div class="pt-2 flex gap-3">
                    <button onclick="App.calculate()" class="btn-primary flex-1" id="btn-calc" disabled>
                        <span data-i18n="btn_calc">计算</span> (0/2)
                    </button>
                    <button onclick="App.reset()" class="btn-secondary text-red-500 hover:text-red-600">
                        <i class="fa fa-refresh"></i> <span data-i18n="btn_clear">清空</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Output / Diagram Panel -->
        <div class="lg:col-span-7 space-y-6">
            
            <!-- Wheel Diagram -->
            <div class="glass rounded-2xl shadow-sm border-t-4 border-t-blue-500 overflow-hidden flex flex-col h-full items-center justify-center p-6 relative">
                
                <div class="absolute top-4 left-4">
                    <h3 class="text-sm font-bold text-slate-500 uppercase flex items-center gap-2">
                        <i class="fa fa-pie-chart"></i> <span data-i18n="h_formula_wheel">欧姆定律公式轮</span>
                    </h3>
                </div>

                <!-- SVG Formula Wheel -->
                <div class="w-full max-w-[400px] aspect-square relative">
                    <svg viewBox="0 0 400 400" class="w-full h-full drop-shadow-xl">
                        <!-- Center Hub -->
                        <circle cx="200" cy="200" r="40" class="fill-slate-800 dark:fill-slate-100" />
                        
                        <!-- 4 Quadrants -->
                        <!-- P (Top) -->
                        <path d="M200,200 L341,59 A200,200 0 0,0 59,59 Z" class="fill-amber-100 dark:fill-amber-900/30 stroke-white dark:stroke-slate-800 stroke-2" />
                        <text x="200" y="100" text-anchor="middle" class="text-4xl font-bold fill-amber-600 dark:fill-amber-400">P</text>
                        <!-- P formulas -->
                        <text x="130" y="130" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">V²/R</text>
                        <text x="200" y="60" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">V×I</text>
                        <text x="270" y="130" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">I²×R</text>

                        <!-- I (Right) -->
                        <path d="M200,200 L341,341 A200,200 0 0,0 341,59 Z" class="fill-emerald-100 dark:fill-emerald-900/30 stroke-white dark:stroke-slate-800 stroke-2" />
                        <text x="300" y="210" text-anchor="middle" class="text-4xl font-bold fill-emerald-600 dark:fill-emerald-400">I</text>
                        <!-- I formulas -->
                        <text x="270" y="160" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">√(P/R)</text>
                        <text x="340" y="205" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">P/V</text>
                        <text x="270" y="250" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">V/R</text>

                        <!-- R (Bottom) -->
                        <path d="M200,200 L59,341 A200,200 0 0,0 341,341 Z" class="fill-rose-100 dark:fill-rose-900/30 stroke-white dark:stroke-slate-800 stroke-2" />
                        <text x="200" y="320" text-anchor="middle" class="text-4xl font-bold fill-rose-600 dark:text-rose-400">R</text>
                        <!-- R formulas -->
                        <text x="270" y="290" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">V/I</text>
                        <text x="200" y="360" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">V²/P</text>
                        <text x="130" y="290" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">P/I²</text>

                        <!-- V (Left) -->
                        <path d="M200,200 L59,59 A200,200 0 0,0 59,341 Z" class="fill-blue-100 dark:fill-blue-900/30 stroke-white dark:stroke-slate-800 stroke-2" />
                        <text x="100" y="210" text-anchor="middle" class="text-4xl font-bold fill-blue-600 dark:fill-blue-400">V</text>
                        <!-- V formulas -->
                        <text x="130" y="250" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">I×R</text>
                        <text x="60" y="205" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">P/I</text>
                        <text x="130" y="160" text-anchor="middle" class="text-xs fill-slate-600 dark:fill-slate-400 font-mono">√(P×R)</text>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Guide Section -->
    <section class="container mx-auto px-4 mb-12 max-w-6xl">
        <div class="glass rounded-2xl p-8 shadow-xl">
            <h2 class="text-xl font-bold text-slate-900 dark:text-white mb-6 flex items-center gap-2">
                <i class="fa fa-book text-primary"></i> <span data-i18n="guide_title">常用公式与实例</span>
            </h2>
            
            <div class="grid md:grid-cols-2 gap-12">
                <div class="space-y-6 text-slate-600 dark:text-slate-300 leading-relaxed text-sm">
                    <div class="bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 p-4 rounded-r-lg">
                        <h3 class="font-bold text-amber-800 dark:text-amber-200 mb-2 text-sm uppercase" data-i18n="h_formula">计算公式</h3>
                        <ul class="space-y-2 font-mono text-xs md:text-sm text-amber-900 dark:text-amber-100">
                            <li data-i18n="f1"><span class="font-bold">1. </span> 电压 V = R × I</li>
                            <li data-i18n="f2"><span class="font-bold">2. </span> 电压 V = P ÷ I</li>
                            <li data-i18n="f3"><span class="font-bold">3. </span> 功率 P = V × I</li>
                            <li data-i18n="f4"><span class="font-bold">4. </span> 电流 I = P ÷ V</li>
                            <li data-i18n="f5"><span class="font-bold">5. </span> 功率 P = V² ÷ R</li>
                        </ul>
                    </div>
                </div>

                <div class="space-y-6 text-slate-600 dark:text-slate-300 leading-relaxed text-sm">
                    <div class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r-lg">
                        <h3 class="font-bold text-blue-800 dark:text-blue-200 mb-2 text-sm uppercase" data-i18n="h_example">计算实例</h3>
                        <p class="mb-2" data-i18n="desc_example_q">
                            <strong>例：</strong> 某一加热器电阻为 65Ω，供电电压为 220V，求其功率。
                        </p>
                        <p class="font-mono text-blue-700 dark:text-blue-300 bg-white dark:bg-slate-800 p-2 rounded border border-blue-100 dark:border-blue-800">
                            P = V² ÷ R<br>
                            P = (220 × 220) ÷ 65<br>
                            P ≈ 744.6 W
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="text-center text-xs text-slate-400 py-6">
        <p>&copy; <span id="year"></span> Power Calculator. Generated for Educational Purposes.</p>
    </footer>

    <script>
        const i18nData = {
            'zh-CN': {
                title: "电功率计算器", subtitle: "纯直流电阻电路欧姆定律计算",
                h_inputs: "参数输入", p_hint: "请输入任意两个值，另外两个将自动计算。",
                btn_calc: "计算", btn_clear: "清空",
                h_formula_wheel: "欧姆定律公式轮",
                guide_title: "常用公式与实例",
                h_formula: "计算公式",
                h_example: "计算实例",
                desc_example_q: "<strong>例：</strong> 某一加热器电阻为 65Ω，供电电压为 220V，求其功率。",
                f1: '<span class="font-bold">1. </span> 电压 V = R × I',
                f2: '<span class="font-bold">2. </span> 电压 V = P ÷ I',
                f3: '<span class="font-bold">3. </span> 功率 P = V × I',
                f4: '<span class="font-bold">4. </span> 电流 I = P ÷ V',
                f5: '<span class="font-bold">5. </span> 功率 P = V² ÷ R'
            },
            'en': {
                title: "Power Calculator", subtitle: "DC Circuit Ohm's Law Calculator",
                h_inputs: "Parameters", p_hint: "Enter any 2 values to calculate the others.",
                btn_calc: "Calculate", btn_clear: "Clear",
                h_formula_wheel: "Ohm's Law Wheel",
                guide_title: "Formulas & Examples",
                h_formula: "Formulas",
                h_example: "Example",
                desc_example_q: "<strong>Ex:</strong> A heater has 65Ω resistance and 220V supply. Find Power.",
                f1: '<span class="font-bold">1. </span> Voltage V = R × I',
                f2: '<span class="font-bold">2. </span> Voltage V = P ÷ I',
                f3: '<span class="font-bold">3. </span> Power P = V × I',
                f4: '<span class="font-bold">4. </span> Current I = P ÷ V',
                f5: '<span class="font-bold">5. </span> Power P = V² ÷ R'
            }
        };

        const App = {
            lang: 'zh-CN',
            inputs: { p: '', v: '', i: '', r: '' },
            
            init() {
                this.setupLang();
                this.handleTheme();
                this.updateYear();
            },

            updateYear() {
                document.getElementById('year').textContent = new Date().getFullYear();
            },

            setupLang() {
                const sel = document.getElementById('lang-selector');
                const urlParams = new URLSearchParams(window.location.search);
                this.lang = urlParams.get('lang') || 'zh-CN';
                sel.value = this.lang;
                this.updateText();
                sel.addEventListener('change', (e) => {
                    this.lang = e.target.value;
                    try {
                        const newUrl = new URL(window.location);
                        newUrl.searchParams.set('lang', this.lang);
                        window.history.pushState({}, '', newUrl);
                    } catch (e) {}
                    this.updateText();
                });
            },

            updateText() {
                const dict = i18nData[this.lang];
                document.querySelectorAll('[data-i18n]').forEach(el => {
                    const key = el.getAttribute('data-i18n');
                    if(dict[key]) el.innerHTML = dict[key];
                });
            },

            checkInput(id) {
                // Update state
                this.inputs.p = document.getElementById('inp-p').value;
                this.inputs.v = document.getElementById('inp-v').value;
                this.inputs.i = document.getElementById('inp-i').value;
                this.inputs.r = document.getElementById('inp-r').value;

                // Count filled
                let filled = 0;
                if(this.inputs.p) filled++;
                if(this.inputs.v) filled++;
                if(this.inputs.i) filled++;
                if(this.inputs.r) filled++;

                const btn = document.getElementById('btn-calc');
                
                // Update button text
                const baseTxt = this.lang === 'zh-CN' ? '计算' : 'Calculate';
                btn.innerHTML = `<span>${baseTxt}</span> (${filled}/2)`;

                if (filled >= 2) {
                    btn.disabled = false;
                    btn.classList.remove('opacity-50', 'cursor-not-allowed');
                } else {
                    btn.disabled = true;
                    btn.classList.add('opacity-50', 'cursor-not-allowed');
                }
            },

            calculate() {
                let p = parseFloat(this.inputs.p);
                let v = parseFloat(this.inputs.v);
                let i = parseFloat(this.inputs.i);
                let r = parseFloat(this.inputs.r);

                // Determine calculation path based on available inputs
                // Priority: If >2 inputs, prioritize the last edited? Or just P/V/I/R order.
                // Simple logic: find 2 valid numbers
                
                const hasP = !isNaN(p);
                const hasV = !isNaN(v);
                const hasI = !isNaN(i);
                const hasR = !isNaN(r);

                if (hasP && hasV) {
                    // Given P, V -> find I, R
                    // I = P / V
                    // R = V^2 / P
                    i = p / v;
                    r = (v * v) / p;
                } else if (hasP && hasI) {
                    // Given P, I -> find V, R
                    // V = P / I
                    // R = P / I^2
                    v = p / i;
                    r = p / (i * i);
                } else if (hasP && hasR) {
                    // Given P, R -> find V, I
                    // V = sqrt(P * R)
                    // I = sqrt(P / R)
                    v = Math.sqrt(p * r);
                    i = Math.sqrt(p / r);
                } else if (hasV && hasI) {
                    // Given V, I -> find P, R
                    // P = V * I
                    // R = V / I
                    p = v * i;
                    r = v / i;
                } else if (hasV && hasR) {
                    // Given V, R -> find I, P
                    // I = V / R
                    // P = V^2 / R
                    i = v / r;
                    p = (v * v) / r;
                } else if (hasI && hasR) {
                    // Given I, R -> find V, P
                    // V = I * R
                    // P = I^2 * R
                    v = i * r;
                    p = i * i * r;
                }

                // Update UI with calculated values and highlight
                this.updateField('inp-p', p, hasP);
                this.updateField('inp-v', v, hasV);
                this.updateField('inp-i', i, hasI);
                this.updateField('inp-r', r, hasR);
            },

            updateField(id, val, wasUserForced) {
                const el = document.getElementById(id);
                if (isNaN(val) || !isFinite(val)) {
                    // Don't clear user input if error, but clear computed
                    if (!wasUserForced) el.value = '';
                    return;
                }
                
                // Format
                const displayVal = parseFloat(val.toFixed(6)); // Clean up float precision
                el.value = displayVal;

                if (!wasUserForced) {
                    el.classList.add('result-highlight');
                    // Add slight animation
                    el.style.transform = 'scale(1.02)';
                    setTimeout(() => el.style.transform = 'scale(1)', 200);
                } else {
                    el.classList.remove('result-highlight');
                }
            },

            reset() {
                this.inputs = { p: '', v: '', i: '', r: '' };
                ['inp-p', 'inp-v', 'inp-i', 'inp-r'].forEach(id => {
                    const el = document.getElementById(id);
                    el.value = '';
                    el.classList.remove('result-highlight');
                });
                this.checkInput();
            },

            handleTheme() {
                const toggle = document.getElementById('mode-toggle');
                const html = document.documentElement;
                if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    html.classList.add('dark');
                }
                toggle.addEventListener('click', () => {
                    html.classList.toggle('dark');
                    localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
                });
            }
        };

        document.addEventListener('DOMContentLoaded', () => App.init());
    </script>
     <!--  结尾必须包含的代码 -->
    <div id="related-tools-container"></div>
    <script src="/scripts/related.js"></script>
</body>
</html>